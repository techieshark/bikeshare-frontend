!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=15)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={maxWalkDistance:.25,user:{longitude:null,latitude:null,address:null},origin:{longitude:null,latitude:null,address:null},destination:{longitude:null,latitude:null,address:null}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){R.on("load",function(){window.setInterval(function(){R.getSource("stations-source").setData(C.default.getStations()),console.log("refetching live station data")},3e4),R.addSource("stations-source",{type:"geojson",data:L}),R.addLayer({id:"stations-layer",type:"circle",source:"stations-source",paint:{"circle-radius":12,"circle-color":"#B42222","circle-opacity":0}}),R.on("mouseenter","stations-layer",function(){R.getCanvas().style.cursor="pointer"}),R.on("mouseleave","stations-layer",function(){R.getCanvas().style.cursor=""})})}function i(e){return"stations-near-"+e}function a(e,t){var r=i(t);return R.getLayer(r)?R.queryRenderedFeatures(e.point,{layers:[r]}):[]}function s(){R.on("click",function(e){var t=R.queryRenderedFeatures(e.point,{layers:["stations-layer"]}),r=a(e,"origin"),n=a(e,"destination");if(r.length||n.length||t.length){var o=void 0,i=null;if(r.length){i="origin";o=y(r,1)[0]}else if(n.length){i="destination";var s=y(n,1);o=s[0]}else{var u=y(t,1);o=u[0]}var c=(0,A.default)(o,i);new mapboxgl.Popup({offset:[0,-15]}).setLngLat(o.geometry.coordinates).setHTML(c).setLngLat(o.geometry.coordinates).addTo(R)._container.classList.add("station-popup--container")}})}function u(){R.on("load",function(){var e={type:"FeatureCollection",features:[]};R.addSource("stations-near-origin",{type:"geojson",data:e,maxzoom:22}),R.addSource("stations-near-destination",{type:"geojson",data:e,maxzoom:22})})}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;mapboxgl.accessToken=_.default.mapboxToken,R=new mapboxgl.Map({container:"map",style:_.default.mapStyle,zoom:t,center:e}),u(),o(),s()}function l(e){R.flyTo({center:[q.default[e].longitude,q.default[e].latitude],zoom:14})}function f(e){if(T[e])T[e].setLngLat([q.default[e].longitude,q.default[e].latitude]);else{var t=document.createElement("div");t.className="marker map-marker-directions is-"+e,T[e]=new mapboxgl.Marker(t).setLngLat([q.default[e].longitude,q.default[e].latitude]).addTo(R)}}function d(e){if(0===q.default.maxWalkDistance)return{type:"FeatureCollection",features:[]};var t=C.default.getStationsArray();console.log("got all stations; searching within "+q.default.maxWalkDistance,t);var r=(0,E.point)([q.default[e].longitude,q.default[e].latitude]),n=(0,E.featureCollection)([(0,x.default)(r,q.default.maxWalkDistance,{units:"miles"})]),o=(0,E.featureCollection)(t);return(0,k.default)(o,n)}function p(e,t){console.log("showing stations nearby "+e+": ",t);var r=i(e),n="origin"===e?"availableBikes":"availableDocks";console.log("adding matching nearby stations"),R.getSource(r).setData(t),R.getLayer(r)||R.addLayer({id:r,type:"circle",source:r,paint:{"circle-radius":12,"circle-color":{property:n,stops:[[0,"red"],[1,"lightseagreen"]]}}},"bikeshare-stations")}function h(e){var t=i(e);R.getLayer(t)&&R.removeLayer(t)}function m(){["origin","destination"].forEach(function(e){if(q.default[e].latitude&&q.default[e].longitude){var t=d(e);console.log("got stations near "+e,t),p(e,t)}else h(e)})}function g(){R.getLayer("route")&&R.removeLayer("route")}function v(){q.default.origin.latitude&&q.default.destination.latitude?(0,P.default)(q.default.origin,q.default.destination,function(e){var t=R.getSource("route");t?t.setData(e):t=R.addSource("route",{type:"geojson",data:e});var r=i("origin");R.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#4AB2F7","line-width":8}},r)}):g()}function b(e){v(),null===q.default[e].latitude&&T[e]?(console.log("clearing "+e+" marker (no latitude)"),T[e].remove(),T[e]=null):null!==q.default[e].latitude&&(f(e),l(e)),m()}Object.defineProperty(t,"__esModule",{value:!0});var y=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=c,t.flyTo=l,t.renderDirectionsMarker=f,t.mapUpdateNearby=m,t.mapUpdateDirectionsEndpoint=b;var w=r(31),x=n(w),E=r(36),S=r(37),k=n(S),O=r(41),C=n(O),N=r(42),A=n(N),U=r(43),P=n(U),j=r(2),_=n(j),M=r(0),q=n(M),L=_.default.stationsUrl,R=void 0,T={}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mapboxToken:"pk.eyJ1IjoidGVjaGllc2hhcmsiLCJhIjoiY2o5NmVpOTI1MDNxMjJ2cGJuZG44eTExOSJ9.K2lI3DUzNvAD3LAAtfwlBA",mapStyle:"mapbox://styles/techieshark/cj97690r00bcc2sthkqxn8f2v",stationsUrl:"https://lit-beach-21586.herokuapp.com/"}},function(e,t){function r(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var o in r)n.call(r,o)&&(e[o]=r[o])}return e}e.exports=r;var n=Object.prototype.hasOwnProperty},function(e,t,r){"use strict";e.exports={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){d.reverseGeocode({query:[t,e],limit:2}).send().then(function(e){var t=e.body;r(null,t)})}function i(e,t){d.forwardGeocode({query:e,limit:5,bbox:h,proximity:p}).send().then(function(e){var r=e.body;t(null,r)})}function a(e){p=e.slice()}function s(e){h=e.split(",").map(parseFloat)}Object.defineProperty(t,"__esModule",{value:!0}),t.reverseGeocode=o,t.geocode=i,t.setGeocderCenter=a,t.setGeocoderBounds=s;var u=r(63),c=n(u),l=r(2),f=n(l),d=(0,c.default)({accessToken:f.default.mapboxToken}),p=null,h=null},function(e,t){function r(e,t){var r=e[1]||"",o=e[3];if(!o)return r;if(t&&"function"==typeof btoa){var i=n(o);return[r].concat(o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"})).concat([i]).join("\n")}return[r].join("\n")}function n(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=r(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(n[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),t.push(a))}},t}},function(e,t,r){function n(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=h[n.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](n.parts[i]);for(;i<n.parts.length;i++)o.parts.push(l(n.parts[i],t))}else{for(var a=[],i=0;i<n.parts.length;i++)a.push(l(n.parts[i],t));h[n.id]={id:n.id,refs:1,parts:a}}}}function o(e,t){for(var r=[],n={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],s=i[1],u=i[2],c=i[3],l={css:s,media:u,sourceMap:c};n[a]?n[a].parts.push(l):r.push(n[a]={id:a,parts:[l]})}return r}function i(e,t){var r=g(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=y[y.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),y.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=g(e.insertInto+" "+e.insertAt.before);r.insertBefore(t,o)}}function a(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",c(t,e.attrs),i(e,t),t}function u(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",c(t,e.attrs),i(e,t),t}function c(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function l(e,t){var r,n,o,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var c=b++;r=v||(v=s(t)),n=f.bind(null,r,c,!1),o=f.bind(null,r,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=u(t),n=p.bind(null,r,t),o=function(){a(r),r.href&&URL.revokeObjectURL(r.href)}):(r=s(t),n=d.bind(null,r),o=function(){a(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}function f(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=x(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function d(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function p(e,t,r){var n=r.css,o=r.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(n=w(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}var h={},m=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),g=function(e){var t={};return function(r){if(void 0===t[r]){var n=e.call(this,r);if(n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[r]=n}return t[r]}}(function(e){return document.querySelector(e)}),v=null,b=0,y=[],w=r(24);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=m()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=o(e,t);return n(r,t),function(e){for(var i=[],a=0;a<r.length;a++){var s=r[a],u=h[s.id];u.refs--,i.push(u)}if(e){n(o(e,t),t)}for(var a=0;a<i.length;a++){var u=i[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete h[u.id]}}}};var x=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},function(e,t,r){"use strict";(function(t){function n(e){if("undefined"!=typeof window){if(e instanceof t.Blob||e instanceof t.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!=typeof e&&void 0===e.pipe)return"Filename or Readable stream"}function o(e,t){return u.assert(u.strictShape(e),t)}function i(e){if("boolean"==typeof e)return"date";try{var t=new Date(e);if(t.getTime&&isNaN(t.getTime()))return"date"}catch(e){return"date"}}function a(e){return u.tuple(u.number,u.number)(e)}var s=r(3),u=r(45);e.exports=s(u,{file:n,date:i,coordinates:a,assertShape:o})}).call(t,r(9))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";function n(e){return function(t){var r;r=o.prototype.isPrototypeOf(t)?t:i(t);var n=Object.create(e);return n.client=r,n}}var o=r(11),i=r(52);e.exports=n},function(e,t,r){"use strict";function n(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");o(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||a.API_ORIGIN}var o=r(12),i=r(49),a=r(4);n.prototype.createRequest=function(e){return new i(this,e)},e.exports=n},function(e,t,r){"use strict";function n(e){if(s[e])return s[e];var t=e.split("."),r=t[0],n=t[1];if(!n)throw new Error("Invalid token");var a=o(n),u={usage:r,user:a.u};return i(a,"a")&&(u.authorization=a.a),i(a,"exp")&&(u.expires=1e3*a.exp),i(a,"iat")&&(u.created=1e3*a.iat),i(a,"scopes")&&(u.scopes=a.scopes),i(a,"client")&&(u.client=a.client),i(a,"ll")&&(u.lastLogin=a.ll),i(a,"iu")&&(u.impersonator=a.iu),s[e]=u,u}function o(e){try{return JSON.parse(a.decode(e))}catch(e){throw new Error("Invalid token")}}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var a=r(47),s={};e.exports=n},function(e,t,r){"use strict";function n(e,t){var r=function(e,r){return-1!==t.indexOf(e)&&void 0!==r};return"function"==typeof t&&(r=t),Object.keys(e).filter(function(t){return r(t,e[t])}).reduce(function(t,r){return t[r]=e[r],t},{})}e.exports=n},function(e,t,r){"use strict";function n(e){return o(e,function(e,t){return"boolean"==typeof t?JSON.stringify(t):t})}var o=r(59);e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e)}function i(e,t){o(function(){(0,l.default)(e,t),(0,u.default)()})}var a=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();r(16),r(25),r(27);var s=r(28),u=n(s),c=r(1),l=n(c),f=r(5),d=r(0),p=n(d);window.appState=p.default,function(){var e=this;console.log("initializing app");var t=37.611,r=-121.753,n=8;(0,f.setGeocderCenter)([r,t]),(0,f.setGeocoderBounds)("-123.5337,36.8931,-121.2082,38.8643"),Number.prototype.between=function(t,r){return e>t&&e<r};fetch("https://ipinfo.io/json").then(function(e){return e.json()}).then(function(e){var o=e.loc.split(",").map(parseFloat),s=a(o,2),u=s[0],c=s[1];c.between(-124,-121)&&u.between(36.5,38.4)&&(t=u,r=c,n=11),i([r,t],n)}).catch(function(e){if(console.log("Error fetching location data: "+e),"Error: Coordinates must contain numbers"===e)throw e;i([r,t])})}()},function(e,t,r){var n=r(17);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0};o.transform=void 0;r(7)(n,o);n.locals&&(e.exports=n.locals)},function(e,t,r){t=e.exports=r(6)(void 0),t.push([e.i,"canvas.mapboxgl-canvas{background:#d3d3d3}.marker{background-image:url("+r(18)+");background-size:cover;width:50px;height:50px;border-radius:50%;cursor:pointer}.map-marker-directions{background-repeat:no-repeat;background-position:50%;background-size:12px;width:20px}.map-marker-directions.is-origin{background-image:url("+r(19)+")}.map-marker-directions.is-destination{background-image:url("+r(20)+")}.directions{position:absolute;margin:1em;background:hsla(0,0%,100%,.85)}.directions--content{padding:1em}.directions--toggle-button{background:#4ab2f7;background-repeat:no-repeat;background-position:50%;background-size:60px;cursor:pointer}.directions--toggle-button.shown{background-image:url("+r(21)+")}.directions--toggle-button.hidden{background-image:url("+r(22)+")}.directions--toggle-button{height:2em}#directions--distance-range{width:100%}.directions--distance-picker{margin-bottom:2em;padding:.5em}#directions--distance-range .noUi-connect{background-color:#dee0e0;box-shadow:inset 0 0 1px rgba(51,51,51,.2)}.noUi-pips.noUi-pips-horizontal{height:50px}.directions--locate-origin.column{padding-left:0}.directions--locate-origin button{background-image:url("+r(23)+");background-repeat:no-repeat;background-position:50%;background-size:20px;width:38px}@media screen and (max-width:780px){.directions{margin:0}}.autocomplete{background:#fff;z-index:100;border:1px solid #e4e2e2}.autocomplete div{border-top:1px solid #adadad;padding:1em;cursor:pointer}.autocomplete div:focus,.autocomplete div:hover{background:#cacee3}.station-popup--container .mapboxgl-popup-content{padding-bottom:6px}.station-popup{text-align:center}.station-popup h3{margin-bottom:1em}div.station-popup--directions a{text-decoration:none}.station-popup--coordinates{border-top:1px solid #d3d3d3;text-align:right;padding-top:.5em;margin-top:.5em;font-size:smaller;color:#d3d3d3}.station-popup--bikes-number,.station-popup--docks-number{font-size:large}div.station-popup--stats{margin-bottom:0!important;font-weight:700}.station-popup--alert{font-weight:700;font-size:large;margin-bottom:1em}",""])},function(e,t,r){e.exports=r.p+"d049203bc74696d587a3cdb1d0a661d2.png"},function(e,t,r){e.exports=r.p+"2f67bd14f9872daf7713a52ce2e45f9a.svg"},function(e,t,r){e.exports=r.p+"99da9a1118b8e43225d3da6fee645ad0.svg"},function(e,t,r){e.exports=r.p+"9f8d8013b95b47ff16a0bef615829383.svg"},function(e,t,r){e.exports=r.p+"1f7c29950ae1d733f2cfd41702f409b9.svg"},function(e,t,r){e.exports=r.p+"99c6879b01fe7fb27fb26cf2afc7360d.svg"},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o))return e;var i;return i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")"})}},function(e,t,r){var n=r(26);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0};o.transform=void 0;r(7)(n,o);n.locals&&(e.exports=n.locals)},function(e,t,r){t=e.exports=r(6)(void 0),t.push([e.i,'/*! nouislider - 10.0.0 - 2017-05-28 14:52:48 */.noUi-target,.noUi-target *{-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;-ms-touch-action:none;touch-action:none;-ms-user-select:none;-moz-user-select:none;user-select:none;-moz-box-sizing:border-box;box-sizing:border-box}.noUi-target{position:relative;direction:ltr}.noUi-base{width:100%;height:100%;position:relative;z-index:1}.noUi-connect{position:absolute;right:0;top:0;left:0;bottom:0}.noUi-origin{position:absolute;height:0;width:0}.noUi-handle{position:relative;z-index:1}.noUi-state-tap .noUi-connect,.noUi-state-tap .noUi-origin{-webkit-transition:top .3s,right .3s,bottom .3s,left .3s;transition:top .3s,right .3s,bottom .3s,left .3s}.noUi-state-drag *{cursor:inherit!important}.noUi-base,.noUi-handle{-webkit-transform:translateZ(0);transform:translateZ(0)}.noUi-horizontal{height:18px}.noUi-horizontal .noUi-handle{width:34px;height:28px;left:-17px;top:-6px}.noUi-vertical{width:18px}.noUi-vertical .noUi-handle{width:28px;height:34px;left:-6px;top:-17px}.noUi-target{background:#fafafa;border-radius:4px;border:1px solid #d3d3d3;box-shadow:inset 0 1px 1px #f0f0f0,0 3px 6px -5px #bbb}.noUi-connect{background:#3fb8af;border-radius:4px;box-shadow:inset 0 0 3px rgba(51,51,51,.45);-webkit-transition:background .45s;transition:background .45s}.noUi-draggable{cursor:ew-resize}.noUi-vertical .noUi-draggable{cursor:ns-resize}.noUi-handle{border:1px solid #d9d9d9;border-radius:3px;background:#fff;cursor:default;box-shadow:inset 0 0 1px #fff,inset 0 1px 7px #ebebeb,0 3px 6px -3px #bbb}.noUi-active{box-shadow:inset 0 0 1px #fff,inset 0 1px 7px #ddd,0 3px 6px -3px #bbb}.noUi-handle:after,.noUi-handle:before{content:"";display:block;position:absolute;height:14px;width:1px;background:#e8e7e6;left:14px;top:6px}.noUi-handle:after{left:17px}.noUi-vertical .noUi-handle:after,.noUi-vertical .noUi-handle:before{width:14px;height:1px;left:6px;top:14px}.noUi-vertical .noUi-handle:after{top:17px}[disabled] .noUi-connect{background:#b8b8b8}[disabled].noUi-handle,[disabled] .noUi-handle,[disabled].noUi-target{cursor:not-allowed}.noUi-pips,.noUi-pips *{-moz-box-sizing:border-box;box-sizing:border-box}.noUi-pips{position:absolute;color:#999}.noUi-value{position:absolute;white-space:nowrap;text-align:center}.noUi-value-sub{color:#ccc;font-size:10px}.noUi-marker{position:absolute;background:#ccc}.noUi-marker-large,.noUi-marker-sub{background:#aaa}.noUi-pips-horizontal{padding:10px 0;height:80px;top:100%;left:0;width:100%}.noUi-value-horizontal{-webkit-transform:translate3d(-50%,50%,0);transform:translate3d(-50%,50%,0)}.noUi-marker-horizontal.noUi-marker{margin-left:-1px;width:2px;height:5px}.noUi-marker-horizontal.noUi-marker-sub{height:10px}.noUi-marker-horizontal.noUi-marker-large{height:15px}.noUi-pips-vertical{padding:0 10px;height:100%;top:0;left:100%}.noUi-value-vertical{-webkit-transform:translate3d(0,50%,0);transform:translate3d(0,50%,0);padding-left:25px}.noUi-marker-vertical.noUi-marker{width:5px;height:2px;margin-top:-1px}.noUi-marker-vertical.noUi-marker-sub{width:10px}.noUi-marker-vertical.noUi-marker-large{width:15px}.noUi-tooltip{display:block;position:absolute;border:1px solid #d9d9d9;border-radius:3px;background:#fff;color:#000;padding:5px;text-align:center;white-space:nowrap}.noUi-horizontal .noUi-tooltip{-webkit-transform:translate(-50%);transform:translate(-50%);left:50%;bottom:120%}.noUi-vertical .noUi-tooltip{-webkit-transform:translateY(-50%);transform:translateY(-50%);top:50%;right:120%}',""])},function(e,t,r){e.exports=r.p+"favicon.ico"},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=document.getElementById("directions-toggle"),t=!0;e.onclick=function(){var r=document.getElementsByClassName("directions--content")[0];t?(e.style.width=r.clientWidth+"px",r.style.display="none"):(e.style.width="100%",r.style.display="block"),t=!t,e.classList.toggle("shown"),e.classList.toggle("hidden")}}function i(){(0,s.default)(),(0,c.default)(),(0,f.default)("originInput","origin"),(0,f.default)("destinationInput","destination"),o()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(29),s=n(a),u=r(61),c=n(u),l=r(64),f=n(l)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e={min:[0],"100%":[2,2],max:[2]},t=document.getElementById("directions--distance-range"),r={to:function(e){return 1===e?"":Number.isInteger(e)?e?e+" mi":e:e%.5==0?e.toFixed(2):""}};a.default.create(t,{range:e,start:u.default.maxWalkDistance,step:.25,connect:[!0,!1],pips:{mode:"count",values:3,density:12.5,format:r}}),t.noUiSlider.on("update",function(e,t){var r=e[t];document.getElementById("directions--distance-value").innerText=Number(r).toFixed(2)+" mi.",u.default.maxWalkDistance=parseFloat(r),(0,c.mapUpdateNearby)()})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=r(30),a=n(i),s=r(0),u=n(s),c=r(1)},function(e,t,r){"use strict";var n,o,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*! nouislider - 10.0.0 - 2017-05-28 14:52:48 */
!function(r){o=[],n=r,void 0!==(i="function"==typeof n?n.apply(t,o):n)&&(e.exports=i)}(function(){function e(e){return"object"===(void 0===e?"undefined":a(e))&&"function"==typeof e.to&&"function"==typeof e.from}function t(e){e.parentElement.removeChild(e)}function r(e){e.preventDefault()}function n(e){return e.filter(function(e){return!this[e]&&(this[e]=!0)},{})}function o(e,t){return Math.round(e/t)*t}function i(e,t){var r=e.getBoundingClientRect(),n=e.ownerDocument,o=n.documentElement,i=m(n);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(i.x=0),t?r.top+i.y-o.clientTop:r.left+i.x-o.clientLeft}function s(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function u(e,t,r){r>0&&(d(e,t),setTimeout(function(){p(e,t)},r))}function c(e){return Math.max(Math.min(e,100),0)}function l(e){return Array.isArray(e)?e:[e]}function f(e){e=String(e);var t=e.split(".");return t.length>1?t[1].length:0}function d(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function p(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function h(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function m(e){var t=void 0!==window.pageXOffset,r="CSS1Compat"===(e.compatMode||"");return{x:t?window.pageXOffset:r?e.documentElement.scrollLeft:e.body.scrollLeft,y:t?window.pageYOffset:r?e.documentElement.scrollTop:e.body.scrollTop}}function g(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function v(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}function b(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function y(e,t){return 100/(t-e)}function w(e,t){return 100*t/(e[1]-e[0])}function x(e,t){return w(e,e[0]<0?t+Math.abs(e[0]):t-e[0])}function E(e,t){return t*(e[1]-e[0])/100+e[0]}function S(e,t){for(var r=1;e>=t[r];)r+=1;return r}function k(e,t,r){if(r>=e.slice(-1)[0])return 100;var n,o,i,a,s=S(r,e);return n=e[s-1],o=e[s],i=t[s-1],a=t[s],i+x([n,o],r)/y(i,a)}function O(e,t,r){if(r>=100)return e.slice(-1)[0];var n,o,i,a,s=S(r,t);return n=e[s-1],o=e[s],i=t[s-1],a=t[s],E([n,o],(r-i)*y(i,a))}function C(e,t,r,n){if(100===n)return n;var i,a,s=S(n,e);return r?(i=e[s-1],a=e[s],n-i>(a-i)/2?a:i):t[s-1]?e[s-1]+o(n-e[s-1],t[s-1]):n}function N(e,t,r){var n;if("number"==typeof t&&(t=[t]),"[object Array]"!==Object.prototype.toString.call(t))throw new Error("noUiSlider ("+K+"): 'range' contains invalid value.");if(n="min"===e?0:"max"===e?100:parseFloat(e),!s(n)||!s(t[0]))throw new Error("noUiSlider ("+K+"): 'range' value isn't numeric.");r.xPct.push(n),r.xVal.push(t[0]),n?r.xSteps.push(!isNaN(t[1])&&t[1]):isNaN(t[1])||(r.xSteps[0]=t[1]),r.xHighestCompleteStep.push(0)}function A(e,t,r){if(!t)return!0;r.xSteps[e]=w([r.xVal[e],r.xVal[e+1]],t)/y(r.xPct[e],r.xPct[e+1]);var n=(r.xVal[e+1]-r.xVal[e])/r.xNumSteps[e],o=Math.ceil(Number(n.toFixed(3))-1),i=r.xVal[e]+r.xNumSteps[e]*o;r.xHighestCompleteStep[e]=i}function U(e,t,r){this.xPct=[],this.xVal=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=t;var n,o=[];for(n in e)e.hasOwnProperty(n)&&o.push([e[n],n]);for(o.length&&"object"===a(o[0][0])?o.sort(function(e,t){return e[0][0]-t[0][0]}):o.sort(function(e,t){return e[0]-t[0]}),n=0;n<o.length;n++)N(o[n][1],o[n][0],this);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)A(n,this.xNumSteps[n],this)}function P(t){if(e(t))return!0;throw new Error("noUiSlider ("+K+"): 'format' requires 'to' and 'from' methods.")}function j(e,t){if(!s(t))throw new Error("noUiSlider ("+K+"): 'step' is not numeric.");e.singleStep=t}function _(e,t){if("object"!==(void 0===t?"undefined":a(t))||Array.isArray(t))throw new Error("noUiSlider ("+K+"): 'range' is not an object.");if(void 0===t.min||void 0===t.max)throw new Error("noUiSlider ("+K+"): Missing 'min' or 'max' in 'range'.");if(t.min===t.max)throw new Error("noUiSlider ("+K+"): 'range' 'min' and 'max' cannot be equal.");e.spectrum=new U(t,e.snap,e.singleStep)}function M(e,t){if(t=l(t),!Array.isArray(t)||!t.length)throw new Error("noUiSlider ("+K+"): 'start' option is incorrect.");e.handles=t.length,e.start=t}function q(e,t){if(e.snap=t,"boolean"!=typeof t)throw new Error("noUiSlider ("+K+"): 'snap' option must be a boolean.")}function L(e,t){if(e.animate=t,"boolean"!=typeof t)throw new Error("noUiSlider ("+K+"): 'animate' option must be a boolean.")}function R(e,t){if(e.animationDuration=t,"number"!=typeof t)throw new Error("noUiSlider ("+K+"): 'animationDuration' option must be a number.")}function T(e,t){var r,n=[!1];if("lower"===t?t=[!0,!1]:"upper"===t&&(t=[!1,!0]),!0===t||!1===t){for(r=1;r<e.handles;r++)n.push(t);n.push(!1)}else{if(!Array.isArray(t)||!t.length||t.length!==e.handles+1)throw new Error("noUiSlider ("+K+"): 'connect' option doesn't match handle count.");n=t}e.connect=n}function F(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider ("+K+"): 'orientation' option is invalid.")}}function I(e,t){if(!s(t))throw new Error("noUiSlider ("+K+"): 'margin' option must be numeric.");if(0!==t&&(e.margin=e.spectrum.getMargin(t),!e.margin))throw new Error("noUiSlider ("+K+"): 'margin' option is only supported on linear sliders.")}function z(e,t){if(!s(t))throw new Error("noUiSlider ("+K+"): 'limit' option must be numeric.");if(e.limit=e.spectrum.getMargin(t),!e.limit||e.handles<2)throw new Error("noUiSlider ("+K+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function D(e,t){if(!s(t))throw new Error("noUiSlider ("+K+"): 'padding' option must be numeric.");if(0!==t){if(e.padding=e.spectrum.getMargin(t),!e.padding)throw new Error("noUiSlider ("+K+"): 'padding' option is only supported on linear sliders.");if(e.padding<0)throw new Error("noUiSlider ("+K+"): 'padding' option must be a positive number.");if(e.padding>=50)throw new Error("noUiSlider ("+K+"): 'padding' option must be less than half the range.")}}function B(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider ("+K+"): 'direction' option was not recognized.")}}function V(e,t){if("string"!=typeof t)throw new Error("noUiSlider ("+K+"): 'behaviour' must be a string containing options.");var r=t.indexOf("tap")>=0,n=t.indexOf("drag")>=0,o=t.indexOf("fixed")>=0,i=t.indexOf("snap")>=0,a=t.indexOf("hover")>=0;if(o){if(2!==e.handles)throw new Error("noUiSlider ("+K+"): 'fixed' behaviour must be used with 2 handles");I(e,e.start[1]-e.start[0])}e.events={tap:r||i,drag:n,fixed:o,snap:i,hover:a}}function G(e,t){if(!1!==t)if(!0===t){e.tooltips=[];for(var r=0;r<e.handles;r++)e.tooltips.push(!0)}else{if(e.tooltips=l(t),e.tooltips.length!==e.handles)throw new Error("noUiSlider ("+K+"): must pass a formatter for all handles.");e.tooltips.forEach(function(e){if("boolean"!=typeof e&&("object"!==(void 0===e?"undefined":a(e))||"function"!=typeof e.to))throw new Error("noUiSlider ("+K+"): 'tooltips' must be passed a formatter or 'false'.")})}}function H(e,t){e.ariaFormat=t,P(t)}function J(e,t){e.format=t,P(t)}function W(e,t){if(void 0!==t&&"string"!=typeof t&&!1!==t)throw new Error("noUiSlider ("+K+"): 'cssPrefix' must be a string or `false`.");e.cssPrefix=t}function Q(e,t){if(void 0!==t&&"object"!==(void 0===t?"undefined":a(t)))throw new Error("noUiSlider ("+K+"): 'cssClasses' must be an object.");if("string"==typeof e.cssPrefix){e.cssClasses={};for(var r in t)t.hasOwnProperty(r)&&(e.cssClasses[r]=e.cssPrefix+t[r])}else e.cssClasses=t}function X(e,t){if(!0!==t&&!1!==t)throw new Error("noUiSlider ("+K+"): 'useRequestAnimationFrame' option should be true (default) or false.");e.useRequestAnimationFrame=t}function Y(e){var t={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:ee,format:ee},r={step:{r:!1,t:j},start:{r:!0,t:M},connect:{r:!0,t:T},direction:{r:!0,t:B},snap:{r:!1,t:q},animate:{r:!1,t:L},animationDuration:{r:!1,t:R},range:{r:!0,t:_},orientation:{r:!1,t:F},margin:{r:!1,t:I},limit:{r:!1,t:z},padding:{r:!1,t:D},behaviour:{r:!0,t:V},ariaFormat:{r:!1,t:H},format:{r:!1,t:J},tooltips:{r:!1,t:G},cssPrefix:{r:!1,t:W},cssClasses:{r:!1,t:Q},useRequestAnimationFrame:{r:!1,t:X}},n={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},useRequestAnimationFrame:!0};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(r).forEach(function(o){if(void 0===e[o]&&void 0===n[o]){if(r[o].r)throw new Error("noUiSlider ("+K+"): '"+o+"' is required.");return!0}r[o].t(t,void 0===e[o]?n[o]:e[o])}),t.pips=e.pips;var o=[["left","top"],["right","bottom"]];return t.style=o[t.dir][t.ort],t.styleOposite=o[t.dir?0:1][t.ort],t}function $(e,o,a){function s(e,t){var r=be.createElement("div");return t&&d(r,t),e.appendChild(r),r}function f(e,t){var r=s(e,o.cssClasses.origin),n=s(r,o.cssClasses.handle);return n.setAttribute("data-handle",t),n.setAttribute("tabindex","0"),n.setAttribute("role","slider"),n.setAttribute("aria-orientation",o.ort?"vertical":"horizontal"),0===t?d(n,o.cssClasses.handleLower):t===o.handles-1&&d(n,o.cssClasses.handleUpper),r}function y(e,t){return!!t&&s(e,o.cssClasses.connect)}function w(e,t){return!!o.tooltips[t]&&s(e.firstChild,o.cssClasses.tooltip)}function x(e,t,r){if("range"===e||"steps"===e)return he.xVal;if("count"===e){if(!t)throw new Error("noUiSlider ("+K+"): 'values' required for mode 'count'.");var n,o=100/(t-1),i=0;for(t=[];(n=i++*o)<=100;)t.push(n);e="positions"}return"positions"===e?t.map(function(e){return he.fromStepping(r?he.getStep(e):e)}):"values"===e?r?t.map(function(e){return he.fromStepping(he.getStep(he.toStepping(e)))}):t:void 0}function E(e,t,r){function o(e,t){return(e+t).toFixed(7)/1}var i={},a=he.xVal[0],s=he.xVal[he.xVal.length-1],u=!1,c=!1,l=0;return r=n(r.slice().sort(function(e,t){return e-t})),r[0]!==a&&(r.unshift(a),u=!0),r[r.length-1]!==s&&(r.push(s),c=!0),r.forEach(function(n,a){var s,f,d,p,h,m,g,v,b,y,w=n,x=r[a+1];if("steps"===t&&(s=he.xNumSteps[a]),s||(s=x-w),!1!==w&&void 0!==x)for(s=Math.max(s,1e-7),f=w;f<=x;f=o(f,s)){for(p=he.toStepping(f),h=p-l,v=h/e,b=Math.round(v),y=h/b,d=1;d<=b;d+=1)m=l+d*y,i[m.toFixed(5)]=["x",0];g=r.indexOf(f)>-1?1:"steps"===t?2:0,!a&&u&&(g=0),f===x&&c||(i[p.toFixed(5)]=[f,g]),l=p}}),i}function S(e,t,r){function n(e,t){var r=t===o.cssClasses.value,n=r?l:f,i=r?u:c;return t+" "+n[o.ort]+" "+i[e]}function i(e,i){i[1]=i[1]&&t?t(i[0],i[1]):i[1];var u=s(a,!1);u.className=n(i[1],o.cssClasses.marker),u.style[o.style]=e+"%",i[1]&&(u=s(a,!1),u.className=n(i[1],o.cssClasses.value),u.style[o.style]=e+"%",u.innerText=r.to(i[0]))}var a=be.createElement("div"),u=[o.cssClasses.valueNormal,o.cssClasses.valueLarge,o.cssClasses.valueSub],c=[o.cssClasses.markerNormal,o.cssClasses.markerLarge,o.cssClasses.markerSub],l=[o.cssClasses.valueHorizontal,o.cssClasses.valueVertical],f=[o.cssClasses.markerHorizontal,o.cssClasses.markerVertical];return d(a,o.cssClasses.pips),d(a,0===o.ort?o.cssClasses.pipsHorizontal:o.cssClasses.pipsVertical),Object.keys(e).forEach(function(t){i(t,e[t])}),a}function k(){ae&&(t(ae),ae=null)}function O(e){k();var t=e.mode,r=e.density||1,n=e.filter||!1,o=e.values||!1,i=e.stepped||!1,a=x(t,o,i),s=E(r,t,a),u=e.format||{to:Math.round};return ae=le.appendChild(S(s,n,u))}function C(){var e=re.getBoundingClientRect(),t="offset"+["Width","Height"][o.ort];return 0===o.ort?e.width||re[t]:e.height||re[t]}function N(e,t,r,n){var i=function(t){return!le.hasAttribute("disabled")&&(!h(le,o.cssClasses.tap)&&(!!(t=A(t,n.pageOffset))&&(!(e===se.start&&void 0!==t.buttons&&t.buttons>1)&&((!n.hover||!t.buttons)&&(ce||t.preventDefault(),t.calcPoint=t.points[o.ort],void r(t,n))))))},a=[];return e.split(" ").forEach(function(e){t.addEventListener(e,i,!!ce&&{passive:!0}),a.push([e,i])}),a}function A(e,t){var r,n,o=0===e.type.indexOf("touch"),i=0===e.type.indexOf("mouse"),a=0===e.type.indexOf("pointer");if(0===e.type.indexOf("MSPointer")&&(a=!0),o){if(e.touches.length>1)return!1;r=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY}return t=t||m(be),(i||a)&&(r=e.clientX+t.x,n=e.clientY+t.y),e.pageOffset=t,e.points=[r,n],e.cursor=i||a,e}function U(e){var t=e-i(re,o.ort),r=100*t/C();return o.dir?100-r:r}function P(e){var t=100,r=!1;return ne.forEach(function(n,o){if(!n.hasAttribute("disabled")){var i=Math.abs(fe[o]-e);i<t&&(r=o,t=i)}}),r}function j(e,t,r,n){var o=r.slice(),i=[!e,e],a=[e,!e];n=n.slice(),e&&n.reverse(),n.length>1?n.forEach(function(e,r){var n=I(o,e,o[e]+t,i[r],a[r],!1);!1===n?t=0:(t=n-o[e],o[e]=n)}):i=a=[!0];var s=!1;n.forEach(function(e,n){s=V(e,r[e]+t,i[n],a[n])||s}),s&&n.forEach(function(e){_("update",e),_("slide",e)})}function _(e,t,r){Object.keys(ge).forEach(function(n){var i=n.split(".")[0];e===i&&ge[n].forEach(function(e){e.call(ie,me.map(o.format.to),t,me.slice(),r||!1,fe.slice())})})}function M(e,t){"mouseout"===e.type&&"HTML"===e.target.nodeName&&null===e.relatedTarget&&L(e,t)}function q(e,t){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===e.buttons&&0!==t.buttonsProperty)return L(e,t);var r=(o.dir?-1:1)*(e.calcPoint-t.startCalcPoint);j(r>0,100*r/t.baseSize,t.locations,t.handleNumbers)}function L(e,t){pe&&(p(pe,o.cssClasses.active),pe=!1),e.cursor&&(we.style.cursor="",we.removeEventListener("selectstart",r)),ve.forEach(function(e){ye.removeEventListener(e[0],e[1])}),p(le,o.cssClasses.drag),B(),t.handleNumbers.forEach(function(e){_("change",e),_("set",e),_("end",e)})}function R(e,t){if(1===t.handleNumbers.length){var n=ne[t.handleNumbers[0]];if(n.hasAttribute("disabled"))return!1;pe=n.children[0],d(pe,o.cssClasses.active)}e.stopPropagation();var i=N(se.move,ye,q,{startCalcPoint:e.calcPoint,baseSize:C(),pageOffset:e.pageOffset,handleNumbers:t.handleNumbers,buttonsProperty:e.buttons,locations:fe.slice()}),a=N(se.end,ye,L,{handleNumbers:t.handleNumbers}),s=N("mouseout",ye,M,{handleNumbers:t.handleNumbers});ve=i.concat(a,s),e.cursor&&(we.style.cursor=getComputedStyle(e.target).cursor,ne.length>1&&d(le,o.cssClasses.drag),we.addEventListener("selectstart",r,!1)),t.handleNumbers.forEach(function(e){_("start",e)})}function T(e){e.stopPropagation();var t=U(e.calcPoint),r=P(t);if(!1===r)return!1;o.events.snap||u(le,o.cssClasses.tap,o.animationDuration),V(r,t,!0,!0),B(),_("slide",r,!0),_("update",r,!0),_("change",r,!0),_("set",r,!0),o.events.snap&&R(e,{handleNumbers:[r]})}function F(e){var t=U(e.calcPoint),r=he.getStep(t),n=he.fromStepping(r);Object.keys(ge).forEach(function(e){"hover"===e.split(".")[0]&&ge[e].forEach(function(e){e.call(ie,n)})})}function I(e,t,r,n,i,a){return ne.length>1&&(n&&t>0&&(r=Math.max(r,e[t-1]+o.margin)),i&&t<ne.length-1&&(r=Math.min(r,e[t+1]-o.margin))),ne.length>1&&o.limit&&(n&&t>0&&(r=Math.min(r,e[t-1]+o.limit)),i&&t<ne.length-1&&(r=Math.max(r,e[t+1]-o.limit))),o.padding&&(0===t&&(r=Math.max(r,o.padding)),t===ne.length-1&&(r=Math.min(r,100-o.padding))),r=he.getStep(r),!((r=c(r))===e[t]&&!a)&&r}function z(e){return e+"%"}function D(e,t){fe[e]=t,me[e]=he.fromStepping(t);var r=function(){ne[e].style[o.style]=z(t),G(e),G(e+1)};window.requestAnimationFrame&&o.useRequestAnimationFrame?window.requestAnimationFrame(r):r()}function B(){de.forEach(function(e){var t=fe[e]>50?-1:1,r=3+(ne.length+t*e);ne[e].childNodes[0].style.zIndex=r})}function V(e,t,r,n){return!1!==(t=I(fe,e,t,r,n,!1))&&(D(e,t),!0)}function G(e){if(oe[e]){var t=0,r=100;0!==e&&(t=fe[e-1]),e!==oe.length-1&&(r=fe[e]),oe[e].style[o.style]=z(t),oe[e].style[o.styleOposite]=z(100-r)}}function H(e,t){null!==e&&!1!==e&&("number"==typeof e&&(e=String(e)),!1===(e=o.format.from(e))||isNaN(e)||V(t,he.toStepping(e),!1,!1))}function J(e,t){var r=l(e),n=void 0===fe[0];t=void 0===t||!!t,r.forEach(H),o.animate&&!n&&u(le,o.cssClasses.tap,o.animationDuration),de.forEach(function(e){V(e,fe[e],!0,!1)}),B(),de.forEach(function(e){_("update",e),null!==r[e]&&t&&_("set",e)})}function W(e){J(o.start,e)}function Q(){var e=me.map(o.format.to);return 1===e.length?e[0]:e}function X(){for(var e in o.cssClasses)o.cssClasses.hasOwnProperty(e)&&p(le,o.cssClasses[e]);for(;le.firstChild;)le.removeChild(le.firstChild);delete le.noUiSlider}function $(){return fe.map(function(e,t){var r=he.getNearbySteps(e),n=me[t],o=r.thisStep.step,i=null;!1!==o&&n+o>r.stepAfter.startValue&&(o=r.stepAfter.startValue-n),i=n>r.thisStep.startValue?r.thisStep.step:!1!==r.stepBefore.step&&n-r.stepBefore.highestStep,100===e?o=null:0===e&&(i=null);var a=he.countStepDecimals();return null!==o&&!1!==o&&(o=Number(o.toFixed(a))),null!==i&&!1!==i&&(i=Number(i.toFixed(a))),[i,o]})}function Z(e,t){ge[e]=ge[e]||[],ge[e].push(t),"update"===e.split(".")[0]&&ne.forEach(function(e,t){_("update",t)})}function ee(e){var t=e&&e.split(".")[0],r=t&&e.substring(t.length);Object.keys(ge).forEach(function(e){var n=e.split(".")[0],o=e.substring(n.length);t&&t!==n||r&&r!==o||delete ge[e]})}function te(e,t){var r=Q(),n=["margin","limit","padding","range","animate","snap","step","format"];n.forEach(function(t){void 0!==e[t]&&(a[t]=e[t])});var i=Y(a);n.forEach(function(t){void 0!==e[t]&&(o[t]=i[t])}),he=i.spectrum,o.margin=i.margin,o.limit=i.limit,o.padding=i.padding,o.pips&&O(o.pips),fe=[],J(e.start||r,t)}var re,ne,oe,ie,ae,se=g(),ue=b(),ce=ue&&v(),le=e,fe=[],de=[],pe=!1,he=o.spectrum,me=[],ge={},ve=null,be=e.ownerDocument,ye=be.documentElement,we=be.body;if(le.noUiSlider)throw new Error("noUiSlider ("+K+"): Slider was already initialized.");return function(e){d(e,o.cssClasses.target),0===o.dir?d(e,o.cssClasses.ltr):d(e,o.cssClasses.rtl),0===o.ort?d(e,o.cssClasses.horizontal):d(e,o.cssClasses.vertical),re=s(e,o.cssClasses.base)}(le),function(e,t){ne=[],oe=[],oe.push(y(t,e[0]));for(var r=0;r<o.handles;r++)ne.push(f(t,r)),de[r]=r,oe.push(y(t,e[r+1]))}(o.connect,re),ie={destroy:X,steps:$,on:Z,off:ee,get:Q,set:J,reset:W,__moveHandles:function(e,t,r){j(e,t,fe,r)},options:a,updateOptions:te,target:le,removePips:k,pips:O},function(e){e.fixed||ne.forEach(function(e,t){N(se.start,e.children[0],R,{handleNumbers:[t]})}),e.tap&&N(se.start,re,T,{}),e.hover&&N(se.move,re,F,{hover:!0}),e.drag&&oe.forEach(function(t,r){if(!1!==t&&0!==r&&r!==oe.length-1){var n=ne[r-1],i=ne[r],a=[t];d(t,o.cssClasses.draggable),e.fixed&&(a.push(n.children[0]),a.push(i.children[0])),a.forEach(function(e){N(se.start,e,R,{handles:[n,i],handleNumbers:[r-1,r]})})}})}(o.events),J(o.start),o.pips&&O(o.pips),o.tooltips&&function(){var e=ne.map(w);Z("update",function(t,r,n){if(e[r]){var i=t[r];!0!==o.tooltips[r]&&(i=o.tooltips[r].to(n[r])),e[r].innerHTML=i}})}(),function(){Z("update",function(e,t,r,n,i){de.forEach(function(e){var t=ne[e],n=I(fe,e,0,!0,!0,!0),a=I(fe,e,100,!0,!0,!0),s=i[e],u=o.ariaFormat.to(r[e]);t.children[0].setAttribute("aria-valuemin",n.toFixed(1)),t.children[0].setAttribute("aria-valuemax",a.toFixed(1)),t.children[0].setAttribute("aria-valuenow",s.toFixed(1)),t.children[0].setAttribute("aria-valuetext",u)})})}(),ie}function Z(e,t){if(!e||!e.nodeName)throw new Error("noUiSlider ("+K+"): create requires a single element, got: "+e);var r=Y(t,e),n=$(e,r,t);return e.noUiSlider=n,n}var K="10.0.0";U.prototype.getMargin=function(e){var t=this.xNumSteps[0];if(t&&e/t%1!=0)throw new Error("noUiSlider ("+K+"): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&w(this.xVal,e)},U.prototype.toStepping=function(e){return e=k(this.xVal,this.xPct,e)},U.prototype.fromStepping=function(e){return O(this.xVal,this.xPct,e)},U.prototype.getStep=function(e){return e=C(this.xPct,this.xSteps,this.snap,e)},U.prototype.getNearbySteps=function(e){var t=S(e,this.xPct);return{stepBefore:{startValue:this.xVal[t-2],step:this.xNumSteps[t-2],highestStep:this.xHighestCompleteStep[t-2]},thisStep:{startValue:this.xVal[t-1],step:this.xNumSteps[t-1],highestStep:this.xHighestCompleteStep[t-1]},stepAfter:{startValue:this.xVal[t-0],step:this.xNumSteps[t-0],highestStep:this.xHighestCompleteStep[t-0]}}},U.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(f);return Math.max.apply(null,e)},U.prototype.convert=function(e){return this.getStep(this.toStepping(e))};var ee={to:function(e){return void 0!==e&&e.toFixed(2)},from:Number};return{version:K,create:Z}})},function(e,t,r){"use strict";function n(e,t,r){r=r||{};var n=r.steps||64,a=r.units,s=r.properties;if(!e)throw new Error("center is required");if(!t)throw new Error("radius is required");if("object"!=typeof r)throw new Error("options must be an object");if("number"!=typeof n)throw new Error("steps must be a number");n=n||64,s=s||e.properties||{};for(var u=[],c=0;c<n;c++)u.push(Object(o.a)(e,t,360*c/n,a).geometry.coordinates);return u.push(u[0]),Object(i.a)([u],s)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(32),i=r(35);t.default=n},function(e,t,r){"use strict";function n(e,t,r,n){var a="object"==typeof n?n.units:n,s=Math.PI/180,u=180/Math.PI,c=Object(o.a)(e),l=s*c[0],f=s*c[1],d=s*r,p=Object(i.a)(t,a),h=Math.asin(Math.sin(f)*Math.cos(p)+Math.cos(f)*Math.sin(p)*Math.cos(d)),m=l+Math.atan2(Math.sin(d)*Math.sin(p)*Math.cos(f),Math.cos(p)-Math.sin(f)*Math.sin(h));return Object(i.b)([u*m,u*h])}var o=r(33),i=r(34);t.a=n},function(e,t,r){"use strict";function n(e){if(!e)throw new Error("obj is required");var t=o(e);if(t.length>1&&"number"==typeof t[0]&&"number"==typeof t[1])return t;throw new Error("Coordinate is not a valid Point")}function o(e){if(!e)throw new Error("obj is required");var t;if(e.length?t=e:e.coordinates?t=e.coordinates:e.geometry&&e.geometry.coordinates&&(t=e.geometry.coordinates),t)return i(t),t;throw new Error("No valid coordinates")}function i(e){if(e.length>1&&"number"==typeof e[0]&&"number"==typeof e[1])return!0;if(Array.isArray(e[0])&&e[0].length)return i(e[0]);throw new Error("coordinates must only contain numbers")}t.a=n},function(e,t,r){"use strict";function n(e,t,r,n){if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");if(r&&4!==r.length)throw new Error("bbox must be an Array of 4 numbers");if(n&&-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");var o={type:"Feature"};return n&&(o.id=n),r&&(o.bbox=r),o.properties=t||{},o.geometry=e,o}function o(e,t,r,o){if(!e)throw new Error("No coordinates passed");if(void 0===e.length)throw new Error("Coordinates must be an array");if(e.length<2)throw new Error("Coordinates must be at least 2 numbers long");if(!f(e[0])||!f(e[1]))throw new Error("Coordinates must contain numbers");return n({type:"Point",coordinates:e},t,r,o)}function i(e,t,r,o){if(!e)throw new Error("No coordinates passed");for(var i=0;i<e.length;i++){var a=e[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++){if(0===i&&0===s&&!f(a[0][0])||!f(a[0][1]))throw new Error("Coordinates must contain numbers");if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}}return n({type:"Polygon",coordinates:e},t,r,o)}function a(e,t,r,o){if(!e)throw new Error("No coordinates passed");if(e.length<2)throw new Error("Coordinates must be an array of two or more positions");if(!f(e[0][1])||!f(e[0][1]))throw new Error("Coordinates must contain numbers");return n({type:"LineString",coordinates:e},t,r,o)}function s(e,t,r,o){if(!e)throw new Error("No coordinates passed");return n({type:"MultiLineString",coordinates:e},t,r,o)}function u(e,t,r,o){if(!e)throw new Error("No coordinates passed");return n({type:"MultiPoint",coordinates:e},t,r,o)}function c(e,t,r,o){if(!e)throw new Error("No coordinates passed");return n({type:"MultiPolygon",coordinates:e},t,r,o)}function l(e,t){if(void 0===e||null===e)throw new Error("distance is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var r=d[t||"kilometers"];if(!r)throw new Error(t+" units is invalid");return e/r}function f(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}t.b=o,t.a=l;var d={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,centimeters:6373e5,centimetres:6373e5,kilometers:6373,kilometres:6373,feet:20908792.65}},function(e,t,r){"use strict";function n(e,t,r,n){if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");if(r&&4!==r.length)throw new Error("bbox must be an Array of 4 numbers");if(n&&-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");var o={type:"Feature"};return n&&(o.id=n),r&&(o.bbox=r),o.properties=t||{},o.geometry=e,o}function o(e,t,r,o){if(!e)throw new Error("No coordinates passed");if(void 0===e.length)throw new Error("Coordinates must be an array");if(e.length<2)throw new Error("Coordinates must be at least 2 numbers long");if(!l(e[0])||!l(e[1]))throw new Error("Coordinates must contain numbers");return n({type:"Point",coordinates:e},t,r,o)}function i(e,t,r,o){if(!e)throw new Error("No coordinates passed");for(var i=0;i<e.length;i++){var a=e[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++){if(0===i&&0===s&&!l(a[0][0])||!l(a[0][1]))throw new Error("Coordinates must contain numbers");if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}}return n({type:"Polygon",coordinates:e},t,r,o)}function a(e,t,r,o){if(!e)throw new Error("No coordinates passed");if(e.length<2)throw new Error("Coordinates must be an array of two or more positions");if(!l(e[0][1])||!l(e[0][1]))throw new Error("Coordinates must contain numbers");return n({type:"LineString",coordinates:e},t,r,o)}function s(e,t,r,o){if(!e)throw new Error("No coordinates passed");return n({type:"MultiLineString",coordinates:e},t,r,o)}function u(e,t,r,o){if(!e)throw new Error("No coordinates passed");return n({type:"MultiPoint",coordinates:e},t,r,o)}function c(e,t,r,o){if(!e)throw new Error("No coordinates passed");return n({type:"MultiPolygon",coordinates:e},t,r,o)}function l(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}t.a=i},function(e,t,r){"use strict";function n(e,t,r,n){if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");if(r&&4!==r.length)throw new Error("bbox must be an Array of 4 numbers");if(n&&-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");var o={type:"Feature"};return n&&(o.id=n),r&&(o.bbox=r),o.properties=t||{},o.geometry=e,o}function o(e,t,r){if(!e)throw new Error("type is required");if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(r&&4!==r.length)throw new Error("bbox must be an Array of 4 numbers");var n;switch(e){case"Point":n=i(t).geometry;break;case"LineString":n=s(t).geometry;break;case"Polygon":n=a(t).geometry;break;case"MultiPoint":n=l(t).geometry;break;case"MultiLineString":n=c(t).geometry;break;case"MultiPolygon":n=f(t).geometry;break;default:throw new Error(e+" is invalid")}return r&&(n.bbox=r),n}function i(e,t,r,o){if(!e)throw new Error("No coordinates passed");if(void 0===e.length)throw new Error("Coordinates must be an array");if(e.length<2)throw new Error("Coordinates must be at least 2 numbers long");if(!E(e[0])||!E(e[1]))throw new Error("Coordinates must contain numbers");return n({type:"Point",coordinates:e},t,r,o)}function a(e,t,r,o){if(!e)throw new Error("No coordinates passed");for(var i=0;i<e.length;i++){var a=e[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++){if(0===i&&0===s&&!E(a[0][0])||!E(a[0][1]))throw new Error("Coordinates must contain numbers");if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}}return n({type:"Polygon",coordinates:e},t,r,o)}function s(e,t,r,o){if(!e)throw new Error("No coordinates passed");if(e.length<2)throw new Error("Coordinates must be an array of two or more positions");if(!E(e[0][1])||!E(e[0][1]))throw new Error("Coordinates must contain numbers");return n({type:"LineString",coordinates:e},t,r,o)}function u(e,t,r){if(!e)throw new Error("No features passed");if(!Array.isArray(e))throw new Error("features must be an Array");if(t&&4!==t.length)throw new Error("bbox must be an Array of 4 numbers");if(r&&-1===["string","number"].indexOf(typeof r))throw new Error("id must be a number or a string");var n={type:"FeatureCollection"};return r&&(n.id=r),t&&(n.bbox=t),n.features=e,n}function c(e,t,r,o){if(!e)throw new Error("No coordinates passed");return n({type:"MultiLineString",coordinates:e},t,r,o)}function l(e,t,r,o){if(!e)throw new Error("No coordinates passed");return n({type:"MultiPoint",coordinates:e},t,r,o)}function f(e,t,r,o){if(!e)throw new Error("No coordinates passed");return n({type:"MultiPolygon",coordinates:e},t,r,o)}function d(e,t,r,o){if(!e)throw new Error("geometries is required");if(!Array.isArray(e))throw new Error("geometries must be an Array");return n({type:"GeometryCollection",geometries:e},t,r,o)}function p(e,t){if(void 0===e||null===e||isNaN(e))throw new Error("num is required");if(t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}function h(e,t){if(void 0===e||null===e)throw new Error("radians is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var r=O[t||"kilometers"];if(!r)throw new Error(t+" units is invalid");return e*r}function m(e,t){if(void 0===e||null===e)throw new Error("distance is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var r=O[t||"kilometers"];if(!r)throw new Error(t+" units is invalid");return e/r}function g(e,t){return b(m(e,t))}function v(e){if(null===e||void 0===e)throw new Error("bearing is required");var t=e%360;return t<0&&(t+=360),t}function b(e){if(null===e||void 0===e)throw new Error("radians is required");return e%(2*Math.PI)*180/Math.PI}function y(e){if(null===e||void 0===e)throw new Error("degrees is required");return e%360*Math.PI/180}function w(e,t,r){if(null===e||void 0===e)throw new Error("distance is required");if(!(e>=0))throw new Error("distance must be a positive number");return h(m(e,t),r||"kilometers")}function x(e,t,r){if(null===e||void 0===e)throw new Error("area is required");if(!(e>=0))throw new Error("area must be a positive number");var n=N[t||"meters"];if(!n)throw new Error("invalid original units");var o=N[r||"kilometers"];if(!o)throw new Error("invalid final units");return e/n*o}function E(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function S(e){return!!e&&e.constructor===Object}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"earthRadius",function(){return k}),r.d(t,"factors",function(){return O}),r.d(t,"unitsFactors",function(){return C}),r.d(t,"areaFactors",function(){return N}),t.feature=n,t.geometry=o,t.point=i,t.polygon=a,t.lineString=s,t.featureCollection=u,t.multiLineString=c,t.multiPoint=l,t.multiPolygon=f,t.geometryCollection=d,t.round=p,t.radiansToDistance=h,t.distanceToRadians=m,t.distanceToDegrees=g,t.bearingToAngle=v,t.radians2degrees=b,t.degrees2radians=y,t.convertDistance=w,t.convertArea=x,t.isNumber=E,t.isObject=S;var k=6371008.8,O={meters:k,metres:k,millimeters:1e3*k,millimetres:1e3*k,centimeters:100*k,centimetres:100*k,kilometers:k/1e3,kilometres:k/1e3,miles:k/1609.344,nauticalmiles:k/1852,inches:39.37*k,yards:k/1.0936,feet:3.28084*k,radians:1,degrees:k/111325},C={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/k,degrees:1/111325},N={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006}},function(e,t,r){var n=r(38),o=r(40).featureCollection;e.exports=function(e,t){for(var r=o([]),i=0;i<t.features.length;i++)for(var a=0;a<e.features.length;a++){var s=n(e.features[a],t.features[i]);s&&r.features.push(e.features[a])}return r}},function(e,t,r){function n(e,t,r){var n=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var o=0,i=t.length-1;o<t.length;i=o++){var a=t[o][0],s=t[o][1],u=t[i][0],c=t[i][1];if(e[1]*(a-u)+s*(u-e[0])+c*(e[0]-a)==0&&(a-e[0])*(u-e[0])<=0&&(s-e[1])*(c-e[1])<=0)return!r;s>e[1]!=c>e[1]&&e[0]<(u-a)*(e[1]-s)/(c-s)+a&&(n=!n)}return n}function o(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}var i=r(39),a=i.getCoord,s=i.getCoords;e.exports=function(e,t,r){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var i=a(e),u=s(t),c=t.geometry?t.geometry.type:t.type,l=t.bbox;if(l&&!1===o(i,l))return!1;"Polygon"===c&&(u=[u]);for(var f=0,d=!1;f<u.length&&!d;f++)if(n(i,u[f][0],r)){for(var p=!1,h=1;h<u[f].length&&!p;)n(i,u[f][h],!r)&&(p=!0),h++;p||(d=!0)}return d}},function(e,t){function r(e){if(!e)throw new Error("obj is required");var t=n(e);if(t.length>1&&"number"==typeof t[0]&&"number"==typeof t[1])return t;throw new Error("Coordinate is not a valid Point")}function n(e){if(!e)throw new Error("obj is required");var t;if(e.length?t=e:e.coordinates?t=e.coordinates:e.geometry&&e.geometry.coordinates&&(t=e.geometry.coordinates),t)return o(t),t;throw new Error("No valid coordinates")}function o(e){if(e.length>1&&"number"==typeof e[0]&&"number"==typeof e[1])return!0;if(Array.isArray(e[0])&&e[0].length)return o(e[0]);throw new Error("coordinates must only contain numbers")}function i(e,t,r){if(!t||!r)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.type)}function a(e,t,r){if(!e)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.geometry.type)}function s(e,t,r){if(!e)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0;n<e.features.length;n++){var o=e.features[n];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+o.geometry.type)}}function u(e){if(!e)throw new Error("geojson is required");if(void 0!==e.geometry)return e.geometry;if(e.coordinates||e.geometries)return e;throw new Error("geojson must be a valid Feature or Geometry Object")}function c(e){if(!e)throw new Error("geojson is required");var t=u(e);if(t)return t.type}e.exports={geojsonType:i,collectionOf:s,featureOf:a,getCoord:r,getCoords:n,containsNumber:o,getGeom:u,getGeomType:c}},function(e,t){function r(e,t,r,n){if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");if(r&&4!==r.length)throw new Error("bbox must be an Array of 4 numbers");if(n&&-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");var o={type:"Feature"};return n&&(o.id=n),r&&(o.bbox=r),o.properties=t||{},o.geometry=e,o}function n(e,t,r){if(!e)throw new Error("type is required");if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(r&&4!==r.length)throw new Error("bbox must be an Array of 4 numbers");var n;switch(e){case"Point":n=o(t).geometry;break;case"LineString":n=a(t).geometry;break;case"Polygon":n=i(t).geometry;break;case"MultiPoint":n=c(t).geometry;break;case"MultiLineString":n=u(t).geometry;break;case"MultiPolygon":n=l(t).geometry;break;default:throw new Error(e+" is invalid")}return r&&(n.bbox=r),n}function o(e,t,n,o){if(!e)throw new Error("No coordinates passed");if(void 0===e.length)throw new Error("Coordinates must be an array");if(e.length<2)throw new Error("Coordinates must be at least 2 numbers long");if(!x(e[0])||!x(e[1]))throw new Error("Coordinates must contain numbers");return r({type:"Point",coordinates:e},t,n,o)}function i(e,t,n,o){if(!e)throw new Error("No coordinates passed");for(var i=0;i<e.length;i++){var a=e[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++){if(0===i&&0===s&&!x(a[0][0])||!x(a[0][1]))throw new Error("Coordinates must contain numbers");if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}}return r({type:"Polygon",coordinates:e},t,n,o)}function a(e,t,n,o){if(!e)throw new Error("No coordinates passed");if(e.length<2)throw new Error("Coordinates must be an array of two or more positions");if(!x(e[0][1])||!x(e[0][1]))throw new Error("Coordinates must contain numbers");return r({type:"LineString",coordinates:e},t,n,o)}function s(e,t,r){if(!e)throw new Error("No features passed");if(!Array.isArray(e))throw new Error("features must be an Array");if(t&&4!==t.length)throw new Error("bbox must be an Array of 4 numbers");if(r&&-1===["string","number"].indexOf(typeof r))throw new Error("id must be a number or a string");var n={type:"FeatureCollection"};return r&&(n.id=r),t&&(n.bbox=t),n.features=e,n}function u(e,t,n,o){if(!e)throw new Error("No coordinates passed");return r({type:"MultiLineString",coordinates:e},t,n,o)}function c(e,t,n,o){if(!e)throw new Error("No coordinates passed");return r({type:"MultiPoint",coordinates:e},t,n,o)}function l(e,t,n,o){if(!e)throw new Error("No coordinates passed");return r({type:"MultiPolygon",coordinates:e},t,n,o)}function f(e,t,n,o){if(!e)throw new Error("geometries is required");if(!Array.isArray(e))throw new Error("geometries must be an Array");return r({type:"GeometryCollection",geometries:e},t,n,o)}function d(e,t){if(void 0===e||null===e||isNaN(e))throw new Error("num is required");if(t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}function p(e,t){if(void 0===e||null===e)throw new Error("radians is required");var r=E[t||"kilometers"];if(!r)throw new Error("units is invalid");return e*r}function h(e,t){if(void 0===e||null===e)throw new Error("distance is required");var r=E[t||"kilometers"];if(!r)throw new Error("units is invalid");return e/r}function m(e,t){return v(h(e,t))}function g(e){if(null===e||void 0===e)throw new Error("bearing is required");var t=e%360;return t<0&&(t+=360),t}function v(e){if(null===e||void 0===e)throw new Error("radians is required");return e%(2*Math.PI)*180/Math.PI}function b(e){if(null===e||void 0===e)throw new Error("degrees is required");return e%360*Math.PI/180}function y(e,t,r){if(null===e||void 0===e)throw new Error("distance is required");if(!(e>=0))throw new Error("distance must be a positive number");return p(h(e,t),r||"kilometers")}function w(e,t,r){if(null===e||void 0===e)throw new Error("area is required");if(!(e>=0))throw new Error("area must be a positive number");var n=S[t||"meters"];if(!n)throw new Error("invalid original units");var o=S[r||"kilometers"];if(!o)throw new Error("invalid final units");return e/n*o}function x(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}var E={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,centimeters:6373e5,centimetres:6373e5,kilometers:6373,kilometres:6373,feet:20908792.65},S={kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,centimetres:1e4,millimeter:1e6,acres:247105e-9,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006};e.exports={feature:r,geometry:n,featureCollection:s,geometryCollection:f,point:o,multiPoint:c,lineString:a,multiLineString:u,polygon:i,multiPolygon:l,radiansToDistance:p,distanceToRadians:h,distanceToDegrees:m,radians2degrees:v,degrees2radians:b,bearingToAngle:g,convertDistance:y,convertArea:w,round:d,isNumber:x}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function e(){n(this,e);var t=[];this.getStations=function(){return t},this.getStationsArray=function(){return t.features?t.features:[]};var r=function(){fetch(i.default.stationsUrl).then(function(e){return e.json()}).then(function(e){t=e})};r(),window.setTimeout(r,3e4)},s=new a;t.default=s},function(e,t,r){"use strict";function n(e,t,r){return'<a rel="noopener noreferrer" target="_blank" href="https://www.google.com/maps/dir/'+(e?e.address||e.latitude+","+e.longitude:"")+"/"+(t?t.address||t.latitude+","+t.longitude:"")+'/@17/data=!4m2!4m1!3e2">Directions '+r+" here</a>"}function o(e,t){var r=e.properties,o=r.stAddress1,i=r.latitude,s=r.longitude,u=r.availableBikes,c=r.availableDocks,l=r.statusValue,f={longitude:s,latitude:i},d=void 0,p=void 0,h="";"origin"===t?(d=a.default.origin,p=f,h="to"):"destination"===t?(d=f,p=a.default.destination,h="from"):(d=null,p=f);var m=n(d,p,h),g=function(e){return Number(e).toFixed(2)};return'\n    <div class="station-popup">\n      <h3>'+o+"</h3>\n      "+("Not In Service"===l?'<div class="station-popup--alert">'+l+"</div>":"")+'\n      <div class="columns station-popup--stats">\n        <div class="column station-popup--bikes">\n          <div class="station-popup--bikes-number">'+u+'</div>\n          <div class="station-popup--bikes-text">bikes</div>\n        </div>\n        <div class="column station-popup--docks">\n          <div class="station-popup--docks-number">'+c+'</div>\n          <div class="station-popup--docks-text">docks</div>\n        </div>\n      </div>\n      <div class="station-popup--directions">\n        '+m+'\n      </div>\n      <div class="station-popup--coordinates">Lat/Long: <abbr title="'+i+", "+s+'">'+g(i)+", "+g(s)+"</abbr></div>\n    </div>"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=r(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){f.getDirections({profile:"cycling",waypoints:[{coordinates:[e.longitude,e.latitude],waypointName:e.address},{coordinates:[t.longitude,t.latitude],waypointName:t.address}]}).send().then(function(e){var t=e.body;if("Ok"!==t.code)throw console.error(t),Error("Failed getting directions.");r(u.default.toGeoJSON(t.routes[0].geometry))}).catch(function(e){throw console.log("error fetching route: ",e),Error("Error while requesting directions.")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=r(44),a=n(i),s=r(60),u=n(s),c=r(2),l=n(c),f=(0,a.default)({accessToken:l.default.mapboxToken})},function(e,t,r){"use strict";var n=r(8),o=r(10),i=r(58),a=r(14),s={};s.getDirections=function(e){n.assertShape({profile:n.oneOf("driving-traffic","driving","walking","cycling"),waypoints:n.required(n.arrayOf(n.shape({coordinates:n.required(n.coordinates),approach:n.oneOf("unrestricted","curb"),bearing:n.arrayOf(n.range([0,360])),radius:n.oneOfType(n.number,n.equal("unlimited")),waypointName:n.string}))),alternatives:n.boolean,annotations:n.arrayOf(n.oneOf("duration","distance","speed","congestion")),bannerInstructions:n.boolean,continueStraight:n.boolean,exclude:n.string,geometries:n.string,language:n.string,overview:n.string,roundaboutExits:n.boolean,steps:n.boolean,voiceInstructions:n.boolean,voiceUnits:n.string})(e),e.profile=e.profile||"driving";var t={coordinates:[],approach:[],bearing:[],radius:[],waypointName:[]},r=e.waypoints.length;if(r<2||r>25)throw new Error("waypoints must include between 2 and 25 DirectionsWaypoints");e.waypoints.forEach(function(e){t.coordinates.push(e.coordinates[0]+","+e.coordinates[1]),["bearing"].forEach(function(t){e.hasOwnProperty(t)&&null!=e[t]&&(e[t]=e[t].join(","))}),["approach","bearing","radius","waypointName"].forEach(function(r){e.hasOwnProperty(r)&&null!=e[r]?t[r].push(e[r]):t[r].push("")})}),["approach","bearing","radius","waypointName"].forEach(function(e){t[e].every(function(e){return""===e})?delete t[e]:t[e]=t[e].join(";")});var o=a({alternatives:e.alternatives,annotations:e.annotations,banner_instructions:e.bannerInstructions,continue_straight:e.continueStraight,exclude:e.exclude,geometries:e.geometries,language:e.language,overview:e.overview,roundabout_exits:e.roundaboutExits,steps:e.steps,voice_instructions:e.voiceInstructions,voice_units:e.voiceUnits,approaches:t.approach,bearings:t.bearing,radiuses:t.radius,waypoint_names:t.waypointName});return this.client.createRequest({method:"GET",path:"/directions/v5/mapbox/:profile/:coordinates",params:{profile:e.profile,coordinates:t.coordinates.join(";")},query:i(o)})},e.exports=o(s)},function(e,t,r){"use strict";function n(e){var t=Array.isArray(e),r=function(r){return t?e[r]:e};return function(n){var i=o(m.plainArray,n);if(i)return i;if(t&&n.length!==e.length)return"an array with "+e.length+" items";for(var a=0;a<n.length;a++)if(i=o(r(a),n[a]))return[a].concat(i)}}function o(e,t){if(null!=t||e.hasOwnProperty("__required")){var r=e(t);return r?Array.isArray(r)?r:[r]:void 0}}function i(e,t){var r=e.length,n=e[r-1],o=e.slice(0,r-1);return 0===o.length&&(o=[h]),t=p(t,{path:o}),"function"==typeof n?n(t):c(t,s(n))}function a(e){return e.length<2?e[0]:2===e.length?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function s(e){return"must be "+u(e)+"."}function u(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function c(e,t){var r=l(e.path),n=e.path.join(".")+" "+t;return(r?"Item at position ":"")+n}function l(e){return"number"==typeof e[e.length-1]||"number"==typeof e[0]}function f(e){return Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}})}var d=r(46),p=r(3),h="value",m={};m.assert=function(e,t){return t=t||{},function(r){var n=o(e,r);if(n){var a=i(n,t);throw t.apiName&&(a=t.apiName+": "+a),new Error(a)}}},m.shape=function(e){var t=f(e);return function(e){var r=o(m.plainObject,e);if(r)return r;for(var n,a,s=[],u=0;u<t.length;u++)n=t[u].key,a=t[u].value,(r=o(a,e[n]))&&s.push([n].concat(r));return s.length<2?s[0]:function(e){s=s.map(function(t){return"- "+t[0]+": "+i(t,e).split("\n").join("\n  ")});var t=e.path.join(".");return"The following properties"+(t===h?"":" of "+t)+" have invalid values:\n  "+s.join("\n  ")}}},m.strictShape=function(e){var t=m.shape(e);return function(r){var n=t(r);if(n)return n;var o=Object.keys(r).reduce(function(t,r){return void 0===e[r]&&t.push(r),t},[]);return 0!==o.length?function(){return"The following keys are invalid: "+o.join(", ")}:void 0}},m.arrayOf=function(e){return n(e)},m.tuple=function(){return n(Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments))},m.required=function(e){function t(t){return null==t?function(e){return c(e,l(e.path)?"cannot be undefined/null.":"is required.")}:e.apply(this,arguments)}return t.__required=!0,t},m.oneOfType=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(t){var r=e.map(function(e){return o(e,t)}).filter(Boolean);if(r.length===e.length)return r.every(function(e){return 1===e.length&&"string"==typeof e[0]})?a(r.map(function(e){return e[0]})):r.reduce(function(e,t){return t.length>e.length?t:e})}},m.equal=function(e){return function(t){if(t!==e)return JSON.stringify(e)}},m.oneOf=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),t=e.map(function(e){return m.equal(e)});return m.oneOfType.apply(this,t)},m.range=function(e){var t=e[0],r=e[1];return function(e){if(o(m.number,e)||e<t||e>r)return"number between "+t+" & "+r+" (inclusive)"}},m.any=function(){},m.boolean=function(e){if("boolean"!=typeof e)return"boolean"},m.number=function(e){if("number"!=typeof e)return"number"},m.plainArray=function(e){if(!Array.isArray(e))return"array"},m.plainObject=function(e){if(!d(e))return"object"},m.string=function(e){if("string"!=typeof e)return"string"},m.func=function(e){if("function"!=typeof e)return"function"},m.validate=o,m.processMessage=i,e.exports=m},function(e,t,r){"use strict";var n=Object.prototype.toString;e.exports=function(e){var t;return"[object Object]"===n.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))}},function(e,t,r){(function(e,n){var o;!function(i){var a="object"==typeof t&&t,s=("object"==typeof e&&e&&e.exports,"object"==typeof n&&n);var u=function(e){this.message=e};u.prototype=new Error,u.prototype.name="InvalidCharacterError";var c=function(e){throw new u(e)},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=/[\t\n\f\r ]/g,d=function(e){e=String(e).replace(f,"");var t=e.length;t%4==0&&(e=e.replace(/==?$/,""),t=e.length),(t%4==1||/[^+a-zA-Z0-9\/]/.test(e))&&c("Invalid character: the string to be decoded is not correctly encoded.");for(var r,n,o=0,i="",a=-1;++a<t;)n=l.indexOf(e.charAt(a)),r=o%4?64*r+n:n,o++%4&&(i+=String.fromCharCode(255&r>>(-2*o&6)));return i},p=function(e){e=String(e),/[^\0-\xFF]/.test(e)&&c("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,n,o,i=e.length%3,a="",s=-1,u=e.length-i;++s<u;)t=e.charCodeAt(s)<<16,r=e.charCodeAt(++s)<<8,n=e.charCodeAt(++s),o=t+r+n,a+=l.charAt(o>>18&63)+l.charAt(o>>12&63)+l.charAt(o>>6&63)+l.charAt(63&o);return 2==i?(t=e.charCodeAt(s)<<8,r=e.charCodeAt(++s),o=t+r,a+=l.charAt(o>>10)+l.charAt(o>>4&63)+l.charAt(o<<2&63)+"="):1==i&&(o=e.charCodeAt(s),a+=l.charAt(o>>2)+l.charAt(o<<4&63)+"=="),a},h={encode:p,decode:d,version:"0.1.0"};void 0!==(o=function(){return h}.call(t,r,t,e))&&(e.exports=o)}()}).call(t,r(48)(e),r(9))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";function n(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var r={};t.body&&(r["content-type"]="application/json");var n=i(r,t.headers),o=Object.keys(n).reduce(function(e,t){return e[t.toLowerCase()]=n[t],e},{});this.id=c++,this._options=t,this.emitter=new a,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.headers=o}var o=r(12),i=r(3),a=r(50),s=r(51),u=r(4),c=1;n.prototype.url=function(e){var t=s.prependOrigin(this.path,this.origin);t=s.appendQueryObject(t,this.query);var r=this.params;if(e){t=s.appendQueryParam(t,"access_token",e);var n=o(e).user;r=i({ownerId:n},r)}return t=s.interpolateRouteParams(t,r),t},n.prototype.send=function(){var e=this;if(e.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return e.sent=!0,e.client.sendRequest(e).then(function(t){return e.response=t,e.emitter.emit(u.EVENT_RESPONSE,t),t},function(t){throw e.error=t,e.emitter.emit(u.EVENT_ERROR,t),t})},n.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},n.prototype.eachPage=function(e){function t(t){function r(){delete o._nextPageRequest;var e=t.nextPage();e&&(o._nextPageRequest=e,n(e))}e(null,t,r)}function r(t){e(t,null,function(){})}function n(e){e.send().then(t,r)}var o=this;n(this)},n.prototype.clone=function(){return this._extend()},n.prototype._extend=function(e){var t=i(this._options,e);return new n(this.client,t)},e.exports=n},function(e,t,r){"use strict";function n(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,r,n,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,n||e,i),s=c?c+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],a]:e._events[s].push(a):(e._events[s]=a,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}var u=Object.prototype.hasOwnProperty,c="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(c=!1)),s.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)u.call(e,t)&&r.push(c?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},s.prototype.listeners=function(e){var t=c?c+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,i=new Array(o);n<o;n++)i[n]=r[n].fn;return i},s.prototype.listenerCount=function(e){var t=c?c+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,n,o,i){var a=c?c+e:e;if(!this._events[a])return!1;var s,u,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,n),!0;case 5:return l.fn.call(l.context,t,r,n,o),!0;case 6:return l.fn.call(l.context,t,r,n,o,i),!0}for(u=1,s=new Array(f-1);u<f;u++)s[u-1]=arguments[u];l.fn.apply(l.context,s)}else{var d,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),f){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,n);break;default:if(!s)for(d=1,s=new Array(f-1);d<f;d++)s[d-1]=arguments[d];l[u].fn.apply(l[u].context,s)}}return!0},s.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,r,n){var o=c?c+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var i=this._events[o];if(i.fn)i.fn!==t||n&&!i.once||r&&i.context!==r||a(this,o);else{for(var s=0,u=[],l=i.length;s<l;s++)(i[s].fn!==t||n&&!i[s].once||r&&i[s].context!==r)&&u.push(i[s]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=c?c+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=c,s.EventEmitter=s,e.exports=s},function(e,t,r){"use strict";function n(e){return e.map(encodeURIComponent).join(",")}function o(e){return Array.isArray(e)?n(e):encodeURIComponent(String(e))}function i(e,t,r){if(!1===r||null===r)return e;var n=/\?/.test(e)?"&":"?",i=encodeURIComponent(t);return void 0!==r&&""!==r&&!0!==r&&(i+="="+o(r)),""+e+n+i}function a(e,t){if(!t)return e;var r=e;return Object.keys(t).forEach(function(e){var n=t[e];void 0!==n&&(Array.isArray(n)&&(n=n.filter(function(e){return!!e}).join(",")),r=i(r,e,n))}),r}function s(e,t){if(!t)return e;if("http"===e.slice(0,4))return e;var r="/"===e[0]?"":"/";return""+t.replace(/\/$/,"")+r+e}function u(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,function(e,r){var n=t[r];if(void 0===n)throw new Error("Unspecified route parameter "+r);return"/"+o(n)}):e}e.exports={appendQueryObject:a,appendQueryParam:i,prependOrigin:s,interpolateRouteParams:u}},function(e,t,r){"use strict";function n(e){a.call(this,e)}function o(e){return new n(e)}var i=r(53),a=r(11);n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.prototype.sendRequest=i.browserSend,n.prototype.abortRequest=i.browserAbort,e.exports=o},function(e,t,r){"use strict";function n(e){var t=p[e.id];t&&(t.abort(),delete p[e.id])}function o(e,t){return new c(e,{body:t.response,headers:d(t.getAllResponseHeaders()),statusCode:t.status})}function i(e){var t=e.total,r=e.loaded;return{total:t,transferred:r,percent:100*r/t}}function a(e,t){return new Promise(function(r,n){t.onprogress=function(t){e.emitter.emit(f.EVENT_PROGRESS_DOWNLOAD,i(t))};var o=e.file;o&&(t.upload.onprogress=function(t){e.emitter.emit(f.EVENT_PROGRESS_UPLOAD,i(t))}),t.onerror=function(e){n(e)},t.onabort=function(){var t=new l({request:e,type:f.ERROR_REQUEST_ABORTED});n(t)},t.onload=function(){if(delete p[e.id],t.status<200||t.status>=400){var o=new l({request:e,body:t.response,statusCode:t.status});return void n(o)}r(t)};var a=e.body;"string"==typeof a?t.send(a):a?t.send(JSON.stringify(a)):o?t.send(o):t.send(),p[e.id]=t}).then(function(t){return o(e,t)})}function s(e,t){var r=e.url(t),n=new window.XMLHttpRequest;return n.open(e.method,r),e.headers&&Object.keys(e.headers).forEach(function(t){n.setRequestHeader(t,e.headers[t])}),n}function u(e){return Promise.resolve().then(function(){var t=s(e,e.client.accessToken);return a(e,t)})}var c=r(54),l=r(56),f=r(4),d=r(57),p={};e.exports={browserAbort:n,sendRequestXhr:a,browserSend:u,createRequestXhr:s}},function(e,t,r){"use strict";function n(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch(e){this.body=t.body}this.links=o(this.headers.link)}var o=r(55);n.prototype.hasNextPage=function(){return!!this.links.next},n.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},e.exports=n},function(e,t,r){"use strict";function n(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}function o(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var r=t[1],o=t[2].split(";"),i=null,a=o.reduce(function(e,t){var r=n(t);return r?"rel"===r.key?(i||(i=r.value),e):(e[r.key]=r.value,e):e},{});return i?{url:r,rel:i,params:a}:null}function i(e){return e?e.split(/,\s*</).reduce(function(e,t){var r=o(t);return r?(r.rel.split(/\s+/).forEach(function(t){e[t]||(e[t]={url:r.url,params:r.params})}),e):e},{}):{}}e.exports=i},function(e,t,r){"use strict";function n(e){var t,r=e.type||o.ERROR_HTTP;if(e.body)try{t=JSON.parse(e.body)}catch(r){t=e.body}else t=null;var n=e.message||null;n||("string"==typeof t?n=t:t&&"string"==typeof t.message?n=t.message:r===o.ERROR_REQUEST_ABORTED&&(n="Request aborted")),this.message=n,this.type=r,this.statusCode=e.statusCode||null,this.request=e.request,this.body=t}var o=r(4);e.exports=n},function(e,t,r){"use strict";function n(e){var t=e.indexOf(":");return{name:e.substring(0,t).trim().toLowerCase(),value:e.substring(t+1).trim()}}function o(e){var t={};return e?(e.trim().split(/[\r|\n]+/).forEach(function(e){var r=n(e);t[r.name]=r.value}),t):t}e.exports=o},function(e,t,r){"use strict";function n(e){return o(e,function(e,t){return null!=t})}var o=r(13);e.exports=n},function(e,t,r){"use strict";function n(e,t){return Object.keys(e).reduce(function(r,n){return r[n]=t(n,e[n]),r},{})}e.exports=n},function(e,t,r){"use strict";function n(e){return Math.floor(Math.abs(e)+.5)*(e>=0?1:-1)}function o(e,t,r){e=n(e*r),t=n(t*r);var o=e-t;o<<=1,e-t<0&&(o=~o);for(var i="";o>=32;)i+=String.fromCharCode(63+(32|31&o)),o>>=5;return i+=String.fromCharCode(o+63)}function i(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].slice().reverse());return t}var a={};a.decode=function(e,t){for(var r,n,o=0,i=0,a=0,s=[],u=0,c=0,l=null,f=Math.pow(10,t||5);o<e.length;){l=null,u=0,c=0;do{l=e.charCodeAt(o++)-63,c|=(31&l)<<u,u+=5}while(l>=32);r=1&c?~(c>>1):c>>1,u=c=0;do{l=e.charCodeAt(o++)-63,c|=(31&l)<<u,u+=5}while(l>=32);n=1&c?~(c>>1):c>>1,i+=r,a+=n,s.push([i/f,a/f])}return s},a.encode=function(e,t){if(!e.length)return"";for(var r=Math.pow(10,t||5),n=o(e[0][0],0,r)+o(e[0][1],0,r),i=1;i<e.length;i++){var a=e[i],s=e[i-1];n+=o(a[0],s[0],r),n+=o(a[1],s[1],r)}return n},a.fromGeoJSON=function(e,t){if(e&&"Feature"===e.type&&(e=e.geometry),!e||"LineString"!==e.type)throw new Error("Input must be a GeoJSON LineString");return a.encode(i(e.coordinates),t)},a.toGeoJSON=function(e,t){return{type:"LineString",coordinates:i(a.decode(e,t))}},"object"==typeof e&&e.exports&&(e.exports=a)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){document.getElementsByClassName("directions--locate-origin")[0].onclick=function(){var e=document.getElementById("originInput");e.value="Searching...",s.default.user.address?(e.value=s.default.user.address,s.default.origin=i({},s.default.user),(0,u.mapUpdateDirectionsEndpoint)("origin")):(console.log("fetching your address..."),navigator.geolocation.getCurrentPosition(function(t){console.log(t);var r=t.coords,n=r.latitude,o=r.longitude;s.default.user.latitude=n,s.default.user.longitude=o,s.default.origin=i({},s.default.user),(0,u.mapUpdateDirectionsEndpoint)("origin"),(0,l.default)(function(t,r,n){e.value=n,s.default.user.address=n,s.default.origin.address=n})}))}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=o;var a=r(0),s=n(a),u=r(1),c=r(62),l=n(c)},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};i.default.user.latitude&&i.default.user.longitude&&(0,a.reverseGeocode)(i.default.user.latitude,i.default.user.longitude,function(t,r){var n=r;"FeatureCollection"===n.type&&n.features&&n.features.length>0&&n.features[0].place_name&&(i.default.user.address=n.features[0].place_name),e(t,r,i.default.user.address)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=r(0),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=r(5)},function(e,t,r){"use strict";var n=r(3),o=r(8),i=r(13),a=r(14),s=r(10),u={},c=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];u.forwardGeocode=function(e){o.assertShape({query:o.required(o.string),mode:o.oneOf("mapbox.places","mapbox.places-permanent"),countries:o.arrayOf(o.string),proximity:o.coordinates,types:o.arrayOf(o.oneOf(c)),autocomplete:o.boolean,bbox:o.arrayOf(o.number),limit:o.number,language:o.arrayOf(o.string)})(e),e.mode=e.mode||"mapbox.places";var t=a(n({country:e.countries},i(e,["proximity","types","autocomplete","bbox","limit","language"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:i(e,["mode","query"]),query:t})},u.reverseGeocode=function(e){o.assertShape({query:o.required(o.coordinates),mode:o.oneOf("mapbox.places","mapbox.places-permanent"),countries:o.arrayOf(o.string),types:o.arrayOf(o.oneOf(c)),bbox:o.arrayOf(o.number),limit:o.number,language:o.arrayOf(o.string),reverseMode:o.oneOf("distance","score")})(e),e.mode=e.mode||"mapbox.places";var t=a(n({country:e.countries},i(e,["country","types","bbox","limit","language","reverseMode"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:i(e,["mode","query"]),query:t})},e.exports=s(u)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=document.getElementById(e);(0,l.default)({input:document.getElementById(e),fetch:function(e,t){console.log("on fetch for input"),(0,f.geocode)(e,function(r,n){if(r)console.log("error geocoding "+e+": "+r);else{var o=n;if("FeatureCollection"===o.type&&o.features&&o.features.length>0){var i=function(t){return{label:t.place_name,item:{feature:t,label:t.place_name,text:e}}},a=o.features.map(i);t(a)}}})},onSelect:function(e){m=e,console.log("SELECTED item:",e),r.value=e.feature.place_name,h.default[t].address=e.feature.properties.address||e.feature.place_name}})}function i(e,t){if(t.place_name&&(h.default[e].address=t.place_name),t.center){var r=u(t.center,2);h.default[e].longitude=r[0],h.default[e].latitude=r[1]}}function a(e){return function(t){var r=t.target.value;if(""===r)return h.default[e].longitude=null,h.default[e].latitude=null,h.default[e].address=null,void(0,d.mapUpdateDirectionsEndpoint)(e);(0,f.geocode)(r,function(t,n){if(t)console.log("error geocoding "+r+": "+t);else{if(m)console.log("we should not have run geocoder"),i(e,m.feature),m=null;else{var o=n;"FeatureCollection"===o.type&&o.features&&o.features.length>0&&i(e,o.features[0])}(0,d.mapUpdateDirectionsEndpoint)(e)}})}}function s(e,t){document.getElementById(e).onchange=a(t),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=s;var c=r(65),l=n(c),f=r(5),d=r(1),p=r(0),h=n(p),m=null},function(e,t,r){var n,o;!function(i){n=i,void 0!==(o="function"==typeof n?n.call(t,r,t,e):n)&&(e.exports=o)}(function(){"use strict";function e(e){function t(){return"none"!==m.display}function r(){b++,g=[],d=void 0,m.display="none"}function n(){for(;h.firstChild;)h.removeChild(h.firstChild);var t=!1,n="#9?$";g.forEach(function(e){e.group&&(t=!0)});var o=function(e){var t=p.createElement("div");return t.textContent=e.label,t};e.render&&(o=e.render);var a=function(e){var t=p.createElement("div");return t.textContent=e,t};if(e.renderGroup&&(a=e.renderGroup),g.forEach(function(t){if(t.group&&t.group!==n){n=t.group;var i=a(t.group);i&&(i.className+=" group",h.appendChild(i))}var s=o(t);s&&(s.addEventListener("click",function(n){e.onSelect(t.item,f),r(),n.preventDefault(),n.stopPropagation()}),t===d&&(s.className+=" selected"),h.appendChild(s))}),g.length<1){if(!e.emptyMsg)return void r();var s=p.createElement("div");s.className="empty",s.textContent=e.emptyMsg,h.appendChild(s)}var u=f.getBoundingClientRect(),c=u.top+f.offsetHeight+p.body.scrollTop;m.top=c+"px",m.left=u.left+"px",m.width=f.offsetWidth+"px",m.maxHeight=window.innerHeight-(u.top+f.offsetHeight)+"px",m.height="auto",m.display="block",i()}function o(o){var i=o.which||o.keyCode||0,a=++b;38!==i&&13!==i&&27!==i&&39!==i&&37!==i&&(40===i&&t()||(f.value.length>=v?e.fetch(f.value,function(e){b===a&&e&&(g=e,d=g.length>0?g[0]:void 0,n())}):r()))}function i(){var e=h.getElementsByClassName("selected");if(e.length>0){var t=e[0],r=t.previousElementSibling;if(r&&-1!==r.className.indexOf("group")&&!r.previousElementSibling&&(t=r),t.offsetTop<h.scrollTop)h.scrollTop=t.offsetTop;else{var n=t.offsetTop+t.offsetHeight,o=h.scrollTop+h.offsetHeight;n>o&&(h.scrollTop+=n-o)}}}function a(){if(g.length<1)d=void 0;else if(d===g[0])d=g[g.length-1];else for(var e=g.length-1;e>0;e--)if(d===g[e]||1===e){d=g[e-1];break}}function s(){if(g.length<1&&(d=void 0),!d||d===g[g.length-1])return void(d=g[0]);for(var e=0;e<g.length-1;e++)if(d===g[e]){d=g[e+1];break}}function u(o){var i=o.which||o.keyCode||0;if(38===i||40===i||27===i){var u=t();if(27===i)r();else{if(!t||g.length<1)return;38===i?a():s(),n()}return o.preventDefault(),void(u&&o.stopPropagation())}13===i&&d&&(e.onSelect(d.item,f),r())}function c(){setTimeout(function(){p.activeElement!==f&&r()},200)}function l(){f.removeEventListener("keydown",u),f.removeEventListener("keyup",o),f.removeEventListener("blur",c),window.removeEventListener("resize",n),r();var e=h.parentNode;e&&e.removeChild(h)}var f,d,p=document,h=p.createElement("div"),m=h.style,g=[],v=e.minLength||2,b=0;if(!e.input)throw new Error("input undefined");return f=e.input,p.body.appendChild(h),h.className="autocomplete "+(e.className||""),m.position="absolute",m.display="none",f.addEventListener("keydown",u),f.addEventListener("keyup",o),f.addEventListener("blur",c),window.addEventListener("resize",n),{destroy:l}}return e})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA2N2FiZGU1Y2VlN2I1ZGU5ZDEzYyIsIndlYnBhY2s6Ly8vLi9zcmMvc3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21hcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29uZmlnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy94dGVuZC9pbW11dGFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BtYXBib3gvbWFwYm94LXNkay9saWIvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW9jb2Rlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AbWFwYm94L21hcGJveC1zZGsvc2VydmljZXMvc2VydmljZS1oZWxwZXJzL3ZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AbWFwYm94L21hcGJveC1zZGsvc2VydmljZXMvc2VydmljZS1oZWxwZXJzL2NyZWF0ZS1zZXJ2aWNlLWZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BtYXBib3gvbWFwYm94LXNkay9saWIvY2xhc3Nlcy9tYXBpLWNsaWVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQG1hcGJveC9wYXJzZS1tYXBib3gtdG9rZW4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BtYXBib3gvbWFwYm94LXNkay9zZXJ2aWNlcy9zZXJ2aWNlLWhlbHBlcnMvcGljay5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQG1hcGJveC9tYXBib3gtc2RrL3NlcnZpY2VzL3NlcnZpY2UtaGVscGVycy9zdHJpbmdpZnktYm9vbGVhbnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZS5jc3M/YmQ4NCIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUuY3NzIiwid2VicGFjazovLy8uL3NyYy9ub3VuXzgwMDYwMC5wbmciLCJ3ZWJwYWNrOi8vLy4vc3JjL21hcC1kb3Qtb3JpZ2luLnN2ZyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFwLWRvdC1kZXN0aW5hdGlvbi5zdmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2RpcmVjdGlvbnMtdXAuc3ZnIiwid2VicGFjazovLy8uL3NyYy9kaXJlY3Rpb25zLWRvd24uc3ZnIiwid2VicGFjazovLy8uL3NyYy9sb2NhdGUtcGVyc29uLnN2ZyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi91cmxzLmpzIiwid2VicGFjazovLy8uL3NyYy92ZW5kb3Ivbm91aXNsaWRlci5taW4uY3NzPzYxYzAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZlbmRvci9ub3Vpc2xpZGVyLm1pbi5jc3MiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Zhdmljb24uaWNvIiwid2VicGFjazovLy8uL3NyYy9kaXJlY3Rpb25zQ29udHJvbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Rpc3RhbmNlU2xpZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy92ZW5kb3Ivbm91aXNsaWRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHR1cmYvY2lyY2xlL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdHVyZi9kZXN0aW5hdGlvbi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHR1cmYvaW52YXJpYW50L2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdHVyZi9kZXN0aW5hdGlvbi9ub2RlX21vZHVsZXMvQHR1cmYvaGVscGVycy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHR1cmYvY2lyY2xlL25vZGVfbW9kdWxlcy9AdHVyZi9oZWxwZXJzL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdHVyZi9oZWxwZXJzL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AdHVyZi93aXRoaW4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B0dXJmL2luc2lkZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHR1cmYvaW5zaWRlL25vZGVfbW9kdWxlcy9AdHVyZi9pbnZhcmlhbnQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B0dXJmL3dpdGhpbi9ub2RlX21vZHVsZXMvQHR1cmYvaGVscGVycy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvU3RhdGlvbkZlZWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BvcHVwcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcm91dGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AbWFwYm94L21hcGJveC1zZGsvc2VydmljZXMvZGlyZWN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQG1hcGJveC9mdXNzcG90L2xpYi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaXMtcGxhaW4tb2JqL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9iYXNlLTY0L2Jhc2U2NC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AbWFwYm94L21hcGJveC1zZGsvbGliL2NsYXNzZXMvbWFwaS1yZXF1ZXN0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9ldmVudGVtaXR0ZXIzL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AbWFwYm94L21hcGJveC1zZGsvbGliL2hlbHBlcnMvdXJsLXV0aWxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AbWFwYm94L21hcGJveC1zZGsvbGliL2Jyb3dzZXIvYnJvd3Nlci1jbGllbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BtYXBib3gvbWFwYm94LXNkay9saWIvYnJvd3Nlci9icm93c2VyLWxheWVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AbWFwYm94L21hcGJveC1zZGsvbGliL2NsYXNzZXMvbWFwaS1yZXNwb25zZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQG1hcGJveC9tYXBib3gtc2RrL2xpYi9oZWxwZXJzL3BhcnNlLWxpbmstaGVhZGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AbWFwYm94L21hcGJveC1zZGsvbGliL2NsYXNzZXMvbWFwaS1lcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQG1hcGJveC9tYXBib3gtc2RrL2xpYi9oZWxwZXJzL3BhcnNlLWhlYWRlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BtYXBib3gvbWFwYm94LXNkay9zZXJ2aWNlcy9zZXJ2aWNlLWhlbHBlcnMvb2JqZWN0LWNsZWFuLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AbWFwYm94L21hcGJveC1zZGsvc2VydmljZXMvc2VydmljZS1oZWxwZXJzL29iamVjdC1tYXAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BtYXBib3gvcG9seWxpbmUvc3JjL3BvbHlsaW5lLmpzIiwid2VicGFjazovLy8uL3NyYy9vcmlnaW5Mb2NhdG9yQnV0dG9uLmpzIiwid2VicGFjazovLy8uL3NyYy91c2VyUmV2ZXJzZUdlb2NvZGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BtYXBib3gvbWFwYm94LXNkay9zZXJ2aWNlcy9nZW9jb2RpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RpcmVjdGlvbklucHV0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXRvY29tcGxldGVyL2F1dG9jb21wbGV0ZS5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidmFsdWUiLCJkZWZhdWx0IiwibWF4V2Fsa0Rpc3RhbmNlIiwidXNlciIsImxvbmdpdHVkZSIsImxhdGl0dWRlIiwiYWRkcmVzcyIsIm9yaWdpbiIsImRlc3RpbmF0aW9uIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsImFkZFN0YXRpb25zIiwibWFwIiwib24iLCJ3aW5kb3ciLCJzZXRJbnRlcnZhbCIsImdldFNvdXJjZSIsInNldERhdGEiLCJfU3RhdGlvbkZlZWQyIiwiZ2V0U3RhdGlvbnMiLCJjb25zb2xlIiwibG9nIiwiYWRkU291cmNlIiwidHlwZSIsImRhdGEiLCJzdGF0aW9uc1VSTCIsImFkZExheWVyIiwiaWQiLCJzb3VyY2UiLCJwYWludCIsImNpcmNsZS1yYWRpdXMiLCJjaXJjbGUtY29sb3IiLCJjaXJjbGUtb3BhY2l0eSIsImdldENhbnZhcyIsInN0eWxlIiwiY3Vyc29yIiwiZ2V0TGF5ZXJJZEZvclN0YXRpb25zTmVhciIsImxvY2F0aW9uIiwicXVlcnlGZWF0dXJlc05lYXIiLCJlIiwibGF5ZXJJZCIsImdldExheWVyIiwicXVlcnlSZW5kZXJlZEZlYXR1cmVzIiwicG9pbnQiLCJsYXllcnMiLCJhZGRQb3B1cHMiLCJmZWF0dXJlcyIsImZlYXR1cmVzTmVhck9yaWdpbiIsImZlYXR1cmVzTmVhckRlc3RpbmF0aW9uIiwibGVuZ3RoIiwiZmVhdHVyZSIsIl9zbGljZWRUb0FycmF5IiwiX2ZlYXR1cmVzTmVhckRlc3RpbmF0IiwiX2ZlYXR1cmVzIiwicG9wdXBDb250ZW50IiwiX3BvcHVwczIiLCJtYXBib3hnbCIsIlBvcHVwIiwib2Zmc2V0Iiwic2V0TG5nTGF0IiwiZ2VvbWV0cnkiLCJjb29yZGluYXRlcyIsInNldEhUTUwiLCJhZGRUbyIsIl9jb250YWluZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFbXB0eVN0YXRpb25zTmVhcmJ5U291cmNlcyIsImVtcHR5RmVhdHVyZVNldCIsIm1heHpvb20iLCJpbml0TWFwIiwiY2VudGVyIiwiem9vbSIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsImFjY2Vzc1Rva2VuIiwiX2NvbmZpZzIiLCJtYXBib3hUb2tlbiIsIk1hcCIsImNvbnRhaW5lciIsIm1hcFN0eWxlIiwiZmx5VG8iLCJfc3RhdGUyIiwicmVuZGVyRGlyZWN0aW9uc01hcmtlciIsImVuZHBvaW50TWFya2VycyIsImVsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiTWFya2VyIiwiZ2V0U3RhdGlvbnNOZWFyIiwic3RhdGlvbnMiLCJnZXRTdGF0aW9uc0FycmF5IiwiX2hlbHBlcnMiLCJzZWFyY2hXaXRoaW5GZWF0dXJlcyIsImZlYXR1cmVDb2xsZWN0aW9uIiwiX2NpcmNsZTIiLCJ1bml0cyIsInN0YXRpb25Db2xsZWN0aW9uIiwiX3dpdGhpbjIiLCJzaG93U3RhdGlvbnNOZWFyIiwibGF5ZXJBbmRTb3VyY2VJZCIsImF2YWlsYWJsZUNyaXRlcmEiLCJzdG9wcyIsImNsZWFyU3RhdGlvbnNOZWFyIiwibGF5ZXJJRCIsInJlbW92ZUxheWVyIiwibWFwVXBkYXRlTmVhcmJ5IiwiZm9yRWFjaCIsIm5lYXJieVN0YXRpb25zIiwibWFwQ2xlYXJSb3V0ZSIsIm1hcFVwZGF0ZVJvdXRlIiwiX3JvdXRlcjIiLCJyb3V0ZUxpbmVTdHJpbmciLCJsYXllckFib3ZlIiwibGF5b3V0IiwibGluZS1qb2luIiwibGluZS1jYXAiLCJsaW5lLWNvbG9yIiwibGluZS13aWR0aCIsIm1hcFVwZGF0ZURpcmVjdGlvbnNFbmRwb2ludCIsInJlbW92ZSIsInNsaWNlSXRlcmF0b3IiLCJhcnIiLCJfYXJyIiwiX24iLCJfZCIsIl9lIiwiX3MiLCJfaSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJwdXNoIiwiZXJyIiwiQXJyYXkiLCJpc0FycmF5IiwiVHlwZUVycm9yIiwiX2NpcmNsZSIsIl93aXRoaW4iLCJfU3RhdGlvbkZlZWQiLCJfcG9wdXBzIiwiX3JvdXRlciIsIl9jb25maWciLCJfc3RhdGUiLCJzdGF0aW9uc1VybCIsImV4dGVuZCIsInRhcmdldCIsImtleSIsIkFQSV9PUklHSU4iLCJFVkVOVF9QUk9HUkVTU19ET1dOTE9BRCIsIkVWRU5UX1BST0dSRVNTX1VQTE9BRCIsIkVWRU5UX0VSUk9SIiwiRVZFTlRfUkVTUE9OU0UiLCJFUlJPUl9IVFRQIiwiRVJST1JfUkVRVUVTVF9BQk9SVEVEIiwicmV2ZXJzZUdlb2NvZGUiLCJsYXQiLCJsbmciLCJjYWxsYmFjayIsImdlb2NvZGluZ0NsaWVudCIsInF1ZXJ5IiwibGltaXQiLCJzZW5kIiwidGhlbiIsInJlc3BvbnNlIiwibWF0Y2giLCJib2R5IiwiZ2VvY29kZSIsImZvcndhcmRHZW9jb2RlIiwiYmJveCIsInByb3hpbWl0eSIsInNldEdlb2NkZXJDZW50ZXIiLCJzbGljZSIsInNldEdlb2NvZGVyQm91bmRzIiwiYm94Iiwic3BsaXQiLCJwYXJzZUZsb2F0IiwiX2dlb2NvZGluZyIsIl9nZW9jb2RpbmcyIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIml0ZW0iLCJ1c2VTb3VyY2VNYXAiLCJjb250ZW50IiwiY3NzTWFwcGluZyIsImJ0b2EiLCJzb3VyY2VNYXBwaW5nIiwidG9Db21tZW50IiwiY29uY2F0Iiwic291cmNlcyIsInNvdXJjZVJvb3QiLCJqb2luIiwic291cmNlTWFwIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwibGlzdCIsInRvU3RyaW5nIiwidGhpcyIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiYWRkU3R5bGVzVG9Eb20iLCJzdHlsZXMiLCJvcHRpb25zIiwiZG9tU3R5bGUiLCJzdHlsZXNJbkRvbSIsInJlZnMiLCJqIiwicGFydHMiLCJhZGRTdHlsZSIsImxpc3RUb1N0eWxlcyIsIm5ld1N0eWxlcyIsImJhc2UiLCJjc3MiLCJtZWRpYSIsInBhcnQiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJnZXRFbGVtZW50IiwiaW5zZXJ0SW50byIsIkVycm9yIiwibGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AiLCJzdHlsZXNJbnNlcnRlZEF0VG9wIiwiaW5zZXJ0QXQiLCJuZXh0U2libGluZyIsImluc2VydEJlZm9yZSIsImFwcGVuZENoaWxkIiwiZmlyc3RDaGlsZCIsImJlZm9yZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImlkeCIsImluZGV4T2YiLCJzcGxpY2UiLCJjcmVhdGVTdHlsZUVsZW1lbnQiLCJhdHRycyIsImFkZEF0dHJzIiwiY3JlYXRlTGlua0VsZW1lbnQiLCJsaW5rIiwicmVsIiwia2V5cyIsInNldEF0dHJpYnV0ZSIsInVwZGF0ZSIsInJlc3VsdCIsInRyYW5zZm9ybSIsInNpbmdsZXRvbiIsInN0eWxlSW5kZXgiLCJzaW5nbGV0b25Db3VudGVyIiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsImJpbmQiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJyZXZva2VPYmplY3RVUkwiLCJCbG9iIiwidXBkYXRlTGluayIsImhyZWYiLCJhcHBseVRvVGFnIiwibmV3T2JqIiwiaW5kZXgiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsInJlcGxhY2VUZXh0IiwiY3NzTm9kZSIsImNyZWF0ZVRleHROb2RlIiwiY2hpbGROb2RlcyIsImF1dG9GaXhVcmxzIiwiY29udmVydFRvQWJzb2x1dGVVcmxzIiwiZml4VXJscyIsImJsb2IiLCJvbGRTcmMiLCJpc09sZElFIiwiZm4iLCJtZW1vIiwiYXBwbHkiLCJhbGwiLCJhdG9iIiwic2VsZWN0b3IiLCJzdHlsZVRhcmdldCIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsInF1ZXJ5U2VsZWN0b3IiLCJERUJVRyIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlbWVudCIsImZpbHRlciIsIkJvb2xlYW4iLCJnbG9iYWwiLCJmaWxlIiwiQXJyYXlCdWZmZXIiLCJwaXBlIiwiYXNzZXJ0U2hhcGUiLCJ2YWxpZGF0b3JPYmoiLCJhcGlOYW1lIiwidiIsImFzc2VydCIsInN0cmljdFNoYXBlIiwiZGF0ZSIsIkRhdGUiLCJnZXRUaW1lIiwiaXNOYU4iLCJ0dXBsZSIsIm51bWJlciIsInh0ZW5kIiwiZyIsIkZ1bmN0aW9uIiwiZXZhbCIsImNyZWF0ZVNlcnZpY2VGYWN0b3J5IiwiU2VydmljZVByb3RvdHlwZSIsImNsaWVudE9yQ29uZmlnIiwiY2xpZW50IiwiTWFwaUNsaWVudCIsImlzUHJvdG90eXBlT2YiLCJjcmVhdGVDbGllbnQiLCJzZXJ2aWNlIiwiY3JlYXRlIiwicGFyc2VUb2tlbiIsImNvbnN0YW50cyIsIk1hcGlSZXF1ZXN0IiwiY3JlYXRlUmVxdWVzdCIsInJlcXVlc3RPcHRpb25zIiwidG9rZW4iLCJ0b2tlbkNhY2hlIiwidXNhZ2UiLCJyYXdQYXlsb2FkIiwicGFyc2VkUGF5bG9hZCIsInBhcnNlUGF5bG9kIiwidSIsImhhcyIsImF1dGhvcml6YXRpb24iLCJhIiwiZXhwaXJlcyIsImV4cCIsImNyZWF0ZWQiLCJpYXQiLCJzY29wZXMiLCJsYXN0TG9naW4iLCJsbCIsImltcGVyc29uYXRvciIsIml1IiwicGFyc2UiLCJiYXNlNjQiLCJkZWNvZGUiLCJwYXJzZUVycm9yIiwicGljayIsInZhbCIsInJlZHVjZSIsInN0cmluZ2lmeUJvb2xlYW4iLCJvYmplY3RNYXAiLCJfIiwicmVhZHkiLCJhdHRhY2hFdmVudCIsInJlYWR5U3RhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwiaW5pdFBhZ2UiLCJsbmdMYXQiLCJfbWFwMiIsIl9kaXJlY3Rpb25zQ29udHJvbHMyIiwiX2RpcmVjdGlvbnNDb250cm9scyIsIl9tYXAiLCJfZ2VvY29kZXIiLCJhcHBTdGF0ZSIsIl90aGlzIiwibG9uIiwiTnVtYmVyIiwiYmV0d2VlbiIsIm1pbiIsIm1heCIsImZldGNoIiwicmVzcCIsImpzb24iLCJfZGF0YSRsb2Mkc3BsaXQkbWFwIiwibG9jIiwiX2RhdGEkbG9jJHNwbGl0JG1hcDIiLCJjYXRjaCIsImVycm9yIiwiaG1yIiwibG9jYWxzIiwiYmFzZVVybCIsInByb3RvY29sIiwiaG9zdCIsImN1cnJlbnREaXIiLCJwYXRobmFtZSIsInJlcGxhY2UiLCJmdWxsTWF0Y2giLCJvcmlnVXJsIiwidW5xdW90ZWRPcmlnVXJsIiwidHJpbSIsIiQxIiwidGVzdCIsIm5ld1VybCIsImluaXREaXJlY3Rpb25zVG9nZ2xlIiwidG9nZ2xlIiwiZ2V0RWxlbWVudEJ5SWQiLCJzaG93biIsIm9uY2xpY2siLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwid2lkdGgiLCJjbGllbnRXaWR0aCIsImRpc3BsYXkiLCJpbml0RGlyZWN0aW9uc0NvbnRyb2xzIiwiX2Rpc3RhbmNlU2xpZGVyMiIsIl9vcmlnaW5Mb2NhdG9yQnV0dG9uMiIsIl9kaXJlY3Rpb25JbnB1dDIiLCJfZGlzdGFuY2VTbGlkZXIiLCJfb3JpZ2luTG9jYXRvckJ1dHRvbiIsIl9kaXJlY3Rpb25JbnB1dCIsImluaXREaXN0YW5jZVNsaWRlciIsInJhbmdlIiwiMTAwJSIsInNsaWRlciIsImRpc3RGb3JtYXR0ZXIiLCJ0byIsImlzSW50ZWdlciIsInRvRml4ZWQiLCJfbm91aXNsaWRlcjIiLCJzdGFydCIsInN0ZXAiLCJjb25uZWN0IiwicGlwcyIsIm1vZGUiLCJ2YWx1ZXMiLCJkZW5zaXR5IiwiZm9ybWF0Iiwibm9VaVNsaWRlciIsImhhbmRsZSIsImlubmVyVGV4dCIsIl9ub3Vpc2xpZGVyIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwiX3R5cGVvZiIsImNvbnN0cnVjdG9yIiwiZmFjdG9yeSIsImlzVmFsaWRGb3JtYXR0ZXIiLCJlbnRyeSIsImZyb20iLCJyZW1vdmVFbGVtZW50IiwicGFyZW50RWxlbWVudCIsInByZXZlbnREZWZhdWx0IiwidW5pcXVlIiwiYXJyYXkiLCJjbG9zZXN0IiwiTWF0aCIsInJvdW5kIiwiZWxlbSIsIm9yaWVudGF0aW9uIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImRvYyIsIm93bmVyRG9jdW1lbnQiLCJkb2NFbGVtIiwiZG9jdW1lbnRFbGVtZW50IiwicGFnZU9mZnNldCIsImdldFBhZ2VPZmZzZXQiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ4IiwidG9wIiwieSIsImNsaWVudFRvcCIsImxlZnQiLCJjbGllbnRMZWZ0IiwiaXNOdW1lcmljIiwiaXNGaW5pdGUiLCJhZGRDbGFzc0ZvciIsImVsZW1lbnQiLCJkdXJhdGlvbiIsImFkZENsYXNzIiwic2V0VGltZW91dCIsInJlbW92ZUNsYXNzIiwiYXNBcnJheSIsImNvdW50RGVjaW1hbHMiLCJudW1TdHIiLCJTdHJpbmciLCJwaWVjZXMiLCJSZWdFeHAiLCJoYXNDbGFzcyIsImNvbnRhaW5zIiwic3VwcG9ydFBhZ2VPZmZzZXQiLCJwYWdlWE9mZnNldCIsImlzQ1NTMUNvbXBhdCIsImNvbXBhdE1vZGUiLCJzY3JvbGxMZWZ0IiwicGFnZVlPZmZzZXQiLCJzY3JvbGxUb3AiLCJnZXRBY3Rpb25zIiwicG9pbnRlckVuYWJsZWQiLCJtb3ZlIiwiZW5kIiwibXNQb2ludGVyRW5hYmxlZCIsImdldFN1cHBvcnRzUGFzc2l2ZSIsInN1cHBvcnRzUGFzc2l2ZSIsIm9wdHMiLCJnZXRTdXBwb3J0c1RvdWNoQWN0aW9uTm9uZSIsIkNTUyIsInN1cHBvcnRzIiwic3ViUmFuZ2VSYXRpbyIsInBhIiwicGIiLCJmcm9tUGVyY2VudGFnZSIsInRvUGVyY2VudGFnZSIsImFicyIsImlzUGVyY2VudGFnZSIsImdldEoiLCJ0b1N0ZXBwaW5nIiwieFZhbCIsInhQY3QiLCJ2YSIsInZiIiwiZnJvbVN0ZXBwaW5nIiwiZ2V0U3RlcCIsInhTdGVwcyIsInNuYXAiLCJiIiwiaGFuZGxlRW50cnlQb2ludCIsInRoYXQiLCJwZXJjZW50YWdlIiwiVkVSU0lPTiIsInhIaWdoZXN0Q29tcGxldGVTdGVwIiwiaGFuZGxlU3RlcFBvaW50IiwidG90YWxTdGVwcyIsInhOdW1TdGVwcyIsImhpZ2hlc3RTdGVwIiwiY2VpbCIsIlNwZWN0cnVtIiwic2luZ2xlU3RlcCIsIm9yZGVyZWQiLCJzb3J0IiwidmFsaWRhdGVGb3JtYXQiLCJ0ZXN0U3RlcCIsInBhcnNlZCIsInRlc3RSYW5nZSIsInNwZWN0cnVtIiwidGVzdFN0YXJ0IiwiaGFuZGxlcyIsInRlc3RTbmFwIiwidGVzdEFuaW1hdGUiLCJhbmltYXRlIiwidGVzdEFuaW1hdGlvbkR1cmF0aW9uIiwiYW5pbWF0aW9uRHVyYXRpb24iLCJ0ZXN0Q29ubmVjdCIsInRlc3RPcmllbnRhdGlvbiIsIm9ydCIsInRlc3RNYXJnaW4iLCJtYXJnaW4iLCJnZXRNYXJnaW4iLCJ0ZXN0TGltaXQiLCJ0ZXN0UGFkZGluZyIsInBhZGRpbmciLCJ0ZXN0RGlyZWN0aW9uIiwiZGlyIiwidGVzdEJlaGF2aW91ciIsInRhcCIsImRyYWciLCJmaXhlZCIsImhvdmVyIiwiZXZlbnRzIiwidGVzdFRvb2x0aXBzIiwidG9vbHRpcHMiLCJmb3JtYXR0ZXIiLCJ0ZXN0QXJpYUZvcm1hdCIsImFyaWFGb3JtYXQiLCJ0ZXN0Rm9ybWF0IiwidGVzdENzc1ByZWZpeCIsImNzc1ByZWZpeCIsInRlc3RDc3NDbGFzc2VzIiwiY3NzQ2xhc3NlcyIsInRlc3RVc2VSYWYiLCJ1c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ0ZXN0T3B0aW9ucyIsImRlZmF1bHRGb3JtYXR0ZXIiLCJ0ZXN0cyIsInIiLCJ0IiwiZGlyZWN0aW9uIiwiYmVoYXZpb3VyIiwiZGVmYXVsdHMiLCJoYW5kbGVMb3dlciIsImhhbmRsZVVwcGVyIiwiaG9yaXpvbnRhbCIsInZlcnRpY2FsIiwiYmFja2dyb3VuZCIsImx0ciIsInJ0bCIsImRyYWdnYWJsZSIsImFjdGl2ZSIsInRvb2x0aXAiLCJwaXBzSG9yaXpvbnRhbCIsInBpcHNWZXJ0aWNhbCIsIm1hcmtlciIsIm1hcmtlckhvcml6b250YWwiLCJtYXJrZXJWZXJ0aWNhbCIsIm1hcmtlck5vcm1hbCIsIm1hcmtlckxhcmdlIiwibWFya2VyU3ViIiwidmFsdWVIb3Jpem9udGFsIiwidmFsdWVWZXJ0aWNhbCIsInZhbHVlTm9ybWFsIiwidmFsdWVMYXJnZSIsInZhbHVlU3ViIiwic3R5bGVPcG9zaXRlIiwiY2xvc3VyZSIsIm9yaWdpbmFsT3B0aW9ucyIsImFkZE5vZGVUbyIsImRpdiIsInNjb3BlX0RvY3VtZW50IiwiYWRkT3JpZ2luIiwiaGFuZGxlTnVtYmVyIiwiYWRkQ29ubmVjdCIsImFkZFRvb2x0aXAiLCJnZXRHcm91cCIsInN0ZXBwZWQiLCJzY29wZV9TcGVjdHJ1bSIsInNwcmVhZCIsImdlbmVyYXRlU3ByZWFkIiwiZ3JvdXAiLCJzYWZlSW5jcmVtZW50IiwiaW5jcmVtZW50IiwiaW5kZXhlcyIsImZpcnN0SW5SYW5nZSIsImxhc3RJblJhbmdlIiwiaWdub3JlRmlyc3QiLCJpZ25vcmVMYXN0IiwicHJldlBjdCIsInVuc2hpZnQiLCJjdXJyZW50IiwicSIsIm5ld1BjdCIsInBjdERpZmZlcmVuY2UiLCJwY3RQb3MiLCJzdGVwcyIsInJlYWxTdGVwcyIsInN0ZXBzaXplIiwibG93IiwiaGlnaCIsImFkZE1hcmtpbmciLCJmaWx0ZXJGdW5jIiwiZ2V0Q2xhc3NlcyIsIm9yaWVudGF0aW9uQ2xhc3NlcyIsInZhbHVlT3JpZW50YXRpb25DbGFzc2VzIiwibWFya2VyT3JpZW50YXRpb25DbGFzc2VzIiwic2l6ZUNsYXNzZXMiLCJ2YWx1ZVNpemVDbGFzc2VzIiwibWFya2VyU2l6ZUNsYXNzZXMiLCJhZGRTcHJlYWQiLCJub2RlIiwicmVtb3ZlUGlwcyIsInNjb3BlX1BpcHMiLCJncmlkIiwic2NvcGVfVGFyZ2V0IiwiYmFzZVNpemUiLCJzY29wZV9CYXNlIiwiYWx0IiwiaGVpZ2h0IiwibWV0aG9kIiwiaGFzQXR0cmlidXRlIiwiZml4RXZlbnQiLCJhY3Rpb25zIiwiYnV0dG9ucyIsImNhbGNQb2ludCIsInBvaW50cyIsIm1ldGhvZHMiLCJldmVudE5hbWUiLCJwYXNzaXZlIiwidG91Y2giLCJtb3VzZSIsInBvaW50ZXIiLCJ0b3VjaGVzIiwiY2hhbmdlZFRvdWNoZXMiLCJwYWdlWCIsInBhZ2VZIiwiY2xpZW50WCIsImNsaWVudFkiLCJjYWxjUG9pbnRUb1BlcmNlbnRhZ2UiLCJwcm9wb3NhbCIsImdldENsb3Nlc3RIYW5kbGUiLCJzY29wZV9IYW5kbGVzIiwicG9zIiwic2NvcGVfTG9jYXRpb25zIiwibW92ZUhhbmRsZXMiLCJ1cHdhcmQiLCJsb2NhdGlvbnMiLCJoYW5kbGVOdW1iZXJzIiwicHJvcG9zYWxzIiwiZiIsInJldmVyc2UiLCJjaGVja0hhbmRsZVBvc2l0aW9uIiwic3RhdGUiLCJzZXRIYW5kbGUiLCJmaXJlRXZlbnQiLCJzY29wZV9FdmVudHMiLCJ0YXJnZXRFdmVudCIsImV2ZW50VHlwZSIsInNjb3BlX1NlbGYiLCJzY29wZV9WYWx1ZXMiLCJkb2N1bWVudExlYXZlIiwiZXZlbnQiLCJub2RlTmFtZSIsInJlbGF0ZWRUYXJnZXQiLCJldmVudEVuZCIsImV2ZW50TW92ZSIsImFwcFZlcnNpb24iLCJidXR0b25zUHJvcGVydHkiLCJtb3ZlbWVudCIsInN0YXJ0Q2FsY1BvaW50Iiwic2NvcGVfQWN0aXZlSGFuZGxlIiwic2NvcGVfQm9keSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzY29wZV9MaXN0ZW5lcnMiLCJzY29wZV9Eb2N1bWVudEVsZW1lbnQiLCJzZXRaaW5kZXgiLCJldmVudFN0YXJ0IiwiY2hpbGRyZW4iLCJzdG9wUHJvcGFnYXRpb24iLCJtb3ZlRXZlbnQiLCJlbmRFdmVudCIsIm91dEV2ZW50IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImV2ZW50VGFwIiwiZXZlbnRIb3ZlciIsInJlZmVyZW5jZSIsImxvb2tCYWNrd2FyZCIsImxvb2tGb3J3YXJkIiwiZ2V0VmFsdWUiLCJ0b1BjdCIsInBjdCIsInVwZGF0ZUhhbmRsZVBvc2l0aW9uIiwic3RhdGVVcGRhdGUiLCJ1cGRhdGVDb25uZWN0IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2NvcGVfSGFuZGxlTnVtYmVycyIsInpJbmRleCIsInNjb3BlX0Nvbm5lY3RzIiwiaCIsInNldFZhbHVlIiwidmFsdWVTZXQiLCJpbnB1dCIsImZpcmVTZXRFdmVudCIsImlzSW5pdCIsInZhbHVlUmVzZXQiLCJ2YWx1ZUdldCIsImRlc3Ryb3kiLCJnZXRDdXJyZW50U3RlcCIsIm5lYXJieVN0ZXBzIiwiZ2V0TmVhcmJ5U3RlcHMiLCJ0aGlzU3RlcCIsImRlY3JlbWVudCIsInN0ZXBBZnRlciIsInN0YXJ0VmFsdWUiLCJzdGVwQmVmb3JlIiwic3RlcERlY2ltYWxzIiwiY291bnRTdGVwRGVjaW1hbHMiLCJiaW5kRXZlbnQiLCJuYW1lc3BhY2VkRXZlbnQiLCJyZW1vdmVFdmVudCIsIm5hbWVzcGFjZSIsInN1YnN0cmluZyIsInRFdmVudCIsInROYW1lc3BhY2UiLCJ1cGRhdGVPcHRpb25zIiwib3B0aW9uc1RvVXBkYXRlIiwidXBkYXRlQWJsZSIsIm5ld09wdGlvbnMiLCJzdXBwb3J0c1RvdWNoQWN0aW9uTm9uZSIsImNvbm5lY3RPcHRpb25zIiwib2ZmIiwic2V0IiwicmVzZXQiLCJfX21vdmVIYW5kbGVzIiwiaGFuZGxlQmVmb3JlIiwiaGFuZGxlQWZ0ZXIiLCJldmVudEhvbGRlcnMiLCJldmVudEhvbGRlciIsInRpcHMiLCJ1bmVuY29kZWQiLCJmb3JtYXR0ZWRWYWx1ZSIsImlubmVySFRNTCIsInBvc2l0aW9ucyIsIm5vdyIsInRleHQiLCJpbml0aWFsaXplIiwiYXBpIiwiY29udmVydCIsInZlcnNpb24iLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiY2lyY2xlIiwicmFkaXVzIiwicHJvcGVydGllcyIsIl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fdHVyZl9kZXN0aW5hdGlvbl9fIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX190dXJmX2hlbHBlcnNfXyIsImRpc3RhbmNlIiwiYmVhcmluZyIsImRlZ3JlZXMycmFkaWFucyIsIlBJIiwicmFkaWFuczJkZWdyZWVzIiwiY29vcmRpbmF0ZXMxIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX190dXJmX2ludmFyaWFudF9fIiwibG9uZ2l0dWRlMSIsImxhdGl0dWRlMSIsImJlYXJpbmdfcmFkIiwicmFkaWFucyIsImxhdGl0dWRlMiIsImFzaW4iLCJzaW4iLCJjb3MiLCJsb25naXR1ZGUyIiwiYXRhbjIiLCJnZXRDb29yZCIsImdldENvb3JkcyIsImNvbnRhaW5zTnVtYmVyIiwiZmVhdCIsImlzTnVtYmVyIiwicG9seWdvbiIsInJpbmciLCJsaW5lU3RyaW5nIiwibXVsdGlMaW5lU3RyaW5nIiwibXVsdGlQb2ludCIsIm11bHRpUG9seWdvbiIsImRpc3RhbmNlVG9SYWRpYW5zIiwiZmFjdG9yIiwiZmFjdG9ycyIsIm51bSIsIm1pbGVzIiwibmF1dGljYWxtaWxlcyIsImRlZ3JlZXMiLCJpbmNoZXMiLCJ5YXJkcyIsIm1ldGVycyIsIm1ldHJlcyIsImNlbnRpbWV0ZXJzIiwiY2VudGltZXRyZXMiLCJraWxvbWV0ZXJzIiwia2lsb21ldHJlcyIsImZlZXQiLCJnZW9tIiwiZmMiLCJnZW9tZXRyeUNvbGxlY3Rpb24iLCJnZW9tZXRyaWVzIiwicHJlY2lzaW9uIiwibXVsdGlwbGllciIsInBvdyIsInJhZGlhbnNUb0Rpc3RhbmNlIiwiZGlzdGFuY2VUb0RlZ3JlZXMiLCJiZWFyaW5nVG9BbmdsZSIsImFuZ2xlIiwiY29udmVydERpc3RhbmNlIiwib3JpZ2luYWxVbml0IiwiZmluYWxVbml0IiwiY29udmVydEFyZWEiLCJhcmVhIiwic3RhcnRGYWN0b3IiLCJhcmVhRmFjdG9ycyIsImZpbmFsRmFjdG9yIiwiaXNPYmplY3QiLCJlYXJ0aFJhZGl1cyIsInVuaXRzRmFjdG9ycyIsIm1pbGxpbWV0ZXJzIiwibWlsbGltZXRyZXMiLCJhY3JlcyIsImluc2lkZSIsInBvbHlnb25zIiwicG9pbnRzV2l0aGluIiwiaXNJbnNpZGUiLCJpblJpbmciLCJwdCIsImlnbm9yZUJvdW5kYXJ5IiwieGkiLCJ5aSIsInhqIiwieWoiLCJpbkJCb3giLCJpbnZhcmlhbnQiLCJwb2x5cyIsImluc2lkZVBvbHkiLCJpbkhvbGUiLCJrIiwiZ2VvanNvblR5cGUiLCJmZWF0dXJlT2YiLCJjb2xsZWN0aW9uT2YiLCJnZXRHZW9tIiwiZ2VvanNvbiIsImdldEdlb21UeXBlIiwibWlsbGltZXRlciIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJTdGF0aW9uRmVlZCIsImRvRmV0Y2giLCJmZWVkIiwiZ2V0RGlyZWN0aW9uc0xpbmsiLCJ0b09yRnJvbSIsImdldFBvcHVwQ29udGVudCIsInN0YXRpb24iLCJuZWFyYnlFbmRwb2ludCIsIl9zdGF0aW9uJHByb3BlcnRpZXMiLCJhZGRyIiwic3RBZGRyZXNzMSIsImJpa2VzIiwiYXZhaWxhYmxlQmlrZXMiLCJkb2NrcyIsImF2YWlsYWJsZURvY2tzIiwic3RhdHVzIiwic3RhdHVzVmFsdWUiLCJzdGF0aW9uTG9jYXRpb24iLCJkaXJlY3Rpb25zTGluayIsImZldGNoUm91dGUiLCJkaXJlY3Rpb25zQ2xpZW50IiwiZ2V0RGlyZWN0aW9ucyIsInByb2ZpbGUiLCJ3YXlwb2ludHMiLCJ3YXlwb2ludE5hbWUiLCJkaXJlY3Rpb25zIiwiY29kZSIsIl9wb2x5bGluZTIiLCJ0b0dlb0pTT04iLCJyb3V0ZXMiLCJfZGlyZWN0aW9ucyIsIl9kaXJlY3Rpb25zMiIsIl9wb2x5bGluZSIsIm9iamVjdENsZWFuIiwic3RyaW5naWZ5Qm9vbGVhbnMiLCJEaXJlY3Rpb25zIiwiY29uZmlnIiwib25lT2YiLCJyZXF1aXJlZCIsImFycmF5T2YiLCJzaGFwZSIsImFwcHJvYWNoIiwib25lT2ZUeXBlIiwiZXF1YWwiLCJzdHJpbmciLCJhbHRlcm5hdGl2ZXMiLCJib29sZWFuIiwiYW5ub3RhdGlvbnMiLCJiYW5uZXJJbnN0cnVjdGlvbnMiLCJjb250aW51ZVN0cmFpZ2h0IiwiZXhjbHVkZSIsImxhbmd1YWdlIiwib3ZlcnZpZXciLCJyb3VuZGFib3V0RXhpdHMiLCJ2b2ljZUluc3RydWN0aW9ucyIsInZvaWNlVW5pdHMiLCJwYXRoIiwid2F5cG9pbnRDb3VudCIsIndheXBvaW50IiwicHJvcCIsImV2ZXJ5IiwiY2hhciIsImJhbm5lcl9pbnN0cnVjdGlvbnMiLCJjb250aW51ZV9zdHJhaWdodCIsInJvdW5kYWJvdXRfZXhpdHMiLCJ2b2ljZV9pbnN0cnVjdGlvbnMiLCJ2b2ljZV91bml0cyIsImFwcHJvYWNoZXMiLCJiZWFyaW5ncyIsInJhZGl1c2VzIiwid2F5cG9pbnRfbmFtZXMiLCJwYXJhbXMiLCJjcmVhdGVBcnJheVZhbGlkYXRvciIsInZhbGlkYXRvcnMiLCJ2YWxpZGF0aW5nVHVwbGUiLCJnZXRWYWxpZGF0b3IiLCJ2YWxpZGF0aW9uUmVzdWx0IiwidmFsaWRhdGUiLCJwbGFpbkFycmF5IiwidmFsaWRhdG9yIiwicHJvY2Vzc01lc3NhZ2UiLCJtZXNzYWdlIiwibGVuIiwiREVGQVVMVF9FUlJPUl9QQVRIIiwiZm9ybWF0RXJyb3JNZXNzYWdlIiwicHJldHRpZnlSZXN1bHQiLCJvckxpc3QiLCJhZGRBcnRpY2xlIiwibm91blBocmFzZSIsInByZXR0eVJlc3VsdCIsImFycmF5Q3VscHJpdCIsImlzQXJyYXlDdWxwcml0Iiwib3V0cHV0Iiwib2JqZWN0RW50cmllcyIsImlzUGxhaW5PYmplY3QiLCJyb290VmFsaWRhdG9yIiwiZXJyb3JNZXNzYWdlIiwicGxhaW5PYmplY3QiLCJlcnJvck1lc3NhZ2VzIiwib2JqZWN0SWQiLCJzaGFwZVZhbGlkYXRvciIsInNoYXBlUmVzdWx0IiwiaW52YWxpZEtleXMiLCJ2YWx1ZUtleSIsInJlcXVpcmVkVmFsaWRhdG9yIiwiX19yZXF1aXJlZCIsIm1lc3NhZ2VzIiwiY29tcGFyZVdpdGgiLCJhbnkiLCJmdW5jIiwiZ2V0UHJvdG90eXBlT2YiLCJyb290IiwiZnJlZUV4cG9ydHMiLCJmcmVlR2xvYmFsIiwiSW52YWxpZENoYXJhY3RlckVycm9yIiwiVEFCTEUiLCJSRUdFWF9TUEFDRV9DSEFSQUNURVJTIiwiYml0U3RvcmFnZSIsImJ1ZmZlciIsImJpdENvdW50ZXIiLCJwb3NpdGlvbiIsImNoYXJBdCIsImZyb21DaGFyQ29kZSIsImVuY29kZSIsImNoYXJDb2RlQXQiLCJ3ZWJwYWNrUG9seWZpbGwiLCJkZXByZWNhdGUiLCJwYXRocyIsImRlZmF1bHRIZWFkZXJzIiwiaGVhZGVyc1dpdGhEZWZhdWx0cyIsImhlYWRlcnMiLCJ0b0xvd2VyQ2FzZSIsInJlcXVlc3RJZCIsIl9vcHRpb25zIiwiZW1pdHRlciIsIkV2ZW50RW1pdHRlciIsInNlbnQiLCJhYm9ydGVkIiwidXJsVXRpbHMiLCJ1cmwiLCJwcmVwZW5kT3JpZ2luIiwiYXBwZW5kUXVlcnlPYmplY3QiLCJyb3V0ZVBhcmFtcyIsImFwcGVuZFF1ZXJ5UGFyYW0iLCJhY2Nlc3NUb2tlbk93bmVySWQiLCJvd25lcklkIiwiaW50ZXJwb2xhdGVSb3V0ZVBhcmFtcyIsInNlbGYiLCJzZW5kUmVxdWVzdCIsImVtaXQiLCJhYm9ydCIsIl9uZXh0UGFnZVJlcXVlc3QiLCJhYm9ydFJlcXVlc3QiLCJlYWNoUGFnZSIsImhhbmRsZVJlc3BvbnNlIiwiZ2V0TmV4dFBhZ2UiLCJuZXh0UGFnZVJlcXVlc3QiLCJuZXh0UGFnZSIsImdldFBhZ2UiLCJoYW5kbGVFcnJvciIsInJlcXVlc3QiLCJjbG9uZSIsIl9leHRlbmQiLCJleHRlbmRlZE9wdGlvbnMiLCJFdmVudHMiLCJFRSIsImNvbnRleHQiLCJvbmNlIiwiYWRkTGlzdGVuZXIiLCJsaXN0ZW5lciIsImV2dCIsInByZWZpeCIsIl9ldmVudHMiLCJfZXZlbnRzQ291bnQiLCJjbGVhckV2ZW50IiwiX19wcm90b19fIiwiZXZlbnROYW1lcyIsIm5hbWVzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibGlzdGVuZXJzIiwiaGFuZGxlcnMiLCJlZSIsImxpc3RlbmVyQ291bnQiLCJhMSIsImEyIiwiYTMiLCJhNCIsImE1IiwiYXJncyIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwicHJlZml4ZWQiLCJlbmNvZGVBcnJheSIsImFycmF5VmFsdWUiLCJlbmNvZGVWYWx1ZSIsInB1bmN0dWF0aW9uIiwicXVlcnlPYmplY3QiLCJkZWxpbWl0ZXIiLCJyb3V0ZSIsInBhcmFtSWQiLCJCcm93c2VyQ2xpZW50IiwiY3JlYXRlQnJvd3NlckNsaWVudCIsImJyb3dzZXIiLCJicm93c2VyU2VuZCIsImJyb3dzZXJBYm9ydCIsInhociIsInJlcXVlc3RzVW5kZXJ3YXkiLCJjcmVhdGVSZXNwb25zZSIsIk1hcGlSZXNwb25zZSIsInBhcnNlSGVhZGVycyIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInN0YXR1c0NvZGUiLCJub3JtYWxpemVCcm93c2VyUHJvZ3Jlc3NFdmVudCIsInRvdGFsIiwidHJhbnNmZXJyZWQiLCJsb2FkZWQiLCJwZXJjZW50Iiwic2VuZFJlcXVlc3RYaHIiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIm9ucHJvZ3Jlc3MiLCJ1cGxvYWQiLCJvbmVycm9yIiwib25hYm9ydCIsIm1hcGlFcnJvciIsIk1hcGlFcnJvciIsIm9ubG9hZCIsImNyZWF0ZVJlcXVlc3RYaHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwicmVzcG9uc2VEYXRhIiwicmF3Qm9keSIsImxpbmtzIiwicGFyc2VMaW5rSGVhZGVyIiwiaGFzTmV4dFBhZ2UiLCJwYXJzZVBhcmFtIiwicGFyYW0iLCJwYXJzZUxpbmsiLCJsaW5rVXJsIiwibGlua1BhcmFtcyIsInBhcnNlZExpbmtQYXJhbXMiLCJsaW5rSGVhZGVyIiwiZXJyb3JUeXBlIiwicGFyc2VTaW5nbGVIZWFkZXIiLCJyYXciLCJib3VuZGFyeSIsInJhd0hlYWRlciIsImNiIiwicHkyX3JvdW5kIiwiZmxvb3IiLCJwcmV2aW91cyIsImNvb3JkaW5hdGUiLCJmbGlwcGVkIiwiY29vcmRzIiwicG9seWxpbmUiLCJzdHIiLCJsYXRpdHVkZV9jaGFuZ2UiLCJsb25naXR1ZGVfY2hhbmdlIiwic2hpZnQiLCJieXRlIiwiZnJvbUdlb0pTT04iLCJpbml0T3JpZ2luTG9jYXRvckJ0biIsIm9yaWciLCJfZXh0ZW5kcyIsImdlb2xvY2F0aW9uIiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwiX3Bvc2l0aW9uJGNvb3JkcyIsIl91c2VyUmV2ZXJzZUdlb2NvZGUyIiwiYXNzaWduIiwiX3VzZXJSZXZlcnNlR2VvY29kZSIsInVzZXJSZXZlcnNlR2VvY29kZSIsImdlb0RhdGEiLCJwbGFjZV9uYW1lIiwiR2VvY29kaW5nIiwiZmVhdHVyZVR5cGVzIiwiY291bnRyaWVzIiwidHlwZXMiLCJhdXRvY29tcGxldGUiLCJjb3VudHJ5IiwicmV2ZXJzZU1vZGUiLCJpbml0QXV0b2NvbXBsZXRlIiwiZWxJZCIsIl9hdXRvY29tcGxldGVyMiIsImZlYXR1cmVUb1N1Z2dlc3Rpb24iLCJsYWJlbCIsInN1Z2dlc3Rpb25zIiwib25TZWxlY3QiLCJsYXN0QXV0b2NvbXBsZXRlU2VsZWN0aW9uIiwidXBkYXRlTG9jYXRpb25Gcm9tRmVhdHVyZSIsIl9mZWF0dXJlJGNlbnRlciIsImdlb2NvZGluZ0NoYW5nZUhhbmRsZXIiLCJpbml0RGlyZWN0aW9uSW5wdXQiLCJvbmNoYW5nZSIsIl9hdXRvY29tcGxldGVyIiwidGV4dENvbnRlbnQiLCJyZW5kZXIiLCJyZW5kZXJHcm91cCIsImVtcHR5TXNnIiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0V2lkdGgiLCJtYXhIZWlnaHQiLCJpbm5lckhlaWdodCIsIndoaWNoIiwia2V5Q29kZSIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJvZmZzZXRUb3AiLCJhY3RpdmVFbGVtZW50IiwibWluTGVuZ3RoIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBSSxFQUFBSixFQUNBSyxHQUFBLEVBQ0FILFdBVUEsT0FOQUosR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQTRCQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxTQUFBUCxFQUFBUSxFQUFBQyxHQUNBWixFQUFBYSxFQUFBVixFQUFBUSxJQUNBRyxPQUFBQyxlQUFBWixFQUFBUSxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWYsR0FDQSxHQUFBUSxHQUFBUixLQUFBZ0IsV0FDQSxXQUEyQixNQUFBaEIsR0FBQSxTQUMzQixXQUFpQyxNQUFBQSxHQUVqQyxPQURBSixHQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQVEsRUFBQUMsR0FBc0QsTUFBQVIsUUFBQVMsVUFBQUMsZUFBQWpCLEtBQUFjLEVBQUFDLElBR3REdEIsRUFBQXlCLEVBQUEsR0FHQXpCLElBQUEwQixFQUFBLE1ETU0sU0FBVXRCLEVBQVFELEVBQVNILEdBRWpDLFlBR0FjLFFBQU9DLGVBQWVaLEVBQVMsY0FDN0J3QixPQUFPLElBSVR4QixFQUFReUIsU0UxRU5DLGdCQUFpQixJQUNqQkMsTUFDRUMsVUFBVyxLQUNYQyxTQUFVLEtBQ1ZDLFFBQVMsTUFFWEMsUUFDRUgsVUFBVyxLQUNYQyxTQUFVLEtBQ1ZDLFFBQVMsTUFFWEUsYUFD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LEtBQXlCLEtBQU0sUUFBQU8sS0FBYTRVLEVBQUE2WCxvQkFBQSxVQUFBdkIsR0FBQXRXLEVBQUE2WCxvQkFBQSxRQUFBOXRCLEdBQUFpVyxFQUFBNlgsb0JBQUEsT0FBQXp0QixHQUFBK0IsT0FBQTByQixvQkFBQSxTQUFBdHRCLEdBQUFNLEdBQStJLElBQUErQyxHQUFBbVEsRUFBQW5FLFVBQW1CaE0sTUFBQWlNLFlBQUFrRSxHQUFvQixHQUFBaUMsR0FBQTdVLEVBQUFoQixFQUFBd0csU0FBQW9OLEVBQUE1VCxFQUFBeUcsY0FBQSxPQUFBMm9CLEVBQUF4YixFQUFBeFEsTUFBQXJELEtBQUF1VSxFQUFBN1EsRUFBQXlvQyxXQUFBLEVBQUFqdUIsRUFBQSxDQUFnRixLQUFBeGEsRUFBQThyQixNQUFBLFNBQUF4Z0IsT0FBQSxrQkFBK0MsT0FBQThHLEdBQUFwUyxFQUFBOHJCLE1BQUF2dkIsRUFBQTBMLEtBQUEyRCxZQUFBdUUsS0FBQWxOLFVBQUEsaUJBQUFqRCxFQUFBaUQsV0FBQSxJQUFBMG9CLEVBQUFpUixTQUFBLFdBQUFqUixFQUFBL1UsUUFBQSxPQUFBeEUsRUFBQTBCLGlCQUFBLFVBQUE0VSxHQUFBdFcsRUFBQTBCLGlCQUFBLFFBQUEzWCxHQUFBaVcsRUFBQTBCLGlCQUFBLE9BQUF0WCxHQUFBK0IsT0FBQXVWLGlCQUFBLFNBQUFuWCxJQUE0UHd2QixRQUFBM3VCLEdBQVcsTUFBQXdDIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxNSk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbi8vIEFwcGxpY2F0aW9uIHN0YXRlLlxuZXhwb3J0cy5kZWZhdWx0ID0ge1xuICBtYXhXYWxrRGlzdGFuY2U6IDAuMjUsXG4gIHVzZXI6IHtcbiAgICBsb25naXR1ZGU6IG51bGwsXG4gICAgbGF0aXR1ZGU6IG51bGwsXG4gICAgYWRkcmVzczogbnVsbFxuICB9LFxuICBvcmlnaW46IHtcbiAgICBsb25naXR1ZGU6IG51bGwsXG4gICAgbGF0aXR1ZGU6IG51bGwsXG4gICAgYWRkcmVzczogbnVsbFxuICB9LFxuICBkZXN0aW5hdGlvbjoge1xuICAgIGxvbmdpdHVkZTogbnVsbCxcbiAgICBsYXRpdHVkZTogbnVsbCxcbiAgICBhZGRyZXNzOiBudWxsXG4gIH1cbn07XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9OyB9KCk7XG4vLyBpbXBvcnQgdXNlckdlb2xvY2F0ZSBmcm9tICcuL3VzZXJHZW9sb2NhdGUnO1xuXG5cbmV4cG9ydHMuZGVmYXVsdCA9IGluaXRNYXA7XG5leHBvcnRzLmZseVRvID0gZmx5VG87XG5leHBvcnRzLnJlbmRlckRpcmVjdGlvbnNNYXJrZXIgPSByZW5kZXJEaXJlY3Rpb25zTWFya2VyO1xuZXhwb3J0cy5tYXBVcGRhdGVOZWFyYnkgPSBtYXBVcGRhdGVOZWFyYnk7XG5leHBvcnRzLm1hcFVwZGF0ZURpcmVjdGlvbnNFbmRwb2ludCA9IG1hcFVwZGF0ZURpcmVjdGlvbnNFbmRwb2ludDtcblxudmFyIF9jaXJjbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTtcblxudmFyIF9jaXJjbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2lyY2xlKTtcblxudmFyIF9oZWxwZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cbnZhciBfd2l0aGluID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7XG5cbnZhciBfd2l0aGluMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dpdGhpbik7XG5cbnZhciBfU3RhdGlvbkZlZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblxudmFyIF9TdGF0aW9uRmVlZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdGF0aW9uRmVlZCk7XG5cbnZhciBfcG9wdXBzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cbnZhciBfcG9wdXBzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BvcHVwcyk7XG5cbnZhciBfcm91dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7XG5cbnZhciBfcm91dGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JvdXRlcik7XG5cbnZhciBfY29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9jb25maWcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29uZmlnKTtcblxudmFyIF9zdGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfc3RhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RhdGUpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgc3RhdGlvbnNVUkwgPSBfY29uZmlnMi5kZWZhdWx0LnN0YXRpb25zVXJsO1xuXG52YXIgbWFwID0gdm9pZCAwO1xuXG5mdW5jdGlvbiBhZGRTdGF0aW9ucygpIHtcbiAgbWFwLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgIHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICBtYXAuZ2V0U291cmNlKCdzdGF0aW9ucy1zb3VyY2UnKS5zZXREYXRhKF9TdGF0aW9uRmVlZDIuZGVmYXVsdC5nZXRTdGF0aW9ucygpKTtcbiAgICAgIC8vIG1hcC5nZXRTb3VyY2UoJ3N0YXRpb25zLXNvdXJjZScpLnNldERhdGEoc3RhdGlvbnNVUkwpO1xuICAgICAgY29uc29sZS5sb2coJ3JlZmV0Y2hpbmcgbGl2ZSBzdGF0aW9uIGRhdGEnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIH0sIDMwICogMTAwMCk7IC8vIGV2ZXJ5IE4gc2Vjb25kcyAoaW4gbWlsbGlzZWNvbmRzKVxuXG4gICAgbWFwLmFkZFNvdXJjZSgnc3RhdGlvbnMtc291cmNlJywgeyB0eXBlOiAnZ2VvanNvbicsIGRhdGE6IHN0YXRpb25zVVJMIH0pO1xuICAgIG1hcC5hZGRMYXllcih7XG4gICAgICBpZDogJ3N0YXRpb25zLWxheWVyJyxcbiAgICAgIHR5cGU6ICdjaXJjbGUnLFxuICAgICAgc291cmNlOiAnc3RhdGlvbnMtc291cmNlJyxcbiAgICAgIHBhaW50OiB7XG4gICAgICAgICdjaXJjbGUtcmFkaXVzJzogMTIsXG4gICAgICAgICdjaXJjbGUtY29sb3InOiAnI0I0MjIyMicsXG4gICAgICAgICdjaXJjbGUtb3BhY2l0eSc6IDAgLy8gdHJhbnNwYXJlbnQgZG90cyBzaXplZCBmb3IgaW50ZXJhY3Rpb24gLSBhbGxvd3MgcG9wdXBcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIENoYW5nZSB0aGUgY3Vyc29yIHRvIGEgcG9pbnRlciB3aGVuIHRoZSBtb3VzZSBpcyBvdmVyIHRoZSBsYXllci5cbiAgICBtYXAub24oJ21vdXNlZW50ZXInLCAnc3RhdGlvbnMtbGF5ZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICBtYXAuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgIH0pO1xuXG4gICAgLy8gQ2hhbmdlIGl0IGJhY2sgdG8gYSBwb2ludGVyIHdoZW4gaXQgbGVhdmVzLlxuICAgIG1hcC5vbignbW91c2VsZWF2ZScsICdzdGF0aW9ucy1sYXllcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1hcC5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSAnJztcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldExheWVySWRGb3JTdGF0aW9uc05lYXIobG9jYXRpb24pIHtcbiAgcmV0dXJuICdzdGF0aW9ucy1uZWFyLScgKyBsb2NhdGlvbjtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHsqfSBlIC0gZXZlbnQgZnJvbSBtYXAub24oJ2NsaWNrJylcbiAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhdGlvbiAtIG9yaWdpbiBvciBkZXN0aW5hdGlvblxuICovXG5mdW5jdGlvbiBxdWVyeUZlYXR1cmVzTmVhcihlLCBsb2NhdGlvbikge1xuICB2YXIgbGF5ZXJJZCA9IGdldExheWVySWRGb3JTdGF0aW9uc05lYXIobG9jYXRpb24pO1xuICBpZiAobWFwLmdldExheWVyKGxheWVySWQpKSB7XG4gICAgcmV0dXJuIG1hcC5xdWVyeVJlbmRlcmVkRmVhdHVyZXMoZS5wb2ludCwge1xuICAgICAgbGF5ZXJzOiBbbGF5ZXJJZF1cbiAgICB9KTtcbiAgfVxuICByZXR1cm4gW107IC8vIG5vIGZlYXR1cmVzIGJlY2F1c2Ugbm8gbGF5ZXJcbn1cblxuZnVuY3Rpb24gYWRkUG9wdXBzKCkge1xuICBtYXAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgZmVhdHVyZXMgPSBtYXAucXVlcnlSZW5kZXJlZEZlYXR1cmVzKGUucG9pbnQsIHtcbiAgICAgIGxheWVyczogWydzdGF0aW9ucy1sYXllciddXG4gICAgfSk7XG5cbiAgICB2YXIgZmVhdHVyZXNOZWFyT3JpZ2luID0gcXVlcnlGZWF0dXJlc05lYXIoZSwgJ29yaWdpbicpO1xuICAgIHZhciBmZWF0dXJlc05lYXJEZXN0aW5hdGlvbiA9IHF1ZXJ5RmVhdHVyZXNOZWFyKGUsICdkZXN0aW5hdGlvbicpO1xuXG4gICAgaWYgKCFmZWF0dXJlc05lYXJPcmlnaW4ubGVuZ3RoICYmICFmZWF0dXJlc05lYXJEZXN0aW5hdGlvbi5sZW5ndGggJiYgIWZlYXR1cmVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBmZWF0dXJlID0gdm9pZCAwO1xuICAgIHZhciBsb2NhdGlvbiA9IG51bGw7XG5cbiAgICBpZiAoZmVhdHVyZXNOZWFyT3JpZ2luLmxlbmd0aCkge1xuICAgICAgbG9jYXRpb24gPSAnb3JpZ2luJztcblxuICAgICAgdmFyIF9mZWF0dXJlc05lYXJPcmlnaW4gPSBfc2xpY2VkVG9BcnJheShmZWF0dXJlc05lYXJPcmlnaW4sIDEpO1xuXG4gICAgICBmZWF0dXJlID0gX2ZlYXR1cmVzTmVhck9yaWdpblswXTtcbiAgICB9IGVsc2UgaWYgKGZlYXR1cmVzTmVhckRlc3RpbmF0aW9uLmxlbmd0aCkge1xuICAgICAgbG9jYXRpb24gPSAnZGVzdGluYXRpb24nO1xuXG4gICAgICB2YXIgX2ZlYXR1cmVzTmVhckRlc3RpbmF0ID0gX3NsaWNlZFRvQXJyYXkoZmVhdHVyZXNOZWFyRGVzdGluYXRpb24sIDEpO1xuXG4gICAgICBmZWF0dXJlID0gX2ZlYXR1cmVzTmVhckRlc3RpbmF0WzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgX2ZlYXR1cmVzID0gX3NsaWNlZFRvQXJyYXkoZmVhdHVyZXMsIDEpO1xuXG4gICAgICBmZWF0dXJlID0gX2ZlYXR1cmVzWzBdO1xuICAgIH1cbiAgICB2YXIgcG9wdXBDb250ZW50ID0gKDAsIF9wb3B1cHMyLmRlZmF1bHQpKGZlYXR1cmUsIGxvY2F0aW9uKTtcblxuICAgIHZhciBwb3B1cCA9IG5ldyBtYXBib3hnbC5Qb3B1cCh7IG9mZnNldDogWzAsIC0xNV0gfSkuc2V0TG5nTGF0KGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpLnNldEhUTUwocG9wdXBDb250ZW50KS5zZXRMbmdMYXQoZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlcykuYWRkVG8obWFwKTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZXJzY29yZS1kYW5nbGVcbiAgICBwb3B1cC5fY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3N0YXRpb24tcG9wdXAtLWNvbnRhaW5lcicpOyAvLyBmb3Igc3R5bGluZ1xuICB9KTtcbn1cblxuZnVuY3Rpb24gYWRkRW1wdHlTdGF0aW9uc05lYXJieVNvdXJjZXMoKSB7XG4gIG1hcC5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZW1wdHlGZWF0dXJlU2V0ID0ge1xuICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcbiAgICAgIGZlYXR1cmVzOiBbXVxuICAgIH07XG4gICAgbWFwLmFkZFNvdXJjZSgnc3RhdGlvbnMtbmVhci1vcmlnaW4nLCB7XG4gICAgICB0eXBlOiAnZ2VvanNvbicsXG4gICAgICBkYXRhOiBlbXB0eUZlYXR1cmVTZXQsXG4gICAgICBtYXh6b29tOiAyMiAvLyBvdGhlcndpc2Ugd2UgZ2V0IHByZWNpc2lvbiAvIG1pc2FsaWdubWVudCBlcnJvcnNcbiAgICAgIC8vIG1pZ2h0IHJlbGF0ZSB0bzpcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvbWFwYm94LWdsLWpzL2lzc3Vlcy8yMjc5XG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L21hcGJveC1nbC1qcy9pc3N1ZXMvMTczM1xuICAgIH0pO1xuICAgIG1hcC5hZGRTb3VyY2UoJ3N0YXRpb25zLW5lYXItZGVzdGluYXRpb24nLCB7XG4gICAgICB0eXBlOiAnZ2VvanNvbicsXG4gICAgICBkYXRhOiBlbXB0eUZlYXR1cmVTZXQsXG4gICAgICBtYXh6b29tOiAyMlxuICAgIH0pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBJbnN0YW50aWF0ZSBtYXAgd2l0aCBzdGF0aW9ucy5cbiAqIEBwYXJhbSB7W2xvbixsYXRdfSBjZW50ZXI6IGxvbixsYXQgY29vcmRzIG9uIHdoaWNoIHRvIGNlbnRlciB0aGUgdmlld1xuICovXG5mdW5jdGlvbiBpbml0TWFwKGNlbnRlcikge1xuICB2YXIgem9vbSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogODtcblxuICBtYXBib3hnbC5hY2Nlc3NUb2tlbiA9IF9jb25maWcyLmRlZmF1bHQubWFwYm94VG9rZW47XG4gIG1hcCA9IG5ldyBtYXBib3hnbC5NYXAoe1xuICAgIGNvbnRhaW5lcjogJ21hcCcsXG4gICAgc3R5bGU6IF9jb25maWcyLmRlZmF1bHQubWFwU3R5bGUsXG4gICAgem9vbTogem9vbSxcbiAgICBjZW50ZXI6IGNlbnRlclxuICB9KTtcblxuICAvLyBBZGQgZ2VvbG9jYXRlIGNvbnRyb2wgdG8gdGhlIG1hcC5cbiAgLy8gY29uc3QgZ2VvbG9jYXRlQ29udHJvbCA9IG5ldyBtYXBib3hnbC5HZW9sb2NhdGVDb250cm9sKHtcbiAgLy8gICBwb3NpdGlvbk9wdGlvbnM6IHtcbiAgLy8gICAgIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZSxcbiAgLy8gICB9LFxuICAvLyAgIHRyYWNrVXNlckxvY2F0aW9uOiB0cnVlLFxuICAvLyB9KTtcbiAgLy8gbWFwLmFkZENvbnRyb2woZ2VvbG9jYXRlQ29udHJvbCk7XG4gIC8vIGdlb2xvY2F0ZUNvbnRyb2wub24oJ2dlb2xvY2F0ZScsIHVzZXJHZW9sb2NhdGUpO1xuXG4gIGFkZEVtcHR5U3RhdGlvbnNOZWFyYnlTb3VyY2VzKCk7XG4gIC8vIGZldGNoU3RhdGlvbnMoKTtcbiAgYWRkU3RhdGlvbnMoKTtcbiAgYWRkUG9wdXBzKCk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBsb2NhdGlvbiAtIG9yaWdpbiBvciBkZXN0aW5hdGlvblxuICovXG5mdW5jdGlvbiBmbHlUbyhsb2NhdGlvbikge1xuICAvLyBjb25zb2xlLmxvZyhgZmx5aW5nIHRvOlxuICAvLyAke1tzdGF0ZVtsb2NhdGlvbl0ubG9uZ2l0dWRlLCBzdGF0ZVtsb2NhdGlvbl0ubGF0aXR1ZGVdfSAoJHtzdGF0ZVtsb2NhdGlvbl0uYWRkcmVzc30pYCk7XG4gIG1hcC5mbHlUbyh7XG4gICAgY2VudGVyOiBbX3N0YXRlMi5kZWZhdWx0W2xvY2F0aW9uXS5sb25naXR1ZGUsIF9zdGF0ZTIuZGVmYXVsdFtsb2NhdGlvbl0ubGF0aXR1ZGVdLFxuICAgIHpvb206IDE0XG4gIH0pO1xufVxuXG52YXIgZW5kcG9pbnRNYXJrZXJzID0ge307XG5cbi8qKlxuICogQWRkIG9yIHVwZGF0ZSB0aGUgb3JpZ2luIG9yIGRlc3RpbmF0aW9uIG1hcmtlclxuICogQHBhcmFtIHtTdHJpbmd9IGxvY2F0aW9uIC0gb3JpZ2luIG9yIGRlc3RpbmF0aW9uXG4gKi9cbmZ1bmN0aW9uIHJlbmRlckRpcmVjdGlvbnNNYXJrZXIobG9jYXRpb24pIHtcbiAgaWYgKGVuZHBvaW50TWFya2Vyc1tsb2NhdGlvbl0pIHtcbiAgICAvLyBjb25zb2xlLmxvZyhgc2V0dGluZyBlbmRwb2ludCBmb3IgJHtsb2NhdGlvbn0gdG9cbiAgICAvLyAke1tzdGF0ZVtsb2NhdGlvbl0ubG9uZ2l0dWRlLCBzdGF0ZVtsb2NhdGlvbl0ubGF0aXR1ZGVdfWApO1xuICAgIGVuZHBvaW50TWFya2Vyc1tsb2NhdGlvbl0uc2V0TG5nTGF0KFtfc3RhdGUyLmRlZmF1bHRbbG9jYXRpb25dLmxvbmdpdHVkZSwgX3N0YXRlMi5kZWZhdWx0W2xvY2F0aW9uXS5sYXRpdHVkZV0pO1xuICAgIC8vIGVuZHBvaW50TWFya2Vyc1tsb2NhdGlvbl0uYWRkVG8obWFwKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBjb25zb2xlLmxvZyhgY3JlYXRpbmcgJHtsb2NhdGlvbn0gbWFya2VyYCk7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWwuY2xhc3NOYW1lID0gJ21hcmtlciBtYXAtbWFya2VyLWRpcmVjdGlvbnMgaXMtJyArIGxvY2F0aW9uO1xuICAgIGVuZHBvaW50TWFya2Vyc1tsb2NhdGlvbl0gPSBuZXcgbWFwYm94Z2wuTWFya2VyKGVsKS5zZXRMbmdMYXQoW19zdGF0ZTIuZGVmYXVsdFtsb2NhdGlvbl0ubG9uZ2l0dWRlLCBfc3RhdGUyLmRlZmF1bHRbbG9jYXRpb25dLmxhdGl0dWRlXSkuYWRkVG8obWFwKTtcbiAgfVxufVxuXG4vKipcbiAqIFJldHVybiBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHN0YXRpb25zIHdpdGhpbiBzdGF0ZS5tYXhXYWxraW5nRGlzdGFuY2Ugb2YgbG9jYXRpb24uXG4gKiBAcGFyYW0ge1N0cmluZ30gbG9jYXRpb24gLSBvcmlnaW4gb3IgZGVzdGluYXRpb25cbiAqL1xuZnVuY3Rpb24gZ2V0U3RhdGlvbnNOZWFyKGxvY2F0aW9uKSB7XG4gIGlmIChfc3RhdGUyLmRlZmF1bHQubWF4V2Fsa0Rpc3RhbmNlID09PSAwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgICBmZWF0dXJlczogW11cbiAgICB9O1xuICB9XG5cbiAgLy8gZ2V0IGFsbCBzdGF0aW9uc1xuICB2YXIgc3RhdGlvbnMgPSBfU3RhdGlvbkZlZWQyLmRlZmF1bHQuZ2V0U3RhdGlvbnNBcnJheSgpO1xuICAvLyBjb25zdCBzdGF0aW9ucyA9IG1hcC5xdWVyeVNvdXJjZUZlYXR1cmVzKCdzdGF0aW9ucy1zb3VyY2UnKTtcbiAgLy8gY2FuJ3QgdXNlIHF1ZXJ5U291cmNlRmVhdHVyZXM6IG9ubHkgbG9va3MgaW4gdmlzaWJsZSBhcmVhXG4gIC8vIGlmIG5lZWRlZCwgdXNlIGZpbHRlciB0byBsaW1pdCByZXN1bHQgc2V0IChvbmx5IHRob3NlIHcvIGF2YWlsYWJsZSBiaWtlcywgZXRjKS5cbiAgLy8gaHR0cHM6Ly93d3cubWFwYm94LmNvbS9tYXBib3gtZ2wtanMvYXBpLyNtYXAjcXVlcnlzb3VyY2VmZWF0dXJlc1xuXG4gIGNvbnNvbGUubG9nKCdnb3QgYWxsIHN0YXRpb25zOyBzZWFyY2hpbmcgd2l0aGluICcgKyBfc3RhdGUyLmRlZmF1bHQubWF4V2Fsa0Rpc3RhbmNlLCBzdGF0aW9ucyk7XG5cbiAgLy8gdXNlIFR1cmYgdG8gZG8gYSBwcm94aW1pdHkgc2VhcmNoLlxuICAvLyBUT0RPOiBvciBiZXR0ZXIsIHVzZSBNYXB6ZW4gdG8gZG8gYW4gaXNvY2hyb25lIHNlYXJjaFxuICB2YXIgY2VudGVyID0gKDAsIF9oZWxwZXJzLnBvaW50KShbX3N0YXRlMi5kZWZhdWx0W2xvY2F0aW9uXS5sb25naXR1ZGUsIF9zdGF0ZTIuZGVmYXVsdFtsb2NhdGlvbl0ubGF0aXR1ZGVdKTtcbiAgdmFyIHNlYXJjaFdpdGhpbkZlYXR1cmVzID0gKDAsIF9oZWxwZXJzLmZlYXR1cmVDb2xsZWN0aW9uKShbKDAsIF9jaXJjbGUyLmRlZmF1bHQpKGNlbnRlciwgX3N0YXRlMi5kZWZhdWx0Lm1heFdhbGtEaXN0YW5jZSwgeyB1bml0czogJ21pbGVzJyB9KV0pO1xuICB2YXIgc3RhdGlvbkNvbGxlY3Rpb24gPSAoMCwgX2hlbHBlcnMuZmVhdHVyZUNvbGxlY3Rpb24pKHN0YXRpb25zKTtcblxuICB2YXIgbmVhcmJ5U3RhdGlvbnMgPSAoMCwgX3dpdGhpbjIuZGVmYXVsdCkoc3RhdGlvbkNvbGxlY3Rpb24sIHNlYXJjaFdpdGhpbkZlYXR1cmVzKTtcbiAgcmV0dXJuIG5lYXJieVN0YXRpb25zO1xufVxuXG4vKipcbiAqIFNwbGl0cyB0aGUgZ2l2ZW4gZ3JvdXAgb2Ygc3RhdGlvbnMgYmFzZWQgb24gYXZhaWxhYmlsaXR5IHN0YXR1cy5cbiAqIElmIGxvY2F0aW9uIGlzIG9yaWdpbiwgY3JpdGVyaWEgaXMgYmlrZXM7IG90aGVyd2lzZSBpdCdzIGRvY2tzLlxuICogUmV0dXJucyBbZW1wdHksIGF2YWlsYWJsZV0gd2hlcmUgZWFjaCBpcyBhIEYuQy5cbiAqIEBwYXJhbSB7U3RyaW5nfSBsb2NhdGlvbiAtIG9yaWdpbiBvciBkZXN0aW5hdGlvblxuICogQHBhcmFtIHt9IHN0YXRpb25zQ29sbGVjdGlvbiAtIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHN0YXRpb25zIGFscmVhZHkgbmVhciBsb2NhdGlvblxuICovXG4vLyBmdW5jdGlvbiBzcGxpdEVtcHR5T3JBdmFpbGFibGUobG9jYXRpb24sIHN0YXRpb25zQ29sbGVjdGlvbikge1xuLy8gICAvKlxuLy8gICBCaWtlc2hhcmUgc3RhdGlvbnMgd2l0aGluIHRoZSBzcGVjaWZpZWQgZGlzdGFuY2Ugb2YgdGhlIG9yaWdpblxuLy8gICAgICB0aGF0IGhhdmUgYmlrZXMgYXZhaWxhYmxlIHNob3VsZCBiZSBtYXJrZWQgZ3JlZW5cbi8vICAgICAgd2l0aCBubyBhdmFpbGFibGUgYmlrZXMgc2hvdWxkIGJlIG1hcmtlZCByZWRcblxuLy8gICBCaWtlc2hhcmUgc3RhdGlvbnMgd2l0aGluIHRoZSBzcGVjaWZpZWQgZGlzdGFuY2Ugb2YgdGhlIGRlc3RpbmF0aW9uXG4vLyAgICAgdGhhdCBoYXZlIGRvY2tzIGF2YWlsYWJsZSBzaG91bGQgYmUgbWFya2VkIGdyZWVuXG4vLyAgICAgdGhhdCBoYXZlIG5vIGRvY2tzIGF2YWlsYWJsZSBzaG91bGQgYmUgbWFya2VkIHJlZFxuLy8gICAqL1xuXG4vLyAgIGNvbnN0IHN0YXRpb25zID0gc3RhdGlvbnNDb2xsZWN0aW9uLmZlYXR1cmVzO1xuLy8gICBjb25zdCBhdmFpbGFibGVDcml0ZXJhID0gbG9jYXRpb24gPT09ICdvcmlnaW4nID8gJ2F2YWlsYWJsZUJpa2VzJyA6ICdhdmFpbGFibGVEb2Nrcyc7XG5cbi8vICAgY29uc3QgZW1wdHkgPSBbXTtcbi8vICAgY29uc3QgYXZhaWxhYmxlID0gW107XG5cbi8vICAgc3RhdGlvbnMuZm9yRWFjaCgoc3RhdGlvbikgPT4ge1xuLy8gICAgIGlmIChzdGF0aW9uLnByb3BlcnRpZXNbYXZhaWxhYmxlQ3JpdGVyYV0gPiAwKSB7XG4vLyAgICAgICBhdmFpbGFibGUucHVzaChzdGF0aW9uKTtcbi8vICAgICB9IGVsc2Uge1xuLy8gICAgICAgZW1wdHkucHVzaChzdGF0aW9uKTtcbi8vICAgICB9XG4vLyAgIH0pO1xuXG4vLyAgIHJldHVybiBbZW1wdHksIGF2YWlsYWJsZV07XG4vLyB9XG5cblxuLyoqXG4gKiBIaWdobGlnaHQgdGhlIGdpdmVuIHN0YXRpb25zIG5lYXIgdGhlIGdpdmVuIGxvY2F0aW9uXG4gKiBAcGFyYW0ge1N0cmluZ30gbG9jYXRpb24gLSBvcmlnaW4gb3IgZGVzdGluYXRpb25cbiAqIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb259IHN0YXRpb25zIG5lYXJieSB0aGUgb3JpZ2luIG9yIGRlc3RpbmF0aW9uIHRvIGhpZ2hsaWdodFxuICovXG5mdW5jdGlvbiBzaG93U3RhdGlvbnNOZWFyKGxvY2F0aW9uLCBzdGF0aW9ucykge1xuICAvLyBkcmF3IHN0YXRpb25zIGFzIG1hcmtlcnMgb24gdGhlIG1hcFxuICBjb25zb2xlLmxvZygnc2hvd2luZyBzdGF0aW9ucyBuZWFyYnkgJyArIGxvY2F0aW9uICsgJzogJywgc3RhdGlvbnMpO1xuXG4gIHZhciBsYXllckFuZFNvdXJjZUlkID0gZ2V0TGF5ZXJJZEZvclN0YXRpb25zTmVhcihsb2NhdGlvbik7XG4gIHZhciBhdmFpbGFibGVDcml0ZXJhID0gbG9jYXRpb24gPT09ICdvcmlnaW4nID8gJ2F2YWlsYWJsZUJpa2VzJyA6ICdhdmFpbGFibGVEb2Nrcyc7XG5cbiAgY29uc29sZS5sb2coJ2FkZGluZyBtYXRjaGluZyBuZWFyYnkgc3RhdGlvbnMnKTtcbiAgbWFwLmdldFNvdXJjZShsYXllckFuZFNvdXJjZUlkKS5zZXREYXRhKHN0YXRpb25zKTtcblxuICB2YXIgbGF5ZXIgPSBtYXAuZ2V0TGF5ZXIobGF5ZXJBbmRTb3VyY2VJZCk7XG4gIGlmICghbGF5ZXIpIHtcbiAgICAvLyBzaG91bGQgb25seSBuZWVkIHRvIGRvIHRoaXMgb25jZS5cbiAgICAvLyBDcmVhdGUgYSBuZXcgY2lyY2xlIGxheWVyIGZyb20gdGhlIGRhdGEgc291cmNlXG4gICAgbWFwLmFkZExheWVyKHtcbiAgICAgIGlkOiBsYXllckFuZFNvdXJjZUlkLFxuICAgICAgdHlwZTogJ2NpcmNsZScsXG4gICAgICBzb3VyY2U6IGxheWVyQW5kU291cmNlSWQsXG4gICAgICBwYWludDoge1xuICAgICAgICAnY2lyY2xlLXJhZGl1cyc6IDEyLCAvLyBiaWtlc2hhcmUgaWNvbiBpcyAyNHB4IChzY2FsZWQgYnkgMS8yIHNvIDEyKVxuICAgICAgICAnY2lyY2xlLWNvbG9yJzoge1xuICAgICAgICAgIHByb3BlcnR5OiBhdmFpbGFibGVDcml0ZXJhLFxuICAgICAgICAgIHN0b3BzOiBbXG4gICAgICAgICAgLy8gXCJhdmFpbGFibGVcIjogMCAgIC0+IGNpcmNsZSBjb2xvciB3aWxsIGJlIHJlZFxuICAgICAgICAgIFswLCAncmVkJ10sXG4gICAgICAgICAgLy8gXCJhdmFpbGFibGVcIjogMSBvciBtb3JlIC0+IGNpcmNsZSBjb2xvciB3aWxsIGJlIGdyZWVuXG4gICAgICAgICAgWzEsICdsaWdodHNlYWdyZWVuJ11dXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCAnYmlrZXNoYXJlLXN0YXRpb25zJyk7IC8vIHBsYWNlIGNvbG9yIGJlbmVhdGggYmlrZXNoYXJlIGljb25zXG4gIH1cbn1cblxuZnVuY3Rpb24gY2xlYXJTdGF0aW9uc05lYXIobG9jYXRpb24pIHtcbiAgdmFyIGxheWVySUQgPSBnZXRMYXllcklkRm9yU3RhdGlvbnNOZWFyKGxvY2F0aW9uKTtcbiAgdmFyIGxheWVyID0gbWFwLmdldExheWVyKGxheWVySUQpO1xuICBpZiAobGF5ZXIpIHtcbiAgICBtYXAucmVtb3ZlTGF5ZXIobGF5ZXJJRCk7XG4gIH1cbn1cblxuLyoqXG4gKiBVcGRhdGUgc3RhdGlvbiByZXN1bHRzIG5lYXJieS5cbiAqIFdoZW4gdGhlIG9yaWdpbiBvciBkZXN0aW5hdGlvbiBpcyBzZXQsXG4gKiBvciB3aGVuIHRoZSB1c2VyJ3MgbWF4IHdhbGtpbmcgZGlzdGFuY2UgcHJlZmVyZW5jZSBjaGFuZ2VzLFxuICogdXBkYXRlIG5lYXJieSByZXN1bHRzLlxuICovXG5mdW5jdGlvbiBtYXBVcGRhdGVOZWFyYnkoKSB7XG4gIC8vIGNvbnNvbGUubG9nKCdtYXB1cGRhdGVuZWFyYnkoKScpO1xuXG4gIFsnb3JpZ2luJywgJ2Rlc3RpbmF0aW9uJ10uZm9yRWFjaChmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICBpZiAoX3N0YXRlMi5kZWZhdWx0W2xvY2F0aW9uXS5sYXRpdHVkZSAmJiBfc3RhdGUyLmRlZmF1bHRbbG9jYXRpb25dLmxvbmdpdHVkZSkge1xuICAgICAgdmFyIG5lYXJieVN0YXRpb25zID0gZ2V0U3RhdGlvbnNOZWFyKGxvY2F0aW9uKTtcbiAgICAgIGNvbnNvbGUubG9nKCdnb3Qgc3RhdGlvbnMgbmVhciAnICsgbG9jYXRpb24sIG5lYXJieVN0YXRpb25zKTtcbiAgICAgIHNob3dTdGF0aW9uc05lYXIobG9jYXRpb24sIG5lYXJieVN0YXRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaWYgd2UgKmRvbid0KiBoYXZlIGEgcGFydGljdWxhciBsb2NhdGlvbiBlbmRwb2ludCxcbiAgICAgIC8vIHRoZW4gd2UgbmVlZCB0byBjbGVhciB0aGUgbWFya2Vyc1xuICAgICAgY2xlYXJTdGF0aW9uc05lYXIobG9jYXRpb24pO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogUmVtb3ZlIHRoZSByb3V0ZSBsYXllciwgaWYgaXQgZXhpc3RlZC5cbiAqIEByZXR1cm4gdW5kZWZpbmVkXG4gKi9cbmZ1bmN0aW9uIG1hcENsZWFyUm91dGUoKSB7XG4gIHZhciByb3V0ZUxheWVyID0gbWFwLmdldExheWVyKCdyb3V0ZScpO1xuICBpZiAocm91dGVMYXllcikge1xuICAgIG1hcC5yZW1vdmVMYXllcigncm91dGUnKTtcbiAgfVxufVxuXG4vKipcbiAqIFVwZGF0ZXMgbWFwJ3Mgcm91dGUuXG4gKiBJZiB0aGUgc3RhcnQgYW5kIGVuZHBvaW50IGFyZSBrbm93biwgdGhlIHJvdXRlIGlzIHVwZGF0ZWQuXG4gKiBJZiBlaXRoZXIgaXMgdW5rb3duLCB3ZSBjbGVhciB0aGUgcm91dGUuXG4gKiBAcmV0dXJuIHVuZGVmaW5lZFxuICovXG5mdW5jdGlvbiBtYXBVcGRhdGVSb3V0ZSgpIHtcbiAgaWYgKF9zdGF0ZTIuZGVmYXVsdC5vcmlnaW4ubGF0aXR1ZGUgJiYgX3N0YXRlMi5kZWZhdWx0LmRlc3RpbmF0aW9uLmxhdGl0dWRlKSB7XG4gICAgKDAsIF9yb3V0ZXIyLmRlZmF1bHQpKF9zdGF0ZTIuZGVmYXVsdC5vcmlnaW4sIF9zdGF0ZTIuZGVmYXVsdC5kZXN0aW5hdGlvbiwgZnVuY3Rpb24gKHJvdXRlTGluZVN0cmluZykge1xuICAgICAgdmFyIHNvdXJjZSA9IG1hcC5nZXRTb3VyY2UoJ3JvdXRlJyk7XG4gICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgIHNvdXJjZS5zZXREYXRhKHJvdXRlTGluZVN0cmluZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VyY2UgPSBtYXAuYWRkU291cmNlKCdyb3V0ZScsIHtcbiAgICAgICAgICB0eXBlOiAnZ2VvanNvbicsXG4gICAgICAgICAgZGF0YTogcm91dGVMaW5lU3RyaW5nXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBwbGFjZSByb3V0ZSBiZW5lYXRoIG5lYXJieSBtYXJrZXJzICh0aGVtc2VsdmVzIGJlbmVhdGggc3RhdGlvbnMpXG4gICAgICB2YXIgbGF5ZXJBYm92ZSA9IGdldExheWVySWRGb3JTdGF0aW9uc05lYXIoJ29yaWdpbicpO1xuXG4gICAgICAvLyBjcmVhdGluZyBzb3VyY2UgZm9yIHRoZSBmaXJzdCB0aW1lOyBhZGQgYSBsYXllciBmb3IgaXQuXG4gICAgICAvLyBoYXZlIHRvIGRvIHRoaXMgZXZlcnkgdGltZT9cbiAgICAgIG1hcC5hZGRMYXllcih7XG4gICAgICAgIGlkOiAncm91dGUnLFxuICAgICAgICB0eXBlOiAnbGluZScsXG4gICAgICAgIHNvdXJjZTogJ3JvdXRlJyxcbiAgICAgICAgbGF5b3V0OiB7XG4gICAgICAgICAgJ2xpbmUtam9pbic6ICdyb3VuZCcsXG4gICAgICAgICAgJ2xpbmUtY2FwJzogJ3JvdW5kJ1xuICAgICAgICB9LFxuICAgICAgICBwYWludDoge1xuICAgICAgICAgICdsaW5lLWNvbG9yJzogJyM0QUIyRjcnLCAvLyBnb29nbGUgbWFwcyBibHVlICM4ODhcbiAgICAgICAgICAnbGluZS13aWR0aCc6IDhcbiAgICAgICAgfVxuICAgICAgfSwgbGF5ZXJBYm92ZSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gd2UgZG9uJ3QgaGF2ZSBib3RoIGVuZCBwb2ludHMgLSBlbnN1cmUgbm8gcm91dGUgc2hvd25cbiAgICBtYXBDbGVhclJvdXRlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgb3IgcmVtb3ZlIGVuZHBvaW50IG1hcmtlciBhbmQgdXBkYXRlIG5lYXJieSBzdGF0aW9ucy5cbiAqIEBwYXJhbSB7U3RyaW5nfSBsb2NhdGlvbiBvcmlnaW4gb3IgZGVzdGluYXRpb25cbiAqL1xuZnVuY3Rpb24gbWFwVXBkYXRlRGlyZWN0aW9uc0VuZHBvaW50KGxvY2F0aW9uKSB7XG4gIC8vIGNvbnNvbGUubG9nKCdtYXBVcGRhdGVEaXJlY3Rpb25zRW5kcG9pbnQoKScpO1xuICBtYXBVcGRhdGVSb3V0ZSgpO1xuICBpZiAoX3N0YXRlMi5kZWZhdWx0W2xvY2F0aW9uXS5sYXRpdHVkZSA9PT0gbnVsbCAmJiBlbmRwb2ludE1hcmtlcnNbbG9jYXRpb25dKSB7XG4gICAgLy8gY2xlYXIgbWFya2VyXG4gICAgY29uc29sZS5sb2coJ2NsZWFyaW5nICcgKyBsb2NhdGlvbiArICcgbWFya2VyIChubyBsYXRpdHVkZSknKTtcbiAgICBlbmRwb2ludE1hcmtlcnNbbG9jYXRpb25dLnJlbW92ZSgpO1xuICAgIGVuZHBvaW50TWFya2Vyc1tsb2NhdGlvbl0gPSBudWxsO1xuICB9IGVsc2UgaWYgKF9zdGF0ZTIuZGVmYXVsdFtsb2NhdGlvbl0ubGF0aXR1ZGUgIT09IG51bGwpIHtcbiAgICByZW5kZXJEaXJlY3Rpb25zTWFya2VyKGxvY2F0aW9uKTtcbiAgICBmbHlUbyhsb2NhdGlvbik7XG4gIH1cbiAgbWFwVXBkYXRlTmVhcmJ5KCk7XG59XG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0ge1xuICBtYXBib3hUb2tlbjogJ3BrLmV5SjFJam9pZEdWamFHbGxjMmhoY21zaUxDSmhJam9pWTJvNU5tVnBPVEkxTUROeE1qSjJjR0p1Wkc0NGVURXhPU0o5LksybEkzRFV6TnZBRDNMQUF0ZndsQkEnLFxuICBtYXBTdHlsZTogJ21hcGJveDovL3N0eWxlcy90ZWNoaWVzaGFyay9jajk3NjkwcjAwYmNjMnN0aGtxeG44ZjJ2JyxcbiAgc3RhdGlvbnNVcmw6ICdodHRwczovL2xpdC1iZWFjaC0yMTU4Ni5oZXJva3VhcHAuY29tLycgLy8gZ2VvanNvbiBtaXJyb3Igb2Ygc3RhdGlvbnMgYXBpXG59O1xuXG4vKioqLyB9KSxcbi8qIDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBleHRlbmRcblxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuZnVuY3Rpb24gZXh0ZW5kKCkge1xuICAgIHZhciB0YXJnZXQgPSB7fVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXVxuXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXRcbn1cblxuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEFQSV9PUklHSU46ICdodHRwczovL2FwaS5tYXBib3guY29tJyxcbiAgRVZFTlRfUFJPR1JFU1NfRE9XTkxPQUQ6ICdkb3dubG9hZFByb2dyZXNzJyxcbiAgRVZFTlRfUFJPR1JFU1NfVVBMT0FEOiAndXBsb2FkUHJvZ3Jlc3MnLFxuICBFVkVOVF9FUlJPUjogJ2Vycm9yJyxcbiAgRVZFTlRfUkVTUE9OU0U6ICdyZXNwb25zZScsXG4gIEVSUk9SX0hUVFA6ICdIdHRwRXJyb3InLFxuICBFUlJPUl9SRVFVRVNUX0FCT1JURUQ6ICdSZXF1ZXN0QWJvcnRlZEVycm9yJ1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMucmV2ZXJzZUdlb2NvZGUgPSByZXZlcnNlR2VvY29kZTtcbmV4cG9ydHMuZ2VvY29kZSA9IGdlb2NvZGU7XG5leHBvcnRzLnNldEdlb2NkZXJDZW50ZXIgPSBzZXRHZW9jZGVyQ2VudGVyO1xuZXhwb3J0cy5zZXRHZW9jb2RlckJvdW5kcyA9IHNldEdlb2NvZGVyQm91bmRzO1xuXG52YXIgX2dlb2NvZGluZyA9IF9fd2VicGFja19yZXF1aXJlX18oNjMpO1xuXG52YXIgX2dlb2NvZGluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZW9jb2RpbmcpO1xuXG52YXIgX2NvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfY29uZmlnMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbmZpZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBnZW9jb2RpbmdDbGllbnQgPSAoMCwgX2dlb2NvZGluZzIuZGVmYXVsdCkoeyBhY2Nlc3NUb2tlbjogX2NvbmZpZzIuZGVmYXVsdC5tYXBib3hUb2tlbiB9KTtcblxuLy8gRnJvbSBNYXBib3g6XG4vLyBcIiBCaWFzIHRoZSByZXNwb25zZSB0byBmYXZvciByZXN1bHRzIHRoYXQgYXJlIGNsb3NlciB0byB0aGlzIGxvY2F0aW9uLFxuLy8gcHJvdmlkZWQgYXMgdHdvIGNvbW1hLXNlcGFyYXRlZCBjb29yZGluYXRlcyBpbiBsb25naXR1ZGUsbGF0aXR1ZGUgb3JkZXIuXCJcbnZhciBwcm94aW1pdHkgPSBudWxsO1xuXG4vLyBMaW1pdCByZXN1bHRzIHRvIG9ubHkgdGhvc2UgY29udGFpbmVkIHdpdGhpbiB0aGUgc3VwcGxpZWQgYm91bmRpbmcgYm94LlxuLy8gQm91bmRpbmcgYm94ZXMgc2hvdWxkIGJlIHN1cHBsaWVkIGFzIGZvdXIgbnVtYmVycyBzZXBhcmF0ZWQgYnkgY29tbWFzLFxuLy8gaW4gbWluTG9uLG1pbkxhdCxtYXhMb24sbWF4TGF0IG9yZGVyLiBUaGUgYm91bmRpbmcgYm94IGNhbm5vdCBjcm9zc1xuLy8gdGhlIDE4MHRoIG1lcmlkaWFuLlxudmFyIGJib3ggPSBudWxsO1xuXG4vKipcbiAqIFJldmVyc2UgR2VvY29kZSBsYXQvbG5nIC0tIHVzaW5nIE1hcGJveCB1bmRlciB0aGUgaG9vZC5cbiAqIEBwYXJhbSB7Kn0gbGF0XG4gKiBAcGFyYW0geyp9IGxuZ1xuICogQHBhcmFtIHsqfSBjYWxsYmFjazogKGVyciwgZ2VvRGF0YSkgPT4gYW55XG4gKi9cbmZ1bmN0aW9uIHJldmVyc2VHZW9jb2RlKGxhdCwgbG5nLCBjYWxsYmFjaykge1xuICAvLyBSZXZlcnNlIGdlb2NvZGUgY29vcmRpbmF0ZXMgdG8gYWRkcmVzcy5cbiAgLy8gZ2VvLnJldmVyc2VHZW9jb2RlKCdtYXBib3gucGxhY2VzJywgbG5nLCBsYXQsIChlcnIsIGdlb0RhdGEpID0+IHtcbiAgLy8gICBjYWxsYmFjayhlcnIsIGdlb0RhdGEpO1xuICAvLyB9KTtcblxuICBnZW9jb2RpbmdDbGllbnQucmV2ZXJzZUdlb2NvZGUoe1xuICAgIHF1ZXJ5OiBbbG5nLCBsYXRdLFxuICAgIGxpbWl0OiAyXG4gIH0pLnNlbmQoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgIC8vIG1hdGNoIGlzIGEgR2VvSlNPTiBkb2N1bWVudCB3aXRoIGdlb2NvZGluZyBtYXRjaGVzXG4gICAgdmFyIG1hdGNoID0gcmVzcG9uc2UuYm9keTtcbiAgICAvLyBjb25zb2xlLmxvZygncmV2ZXJzZSBnZW9jb2RlIHJlc3VsdDogJywgbWF0Y2gpO1xuICAgIGNhbGxiYWNrKG51bGwsIG1hdGNoKTtcbiAgfSk7XG59XG5cbi8qKlxuICogR2VvY29kZSBhZGRyZXNzIC0gdXNpbmcgTWFwYm94IHVuZGVyIHRoZSBob29kLlxuICogQHBhcmFtIHtzdHJpbmd9IGFkZHJlc3NcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrOiAoZXJyLCBnZW9EYXRhKSA9PiBhbnlcbiAqL1xuZnVuY3Rpb24gZ2VvY29kZShhZGRyZXNzLCBjYWxsYmFjaykge1xuICAvLyBHZW9jb2RlIGFuIGFkZHJlc3MgdG8gY29vcmRpbmF0ZXNcbiAgLy8gZ2VvLmdlb2NvZGUoJ21hcGJveC5wbGFjZXMnLCBhZGRyZXNzLCAoZXJyLCBnZW9EYXRhKSA9PiB7XG4gIC8vICAgY2FsbGJhY2soZXJyLCBnZW9EYXRhKTtcbiAgLy8gfSk7XG4gIGdlb2NvZGluZ0NsaWVudC5mb3J3YXJkR2VvY29kZSh7XG4gICAgcXVlcnk6IGFkZHJlc3MsXG4gICAgbGltaXQ6IDUsXG4gICAgYmJveDogYmJveCxcbiAgICBwcm94aW1pdHk6IHByb3hpbWl0eVxuICB9KS5zZW5kKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICB2YXIgbWF0Y2ggPSByZXNwb25zZS5ib2R5O1xuICAgIC8vIGNvbnNvbGUubG9nKCdnZW9jb2RlIHJlc3VsdDogJywgbWF0Y2gpO1xuICAgIGNhbGxiYWNrKG51bGwsIG1hdGNoKTtcbiAgfSk7XG59XG5cbi8qKlxuICogQmlhcyBnZW9jb2RpbmcgcmVzdWx0cyBuZWFyIHRoZSBjZW50ZXIuXG4gKiBAcGFyYW0ge1tsb25naXR1ZGUsbGF0aXR1ZGVdfSBjZW50ZXIgZm9yIHByb3hpbWl0eSBiaWFzXG4gKi9cbmZ1bmN0aW9uIHNldEdlb2NkZXJDZW50ZXIoY2VudGVyKSB7XG4gIHByb3hpbWl0eSA9IGNlbnRlci5zbGljZSgpO1xufVxuXG4vKipcbiAqIFNlYXJjaCB3aXRoaW4gdGhlIGdpdmVuIGJvdW5kaW5nIGJveFxuICogQHBhcmFtIHtzdHJpbmd9IGJveCBib3VuZGluZyBib3ggc3RyaW5nIGluIGZvcm1hdCBtaW5YLG1pblksbWF4WCxtYXhZXG4gKi9cbmZ1bmN0aW9uIHNldEdlb2NvZGVyQm91bmRzKGJveCkge1xuICBiYm94ID0gYm94LnNwbGl0KCcsJykubWFwKHBhcnNlRmxvYXQpO1xufVxuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHVzZVNvdXJjZU1hcCkge1xuXHR2YXIgbGlzdCA9IFtdO1xuXG5cdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuXHRcdHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHRcdFx0dmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cdFx0XHRpZihpdGVtWzJdKSB7XG5cdFx0XHRcdHJldHVybiBcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGNvbnRlbnQgKyBcIn1cIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBjb250ZW50O1xuXHRcdFx0fVxuXHRcdH0pLmpvaW4oXCJcIik7XG5cdH07XG5cblx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3Rcblx0bGlzdC5pID0gZnVuY3Rpb24obW9kdWxlcywgbWVkaWFRdWVyeSkge1xuXHRcdGlmKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKVxuXHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xuXHRcdHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XG5cdFx0XHRpZih0eXBlb2YgaWQgPT09IFwibnVtYmVyXCIpXG5cdFx0XHRcdGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcblx0XHR9XG5cdFx0Zm9yKGkgPSAwOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBtb2R1bGVzW2ldO1xuXHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxuXHRcdFx0Ly8gdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBub3QgMTAwJSBwZXJmZWN0IGZvciB3ZWlyZCBtZWRpYSBxdWVyeSBjb21iaW5hdGlvbnNcblx0XHRcdC8vICB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXG5cdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxuXHRcdFx0aWYodHlwZW9mIGl0ZW1bMF0gIT09IFwibnVtYmVyXCIgfHwgIWFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcblx0XHRcdFx0aWYobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xuXHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuXHRcdFx0XHR9IGVsc2UgaWYobWVkaWFRdWVyeSkge1xuXHRcdFx0XHRcdGl0ZW1bMl0gPSBcIihcIiArIGl0ZW1bMl0gKyBcIikgYW5kIChcIiArIG1lZGlhUXVlcnkgKyBcIilcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRsaXN0LnB1c2goaXRlbSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRyZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG5cdHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJztcblx0dmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXHRpZiAoIWNzc01hcHBpbmcpIHtcblx0XHRyZXR1cm4gY29udGVudDtcblx0fVxuXG5cdGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcblx0XHR2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcblx0XHR2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuXHRcdFx0cmV0dXJuICcvKiMgc291cmNlVVJMPScgKyBjc3NNYXBwaW5nLnNvdXJjZVJvb3QgKyBzb3VyY2UgKyAnICovJ1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG5cdH1cblxuXHRyZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufVxuXG4vLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuXHR2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcblx0dmFyIGRhdGEgPSAnc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsJyArIGJhc2U2NDtcblxuXHRyZXR1cm4gJy8qIyAnICsgZGF0YSArICcgKi8nO1xufVxuXG5cbi8qKiovIH0pLFxuLyogNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuXG52YXIgc3R5bGVzSW5Eb20gPSB7fTtcblxudmFyXHRtZW1vaXplID0gZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gbWVtbztcblx0fTtcbn07XG5cbnZhciBpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG5cdC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcblx0Ly8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuXHQvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcblx0Ly8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG5cdHJldHVybiB3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYjtcbn0pO1xuXG52YXIgZ2V0RWxlbWVudCA9IChmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW8gPSB7fTtcblxuXHRyZXR1cm4gZnVuY3Rpb24oc2VsZWN0b3IpIHtcblx0XHRpZiAodHlwZW9mIG1lbW9bc2VsZWN0b3JdID09PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHR2YXIgc3R5bGVUYXJnZXQgPSBmbi5jYWxsKHRoaXMsIHNlbGVjdG9yKTtcblx0XHRcdC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cdFx0XHRpZiAoc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHQvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuXHRcdFx0XHRcdC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcblx0XHRcdFx0fSBjYXRjaChlKSB7XG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRtZW1vW3NlbGVjdG9yXSA9IHN0eWxlVGFyZ2V0O1xuXHRcdH1cblx0XHRyZXR1cm4gbWVtb1tzZWxlY3Rvcl1cblx0fTtcbn0pKGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0cmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KVxufSk7XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyXHRzaW5nbGV0b25Db3VudGVyID0gMDtcbnZhclx0c3R5bGVzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXG52YXJcdGZpeFVybHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XG5cdGlmICh0eXBlb2YgREVCVUcgIT09IFwidW5kZWZpbmVkXCIgJiYgREVCVUcpIHtcblx0XHRpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG5cdH1cblxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRvcHRpb25zLmF0dHJzID0gdHlwZW9mIG9wdGlvbnMuYXR0cnMgPT09IFwib2JqZWN0XCIgPyBvcHRpb25zLmF0dHJzIDoge307XG5cblx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0aWYgKCFvcHRpb25zLnNpbmdsZXRvbikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgPGhlYWQ+IGVsZW1lbnRcblx0aWYgKCFvcHRpb25zLmluc2VydEludG8pIG9wdGlvbnMuaW5zZXJ0SW50byA9IFwiaGVhZFwiO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiB0aGUgdGFyZ2V0XG5cdGlmICghb3B0aW9ucy5pbnNlcnRBdCkgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcblxuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGUgKG5ld0xpc3QpIHtcblx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdH1cblxuXHRcdGlmKG5ld0xpc3QpIHtcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCwgb3B0aW9ucyk7XG5cdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cblx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykgZG9tU3R5bGUucGFydHNbal0oKTtcblxuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn07XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tIChzdHlsZXMsIG9wdGlvbnMpIHtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdGlmKGRvbVN0eWxlKSB7XG5cdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyAobGlzdCwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGVzID0gW107XG5cdHZhciBuZXdTdHlsZXMgPSB7fTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0dmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG5cdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcblx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cblx0XHRpZighbmV3U3R5bGVzW2lkXSkgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRlbHNlIG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0fVxuXG5cdHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudCAob3B0aW9ucywgc3R5bGUpIHtcblx0dmFyIHRhcmdldCA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvKVxuXG5cdGlmICghdGFyZ2V0KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnRJbnRvJyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG5cdH1cblxuXHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZXNJbnNlcnRlZEF0VG9wW3N0eWxlc0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XG5cblx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcblx0XHRpZiAoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG5cdFx0fSBlbHNlIGlmIChsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHRcdH1cblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGUpO1xuXHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKSB7XG5cdFx0dmFyIG5leHRTaWJsaW5nID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8gKyBcIiBcIiArIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKTtcblx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBuZXh0U2libGluZyk7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiW1N0eWxlIExvYWRlcl1cXG5cXG4gSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcgKCdvcHRpb25zLmluc2VydEF0JykgZm91bmQuXFxuIE11c3QgYmUgJ3RvcCcsICdib3R0b20nLCBvciBPYmplY3QuXFxuIChodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlciNpbnNlcnRhdClcXG5cIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50IChzdHlsZSkge1xuXHRpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXHRzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcblxuXHR2YXIgaWR4ID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlKTtcblx0aWYoaWR4ID49IDApIHtcblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cblx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXG5cdGFkZEF0dHJzKHN0eWxlLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlKTtcblxuXHRyZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxpbmtFbGVtZW50IChvcHRpb25zKSB7XG5cdHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG5cblx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHRvcHRpb25zLmF0dHJzLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuXG5cdGFkZEF0dHJzKGxpbmssIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGluayk7XG5cblx0cmV0dXJuIGxpbms7XG59XG5cbmZ1bmN0aW9uIGFkZEF0dHJzIChlbCwgYXR0cnMpIHtcblx0T2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGUgKG9iaiwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGUsIHVwZGF0ZSwgcmVtb3ZlLCByZXN1bHQ7XG5cblx0Ly8gSWYgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gd2FzIGRlZmluZWQsIHJ1biBpdCBvbiB0aGUgY3NzXG5cdGlmIChvcHRpb25zLnRyYW5zZm9ybSAmJiBvYmouY3NzKSB7XG5cdCAgICByZXN1bHQgPSBvcHRpb25zLnRyYW5zZm9ybShvYmouY3NzKTtcblxuXHQgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgXHQvLyBJZiB0cmFuc2Zvcm0gcmV0dXJucyBhIHZhbHVlLCB1c2UgdGhhdCBpbnN0ZWFkIG9mIHRoZSBvcmlnaW5hbCBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIHJ1bm5pbmcgcnVudGltZSB0cmFuc2Zvcm1hdGlvbnMgb24gdGhlIGNzcy5cblx0ICAgIFx0b2JqLmNzcyA9IHJlc3VsdDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICBcdC8vIElmIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBkb24ndCBhZGQgdGhpcyBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIGNvbmRpdGlvbmFsIGxvYWRpbmcgb2YgY3NzXG5cdCAgICBcdHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIFx0XHQvLyBub29wXG5cdCAgICBcdH07XG5cdCAgICB9XG5cdH1cblxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblxuXHRcdHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuXG5cdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcblxuXHR9IGVsc2UgaWYgKFxuXHRcdG9iai5zb3VyY2VNYXAgJiZcblx0XHR0eXBlb2YgVVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiXG5cdCkge1xuXHRcdHN0eWxlID0gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXG5cdFx0XHRpZihzdHlsZS5ocmVmKSBVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlLmhyZWYpO1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXHRcdH07XG5cdH1cblxuXHR1cGRhdGUob2JqKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUgKG5ld09iaikge1xuXHRcdGlmIChuZXdPYmopIHtcblx0XHRcdGlmIChcblx0XHRcdFx0bmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJlxuXHRcdFx0XHRuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJlxuXHRcdFx0XHRuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cblx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblx0fTtcbn0pKCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcgKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcblx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xuXG5cdGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG5cdFx0XHRzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyAoc3R5bGUsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXG5cdGlmKG1lZGlhKSB7XG5cdFx0c3R5bGUuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXG5cdH1cblxuXHRpZihzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlLmZpcnN0Q2hpbGQpIHtcblx0XHRcdHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblxuXHRcdHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpbmsgKGxpbmssIG9wdGlvbnMsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cblx0Lypcblx0XHRJZiBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgaXNuJ3QgZGVmaW5lZCwgYnV0IHNvdXJjZW1hcHMgYXJlIGVuYWJsZWRcblx0XHRhbmQgdGhlcmUgaXMgbm8gcHVibGljUGF0aCBkZWZpbmVkIHRoZW4gbGV0cyB0dXJuIGNvbnZlcnRUb0Fic29sdXRlVXJsc1xuXHRcdG9uIGJ5IGRlZmF1bHQuICBPdGhlcndpc2UgZGVmYXVsdCB0byB0aGUgY29udmVydFRvQWJzb2x1dGVVcmxzIG9wdGlvblxuXHRcdGRpcmVjdGx5XG5cdCovXG5cdHZhciBhdXRvRml4VXJscyA9IG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzID09PSB1bmRlZmluZWQgJiYgc291cmNlTWFwO1xuXG5cdGlmIChvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyB8fCBhdXRvRml4VXJscykge1xuXHRcdGNzcyA9IGZpeFVybHMoY3NzKTtcblx0fVxuXG5cdGlmIChzb3VyY2VNYXApIHtcblx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxuXHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcblx0fVxuXG5cdHZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogXCJ0ZXh0L2Nzc1wiIH0pO1xuXG5cdHZhciBvbGRTcmMgPSBsaW5rLmhyZWY7XG5cblx0bGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuXHRpZihvbGRTcmMpIFVSTC5yZXZva2VPYmplY3RVUkwob2xkU3JjKTtcbn1cblxuXG4vKioqLyB9KSxcbi8qIDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciB4dGVuZCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG52YXIgdiA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXG5mdW5jdGlvbiBmaWxlKHZhbHVlKSB7XG4gIC8vIElmIHdlJ3JlIGluIGEgYnJvd3NlciBzbyBCbG9iIGlzIGF2YWlsYWJsZSwgdGhlIGZpbGUgbXVzdCBiZSB0aGF0LlxuICAvLyBJbiBOb2RlLCBob3dldmVyLCBpdCBjb3VsZCBiZSBhIGZpbGVwYXRoIG9yIGEgcGlwZWFibGUgKFJlYWRhYmxlKSBzdHJlYW0uXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIGdsb2JhbC5CbG9iIHx8IHZhbHVlIGluc3RhbmNlb2YgZ2xvYmFsLkFycmF5QnVmZmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiAnQmxvYiBvciBBcnJheUJ1ZmZlcic7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdmFsdWUucGlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJldHVybiAnRmlsZW5hbWUgb3IgUmVhZGFibGUgc3RyZWFtJztcbn1cblxuZnVuY3Rpb24gYXNzZXJ0U2hhcGUodmFsaWRhdG9yT2JqLCBhcGlOYW1lKSB7XG4gIHJldHVybiB2LmFzc2VydCh2LnN0cmljdFNoYXBlKHZhbGlkYXRvck9iaiksIGFwaU5hbWUpO1xufVxuXG5mdW5jdGlvbiBkYXRlKHZhbHVlKSB7XG4gIHZhciBtc2cgPSAnZGF0ZSc7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgIHJldHVybiBtc2c7XG4gIH1cbiAgdHJ5IHtcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgICBpZiAoZGF0ZS5nZXRUaW1lICYmIGlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xuICAgICAgcmV0dXJuIG1zZztcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gbXNnO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvb3JkaW5hdGVzKHZhbHVlKSB7XG4gIHJldHVybiB2LnR1cGxlKHYubnVtYmVyLCB2Lm51bWJlcikodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHh0ZW5kKHYsIHtcbiAgZmlsZTogZmlsZSxcbiAgZGF0ZTogZGF0ZSxcbiAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzLFxuICBhc3NlcnRTaGFwZTogYXNzZXJ0U2hhcGVcbn0pO1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg5KSkpXG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG52YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSxldmFsKShcInRoaXNcIik7XG59IGNhdGNoKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIilcblx0XHRnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG5cblxuLyoqKi8gfSksXG4vKiAxMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgTWFwaUNsaWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuLy8gVGhpcyB3aWxsIGNyZWF0ZSB0aGUgZW52aXJvbm1lbnQtYXBwcm9wcmlhdGUgY2xpZW50LlxudmFyIGNyZWF0ZUNsaWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNTIpO1xuXG5mdW5jdGlvbiBjcmVhdGVTZXJ2aWNlRmFjdG9yeShTZXJ2aWNlUHJvdG90eXBlKSB7XG4gIHJldHVybiBmdW5jdGlvbihjbGllbnRPckNvbmZpZykge1xuICAgIHZhciBjbGllbnQ7XG4gICAgaWYgKE1hcGlDbGllbnQucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoY2xpZW50T3JDb25maWcpKSB7XG4gICAgICBjbGllbnQgPSBjbGllbnRPckNvbmZpZztcbiAgICB9IGVsc2Uge1xuICAgICAgY2xpZW50ID0gY3JlYXRlQ2xpZW50KGNsaWVudE9yQ29uZmlnKTtcbiAgICB9XG4gICAgdmFyIHNlcnZpY2UgPSBPYmplY3QuY3JlYXRlKFNlcnZpY2VQcm90b3R5cGUpO1xuICAgIHNlcnZpY2UuY2xpZW50ID0gY2xpZW50O1xuICAgIHJldHVybiBzZXJ2aWNlO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVNlcnZpY2VGYWN0b3J5O1xuXG5cbi8qKiovIH0pLFxuLyogMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIHBhcnNlVG9rZW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcbnZhciBNYXBpUmVxdWVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpO1xudmFyIGNvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbi8qKlxuICogQSBsb3ctbGV2ZWwgTWFwYm94IEFQSSBjbGllbnQuIFVzZSBpdCB0byBjcmVhdGUgc2VydmljZSBjbGllbnRzXG4gKiB0aGF0IHNoYXJlIHRoZSBzYW1lIGNvbmZpZ3VyYXRpb24uXG4gKlxuICogU2VydmljZXMgYW5kIGBNYXBpUmVxdWVzdGBzIHVzZSB0aGUgdW5kZXJseWluZyBgTWFwaUNsaWVudGAgdG9cbiAqIGRldGVybWluZSBob3cgdG8gY3JlYXRlLCBzZW5kLCBhbmQgYWJvcnQgcmVxdWVzdHMgaW4gYSB3YXlcbiAqIHRoYXQgaXMgYXBwcm9wcmlhdGUgdG8gdGhlIGNvbmZpZ3VyYXRpb24gYW5kIGVudmlyb25tZW50XG4gKiAoTm9kZSBvciB0aGUgYnJvd3NlcikuXG4gKlxuICogQGNsYXNzIE1hcGlDbGllbnRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIFRoZSBNYXBib3ggYWNjZXNzIHRva2VuIGFzc2lnbmVkXG4gKiAgIHRvIHRoaXMgY2xpZW50LlxuICovXG5cbmZ1bmN0aW9uIE1hcGlDbGllbnQob3B0aW9ucykge1xuICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMuYWNjZXNzVG9rZW4pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBjcmVhdGUgYSBjbGllbnQgd2l0aG91dCBhbiBhY2Nlc3MgdG9rZW4nKTtcbiAgfVxuICAvLyBUcnkgcGFyc2luZyB0aGUgYWNjZXNzIHRva2VuIHRvIGRldGVybWluZSByaWdodCBhd2F5IGlmIGl0J3MgdmFsaWQuXG4gIHBhcnNlVG9rZW4ob3B0aW9ucy5hY2Nlc3NUb2tlbik7XG5cbiAgdGhpcy5hY2Nlc3NUb2tlbiA9IG9wdGlvbnMuYWNjZXNzVG9rZW47XG4gIHRoaXMub3JpZ2luID0gb3B0aW9ucy5vcmlnaW4gfHwgY29uc3RhbnRzLkFQSV9PUklHSU47XG59XG5cbk1hcGlDbGllbnQucHJvdG90eXBlLmNyZWF0ZVJlcXVlc3QgPSBmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0KHJlcXVlc3RPcHRpb25zKSB7XG4gIHJldHVybiBuZXcgTWFwaVJlcXVlc3QodGhpcywgcmVxdWVzdE9wdGlvbnMpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBNYXBpQ2xpZW50O1xuXG5cbi8qKiovIH0pLFxuLyogMTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIGJhc2U2NCA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xuXG52YXIgdG9rZW5DYWNoZSA9IHt9O1xuXG5mdW5jdGlvbiBwYXJzZVRva2VuKHRva2VuKSB7XG4gIGlmICh0b2tlbkNhY2hlW3Rva2VuXSkge1xuICAgIHJldHVybiB0b2tlbkNhY2hlW3Rva2VuXTtcbiAgfVxuXG4gIHZhciBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XG4gIHZhciB1c2FnZSA9IHBhcnRzWzBdO1xuICB2YXIgcmF3UGF5bG9hZCA9IHBhcnRzWzFdO1xuICBpZiAoIXJhd1BheWxvYWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdG9rZW4nKTtcbiAgfVxuXG4gIHZhciBwYXJzZWRQYXlsb2FkID0gcGFyc2VQYXlsb2QocmF3UGF5bG9hZCk7XG5cbiAgdmFyIHJlc3VsdCA9IHtcbiAgICB1c2FnZTogdXNhZ2UsXG4gICAgdXNlcjogcGFyc2VkUGF5bG9hZC51XG4gIH07XG4gIGlmIChoYXMocGFyc2VkUGF5bG9hZCwgJ2EnKSkgcmVzdWx0LmF1dGhvcml6YXRpb24gPSBwYXJzZWRQYXlsb2FkLmE7XG4gIGlmIChoYXMocGFyc2VkUGF5bG9hZCwgJ2V4cCcpKSByZXN1bHQuZXhwaXJlcyA9IHBhcnNlZFBheWxvYWQuZXhwICogMTAwMDtcbiAgaWYgKGhhcyhwYXJzZWRQYXlsb2FkLCAnaWF0JykpIHJlc3VsdC5jcmVhdGVkID0gcGFyc2VkUGF5bG9hZC5pYXQgKiAxMDAwO1xuICBpZiAoaGFzKHBhcnNlZFBheWxvYWQsICdzY29wZXMnKSkgcmVzdWx0LnNjb3BlcyA9IHBhcnNlZFBheWxvYWQuc2NvcGVzO1xuICBpZiAoaGFzKHBhcnNlZFBheWxvYWQsICdjbGllbnQnKSkgcmVzdWx0LmNsaWVudCA9IHBhcnNlZFBheWxvYWQuY2xpZW50O1xuICBpZiAoaGFzKHBhcnNlZFBheWxvYWQsICdsbCcpKSByZXN1bHQubGFzdExvZ2luID0gcGFyc2VkUGF5bG9hZC5sbDtcbiAgaWYgKGhhcyhwYXJzZWRQYXlsb2FkLCAnaXUnKSkgcmVzdWx0LmltcGVyc29uYXRvciA9IHBhcnNlZFBheWxvYWQuaXU7XG5cbiAgdG9rZW5DYWNoZVt0b2tlbl0gPSByZXN1bHQ7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHBhcnNlUGF5bG9kKHJhd1BheWxvYWQpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShiYXNlNjQuZGVjb2RlKHJhd1BheWxvYWQpKTtcbiAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0b2tlbicpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhcyhvYmosIGtleSkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZVRva2VuO1xuXG5cbi8qKiovIH0pLFxuLyogMTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgb2JqZWN0IGJ5IHBpY2tpbmcgcHJvcGVydGllcyBvZmYgYW4gZXhpc3Rpbmcgb2JqZWN0LlxuICogVGhlIHNlY29uZCBwYXJhbSBjYW4gYmUgb3ZlcmxvYWRlZCBhcyBhIGNhbGxiYWNrIGZvclxuICogbW9yZSBmaW5lIGdyYWluZWQgcGlja2luZyBvZiBwcm9wZXJ0aWVzLlxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZVxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fGZ1bmN0aW9uKHN0cmluZywgT2JqZWN0KTpib29sZWFufSBrZXlzXG4gKiBAcmV0dXJucyB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBwaWNrKHNvdXJjZSwga2V5cykge1xuICB2YXIgZmlsdGVyID0gZnVuY3Rpb24oa2V5LCB2YWwpIHtcbiAgICByZXR1cm4ga2V5cy5pbmRleE9mKGtleSkgIT09IC0xICYmIHZhbCAhPT0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIGlmICh0eXBlb2Yga2V5cyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGZpbHRlciA9IGtleXM7XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmtleXMoc291cmNlKVxuICAgIC5maWx0ZXIoZnVuY3Rpb24oa2V5KSB7XG4gICAgICByZXR1cm4gZmlsdGVyKGtleSwgc291cmNlW2tleV0pO1xuICAgIH0pXG4gICAgLnJlZHVjZShmdW5jdGlvbihyZXN1bHQsIGtleSkge1xuICAgICAgcmVzdWx0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSwge30pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBpY2s7XG5cblxuLyoqKi8gfSksXG4vKiAxNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgb2JqZWN0TWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7XG5cbi8qKlxuICogU3RyaW5naWZ5IGFsbCB0aGUgYm9vbGVhbiB2YWx1ZXMgaW4gYW4gb2JqZWN0LCBzbyB0cnVlIGJlY29tZXMgXCJ0cnVlXCIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybnMge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5Qm9vbGVhbihvYmopIHtcbiAgcmV0dXJuIG9iamVjdE1hcChvYmosIGZ1bmN0aW9uKF8sIHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nID8gSlNPTi5zdHJpbmdpZnkodmFsdWUpIDogdmFsdWU7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0cmluZ2lmeUJvb2xlYW47XG5cblxuLyoqKi8gfSksXG4vKiAxNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9OyB9KCk7XG5cbl9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cbnZhciBfZGlyZWN0aW9uc0NvbnRyb2xzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cbnZhciBfZGlyZWN0aW9uc0NvbnRyb2xzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RpcmVjdGlvbnNDb250cm9scyk7XG5cbnZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9tYXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWFwKTtcblxudmFyIF9nZW9jb2RlciA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cbnZhciBfc3RhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3N0YXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0YXRlKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxud2luZG93LmFwcFN0YXRlID0gX3N0YXRlMi5kZWZhdWx0OyAvLyBYWFggZm9yIGNvbnNvbGUgZGVidWdnaW5nLlxuXG4vKiBJbml0aWFsaXphdGlvbiAqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblxuZnVuY3Rpb24gcmVhZHkoZm4pIHtcbiAgaWYgKGRvY3VtZW50LmF0dGFjaEV2ZW50ID8gZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJyA6IGRvY3VtZW50LnJlYWR5U3RhdGUgIT09ICdsb2FkaW5nJykge1xuICAgIGZuKCk7XG4gIH0gZWxzZSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZuKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0UGFnZShsbmdMYXQsIHpvb20pIHtcbiAgdmFyIGRvSW5pdCA9IGZ1bmN0aW9uIGRvSW5pdCgpIHtcbiAgICAoMCwgX21hcDIuZGVmYXVsdCkobG5nTGF0LCB6b29tKTtcbiAgICAoMCwgX2RpcmVjdGlvbnNDb250cm9sczIuZGVmYXVsdCkoKTtcbiAgfTtcblxuICByZWFkeShkb0luaXQpO1xufVxuXG4oZnVuY3Rpb24gaW5pdCgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICBjb25zb2xlLmxvZygnaW5pdGlhbGl6aW5nIGFwcCcpO1xuICAvLyBGYWxsYmFjayBsb2NhdGlvbjogY2VudGVyIG9mIGJheSBhcmVhXG4gIHZhciBsYXQgPSAzNy42MTE7XG4gIHZhciBsb24gPSAtMTIxLjc1MztcbiAgdmFyIHpvb20gPSA4O1xuICAoMCwgX2dlb2NvZGVyLnNldEdlb2NkZXJDZW50ZXIpKFtsb24sIGxhdF0pO1xuICAoMCwgX2dlb2NvZGVyLnNldEdlb2NvZGVyQm91bmRzKSgnLTEyMy41MzM3LDM2Ljg5MzEsLTEyMS4yMDgyLDM4Ljg2NDMnKTtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZXh0ZW5kLW5hdGl2ZVxuICBOdW1iZXIucHJvdG90eXBlLmJldHdlZW4gPSBmdW5jdGlvbiAobWluLCBtYXgpIHtcbiAgICByZXR1cm4gX3RoaXMgPiBtaW4gJiYgX3RoaXMgPCBtYXg7XG4gIH07XG5cbiAgLy8gR3JhYiBJUCBsb2NhdGlvbiBmcm9tIGZyZWVnZW9pcCBBUElcbiAgdmFyIGdlb0xvY2F0aW9uUHJvdmlkZXJVUkwgPSAnaHR0cHM6Ly9pcGluZm8uaW8vanNvbic7XG4gIGZldGNoKGdlb0xvY2F0aW9uUHJvdmlkZXJVUkwpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICByZXR1cm4gcmVzcC5qc29uKCk7XG4gIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB2YXIgX2RhdGEkbG9jJHNwbGl0JG1hcCA9IGRhdGEubG9jLnNwbGl0KCcsJykubWFwKHBhcnNlRmxvYXQpLFxuICAgICAgICBfZGF0YSRsb2Mkc3BsaXQkbWFwMiA9IF9zbGljZWRUb0FycmF5KF9kYXRhJGxvYyRzcGxpdCRtYXAsIDIpLFxuICAgICAgICBsYXRpdHVkZSA9IF9kYXRhJGxvYyRzcGxpdCRtYXAyWzBdLFxuICAgICAgICBsb25naXR1ZGUgPSBfZGF0YSRsb2Mkc3BsaXQkbWFwMlsxXTtcbiAgICAvLyBCZWNhdXNlIHRoaXMgYmlrZSBzaGFyZSBvbmx5IG9wZXJhdGVzIGluIHRoZSBTRiBiYXkgYXJlYSwgd2VcbiAgICAvLyBqdW1wIHRvIHRoZSB1c2VyJ3Mgc3BlY2lmaWMgbG9jYXRpb24gb25seSBpZiB0aGV5J3JlIGluc2lkZSBhXG4gICAgLy8gYmF5LWNlbnRlcmVkIGJvdW5kaW5nIGFyZWEuXG5cblxuICAgIGlmIChsb25naXR1ZGUuYmV0d2VlbigtMTI0LCAtMTIxKSAmJiBsYXRpdHVkZS5iZXR3ZWVuKDM2LjUsIDM4LjQpKSB7XG4gICAgICBsYXQgPSBsYXRpdHVkZTtcbiAgICAgIGxvbiA9IGxvbmdpdHVkZTtcbiAgICAgIHpvb20gPSAxMTsgLy8gem9vbSBtb3JlIHRoYW4gZGVmYXVsdCBzaW5jZSB3ZSBrbm93IGV4YWN0IGxvY2F0aW9uXG4gICAgfVxuICAgIGluaXRQYWdlKFtsb24sIGxhdF0sIHpvb20pO1xuICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygnRXJyb3IgZmV0Y2hpbmcgbG9jYXRpb24gZGF0YTogJyArIGVycm9yKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIGlmIChlcnJvciA9PT0gJ0Vycm9yOiBDb29yZGluYXRlcyBtdXN0IGNvbnRhaW4gbnVtYmVycycpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbml0UGFnZShbbG9uLCBsYXRdKTsgLy8gZ28gZm9yIGl0IGFueXdheSwgdXNpbmcgZGVmYXVsdHNcbiAgICB9XG4gIH0pO1xufSkoKTtcblxuLyoqKi8gfSksXG4vKiAxNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pLCBjb250ZW50LCAnJ11dO1xuLy8gUHJlcGFyZSBjc3NUcmFuc2Zvcm1hdGlvblxudmFyIHRyYW5zZm9ybTtcblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxub3B0aW9ucy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpKGNvbnRlbnQsIG9wdGlvbnMpO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihmYWxzZSkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9zdHlsZS5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vc3R5bGUuY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuLyoqKi8gfSksXG4vKiAxNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpKHVuZGVmaW5lZCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pLCBcImNhbnZhcy5tYXBib3hnbC1jYW52YXN7YmFja2dyb3VuZDojZDNkM2QzfS5tYXJrZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KSArIFwiKTtiYWNrZ3JvdW5kLXNpemU6Y292ZXI7d2lkdGg6NTBweDtoZWlnaHQ6NTBweDtib3JkZXItcmFkaXVzOjUwJTtjdXJzb3I6cG9pbnRlcn0ubWFwLW1hcmtlci1kaXJlY3Rpb25ze2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjUwJTtiYWNrZ3JvdW5kLXNpemU6MTJweDt3aWR0aDoyMHB4fS5tYXAtbWFya2VyLWRpcmVjdGlvbnMuaXMtb3JpZ2lue2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiICsgX193ZWJwYWNrX3JlcXVpcmVfXygxOSkgKyBcIil9Lm1hcC1tYXJrZXItZGlyZWN0aW9ucy5pcy1kZXN0aW5hdGlvbntiYWNrZ3JvdW5kLWltYWdlOnVybChcIiArIF9fd2VicGFja19yZXF1aXJlX18oMjApICsgXCIpfS5kaXJlY3Rpb25ze3Bvc2l0aW9uOmFic29sdXRlO21hcmdpbjoxZW07YmFja2dyb3VuZDpoc2xhKDAsMCUsMTAwJSwuODUpfS5kaXJlY3Rpb25zLS1jb250ZW50e3BhZGRpbmc6MWVtfS5kaXJlY3Rpb25zLS10b2dnbGUtYnV0dG9ue2JhY2tncm91bmQ6IzRhYjJmNztiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjo1MCU7YmFja2dyb3VuZC1zaXplOjYwcHg7Y3Vyc29yOnBvaW50ZXJ9LmRpcmVjdGlvbnMtLXRvZ2dsZS1idXR0b24uc2hvd257YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKSArIFwiKX0uZGlyZWN0aW9ucy0tdG9nZ2xlLWJ1dHRvbi5oaWRkZW57YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKSArIFwiKX0uZGlyZWN0aW9ucy0tdG9nZ2xlLWJ1dHRvbntoZWlnaHQ6MmVtfSNkaXJlY3Rpb25zLS1kaXN0YW5jZS1yYW5nZXt3aWR0aDoxMDAlfS5kaXJlY3Rpb25zLS1kaXN0YW5jZS1waWNrZXJ7bWFyZ2luLWJvdHRvbToyZW07cGFkZGluZzouNWVtfSNkaXJlY3Rpb25zLS1kaXN0YW5jZS1yYW5nZSAubm9VaS1jb25uZWN0e2JhY2tncm91bmQtY29sb3I6I2RlZTBlMDtib3gtc2hhZG93Omluc2V0IDAgMCAxcHggcmdiYSg1MSw1MSw1MSwuMil9Lm5vVWktcGlwcy5ub1VpLXBpcHMtaG9yaXpvbnRhbHtoZWlnaHQ6NTBweH0uZGlyZWN0aW9ucy0tbG9jYXRlLW9yaWdpbi5jb2x1bW57cGFkZGluZy1sZWZ0OjB9LmRpcmVjdGlvbnMtLWxvY2F0ZS1vcmlnaW4gYnV0dG9ue2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiICsgX193ZWJwYWNrX3JlcXVpcmVfXygyMykgKyBcIik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246NTAlO2JhY2tncm91bmQtc2l6ZToyMHB4O3dpZHRoOjM4cHh9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo3ODBweCl7LmRpcmVjdGlvbnN7bWFyZ2luOjB9fS5hdXRvY29tcGxldGV7YmFja2dyb3VuZDojZmZmO3otaW5kZXg6MTAwO2JvcmRlcjoxcHggc29saWQgI2U0ZTJlMn0uYXV0b2NvbXBsZXRlIGRpdntib3JkZXItdG9wOjFweCBzb2xpZCAjYWRhZGFkO3BhZGRpbmc6MWVtO2N1cnNvcjpwb2ludGVyfS5hdXRvY29tcGxldGUgZGl2OmZvY3VzLC5hdXRvY29tcGxldGUgZGl2OmhvdmVye2JhY2tncm91bmQ6I2NhY2VlM30uc3RhdGlvbi1wb3B1cC0tY29udGFpbmVyIC5tYXBib3hnbC1wb3B1cC1jb250ZW50e3BhZGRpbmctYm90dG9tOjZweH0uc3RhdGlvbi1wb3B1cHt0ZXh0LWFsaWduOmNlbnRlcn0uc3RhdGlvbi1wb3B1cCBoM3ttYXJnaW4tYm90dG9tOjFlbX1kaXYuc3RhdGlvbi1wb3B1cC0tZGlyZWN0aW9ucyBhe3RleHQtZGVjb3JhdGlvbjpub25lfS5zdGF0aW9uLXBvcHVwLS1jb29yZGluYXRlc3tib3JkZXItdG9wOjFweCBzb2xpZCAjZDNkM2QzO3RleHQtYWxpZ246cmlnaHQ7cGFkZGluZy10b3A6LjVlbTttYXJnaW4tdG9wOi41ZW07Zm9udC1zaXplOnNtYWxsZXI7Y29sb3I6I2QzZDNkM30uc3RhdGlvbi1wb3B1cC0tYmlrZXMtbnVtYmVyLC5zdGF0aW9uLXBvcHVwLS1kb2Nrcy1udW1iZXJ7Zm9udC1zaXplOmxhcmdlfWRpdi5zdGF0aW9uLXBvcHVwLS1zdGF0c3ttYXJnaW4tYm90dG9tOjAhaW1wb3J0YW50O2ZvbnQtd2VpZ2h0OjcwMH0uc3RhdGlvbi1wb3B1cC0tYWxlcnR7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZTpsYXJnZTttYXJnaW4tYm90dG9tOjFlbX1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuLyoqKi8gfSksXG4vKiAxOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiZDA0OTIwM2JjNzQ2OTZkNTg3YTNjZGIxZDBhNjYxZDIucG5nXCI7XG5cbi8qKiovIH0pLFxuLyogMTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxubW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIjJmNjdiZDE0Zjk4NzJkYWY3NzEzYTUyY2UyZTQ1ZjlhLnN2Z1wiO1xuXG4vKioqLyB9KSxcbi8qIDIwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCI5OWRhOWExMTE4YjhlNDMyMjVkM2RhNmZlZTY0NWFkMC5zdmdcIjtcblxuLyoqKi8gfSksXG4vKiAyMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiOWY4ZDgwMTNiOTViNDdmZjE2YTBiZWY2MTU4MjkzODMuc3ZnXCI7XG5cbi8qKiovIH0pLFxuLyogMjIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxubW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIjFmN2MyOTk1MGFlMWQ3MzNmMmNmZDQxNzAyZjQwOWI5LnN2Z1wiO1xuXG4vKioqLyB9KSxcbi8qIDIzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCI5OWM2ODc5YjAxZmU3ZmIyN2ZiMjZjZjJhZmM3MzYwZC5zdmdcIjtcblxuLyoqKi8gfSksXG4vKiAyNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cbi8qKlxuICogV2hlbiBzb3VyY2UgbWFwcyBhcmUgZW5hYmxlZCwgYHN0eWxlLWxvYWRlcmAgdXNlcyBhIGxpbmsgZWxlbWVudCB3aXRoIGEgZGF0YS11cmkgdG9cbiAqIGVtYmVkIHRoZSBjc3Mgb24gdGhlIHBhZ2UuIFRoaXMgYnJlYWtzIGFsbCByZWxhdGl2ZSB1cmxzIGJlY2F1c2Ugbm93IHRoZXkgYXJlIHJlbGF0aXZlIHRvIGFcbiAqIGJ1bmRsZSBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHBhZ2UuXG4gKlxuICogT25lIHNvbHV0aW9uIGlzIHRvIG9ubHkgdXNlIGZ1bGwgdXJscywgYnV0IHRoYXQgbWF5IGJlIGltcG9zc2libGUuXG4gKlxuICogSW5zdGVhZCwgdGhpcyBmdW5jdGlvbiBcImZpeGVzXCIgdGhlIHJlbGF0aXZlIHVybHMgdG8gYmUgYWJzb2x1dGUgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHBhZ2UgbG9jYXRpb24uXG4gKlxuICogQSBydWRpbWVudGFyeSB0ZXN0IHN1aXRlIGlzIGxvY2F0ZWQgYXQgYHRlc3QvZml4VXJscy5qc2AgYW5kIGNhbiBiZSBydW4gdmlhIHRoZSBgbnBtIHRlc3RgIGNvbW1hbmQuXG4gKlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzcykge1xuICAvLyBnZXQgY3VycmVudCBsb2NhdGlvblxuICB2YXIgbG9jYXRpb24gPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5sb2NhdGlvbjtcblxuICBpZiAoIWxvY2F0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZml4VXJscyByZXF1aXJlcyB3aW5kb3cubG9jYXRpb25cIik7XG4gIH1cblxuXHQvLyBibGFuayBvciBudWxsP1xuXHRpZiAoIWNzcyB8fCB0eXBlb2YgY3NzICE9PSBcInN0cmluZ1wiKSB7XG5cdCAgcmV0dXJuIGNzcztcbiAgfVxuXG4gIHZhciBiYXNlVXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2NhdGlvbi5ob3N0O1xuICB2YXIgY3VycmVudERpciA9IGJhc2VVcmwgKyBsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9cXC9bXlxcL10qJC8sIFwiL1wiKTtcblxuXHQvLyBjb252ZXJ0IGVhY2ggdXJsKC4uLilcblx0Lypcblx0VGhpcyByZWd1bGFyIGV4cHJlc3Npb24gaXMganVzdCBhIHdheSB0byByZWN1cnNpdmVseSBtYXRjaCBicmFja2V0cyB3aXRoaW5cblx0YSBzdHJpbmcuXG5cblx0IC91cmxcXHMqXFwoICA9IE1hdGNoIG9uIHRoZSB3b3JkIFwidXJsXCIgd2l0aCBhbnkgd2hpdGVzcGFjZSBhZnRlciBpdCBhbmQgdGhlbiBhIHBhcmVuc1xuXHQgICAoICA9IFN0YXJ0IGEgY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgKD86ICA9IFN0YXJ0IGEgbm9uLWNhcHR1cmluZyBncm91cFxuXHQgICAgICAgICBbXikoXSAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKD86ICA9IFN0YXJ0IGFub3RoZXIgbm9uLWNhcHR1cmluZyBncm91cHNcblx0ICAgICAgICAgICAgICAgICBbXikoXSsgID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgICAgIFteKShdKiAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICBcXCkgID0gTWF0Y2ggYSBlbmQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICkgID0gRW5kIEdyb3VwXG4gICAgICAgICAgICAgICpcXCkgPSBNYXRjaCBhbnl0aGluZyBhbmQgdGhlbiBhIGNsb3NlIHBhcmVuc1xuICAgICAgICAgICkgID0gQ2xvc2Ugbm9uLWNhcHR1cmluZyBncm91cFxuICAgICAgICAgICogID0gTWF0Y2ggYW55dGhpbmdcbiAgICAgICApICA9IENsb3NlIGNhcHR1cmluZyBncm91cFxuXHQgXFwpICA9IE1hdGNoIGEgY2xvc2UgcGFyZW5zXG5cblx0IC9naSAgPSBHZXQgYWxsIG1hdGNoZXMsIG5vdCB0aGUgZmlyc3QuICBCZSBjYXNlIGluc2Vuc2l0aXZlLlxuXHQgKi9cblx0dmFyIGZpeGVkQ3NzID0gY3NzLnJlcGxhY2UoL3VybFxccypcXCgoKD86W14pKF18XFwoKD86W14pKF0rfFxcKFteKShdKlxcKSkqXFwpKSopXFwpL2dpLCBmdW5jdGlvbihmdWxsTWF0Y2gsIG9yaWdVcmwpIHtcblx0XHQvLyBzdHJpcCBxdW90ZXMgKGlmIHRoZXkgZXhpc3QpXG5cdFx0dmFyIHVucXVvdGVkT3JpZ1VybCA9IG9yaWdVcmxcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9eXCIoLiopXCIkLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pXG5cdFx0XHQucmVwbGFjZSgvXicoLiopJyQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSk7XG5cblx0XHQvLyBhbHJlYWR5IGEgZnVsbCB1cmw/IG5vIGNoYW5nZVxuXHRcdGlmICgvXigjfGRhdGE6fGh0dHA6XFwvXFwvfGh0dHBzOlxcL1xcL3xmaWxlOlxcL1xcL1xcLykvaS50ZXN0KHVucXVvdGVkT3JpZ1VybCkpIHtcblx0XHQgIHJldHVybiBmdWxsTWF0Y2g7XG5cdFx0fVxuXG5cdFx0Ly8gY29udmVydCB0aGUgdXJsIHRvIGEgZnVsbCB1cmxcblx0XHR2YXIgbmV3VXJsO1xuXG5cdFx0aWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiLy9cIikgPT09IDApIHtcblx0XHQgIFx0Ly9UT0RPOiBzaG91bGQgd2UgYWRkIHByb3RvY29sP1xuXHRcdFx0bmV3VXJsID0gdW5xdW90ZWRPcmlnVXJsO1xuXHRcdH0gZWxzZSBpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvXCIpID09PSAwKSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYmFzZSB1cmxcblx0XHRcdG5ld1VybCA9IGJhc2VVcmwgKyB1bnF1b3RlZE9yaWdVcmw7IC8vIGFscmVhZHkgc3RhcnRzIHdpdGggJy8nXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIGN1cnJlbnQgZGlyZWN0b3J5XG5cdFx0XHRuZXdVcmwgPSBjdXJyZW50RGlyICsgdW5xdW90ZWRPcmlnVXJsLnJlcGxhY2UoL15cXC5cXC8vLCBcIlwiKTsgLy8gU3RyaXAgbGVhZGluZyAnLi8nXG5cdFx0fVxuXG5cdFx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCB1cmwoLi4uKVxuXHRcdHJldHVybiBcInVybChcIiArIEpTT04uc3RyaW5naWZ5KG5ld1VybCkgKyBcIilcIjtcblx0fSk7XG5cblx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCBjc3Ncblx0cmV0dXJuIGZpeGVkQ3NzO1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDI1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmksIGNvbnRlbnQsICcnXV07XG4vLyBQcmVwYXJlIGNzc1RyYW5zZm9ybWF0aW9uXG52YXIgdHJhbnNmb3JtO1xuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNykoY29udGVudCwgb3B0aW9ucyk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKGZhbHNlKSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL25vdWlzbGlkZXIubWluLmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9ub3Vpc2xpZGVyLm1pbi5jc3NcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG4vKioqLyB9KSxcbi8qIDI2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNikodW5kZWZpbmVkKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmksIFwiLyohIG5vdWlzbGlkZXIgLSAxMC4wLjAgLSAyMDE3LTA1LTI4IDE0OjUyOjQ4ICovLm5vVWktdGFyZ2V0LC5ub1VpLXRhcmdldCAqey13ZWJraXQtdG91Y2gtY2FsbG91dDpub25lOy13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjp0cmFuc3BhcmVudDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1zLXRvdWNoLWFjdGlvbjpub25lO3RvdWNoLWFjdGlvbjpub25lOy1tcy11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lOy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveH0ubm9VaS10YXJnZXR7cG9zaXRpb246cmVsYXRpdmU7ZGlyZWN0aW9uOmx0cn0ubm9VaS1iYXNle3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7cG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDoxfS5ub1VpLWNvbm5lY3R7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MDt0b3A6MDtsZWZ0OjA7Ym90dG9tOjB9Lm5vVWktb3JpZ2lue3Bvc2l0aW9uOmFic29sdXRlO2hlaWdodDowO3dpZHRoOjB9Lm5vVWktaGFuZGxle3Bvc2l0aW9uOnJlbGF0aXZlO3otaW5kZXg6MX0ubm9VaS1zdGF0ZS10YXAgLm5vVWktY29ubmVjdCwubm9VaS1zdGF0ZS10YXAgLm5vVWktb3JpZ2luey13ZWJraXQtdHJhbnNpdGlvbjp0b3AgLjNzLHJpZ2h0IC4zcyxib3R0b20gLjNzLGxlZnQgLjNzO3RyYW5zaXRpb246dG9wIC4zcyxyaWdodCAuM3MsYm90dG9tIC4zcyxsZWZ0IC4zc30ubm9VaS1zdGF0ZS1kcmFnICp7Y3Vyc29yOmluaGVyaXQhaW1wb3J0YW50fS5ub1VpLWJhc2UsLm5vVWktaGFuZGxley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVooMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVooMCl9Lm5vVWktaG9yaXpvbnRhbHtoZWlnaHQ6MThweH0ubm9VaS1ob3Jpem9udGFsIC5ub1VpLWhhbmRsZXt3aWR0aDozNHB4O2hlaWdodDoyOHB4O2xlZnQ6LTE3cHg7dG9wOi02cHh9Lm5vVWktdmVydGljYWx7d2lkdGg6MThweH0ubm9VaS12ZXJ0aWNhbCAubm9VaS1oYW5kbGV7d2lkdGg6MjhweDtoZWlnaHQ6MzRweDtsZWZ0Oi02cHg7dG9wOi0xN3B4fS5ub1VpLXRhcmdldHtiYWNrZ3JvdW5kOiNmYWZhZmE7Ym9yZGVyLXJhZGl1czo0cHg7Ym9yZGVyOjFweCBzb2xpZCAjZDNkM2QzO2JveC1zaGFkb3c6aW5zZXQgMCAxcHggMXB4ICNmMGYwZjAsMCAzcHggNnB4IC01cHggI2JiYn0ubm9VaS1jb25uZWN0e2JhY2tncm91bmQ6IzNmYjhhZjtib3JkZXItcmFkaXVzOjRweDtib3gtc2hhZG93Omluc2V0IDAgMCAzcHggcmdiYSg1MSw1MSw1MSwuNDUpOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC40NXM7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC40NXN9Lm5vVWktZHJhZ2dhYmxle2N1cnNvcjpldy1yZXNpemV9Lm5vVWktdmVydGljYWwgLm5vVWktZHJhZ2dhYmxle2N1cnNvcjpucy1yZXNpemV9Lm5vVWktaGFuZGxle2JvcmRlcjoxcHggc29saWQgI2Q5ZDlkOTtib3JkZXItcmFkaXVzOjNweDtiYWNrZ3JvdW5kOiNmZmY7Y3Vyc29yOmRlZmF1bHQ7Ym94LXNoYWRvdzppbnNldCAwIDAgMXB4ICNmZmYsaW5zZXQgMCAxcHggN3B4ICNlYmViZWIsMCAzcHggNnB4IC0zcHggI2JiYn0ubm9VaS1hY3RpdmV7Ym94LXNoYWRvdzppbnNldCAwIDAgMXB4ICNmZmYsaW5zZXQgMCAxcHggN3B4ICNkZGQsMCAzcHggNnB4IC0zcHggI2JiYn0ubm9VaS1oYW5kbGU6YWZ0ZXIsLm5vVWktaGFuZGxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFwiO2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7aGVpZ2h0OjE0cHg7d2lkdGg6MXB4O2JhY2tncm91bmQ6I2U4ZTdlNjtsZWZ0OjE0cHg7dG9wOjZweH0ubm9VaS1oYW5kbGU6YWZ0ZXJ7bGVmdDoxN3B4fS5ub1VpLXZlcnRpY2FsIC5ub1VpLWhhbmRsZTphZnRlciwubm9VaS12ZXJ0aWNhbCAubm9VaS1oYW5kbGU6YmVmb3Jle3dpZHRoOjE0cHg7aGVpZ2h0OjFweDtsZWZ0OjZweDt0b3A6MTRweH0ubm9VaS12ZXJ0aWNhbCAubm9VaS1oYW5kbGU6YWZ0ZXJ7dG9wOjE3cHh9W2Rpc2FibGVkXSAubm9VaS1jb25uZWN0e2JhY2tncm91bmQ6I2I4YjhiOH1bZGlzYWJsZWRdLm5vVWktaGFuZGxlLFtkaXNhYmxlZF0gLm5vVWktaGFuZGxlLFtkaXNhYmxlZF0ubm9VaS10YXJnZXR7Y3Vyc29yOm5vdC1hbGxvd2VkfS5ub1VpLXBpcHMsLm5vVWktcGlwcyAqey1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveH0ubm9VaS1waXBze3Bvc2l0aW9uOmFic29sdXRlO2NvbG9yOiM5OTl9Lm5vVWktdmFsdWV7cG9zaXRpb246YWJzb2x1dGU7d2hpdGUtc3BhY2U6bm93cmFwO3RleHQtYWxpZ246Y2VudGVyfS5ub1VpLXZhbHVlLXN1Yntjb2xvcjojY2NjO2ZvbnQtc2l6ZToxMHB4fS5ub1VpLW1hcmtlcntwb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kOiNjY2N9Lm5vVWktbWFya2VyLWxhcmdlLC5ub1VpLW1hcmtlci1zdWJ7YmFja2dyb3VuZDojYWFhfS5ub1VpLXBpcHMtaG9yaXpvbnRhbHtwYWRkaW5nOjEwcHggMDtoZWlnaHQ6ODBweDt0b3A6MTAwJTtsZWZ0OjA7d2lkdGg6MTAwJX0ubm9VaS12YWx1ZS1ob3Jpem9udGFsey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKC01MCUsNTAlLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtNTAlLDUwJSwwKX0ubm9VaS1tYXJrZXItaG9yaXpvbnRhbC5ub1VpLW1hcmtlcnttYXJnaW4tbGVmdDotMXB4O3dpZHRoOjJweDtoZWlnaHQ6NXB4fS5ub1VpLW1hcmtlci1ob3Jpem9udGFsLm5vVWktbWFya2VyLXN1YntoZWlnaHQ6MTBweH0ubm9VaS1tYXJrZXItaG9yaXpvbnRhbC5ub1VpLW1hcmtlci1sYXJnZXtoZWlnaHQ6MTVweH0ubm9VaS1waXBzLXZlcnRpY2Fse3BhZGRpbmc6MCAxMHB4O2hlaWdodDoxMDAlO3RvcDowO2xlZnQ6MTAwJX0ubm9VaS12YWx1ZS12ZXJ0aWNhbHstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDUwJSwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCw1MCUsMCk7cGFkZGluZy1sZWZ0OjI1cHh9Lm5vVWktbWFya2VyLXZlcnRpY2FsLm5vVWktbWFya2Vye3dpZHRoOjVweDtoZWlnaHQ6MnB4O21hcmdpbi10b3A6LTFweH0ubm9VaS1tYXJrZXItdmVydGljYWwubm9VaS1tYXJrZXItc3Vie3dpZHRoOjEwcHh9Lm5vVWktbWFya2VyLXZlcnRpY2FsLm5vVWktbWFya2VyLWxhcmdle3dpZHRoOjE1cHh9Lm5vVWktdG9vbHRpcHtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO2JvcmRlcjoxcHggc29saWQgI2Q5ZDlkOTtib3JkZXItcmFkaXVzOjNweDtiYWNrZ3JvdW5kOiNmZmY7Y29sb3I6IzAwMDtwYWRkaW5nOjVweDt0ZXh0LWFsaWduOmNlbnRlcjt3aGl0ZS1zcGFjZTpub3dyYXB9Lm5vVWktaG9yaXpvbnRhbCAubm9VaS10b29sdGlwey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUpO2xlZnQ6NTAlO2JvdHRvbToxMjAlfS5ub1VpLXZlcnRpY2FsIC5ub1VpLXRvb2x0aXB7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKTt0b3A6NTAlO3JpZ2h0OjEyMCV9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cbi8qKiovIH0pLFxuLyogMjcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxubW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcImZhdmljb24uaWNvXCI7XG5cbi8qKiovIH0pLFxuLyogMjggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGluaXREaXJlY3Rpb25zQ29udHJvbHM7XG5cbnZhciBfZGlzdGFuY2VTbGlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblxudmFyIF9kaXN0YW5jZVNsaWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kaXN0YW5jZVNsaWRlcik7XG5cbnZhciBfb3JpZ2luTG9jYXRvckJ1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpO1xuXG52YXIgX29yaWdpbkxvY2F0b3JCdXR0b24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb3JpZ2luTG9jYXRvckJ1dHRvbik7XG5cbnZhciBfZGlyZWN0aW9uSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KTtcblxudmFyIF9kaXJlY3Rpb25JbnB1dDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kaXJlY3Rpb25JbnB1dCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGluaXREaXJlY3Rpb25zVG9nZ2xlKCkge1xuICB2YXIgdG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpcmVjdGlvbnMtdG9nZ2xlJyk7XG4gIHZhciBzaG93biA9IHRydWU7XG4gIHRvZ2dsZS5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZGlyZWN0aW9ucy0tY29udGVudCcpWzBdO1xuICAgIGlmIChzaG93bikge1xuICAgICAgLy8gZmlyc3QgZW5zdXJlIHRoZSB0b2dnbGUgYnV0dG9uIGRvZXNuJ3QgZGlzYXBwZWFyXG4gICAgICB0b2dnbGUuc3R5bGUud2lkdGggPSBjb250ZW50LmNsaWVudFdpZHRoICsgJ3B4JztcbiAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9IGVsc2Uge1xuICAgICAgdG9nZ2xlLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9XG4gICAgc2hvd24gPSAhc2hvd247XG4gICAgdG9nZ2xlLmNsYXNzTGlzdC50b2dnbGUoJ3Nob3duJyk7XG4gICAgdG9nZ2xlLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xuICB9O1xufSAvKiBEaXJlY3Rpb25zIGNvbnRyb2xzICoqKioqKioqKioqKioqKioqKioqKiogKi9cblxuZnVuY3Rpb24gaW5pdERpcmVjdGlvbnNDb250cm9scygpIHtcbiAgKDAsIF9kaXN0YW5jZVNsaWRlcjIuZGVmYXVsdCkoKTtcbiAgKDAsIF9vcmlnaW5Mb2NhdG9yQnV0dG9uMi5kZWZhdWx0KSgpO1xuICAoMCwgX2RpcmVjdGlvbklucHV0Mi5kZWZhdWx0KSgnb3JpZ2luSW5wdXQnLCAnb3JpZ2luJyk7XG4gICgwLCBfZGlyZWN0aW9uSW5wdXQyLmRlZmF1bHQpKCdkZXN0aW5hdGlvbklucHV0JywgJ2Rlc3RpbmF0aW9uJyk7XG4gIGluaXREaXJlY3Rpb25zVG9nZ2xlKCk7XG59XG5cbi8qKiovIH0pLFxuLyogMjkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGluaXREaXN0YW5jZVNsaWRlcjtcblxudmFyIF9ub3Vpc2xpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cbnZhciBfbm91aXNsaWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub3Vpc2xpZGVyKTtcblxudmFyIF9zdGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfc3RhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RhdGUpO1xuXG52YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGluaXREaXN0YW5jZVNsaWRlcigpIHtcbiAgdmFyIHJhbmdlID0ge1xuICAgIG1pbjogWzBdLFxuICAgICcxMDAlJzogWzIsIDJdLFxuICAgIG1heDogWzJdXG4gIH07XG5cbiAgdmFyIHNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXJlY3Rpb25zLS1kaXN0YW5jZS1yYW5nZScpO1xuXG4gIHZhciBkaXN0Rm9ybWF0dGVyID0ge1xuICAgIC8vIEludGVnZXJzIHN0YXkgaW50ZWdlcnMsIG90aGVyIHZhbHVlcyBnZXQgdHdvIGRlY2ltYWxzLlxuICAgIC8vIGV4OiAxIC0+IFwiMVwiIGFuZCAxLjUgLT4gXCIxLjUwXCJcbiAgICAvLyB0bzogKG4pID0+IE51bWJlci5pc0ludGVnZXIobikgPyBuIDogKG4pLnRvRml4ZWQoMilcbiAgICAvLyB3ZSBwcm92aWRlIHRoZSAndG8nIGZ1bmN0aW9uIGJlY2F1c2Ugbm9VaVNsaWRlciBleHBlY3RzIHRoYXRcbiAgICAvLyAocHJvdG90eXBlIGNvbXBhdGlibGUgdy8gd051bWIgZm9ybWF0dGluZyBsaWJyYXJ5J3Mgb2JqZWN0cykuXG4gICAgdG86IGZ1bmN0aW9uIHRvKG4pIHtcbiAgICAgIGlmIChuID09PSAxKSB7XG4gICAgICAgIC8vIGRvbid0IG5lZWQgdGljayBvbiAnMScsIHVzZXIgY2FuIGZpZ3VyZSBpdCBvdXQuXG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0gZWxzZSBpZiAoTnVtYmVyLmlzSW50ZWdlcihuKSkge1xuICAgICAgICByZXR1cm4gbiA/IG4gKyAnIG1pJyA6IG47IC8vIDAgZG9lc24ndCBuZWVkIHVuaXRzLlxuICAgICAgfSBlbHNlIGlmIChuICUgMC41ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBuLnRvRml4ZWQoMik7XG4gICAgICB9XG4gICAgICByZXR1cm4gJyc7IC8vIGRvbid0IG5lZWQgbGFiZWxzIG9uIGV2ZXJ5IHRpY2sgbWFya1xuICAgIH1cbiAgfTtcblxuICBfbm91aXNsaWRlcjIuZGVmYXVsdC5jcmVhdGUoc2xpZGVyLCB7XG4gICAgcmFuZ2U6IHJhbmdlLFxuICAgIHN0YXJ0OiBfc3RhdGUyLmRlZmF1bHQubWF4V2Fsa0Rpc3RhbmNlLFxuICAgIHN0ZXA6IDAuMjUsXG4gICAgY29ubmVjdDogW3RydWUsIGZhbHNlXSxcbiAgICBwaXBzOiB7XG4gICAgICBtb2RlOiAnY291bnQnLFxuICAgICAgdmFsdWVzOiAzLCAvLyAzIG1ham9yIHRpY2tzXG4gICAgICBkZW5zaXR5OiAxMi41LCAvLyAxIHNtYWxsIHRpY2sgZXZlcnkgMTIuNSUgKGV2ZXJ5IDAuMjUgYnR3biAwIGFuZCAyKVxuICAgICAgZm9ybWF0OiBkaXN0Rm9ybWF0dGVyXG4gICAgfVxuICB9KTtcblxuICBzbGlkZXIubm9VaVNsaWRlci5vbigndXBkYXRlJywgZnVuY3Rpb24gKHZhbHVlcywgaGFuZGxlKSB7XG4gICAgdmFyIHZhbHVlID0gdmFsdWVzW2hhbmRsZV07XG4gICAgLy8gY29uc29sZS5sb2coYFNlYXJjaGluZyB3aXRoaW4gJHt2YWx1ZX0gbWlsZXMuYCk7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpcmVjdGlvbnMtLWRpc3RhbmNlLXZhbHVlJyk7XG4gICAgZWwuaW5uZXJUZXh0ID0gTnVtYmVyKHZhbHVlKS50b0ZpeGVkKDIpICsgJyBtaS4nO1xuICAgIF9zdGF0ZTIuZGVmYXVsdC5tYXhXYWxrRGlzdGFuY2UgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAoMCwgX21hcC5tYXBVcGRhdGVOZWFyYnkpKCk7XG4gIH0pO1xufVxuXG4vKioqLyB9KSxcbi8qIDMwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xudmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuLyohIG5vdWlzbGlkZXIgLSAxMC4wLjAgLSAyMDE3LTA1LTI4IDE0OjUyOjQ4ICovXG5cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuXG5cdGlmICh0cnVlKSB7XG5cblx0XHQvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG5cdFx0IShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fID0gW10sIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyA9IChmYWN0b3J5KSxcblx0XHRcdFx0X19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSAodHlwZW9mIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyA9PT0gJ2Z1bmN0aW9uJyA/XG5cdFx0XHRcdChfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXykpIDogX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fKSxcblx0XHRcdFx0X19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHR9IGVsc2UgaWYgKCh0eXBlb2YgZXhwb3J0cyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZXhwb3J0cykpID09PSAnb2JqZWN0Jykge1xuXG5cdFx0Ly8gTm9kZS9Db21tb25KU1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gQnJvd3NlciBnbG9iYWxzXG5cdFx0d2luZG93Lm5vVWlTbGlkZXIgPSBmYWN0b3J5KCk7XG5cdH1cbn0pKGZ1bmN0aW9uICgpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIFZFUlNJT04gPSAnMTAuMC4wJztcblxuXHRmdW5jdGlvbiBpc1ZhbGlkRm9ybWF0dGVyKGVudHJ5KSB7XG5cdFx0cmV0dXJuICh0eXBlb2YgZW50cnkgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGVudHJ5KSkgPT09ICdvYmplY3QnICYmIHR5cGVvZiBlbnRyeS50byA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZW50cnkuZnJvbSA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXG5cdGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQoZWwpIHtcblx0XHRlbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGVsKTtcblx0fVxuXG5cdC8vIEJpbmRhYmxlIHZlcnNpb25cblx0ZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0fVxuXG5cdC8vIFJlbW92ZXMgZHVwbGljYXRlcyBmcm9tIGFuIGFycmF5LlxuXHRmdW5jdGlvbiB1bmlxdWUoYXJyYXkpIHtcblx0XHRyZXR1cm4gYXJyYXkuZmlsdGVyKGZ1bmN0aW9uIChhKSB7XG5cdFx0XHRyZXR1cm4gIXRoaXNbYV0gPyB0aGlzW2FdID0gdHJ1ZSA6IGZhbHNlO1xuXHRcdH0sIHt9KTtcblx0fVxuXG5cdC8vIFJvdW5kIGEgdmFsdWUgdG8gdGhlIGNsb3Nlc3QgJ3RvJy5cblx0ZnVuY3Rpb24gY2xvc2VzdCh2YWx1ZSwgdG8pIHtcblx0XHRyZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAvIHRvKSAqIHRvO1xuXHR9XG5cblx0Ly8gQ3VycmVudCBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IHJlbGF0aXZlIHRvIHRoZSBkb2N1bWVudC5cblx0ZnVuY3Rpb24gb2Zmc2V0KGVsZW0sIG9yaWVudGF0aW9uKSB7XG5cblx0XHR2YXIgcmVjdCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0dmFyIGRvYyA9IGVsZW0ub3duZXJEb2N1bWVudDtcblx0XHR2YXIgZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdFx0dmFyIHBhZ2VPZmZzZXQgPSBnZXRQYWdlT2Zmc2V0KGRvYyk7XG5cblx0XHQvLyBnZXRCb3VuZGluZ0NsaWVudFJlY3QgY29udGFpbnMgbGVmdCBzY3JvbGwgaW4gQ2hyb21lIG9uIEFuZHJvaWQuXG5cdFx0Ly8gSSBoYXZlbid0IGZvdW5kIGEgZmVhdHVyZSBkZXRlY3Rpb24gdGhhdCBwcm92ZXMgdGhpcy4gV29yc3QgY2FzZVxuXHRcdC8vIHNjZW5hcmlvIG9uIG1pcy1tYXRjaDogdGhlICd0YXAnIGZlYXR1cmUgb24gaG9yaXpvbnRhbCBzbGlkZXJzIGJyZWFrcy5cblx0XHRpZiAoL3dlYmtpdC4qQ2hyb21lLipNb2JpbGUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG5cdFx0XHRwYWdlT2Zmc2V0LnggPSAwO1xuXHRcdH1cblxuXHRcdHJldHVybiBvcmllbnRhdGlvbiA/IHJlY3QudG9wICsgcGFnZU9mZnNldC55IC0gZG9jRWxlbS5jbGllbnRUb3AgOiByZWN0LmxlZnQgKyBwYWdlT2Zmc2V0LnggLSBkb2NFbGVtLmNsaWVudExlZnQ7XG5cdH1cblxuXHQvLyBDaGVja3Mgd2hldGhlciBhIHZhbHVlIGlzIG51bWVyaWNhbC5cblx0ZnVuY3Rpb24gaXNOdW1lcmljKGEpIHtcblx0XHRyZXR1cm4gdHlwZW9mIGEgPT09ICdudW1iZXInICYmICFpc05hTihhKSAmJiBpc0Zpbml0ZShhKTtcblx0fVxuXG5cdC8vIFNldHMgYSBjbGFzcyBhbmQgcmVtb3ZlcyBpdCBhZnRlciBbZHVyYXRpb25dIG1zLlxuXHRmdW5jdGlvbiBhZGRDbGFzc0ZvcihlbGVtZW50LCBjbGFzc05hbWUsIGR1cmF0aW9uKSB7XG5cdFx0aWYgKGR1cmF0aW9uID4gMCkge1xuXHRcdFx0YWRkQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKTtcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRyZW1vdmVDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpO1xuXHRcdFx0fSwgZHVyYXRpb24pO1xuXHRcdH1cblx0fVxuXG5cdC8vIExpbWl0cyBhIHZhbHVlIHRvIDAgLSAxMDBcblx0ZnVuY3Rpb24gbGltaXQoYSkge1xuXHRcdHJldHVybiBNYXRoLm1heChNYXRoLm1pbihhLCAxMDApLCAwKTtcblx0fVxuXG5cdC8vIFdyYXBzIGEgdmFyaWFibGUgYXMgYW4gYXJyYXksIGlmIGl0IGlzbid0IG9uZSB5ZXQuXG5cdC8vIE5vdGUgdGhhdCBhbiBpbnB1dCBhcnJheSBpcyByZXR1cm5lZCBieSByZWZlcmVuY2UhXG5cdGZ1bmN0aW9uIGFzQXJyYXkoYSkge1xuXHRcdHJldHVybiBBcnJheS5pc0FycmF5KGEpID8gYSA6IFthXTtcblx0fVxuXG5cdC8vIENvdW50cyBkZWNpbWFsc1xuXHRmdW5jdGlvbiBjb3VudERlY2ltYWxzKG51bVN0cikge1xuXHRcdG51bVN0ciA9IFN0cmluZyhudW1TdHIpO1xuXHRcdHZhciBwaWVjZXMgPSBudW1TdHIuc3BsaXQoXCIuXCIpO1xuXHRcdHJldHVybiBwaWVjZXMubGVuZ3RoID4gMSA/IHBpZWNlc1sxXS5sZW5ndGggOiAwO1xuXHR9XG5cblx0Ly8gaHR0cDovL3lvdW1pZ2h0bm90bmVlZGpxdWVyeS5jb20vI2FkZF9jbGFzc1xuXHRmdW5jdGlvbiBhZGRDbGFzcyhlbCwgY2xhc3NOYW1lKSB7XG5cdFx0aWYgKGVsLmNsYXNzTGlzdCkge1xuXHRcdFx0ZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuXHRcdH1cblx0fVxuXG5cdC8vIGh0dHA6Ly95b3VtaWdodG5vdG5lZWRqcXVlcnkuY29tLyNyZW1vdmVfY2xhc3Ncblx0ZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIGNsYXNzTmFtZSkge1xuXHRcdGlmIChlbC5jbGFzc0xpc3QpIHtcblx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnKF58XFxcXGIpJyArIGNsYXNzTmFtZS5zcGxpdCgnICcpLmpvaW4oJ3wnKSArICcoXFxcXGJ8JCknLCAnZ2knKSwgJyAnKTtcblx0XHR9XG5cdH1cblxuXHQvLyBodHRwczovL3BsYWluanMuY29tL2phdmFzY3JpcHQvYXR0cmlidXRlcy9hZGRpbmctcmVtb3ZpbmctYW5kLXRlc3RpbmctZm9yLWNsYXNzZXMtOS9cblx0ZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkge1xuXHRcdHJldHVybiBlbC5jbGFzc0xpc3QgPyBlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSA6IG5ldyBSZWdFeHAoJ1xcXFxiJyArIGNsYXNzTmFtZSArICdcXFxcYicpLnRlc3QoZWwuY2xhc3NOYW1lKTtcblx0fVxuXG5cdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaW5kb3cvc2Nyb2xsWSNOb3Rlc1xuXHRmdW5jdGlvbiBnZXRQYWdlT2Zmc2V0KGRvYykge1xuXG5cdFx0dmFyIHN1cHBvcnRQYWdlT2Zmc2V0ID0gd2luZG93LnBhZ2VYT2Zmc2V0ICE9PSB1bmRlZmluZWQ7XG5cdFx0dmFyIGlzQ1NTMUNvbXBhdCA9IChkb2MuY29tcGF0TW9kZSB8fCBcIlwiKSA9PT0gXCJDU1MxQ29tcGF0XCI7XG5cdFx0dmFyIHggPSBzdXBwb3J0UGFnZU9mZnNldCA/IHdpbmRvdy5wYWdlWE9mZnNldCA6IGlzQ1NTMUNvbXBhdCA/IGRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCA6IGRvYy5ib2R5LnNjcm9sbExlZnQ7XG5cdFx0dmFyIHkgPSBzdXBwb3J0UGFnZU9mZnNldCA/IHdpbmRvdy5wYWdlWU9mZnNldCA6IGlzQ1NTMUNvbXBhdCA/IGRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIDogZG9jLmJvZHkuc2Nyb2xsVG9wO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHg6IHgsXG5cdFx0XHR5OiB5XG5cdFx0fTtcblx0fVxuXG5cdC8vIHdlIHByb3ZpZGUgYSBmdW5jdGlvbiB0byBjb21wdXRlIGNvbnN0YW50cyBpbnN0ZWFkXG5cdC8vIG9mIGFjY2Vzc2luZyB3aW5kb3cuKiBhcyBzb29uIGFzIHRoZSBtb2R1bGUgbmVlZHMgaXRcblx0Ly8gc28gdGhhdCB3ZSBkbyBub3QgY29tcHV0ZSBhbnl0aGluZyBpZiBub3QgbmVlZGVkXG5cdGZ1bmN0aW9uIGdldEFjdGlvbnMoKSB7XG5cblx0XHQvLyBEZXRlcm1pbmUgdGhlIGV2ZW50cyB0byBiaW5kLiBJRTExIGltcGxlbWVudHMgcG9pbnRlckV2ZW50cyB3aXRob3V0XG5cdFx0Ly8gYSBwcmVmaXgsIHdoaWNoIGJyZWFrcyBjb21wYXRpYmlsaXR5IHdpdGggdGhlIElFMTAgaW1wbGVtZW50YXRpb24uXG5cdFx0cmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQgPyB7XG5cdFx0XHRzdGFydDogJ3BvaW50ZXJkb3duJyxcblx0XHRcdG1vdmU6ICdwb2ludGVybW92ZScsXG5cdFx0XHRlbmQ6ICdwb2ludGVydXAnXG5cdFx0fSA6IHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCA/IHtcblx0XHRcdHN0YXJ0OiAnTVNQb2ludGVyRG93bicsXG5cdFx0XHRtb3ZlOiAnTVNQb2ludGVyTW92ZScsXG5cdFx0XHRlbmQ6ICdNU1BvaW50ZXJVcCdcblx0XHR9IDoge1xuXHRcdFx0c3RhcnQ6ICdtb3VzZWRvd24gdG91Y2hzdGFydCcsXG5cdFx0XHRtb3ZlOiAnbW91c2Vtb3ZlIHRvdWNobW92ZScsXG5cdFx0XHRlbmQ6ICdtb3VzZXVwIHRvdWNoZW5kJ1xuXHRcdH07XG5cdH1cblxuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9FdmVudExpc3RlbmVyT3B0aW9ucy9ibG9iL2doLXBhZ2VzL2V4cGxhaW5lci5tZFxuXHQvLyBJc3N1ZSAjNzg1XG5cdGZ1bmN0aW9uIGdldFN1cHBvcnRzUGFzc2l2ZSgpIHtcblxuXHRcdHZhciBzdXBwb3J0c1Bhc3NpdmUgPSBmYWxzZTtcblxuXHRcdHRyeSB7XG5cblx0XHRcdHZhciBvcHRzID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHtcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdFx0XHRcdFx0c3VwcG9ydHNQYXNzaXZlID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0ZXN0JywgbnVsbCwgb3B0cyk7XG5cdFx0fSBjYXRjaCAoZSkge31cblxuXHRcdHJldHVybiBzdXBwb3J0c1Bhc3NpdmU7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRTdXBwb3J0c1RvdWNoQWN0aW9uTm9uZSgpIHtcblx0XHRyZXR1cm4gd2luZG93LkNTUyAmJiBDU1Muc3VwcG9ydHMgJiYgQ1NTLnN1cHBvcnRzKCd0b3VjaC1hY3Rpb24nLCAnbm9uZScpO1xuXHR9XG5cblx0Ly8gVmFsdWUgY2FsY3VsYXRpb25cblxuXHQvLyBEZXRlcm1pbmUgdGhlIHNpemUgb2YgYSBzdWItcmFuZ2UgaW4gcmVsYXRpb24gdG8gYSBmdWxsIHJhbmdlLlxuXHRmdW5jdGlvbiBzdWJSYW5nZVJhdGlvKHBhLCBwYikge1xuXHRcdHJldHVybiAxMDAgLyAocGIgLSBwYSk7XG5cdH1cblxuXHQvLyAocGVyY2VudGFnZSkgSG93IG1hbnkgcGVyY2VudCBpcyB0aGlzIHZhbHVlIG9mIHRoaXMgcmFuZ2U/XG5cdGZ1bmN0aW9uIGZyb21QZXJjZW50YWdlKHJhbmdlLCB2YWx1ZSkge1xuXHRcdHJldHVybiB2YWx1ZSAqIDEwMCAvIChyYW5nZVsxXSAtIHJhbmdlWzBdKTtcblx0fVxuXG5cdC8vIChwZXJjZW50YWdlKSBXaGVyZSBpcyB0aGlzIHZhbHVlIG9uIHRoaXMgcmFuZ2U/XG5cdGZ1bmN0aW9uIHRvUGVyY2VudGFnZShyYW5nZSwgdmFsdWUpIHtcblx0XHRyZXR1cm4gZnJvbVBlcmNlbnRhZ2UocmFuZ2UsIHJhbmdlWzBdIDwgMCA/IHZhbHVlICsgTWF0aC5hYnMocmFuZ2VbMF0pIDogdmFsdWUgLSByYW5nZVswXSk7XG5cdH1cblxuXHQvLyAodmFsdWUpIEhvdyBtdWNoIGlzIHRoaXMgcGVyY2VudGFnZSBvbiB0aGlzIHJhbmdlP1xuXHRmdW5jdGlvbiBpc1BlcmNlbnRhZ2UocmFuZ2UsIHZhbHVlKSB7XG5cdFx0cmV0dXJuIHZhbHVlICogKHJhbmdlWzFdIC0gcmFuZ2VbMF0pIC8gMTAwICsgcmFuZ2VbMF07XG5cdH1cblxuXHQvLyBSYW5nZSBjb252ZXJzaW9uXG5cblx0ZnVuY3Rpb24gZ2V0Sih2YWx1ZSwgYXJyKSB7XG5cblx0XHR2YXIgaiA9IDE7XG5cblx0XHR3aGlsZSAodmFsdWUgPj0gYXJyW2pdKSB7XG5cdFx0XHRqICs9IDE7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGo7XG5cdH1cblxuXHQvLyAocGVyY2VudGFnZSkgSW5wdXQgYSB2YWx1ZSwgZmluZCB3aGVyZSwgb24gYSBzY2FsZSBvZiAwLTEwMCwgaXQgYXBwbGllcy5cblx0ZnVuY3Rpb24gdG9TdGVwcGluZyh4VmFsLCB4UGN0LCB2YWx1ZSkge1xuXG5cdFx0aWYgKHZhbHVlID49IHhWYWwuc2xpY2UoLTEpWzBdKSB7XG5cdFx0XHRyZXR1cm4gMTAwO1xuXHRcdH1cblxuXHRcdHZhciBqID0gZ2V0Sih2YWx1ZSwgeFZhbCksXG5cdFx0ICAgIHZhLFxuXHRcdCAgICB2Yixcblx0XHQgICAgcGEsXG5cdFx0ICAgIHBiO1xuXG5cdFx0dmEgPSB4VmFsW2ogLSAxXTtcblx0XHR2YiA9IHhWYWxbal07XG5cdFx0cGEgPSB4UGN0W2ogLSAxXTtcblx0XHRwYiA9IHhQY3Rbal07XG5cblx0XHRyZXR1cm4gcGEgKyB0b1BlcmNlbnRhZ2UoW3ZhLCB2Yl0sIHZhbHVlKSAvIHN1YlJhbmdlUmF0aW8ocGEsIHBiKTtcblx0fVxuXG5cdC8vICh2YWx1ZSkgSW5wdXQgYSBwZXJjZW50YWdlLCBmaW5kIHdoZXJlIGl0IGlzIG9uIHRoZSBzcGVjaWZpZWQgcmFuZ2UuXG5cdGZ1bmN0aW9uIGZyb21TdGVwcGluZyh4VmFsLCB4UGN0LCB2YWx1ZSkge1xuXG5cdFx0Ly8gVGhlcmUgaXMgbm8gcmFuZ2UgZ3JvdXAgdGhhdCBmaXRzIDEwMFxuXHRcdGlmICh2YWx1ZSA+PSAxMDApIHtcblx0XHRcdHJldHVybiB4VmFsLnNsaWNlKC0xKVswXTtcblx0XHR9XG5cblx0XHR2YXIgaiA9IGdldEoodmFsdWUsIHhQY3QpLFxuXHRcdCAgICB2YSxcblx0XHQgICAgdmIsXG5cdFx0ICAgIHBhLFxuXHRcdCAgICBwYjtcblxuXHRcdHZhID0geFZhbFtqIC0gMV07XG5cdFx0dmIgPSB4VmFsW2pdO1xuXHRcdHBhID0geFBjdFtqIC0gMV07XG5cdFx0cGIgPSB4UGN0W2pdO1xuXG5cdFx0cmV0dXJuIGlzUGVyY2VudGFnZShbdmEsIHZiXSwgKHZhbHVlIC0gcGEpICogc3ViUmFuZ2VSYXRpbyhwYSwgcGIpKTtcblx0fVxuXG5cdC8vIChwZXJjZW50YWdlKSBHZXQgdGhlIHN0ZXAgdGhhdCBhcHBsaWVzIGF0IGEgY2VydGFpbiB2YWx1ZS5cblx0ZnVuY3Rpb24gZ2V0U3RlcCh4UGN0LCB4U3RlcHMsIHNuYXAsIHZhbHVlKSB7XG5cblx0XHRpZiAodmFsdWUgPT09IDEwMCkge1xuXHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdH1cblxuXHRcdHZhciBqID0gZ2V0Sih2YWx1ZSwgeFBjdCksXG5cdFx0ICAgIGEsXG5cdFx0ICAgIGI7XG5cblx0XHQvLyBJZiAnc25hcCcgaXMgc2V0LCBzdGVwcyBhcmUgdXNlZCBhcyBmaXhlZCBwb2ludHMgb24gdGhlIHNsaWRlci5cblx0XHRpZiAoc25hcCkge1xuXG5cdFx0XHRhID0geFBjdFtqIC0gMV07XG5cdFx0XHRiID0geFBjdFtqXTtcblxuXHRcdFx0Ly8gRmluZCB0aGUgY2xvc2VzdCBwb3NpdGlvbiwgYSBvciBiLlxuXHRcdFx0aWYgKHZhbHVlIC0gYSA+IChiIC0gYSkgLyAyKSB7XG5cdFx0XHRcdHJldHVybiBiO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gYTtcblx0XHR9XG5cblx0XHRpZiAoIXhTdGVwc1tqIC0gMV0pIHtcblx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4geFBjdFtqIC0gMV0gKyBjbG9zZXN0KHZhbHVlIC0geFBjdFtqIC0gMV0sIHhTdGVwc1tqIC0gMV0pO1xuXHR9XG5cblx0Ly8gRW50cnkgcGFyc2luZ1xuXG5cdGZ1bmN0aW9uIGhhbmRsZUVudHJ5UG9pbnQoaW5kZXgsIHZhbHVlLCB0aGF0KSB7XG5cblx0XHR2YXIgcGVyY2VudGFnZTtcblxuXHRcdC8vIFdyYXAgbnVtZXJpY2FsIGlucHV0IGluIGFuIGFycmF5LlxuXHRcdGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIpIHtcblx0XHRcdHZhbHVlID0gW3ZhbHVlXTtcblx0XHR9XG5cblx0XHQvLyBSZWplY3QgYW55IGludmFsaWQgaW5wdXQsIGJ5IHRlc3Rpbmcgd2hldGhlciB2YWx1ZSBpcyBhbiBhcnJheS5cblx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSAhPT0gJ1tvYmplY3QgQXJyYXldJykge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncmFuZ2UnIGNvbnRhaW5zIGludmFsaWQgdmFsdWUuXCIpO1xuXHRcdH1cblxuXHRcdC8vIENvdmVydCBtaW4vbWF4IHN5bnRheCB0byAwIGFuZCAxMDAuXG5cdFx0aWYgKGluZGV4ID09PSAnbWluJykge1xuXHRcdFx0cGVyY2VudGFnZSA9IDA7XG5cdFx0fSBlbHNlIGlmIChpbmRleCA9PT0gJ21heCcpIHtcblx0XHRcdHBlcmNlbnRhZ2UgPSAxMDA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHBlcmNlbnRhZ2UgPSBwYXJzZUZsb2F0KGluZGV4KTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb3IgY29ycmVjdCBpbnB1dC5cblx0XHRpZiAoIWlzTnVtZXJpYyhwZXJjZW50YWdlKSB8fCAhaXNOdW1lcmljKHZhbHVlWzBdKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncmFuZ2UnIHZhbHVlIGlzbid0IG51bWVyaWMuXCIpO1xuXHRcdH1cblxuXHRcdC8vIFN0b3JlIHZhbHVlcy5cblx0XHR0aGF0LnhQY3QucHVzaChwZXJjZW50YWdlKTtcblx0XHR0aGF0LnhWYWwucHVzaCh2YWx1ZVswXSk7XG5cblx0XHQvLyBOYU4gd2lsbCBldmFsdWF0ZSB0byBmYWxzZSB0b28sIGJ1dCB0byBrZWVwXG5cdFx0Ly8gbG9nZ2luZyBjbGVhciwgc2V0IHN0ZXAgZXhwbGljaXRseS4gTWFrZSBzdXJlXG5cdFx0Ly8gbm90IHRvIG92ZXJyaWRlIHRoZSAnc3RlcCcgc2V0dGluZyB3aXRoIGZhbHNlLlxuXHRcdGlmICghcGVyY2VudGFnZSkge1xuXHRcdFx0aWYgKCFpc05hTih2YWx1ZVsxXSkpIHtcblx0XHRcdFx0dGhhdC54U3RlcHNbMF0gPSB2YWx1ZVsxXTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhhdC54U3RlcHMucHVzaChpc05hTih2YWx1ZVsxXSkgPyBmYWxzZSA6IHZhbHVlWzFdKTtcblx0XHR9XG5cblx0XHR0aGF0LnhIaWdoZXN0Q29tcGxldGVTdGVwLnB1c2goMCk7XG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVTdGVwUG9pbnQoaSwgbiwgdGhhdCkge1xuXG5cdFx0Ly8gSWdub3JlICdmYWxzZScgc3RlcHBpbmcuXG5cdFx0aWYgKCFuKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBGYWN0b3IgdG8gcmFuZ2UgcmF0aW9cblx0XHR0aGF0LnhTdGVwc1tpXSA9IGZyb21QZXJjZW50YWdlKFt0aGF0LnhWYWxbaV0sIHRoYXQueFZhbFtpICsgMV1dLCBuKSAvIHN1YlJhbmdlUmF0aW8odGhhdC54UGN0W2ldLCB0aGF0LnhQY3RbaSArIDFdKTtcblxuXHRcdHZhciB0b3RhbFN0ZXBzID0gKHRoYXQueFZhbFtpICsgMV0gLSB0aGF0LnhWYWxbaV0pIC8gdGhhdC54TnVtU3RlcHNbaV07XG5cdFx0dmFyIGhpZ2hlc3RTdGVwID0gTWF0aC5jZWlsKE51bWJlcih0b3RhbFN0ZXBzLnRvRml4ZWQoMykpIC0gMSk7XG5cdFx0dmFyIHN0ZXAgPSB0aGF0LnhWYWxbaV0gKyB0aGF0LnhOdW1TdGVwc1tpXSAqIGhpZ2hlc3RTdGVwO1xuXG5cdFx0dGhhdC54SGlnaGVzdENvbXBsZXRlU3RlcFtpXSA9IHN0ZXA7XG5cdH1cblxuXHQvLyBJbnRlcmZhY2VcblxuXHRmdW5jdGlvbiBTcGVjdHJ1bShlbnRyeSwgc25hcCwgc2luZ2xlU3RlcCkge1xuXG5cdFx0dGhpcy54UGN0ID0gW107XG5cdFx0dGhpcy54VmFsID0gW107XG5cdFx0dGhpcy54U3RlcHMgPSBbc2luZ2xlU3RlcCB8fCBmYWxzZV07XG5cdFx0dGhpcy54TnVtU3RlcHMgPSBbZmFsc2VdO1xuXHRcdHRoaXMueEhpZ2hlc3RDb21wbGV0ZVN0ZXAgPSBbXTtcblxuXHRcdHRoaXMuc25hcCA9IHNuYXA7XG5cblx0XHR2YXIgaW5kZXgsXG5cdFx0ICAgIG9yZGVyZWQgPSBbLyogWzAsICdtaW4nXSwgWzEsICc1MCUnXSwgWzIsICdtYXgnXSAqL107XG5cblx0XHQvLyBNYXAgdGhlIG9iamVjdCBrZXlzIHRvIGFuIGFycmF5LlxuXHRcdGZvciAoaW5kZXggaW4gZW50cnkpIHtcblx0XHRcdGlmIChlbnRyeS5oYXNPd25Qcm9wZXJ0eShpbmRleCkpIHtcblx0XHRcdFx0b3JkZXJlZC5wdXNoKFtlbnRyeVtpbmRleF0sIGluZGV4XSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU29ydCBhbGwgZW50cmllcyBieSB2YWx1ZSAobnVtZXJpYyBzb3J0KS5cblx0XHRpZiAob3JkZXJlZC5sZW5ndGggJiYgX3R5cGVvZihvcmRlcmVkWzBdWzBdKSA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0b3JkZXJlZC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG5cdFx0XHRcdHJldHVybiBhWzBdWzBdIC0gYlswXVswXTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRvcmRlcmVkLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcblx0XHRcdFx0cmV0dXJuIGFbMF0gLSBiWzBdO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBhbGwgZW50cmllcyB0byBzdWJyYW5nZXMuXG5cdFx0Zm9yIChpbmRleCA9IDA7IGluZGV4IDwgb3JkZXJlZC5sZW5ndGg7IGluZGV4KyspIHtcblx0XHRcdGhhbmRsZUVudHJ5UG9pbnQob3JkZXJlZFtpbmRleF1bMV0sIG9yZGVyZWRbaW5kZXhdWzBdLCB0aGlzKTtcblx0XHR9XG5cblx0XHQvLyBTdG9yZSB0aGUgYWN0dWFsIHN0ZXAgdmFsdWVzLlxuXHRcdC8vIHhTdGVwcyBpcyBzb3J0ZWQgaW4gdGhlIHNhbWUgb3JkZXIgYXMgeFBjdCBhbmQgeFZhbC5cblx0XHR0aGlzLnhOdW1TdGVwcyA9IHRoaXMueFN0ZXBzLnNsaWNlKDApO1xuXG5cdFx0Ly8gQ29udmVydCBhbGwgbnVtZXJpYyBzdGVwcyB0byB0aGUgcGVyY2VudGFnZSBvZiB0aGUgc3VicmFuZ2UgdGhleSByZXByZXNlbnQuXG5cdFx0Zm9yIChpbmRleCA9IDA7IGluZGV4IDwgdGhpcy54TnVtU3RlcHMubGVuZ3RoOyBpbmRleCsrKSB7XG5cdFx0XHRoYW5kbGVTdGVwUG9pbnQoaW5kZXgsIHRoaXMueE51bVN0ZXBzW2luZGV4XSwgdGhpcyk7XG5cdFx0fVxuXHR9XG5cblx0U3BlY3RydW0ucHJvdG90eXBlLmdldE1hcmdpbiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXG5cdFx0dmFyIHN0ZXAgPSB0aGlzLnhOdW1TdGVwc1swXTtcblxuXHRcdGlmIChzdGVwICYmIHZhbHVlIC8gc3RlcCAlIDEgIT09IDApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2xpbWl0JywgJ21hcmdpbicgYW5kICdwYWRkaW5nJyBtdXN0IGJlIGRpdmlzaWJsZSBieSBzdGVwLlwiKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy54UGN0Lmxlbmd0aCA9PT0gMiA/IGZyb21QZXJjZW50YWdlKHRoaXMueFZhbCwgdmFsdWUpIDogZmFsc2U7XG5cdH07XG5cblx0U3BlY3RydW0ucHJvdG90eXBlLnRvU3RlcHBpbmcgPSBmdW5jdGlvbiAodmFsdWUpIHtcblxuXHRcdHZhbHVlID0gdG9TdGVwcGluZyh0aGlzLnhWYWwsIHRoaXMueFBjdCwgdmFsdWUpO1xuXG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9O1xuXG5cdFNwZWN0cnVtLnByb3RvdHlwZS5mcm9tU3RlcHBpbmcgPSBmdW5jdGlvbiAodmFsdWUpIHtcblxuXHRcdHJldHVybiBmcm9tU3RlcHBpbmcodGhpcy54VmFsLCB0aGlzLnhQY3QsIHZhbHVlKTtcblx0fTtcblxuXHRTcGVjdHJ1bS5wcm90b3R5cGUuZ2V0U3RlcCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXG5cdFx0dmFsdWUgPSBnZXRTdGVwKHRoaXMueFBjdCwgdGhpcy54U3RlcHMsIHRoaXMuc25hcCwgdmFsdWUpO1xuXG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9O1xuXG5cdFNwZWN0cnVtLnByb3RvdHlwZS5nZXROZWFyYnlTdGVwcyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXG5cdFx0dmFyIGogPSBnZXRKKHZhbHVlLCB0aGlzLnhQY3QpO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHN0ZXBCZWZvcmU6IHsgc3RhcnRWYWx1ZTogdGhpcy54VmFsW2ogLSAyXSwgc3RlcDogdGhpcy54TnVtU3RlcHNbaiAtIDJdLCBoaWdoZXN0U3RlcDogdGhpcy54SGlnaGVzdENvbXBsZXRlU3RlcFtqIC0gMl0gfSxcblx0XHRcdHRoaXNTdGVwOiB7IHN0YXJ0VmFsdWU6IHRoaXMueFZhbFtqIC0gMV0sIHN0ZXA6IHRoaXMueE51bVN0ZXBzW2ogLSAxXSwgaGlnaGVzdFN0ZXA6IHRoaXMueEhpZ2hlc3RDb21wbGV0ZVN0ZXBbaiAtIDFdIH0sXG5cdFx0XHRzdGVwQWZ0ZXI6IHsgc3RhcnRWYWx1ZTogdGhpcy54VmFsW2ogLSAwXSwgc3RlcDogdGhpcy54TnVtU3RlcHNbaiAtIDBdLCBoaWdoZXN0U3RlcDogdGhpcy54SGlnaGVzdENvbXBsZXRlU3RlcFtqIC0gMF0gfVxuXHRcdH07XG5cdH07XG5cblx0U3BlY3RydW0ucHJvdG90eXBlLmNvdW50U3RlcERlY2ltYWxzID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBzdGVwRGVjaW1hbHMgPSB0aGlzLnhOdW1TdGVwcy5tYXAoY291bnREZWNpbWFscyk7XG5cdFx0cmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsIHN0ZXBEZWNpbWFscyk7XG5cdH07XG5cblx0Ly8gT3V0c2lkZSB0ZXN0aW5nXG5cdFNwZWN0cnVtLnByb3RvdHlwZS5jb252ZXJ0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0U3RlcCh0aGlzLnRvU3RlcHBpbmcodmFsdWUpKTtcblx0fTtcblxuXHQvKlx0RXZlcnkgaW5wdXQgb3B0aW9uIGlzIHRlc3RlZCBhbmQgcGFyc2VkLiBUaGlzJ2xsIHByZXZlbnRcclxuIFx0ZW5kbGVzcyB2YWxpZGF0aW9uIGluIGludGVybmFsIG1ldGhvZHMuIFRoZXNlIHRlc3RzIGFyZVxyXG4gXHRzdHJ1Y3R1cmVkIHdpdGggYW4gaXRlbSBmb3IgZXZlcnkgb3B0aW9uIGF2YWlsYWJsZS4gQW5cclxuIFx0b3B0aW9uIGNhbiBiZSBtYXJrZWQgYXMgcmVxdWlyZWQgYnkgc2V0dGluZyB0aGUgJ3InIGZsYWcuXHJcbiBcdFRoZSB0ZXN0aW5nIGZ1bmN0aW9uIGlzIHByb3ZpZGVkIHdpdGggdGhyZWUgYXJndW1lbnRzOlxyXG4gXHRcdC0gVGhlIHByb3ZpZGVkIHZhbHVlIGZvciB0aGUgb3B0aW9uO1xyXG4gXHRcdC0gQSByZWZlcmVuY2UgdG8gdGhlIG9wdGlvbnMgb2JqZWN0O1xyXG4gXHRcdC0gVGhlIG5hbWUgZm9yIHRoZSBvcHRpb247XHJcbiBcclxuIFx0VGhlIHRlc3RpbmcgZnVuY3Rpb24gcmV0dXJucyBmYWxzZSB3aGVuIGFuIGVycm9yIGlzIGRldGVjdGVkLFxyXG4gXHRvciB0cnVlIHdoZW4gZXZlcnl0aGluZyBpcyBPSy4gSXQgY2FuIGFsc28gbW9kaWZ5IHRoZSBvcHRpb25cclxuIFx0b2JqZWN0LCB0byBtYWtlIHN1cmUgYWxsIHZhbHVlcyBjYW4gYmUgY29ycmVjdGx5IGxvb3BlZCBlbHNld2hlcmUuICovXG5cblx0dmFyIGRlZmF1bHRGb3JtYXR0ZXIgPSB7ICd0byc6IGZ1bmN0aW9uIHRvKHZhbHVlKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZS50b0ZpeGVkKDIpO1xuXHRcdH0sICdmcm9tJzogTnVtYmVyIH07XG5cblx0ZnVuY3Rpb24gdmFsaWRhdGVGb3JtYXQoZW50cnkpIHtcblxuXHRcdC8vIEFueSBvYmplY3Qgd2l0aCBhIHRvIGFuZCBmcm9tIG1ldGhvZCBpcyBzdXBwb3J0ZWQuXG5cdFx0aWYgKGlzVmFsaWRGb3JtYXR0ZXIoZW50cnkpKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdmb3JtYXQnIHJlcXVpcmVzICd0bycgYW5kICdmcm9tJyBtZXRob2RzLlwiKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RTdGVwKHBhcnNlZCwgZW50cnkpIHtcblxuXHRcdGlmICghaXNOdW1lcmljKGVudHJ5KSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnc3RlcCcgaXMgbm90IG51bWVyaWMuXCIpO1xuXHRcdH1cblxuXHRcdC8vIFRoZSBzdGVwIG9wdGlvbiBjYW4gc3RpbGwgYmUgdXNlZCB0byBzZXQgc3RlcHBpbmdcblx0XHQvLyBmb3IgbGluZWFyIHNsaWRlcnMuIE92ZXJ3cml0dGVuIGlmIHNldCBpbiAncmFuZ2UnLlxuXHRcdHBhcnNlZC5zaW5nbGVTdGVwID0gZW50cnk7XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0UmFuZ2UocGFyc2VkLCBlbnRyeSkge1xuXG5cdFx0Ly8gRmlsdGVyIGluY29ycmVjdCBpbnB1dC5cblx0XHRpZiAoKHR5cGVvZiBlbnRyeSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZW50cnkpKSAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShlbnRyeSkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3JhbmdlJyBpcyBub3QgYW4gb2JqZWN0LlwiKTtcblx0XHR9XG5cblx0XHQvLyBDYXRjaCBtaXNzaW5nIHN0YXJ0IG9yIGVuZC5cblx0XHRpZiAoZW50cnkubWluID09PSB1bmRlZmluZWQgfHwgZW50cnkubWF4ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogTWlzc2luZyAnbWluJyBvciAnbWF4JyBpbiAncmFuZ2UnLlwiKTtcblx0XHR9XG5cblx0XHQvLyBDYXRjaCBlcXVhbCBzdGFydCBvciBlbmQuXG5cdFx0aWYgKGVudHJ5Lm1pbiA9PT0gZW50cnkubWF4KSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdyYW5nZScgJ21pbicgYW5kICdtYXgnIGNhbm5vdCBiZSBlcXVhbC5cIik7XG5cdFx0fVxuXG5cdFx0cGFyc2VkLnNwZWN0cnVtID0gbmV3IFNwZWN0cnVtKGVudHJ5LCBwYXJzZWQuc25hcCwgcGFyc2VkLnNpbmdsZVN0ZXApO1xuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdFN0YXJ0KHBhcnNlZCwgZW50cnkpIHtcblxuXHRcdGVudHJ5ID0gYXNBcnJheShlbnRyeSk7XG5cblx0XHQvLyBWYWxpZGF0ZSBpbnB1dC4gVmFsdWVzIGFyZW4ndCB0ZXN0ZWQsIGFzIHRoZSBwdWJsaWMgLnZhbCBtZXRob2Rcblx0XHQvLyB3aWxsIGFsd2F5cyBwcm92aWRlIGEgdmFsaWQgbG9jYXRpb24uXG5cdFx0aWYgKCFBcnJheS5pc0FycmF5KGVudHJ5KSB8fCAhZW50cnkubGVuZ3RoKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdzdGFydCcgb3B0aW9uIGlzIGluY29ycmVjdC5cIik7XG5cdFx0fVxuXG5cdFx0Ly8gU3RvcmUgdGhlIG51bWJlciBvZiBoYW5kbGVzLlxuXHRcdHBhcnNlZC5oYW5kbGVzID0gZW50cnkubGVuZ3RoO1xuXG5cdFx0Ly8gV2hlbiB0aGUgc2xpZGVyIGlzIGluaXRpYWxpemVkLCB0aGUgLnZhbCBtZXRob2Qgd2lsbFxuXHRcdC8vIGJlIGNhbGxlZCB3aXRoIHRoZSBzdGFydCBvcHRpb25zLlxuXHRcdHBhcnNlZC5zdGFydCA9IGVudHJ5O1xuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdFNuYXAocGFyc2VkLCBlbnRyeSkge1xuXG5cdFx0Ly8gRW5mb3JjZSAxMDAlIHN0ZXBwaW5nIHdpdGhpbiBzdWJyYW5nZXMuXG5cdFx0cGFyc2VkLnNuYXAgPSBlbnRyeTtcblxuXHRcdGlmICh0eXBlb2YgZW50cnkgIT09ICdib29sZWFuJykge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnc25hcCcgb3B0aW9uIG11c3QgYmUgYSBib29sZWFuLlwiKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0QW5pbWF0ZShwYXJzZWQsIGVudHJ5KSB7XG5cblx0XHQvLyBFbmZvcmNlIDEwMCUgc3RlcHBpbmcgd2l0aGluIHN1YnJhbmdlcy5cblx0XHRwYXJzZWQuYW5pbWF0ZSA9IGVudHJ5O1xuXG5cdFx0aWYgKHR5cGVvZiBlbnRyeSAhPT0gJ2Jvb2xlYW4nKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdhbmltYXRlJyBvcHRpb24gbXVzdCBiZSBhIGJvb2xlYW4uXCIpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RBbmltYXRpb25EdXJhdGlvbihwYXJzZWQsIGVudHJ5KSB7XG5cblx0XHRwYXJzZWQuYW5pbWF0aW9uRHVyYXRpb24gPSBlbnRyeTtcblxuXHRcdGlmICh0eXBlb2YgZW50cnkgIT09ICdudW1iZXInKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdhbmltYXRpb25EdXJhdGlvbicgb3B0aW9uIG11c3QgYmUgYSBudW1iZXIuXCIpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RDb25uZWN0KHBhcnNlZCwgZW50cnkpIHtcblxuXHRcdHZhciBjb25uZWN0ID0gW2ZhbHNlXTtcblx0XHR2YXIgaTtcblxuXHRcdC8vIE1hcCBsZWdhY3kgb3B0aW9uc1xuXHRcdGlmIChlbnRyeSA9PT0gJ2xvd2VyJykge1xuXHRcdFx0ZW50cnkgPSBbdHJ1ZSwgZmFsc2VdO1xuXHRcdH0gZWxzZSBpZiAoZW50cnkgPT09ICd1cHBlcicpIHtcblx0XHRcdGVudHJ5ID0gW2ZhbHNlLCB0cnVlXTtcblx0XHR9XG5cblx0XHQvLyBIYW5kbGUgYm9vbGVhbiBvcHRpb25zXG5cdFx0aWYgKGVudHJ5ID09PSB0cnVlIHx8IGVudHJ5ID09PSBmYWxzZSkge1xuXG5cdFx0XHRmb3IgKGkgPSAxOyBpIDwgcGFyc2VkLmhhbmRsZXM7IGkrKykge1xuXHRcdFx0XHRjb25uZWN0LnB1c2goZW50cnkpO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25uZWN0LnB1c2goZmFsc2UpO1xuXHRcdH1cblxuXHRcdC8vIFJlamVjdCBpbnZhbGlkIGlucHV0XG5cdFx0ZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkoZW50cnkpIHx8ICFlbnRyeS5sZW5ndGggfHwgZW50cnkubGVuZ3RoICE9PSBwYXJzZWQuaGFuZGxlcyArIDEpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnY29ubmVjdCcgb3B0aW9uIGRvZXNuJ3QgbWF0Y2ggaGFuZGxlIGNvdW50LlwiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbm5lY3QgPSBlbnRyeTtcblx0XHRcdH1cblxuXHRcdHBhcnNlZC5jb25uZWN0ID0gY29ubmVjdDtcblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RPcmllbnRhdGlvbihwYXJzZWQsIGVudHJ5KSB7XG5cblx0XHQvLyBTZXQgb3JpZW50YXRpb24gdG8gYW4gYSBudW1lcmljYWwgdmFsdWUgZm9yIGVhc3lcblx0XHQvLyBhcnJheSBzZWxlY3Rpb24uXG5cdFx0c3dpdGNoIChlbnRyeSkge1xuXHRcdFx0Y2FzZSAnaG9yaXpvbnRhbCc6XG5cdFx0XHRcdHBhcnNlZC5vcnQgPSAwO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ3ZlcnRpY2FsJzpcblx0XHRcdFx0cGFyc2VkLm9ydCA9IDE7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnb3JpZW50YXRpb24nIG9wdGlvbiBpcyBpbnZhbGlkLlwiKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0TWFyZ2luKHBhcnNlZCwgZW50cnkpIHtcblxuXHRcdGlmICghaXNOdW1lcmljKGVudHJ5KSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnbWFyZ2luJyBvcHRpb24gbXVzdCBiZSBudW1lcmljLlwiKTtcblx0XHR9XG5cblx0XHQvLyBJc3N1ZSAjNTgyXG5cdFx0aWYgKGVudHJ5ID09PSAwKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0cGFyc2VkLm1hcmdpbiA9IHBhcnNlZC5zcGVjdHJ1bS5nZXRNYXJnaW4oZW50cnkpO1xuXG5cdFx0aWYgKCFwYXJzZWQubWFyZ2luKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdtYXJnaW4nIG9wdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBvbiBsaW5lYXIgc2xpZGVycy5cIik7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdExpbWl0KHBhcnNlZCwgZW50cnkpIHtcblxuXHRcdGlmICghaXNOdW1lcmljKGVudHJ5KSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnbGltaXQnIG9wdGlvbiBtdXN0IGJlIG51bWVyaWMuXCIpO1xuXHRcdH1cblxuXHRcdHBhcnNlZC5saW1pdCA9IHBhcnNlZC5zcGVjdHJ1bS5nZXRNYXJnaW4oZW50cnkpO1xuXG5cdFx0aWYgKCFwYXJzZWQubGltaXQgfHwgcGFyc2VkLmhhbmRsZXMgPCAyKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdsaW1pdCcgb3B0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIG9uIGxpbmVhciBzbGlkZXJzIHdpdGggMiBvciBtb3JlIGhhbmRsZXMuXCIpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RQYWRkaW5nKHBhcnNlZCwgZW50cnkpIHtcblxuXHRcdGlmICghaXNOdW1lcmljKGVudHJ5KSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncGFkZGluZycgb3B0aW9uIG11c3QgYmUgbnVtZXJpYy5cIik7XG5cdFx0fVxuXG5cdFx0aWYgKGVudHJ5ID09PSAwKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0cGFyc2VkLnBhZGRpbmcgPSBwYXJzZWQuc3BlY3RydW0uZ2V0TWFyZ2luKGVudHJ5KTtcblxuXHRcdGlmICghcGFyc2VkLnBhZGRpbmcpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3BhZGRpbmcnIG9wdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBvbiBsaW5lYXIgc2xpZGVycy5cIik7XG5cdFx0fVxuXG5cdFx0aWYgKHBhcnNlZC5wYWRkaW5nIDwgMCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncGFkZGluZycgb3B0aW9uIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXIuXCIpO1xuXHRcdH1cblxuXHRcdGlmIChwYXJzZWQucGFkZGluZyA+PSA1MCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncGFkZGluZycgb3B0aW9uIG11c3QgYmUgbGVzcyB0aGFuIGhhbGYgdGhlIHJhbmdlLlwiKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0RGlyZWN0aW9uKHBhcnNlZCwgZW50cnkpIHtcblxuXHRcdC8vIFNldCBkaXJlY3Rpb24gYXMgYSBudW1lcmljYWwgdmFsdWUgZm9yIGVhc3kgcGFyc2luZy5cblx0XHQvLyBJbnZlcnQgY29ubmVjdGlvbiBmb3IgUlRMIHNsaWRlcnMsIHNvIHRoYXQgdGhlIHByb3BlclxuXHRcdC8vIGhhbmRsZXMgZ2V0IHRoZSBjb25uZWN0L2JhY2tncm91bmQgY2xhc3Nlcy5cblx0XHRzd2l0Y2ggKGVudHJ5KSB7XG5cdFx0XHRjYXNlICdsdHInOlxuXHRcdFx0XHRwYXJzZWQuZGlyID0gMDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdydGwnOlxuXHRcdFx0XHRwYXJzZWQuZGlyID0gMTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdkaXJlY3Rpb24nIG9wdGlvbiB3YXMgbm90IHJlY29nbml6ZWQuXCIpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RCZWhhdmlvdXIocGFyc2VkLCBlbnRyeSkge1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoZSBpbnB1dCBpcyBhIHN0cmluZy5cblx0XHRpZiAodHlwZW9mIGVudHJ5ICE9PSAnc3RyaW5nJykge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnYmVoYXZpb3VyJyBtdXN0IGJlIGEgc3RyaW5nIGNvbnRhaW5pbmcgb3B0aW9ucy5cIik7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlIHN0cmluZyBjb250YWlucyBhbnkga2V5d29yZHMuXG5cdFx0Ly8gTm9uZSBhcmUgcmVxdWlyZWQuXG5cdFx0dmFyIHRhcCA9IGVudHJ5LmluZGV4T2YoJ3RhcCcpID49IDA7XG5cdFx0dmFyIGRyYWcgPSBlbnRyeS5pbmRleE9mKCdkcmFnJykgPj0gMDtcblx0XHR2YXIgZml4ZWQgPSBlbnRyeS5pbmRleE9mKCdmaXhlZCcpID49IDA7XG5cdFx0dmFyIHNuYXAgPSBlbnRyeS5pbmRleE9mKCdzbmFwJykgPj0gMDtcblx0XHR2YXIgaG92ZXIgPSBlbnRyeS5pbmRleE9mKCdob3ZlcicpID49IDA7XG5cblx0XHRpZiAoZml4ZWQpIHtcblxuXHRcdFx0aWYgKHBhcnNlZC5oYW5kbGVzICE9PSAyKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2ZpeGVkJyBiZWhhdmlvdXIgbXVzdCBiZSB1c2VkIHdpdGggMiBoYW5kbGVzXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBVc2UgbWFyZ2luIHRvIGVuZm9yY2UgZml4ZWQgc3RhdGVcblx0XHRcdHRlc3RNYXJnaW4ocGFyc2VkLCBwYXJzZWQuc3RhcnRbMV0gLSBwYXJzZWQuc3RhcnRbMF0pO1xuXHRcdH1cblxuXHRcdHBhcnNlZC5ldmVudHMgPSB7XG5cdFx0XHR0YXA6IHRhcCB8fCBzbmFwLFxuXHRcdFx0ZHJhZzogZHJhZyxcblx0XHRcdGZpeGVkOiBmaXhlZCxcblx0XHRcdHNuYXA6IHNuYXAsXG5cdFx0XHRob3ZlcjogaG92ZXJcblx0XHR9O1xuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdFRvb2x0aXBzKHBhcnNlZCwgZW50cnkpIHtcblxuXHRcdGlmIChlbnRyeSA9PT0gZmFsc2UpIHtcblx0XHRcdHJldHVybjtcblx0XHR9IGVsc2UgaWYgKGVudHJ5ID09PSB0cnVlKSB7XG5cblx0XHRcdHBhcnNlZC50b29sdGlwcyA9IFtdO1xuXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHBhcnNlZC5oYW5kbGVzOyBpKyspIHtcblx0XHRcdFx0cGFyc2VkLnRvb2x0aXBzLnB1c2godHJ1ZSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0cGFyc2VkLnRvb2x0aXBzID0gYXNBcnJheShlbnRyeSk7XG5cblx0XHRcdGlmIChwYXJzZWQudG9vbHRpcHMubGVuZ3RoICE9PSBwYXJzZWQuaGFuZGxlcykge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6IG11c3QgcGFzcyBhIGZvcm1hdHRlciBmb3IgYWxsIGhhbmRsZXMuXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHRwYXJzZWQudG9vbHRpcHMuZm9yRWFjaChmdW5jdGlvbiAoZm9ybWF0dGVyKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgZm9ybWF0dGVyICE9PSAnYm9vbGVhbicgJiYgKCh0eXBlb2YgZm9ybWF0dGVyID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihmb3JtYXR0ZXIpKSAhPT0gJ29iamVjdCcgfHwgdHlwZW9mIGZvcm1hdHRlci50byAhPT0gJ2Z1bmN0aW9uJykpIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICd0b29sdGlwcycgbXVzdCBiZSBwYXNzZWQgYSBmb3JtYXR0ZXIgb3IgJ2ZhbHNlJy5cIik7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RBcmlhRm9ybWF0KHBhcnNlZCwgZW50cnkpIHtcblx0XHRwYXJzZWQuYXJpYUZvcm1hdCA9IGVudHJ5O1xuXHRcdHZhbGlkYXRlRm9ybWF0KGVudHJ5KTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RGb3JtYXQocGFyc2VkLCBlbnRyeSkge1xuXHRcdHBhcnNlZC5mb3JtYXQgPSBlbnRyeTtcblx0XHR2YWxpZGF0ZUZvcm1hdChlbnRyeSk7XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0Q3NzUHJlZml4KHBhcnNlZCwgZW50cnkpIHtcblxuXHRcdGlmIChlbnRyeSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbnRyeSAhPT0gJ3N0cmluZycgJiYgZW50cnkgIT09IGZhbHNlKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdjc3NQcmVmaXgnIG11c3QgYmUgYSBzdHJpbmcgb3IgYGZhbHNlYC5cIik7XG5cdFx0fVxuXG5cdFx0cGFyc2VkLmNzc1ByZWZpeCA9IGVudHJ5O1xuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdENzc0NsYXNzZXMocGFyc2VkLCBlbnRyeSkge1xuXG5cdFx0aWYgKGVudHJ5ICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBlbnRyeSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZW50cnkpKSAhPT0gJ29iamVjdCcpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2Nzc0NsYXNzZXMnIG11c3QgYmUgYW4gb2JqZWN0LlwiKTtcblx0XHR9XG5cblx0XHRpZiAodHlwZW9mIHBhcnNlZC5jc3NQcmVmaXggPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRwYXJzZWQuY3NzQ2xhc3NlcyA9IHt9O1xuXG5cdFx0XHRmb3IgKHZhciBrZXkgaW4gZW50cnkpIHtcblx0XHRcdFx0aWYgKCFlbnRyeS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRwYXJzZWQuY3NzQ2xhc3Nlc1trZXldID0gcGFyc2VkLmNzc1ByZWZpeCArIGVudHJ5W2tleV07XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHBhcnNlZC5jc3NDbGFzc2VzID0gZW50cnk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdFVzZVJhZihwYXJzZWQsIGVudHJ5KSB7XG5cdFx0aWYgKGVudHJ5ID09PSB0cnVlIHx8IGVudHJ5ID09PSBmYWxzZSkge1xuXHRcdFx0cGFyc2VkLnVzZVJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGVudHJ5O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICd1c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnIG9wdGlvbiBzaG91bGQgYmUgdHJ1ZSAoZGVmYXVsdCkgb3IgZmFsc2UuXCIpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFRlc3QgYWxsIGRldmVsb3BlciBzZXR0aW5ncyBhbmQgcGFyc2UgdG8gYXNzdW1wdGlvbi1zYWZlIHZhbHVlcy5cblx0ZnVuY3Rpb24gdGVzdE9wdGlvbnMob3B0aW9ucykge1xuXG5cdFx0Ly8gVG8gcHJvdmUgYSBmaXggZm9yICM1MzcsIGZyZWV6ZSBvcHRpb25zIGhlcmUuXG5cdFx0Ly8gSWYgdGhlIG9iamVjdCBpcyBtb2RpZmllZCwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXG5cdFx0Ly8gT2JqZWN0LmZyZWV6ZShvcHRpb25zKTtcblxuXHRcdHZhciBwYXJzZWQgPSB7XG5cdFx0XHRtYXJnaW46IDAsXG5cdFx0XHRsaW1pdDogMCxcblx0XHRcdHBhZGRpbmc6IDAsXG5cdFx0XHRhbmltYXRlOiB0cnVlLFxuXHRcdFx0YW5pbWF0aW9uRHVyYXRpb246IDMwMCxcblx0XHRcdGFyaWFGb3JtYXQ6IGRlZmF1bHRGb3JtYXR0ZXIsXG5cdFx0XHRmb3JtYXQ6IGRlZmF1bHRGb3JtYXR0ZXJcblx0XHR9O1xuXG5cdFx0Ly8gVGVzdHMgYXJlIGV4ZWN1dGVkIGluIHRoZSBvcmRlciB0aGV5IGFyZSBwcmVzZW50ZWQgaGVyZS5cblx0XHR2YXIgdGVzdHMgPSB7XG5cdFx0XHQnc3RlcCc6IHsgcjogZmFsc2UsIHQ6IHRlc3RTdGVwIH0sXG5cdFx0XHQnc3RhcnQnOiB7IHI6IHRydWUsIHQ6IHRlc3RTdGFydCB9LFxuXHRcdFx0J2Nvbm5lY3QnOiB7IHI6IHRydWUsIHQ6IHRlc3RDb25uZWN0IH0sXG5cdFx0XHQnZGlyZWN0aW9uJzogeyByOiB0cnVlLCB0OiB0ZXN0RGlyZWN0aW9uIH0sXG5cdFx0XHQnc25hcCc6IHsgcjogZmFsc2UsIHQ6IHRlc3RTbmFwIH0sXG5cdFx0XHQnYW5pbWF0ZSc6IHsgcjogZmFsc2UsIHQ6IHRlc3RBbmltYXRlIH0sXG5cdFx0XHQnYW5pbWF0aW9uRHVyYXRpb24nOiB7IHI6IGZhbHNlLCB0OiB0ZXN0QW5pbWF0aW9uRHVyYXRpb24gfSxcblx0XHRcdCdyYW5nZSc6IHsgcjogdHJ1ZSwgdDogdGVzdFJhbmdlIH0sXG5cdFx0XHQnb3JpZW50YXRpb24nOiB7IHI6IGZhbHNlLCB0OiB0ZXN0T3JpZW50YXRpb24gfSxcblx0XHRcdCdtYXJnaW4nOiB7IHI6IGZhbHNlLCB0OiB0ZXN0TWFyZ2luIH0sXG5cdFx0XHQnbGltaXQnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0TGltaXQgfSxcblx0XHRcdCdwYWRkaW5nJzogeyByOiBmYWxzZSwgdDogdGVzdFBhZGRpbmcgfSxcblx0XHRcdCdiZWhhdmlvdXInOiB7IHI6IHRydWUsIHQ6IHRlc3RCZWhhdmlvdXIgfSxcblx0XHRcdCdhcmlhRm9ybWF0JzogeyByOiBmYWxzZSwgdDogdGVzdEFyaWFGb3JtYXQgfSxcblx0XHRcdCdmb3JtYXQnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0Rm9ybWF0IH0sXG5cdFx0XHQndG9vbHRpcHMnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0VG9vbHRpcHMgfSxcblx0XHRcdCdjc3NQcmVmaXgnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0Q3NzUHJlZml4IH0sXG5cdFx0XHQnY3NzQ2xhc3Nlcyc6IHsgcjogZmFsc2UsIHQ6IHRlc3RDc3NDbGFzc2VzIH0sXG5cdFx0XHQndXNlUmVxdWVzdEFuaW1hdGlvbkZyYW1lJzogeyByOiBmYWxzZSwgdDogdGVzdFVzZVJhZiB9XG5cdFx0fTtcblxuXHRcdHZhciBkZWZhdWx0cyA9IHtcblx0XHRcdCdjb25uZWN0JzogZmFsc2UsXG5cdFx0XHQnZGlyZWN0aW9uJzogJ2x0cicsXG5cdFx0XHQnYmVoYXZpb3VyJzogJ3RhcCcsXG5cdFx0XHQnb3JpZW50YXRpb24nOiAnaG9yaXpvbnRhbCcsXG5cdFx0XHQnY3NzUHJlZml4JzogJ25vVWktJyxcblx0XHRcdCdjc3NDbGFzc2VzJzoge1xuXHRcdFx0XHR0YXJnZXQ6ICd0YXJnZXQnLFxuXHRcdFx0XHRiYXNlOiAnYmFzZScsXG5cdFx0XHRcdG9yaWdpbjogJ29yaWdpbicsXG5cdFx0XHRcdGhhbmRsZTogJ2hhbmRsZScsXG5cdFx0XHRcdGhhbmRsZUxvd2VyOiAnaGFuZGxlLWxvd2VyJyxcblx0XHRcdFx0aGFuZGxlVXBwZXI6ICdoYW5kbGUtdXBwZXInLFxuXHRcdFx0XHRob3Jpem9udGFsOiAnaG9yaXpvbnRhbCcsXG5cdFx0XHRcdHZlcnRpY2FsOiAndmVydGljYWwnLFxuXHRcdFx0XHRiYWNrZ3JvdW5kOiAnYmFja2dyb3VuZCcsXG5cdFx0XHRcdGNvbm5lY3Q6ICdjb25uZWN0Jyxcblx0XHRcdFx0bHRyOiAnbHRyJyxcblx0XHRcdFx0cnRsOiAncnRsJyxcblx0XHRcdFx0ZHJhZ2dhYmxlOiAnZHJhZ2dhYmxlJyxcblx0XHRcdFx0ZHJhZzogJ3N0YXRlLWRyYWcnLFxuXHRcdFx0XHR0YXA6ICdzdGF0ZS10YXAnLFxuXHRcdFx0XHRhY3RpdmU6ICdhY3RpdmUnLFxuXHRcdFx0XHR0b29sdGlwOiAndG9vbHRpcCcsXG5cdFx0XHRcdHBpcHM6ICdwaXBzJyxcblx0XHRcdFx0cGlwc0hvcml6b250YWw6ICdwaXBzLWhvcml6b250YWwnLFxuXHRcdFx0XHRwaXBzVmVydGljYWw6ICdwaXBzLXZlcnRpY2FsJyxcblx0XHRcdFx0bWFya2VyOiAnbWFya2VyJyxcblx0XHRcdFx0bWFya2VySG9yaXpvbnRhbDogJ21hcmtlci1ob3Jpem9udGFsJyxcblx0XHRcdFx0bWFya2VyVmVydGljYWw6ICdtYXJrZXItdmVydGljYWwnLFxuXHRcdFx0XHRtYXJrZXJOb3JtYWw6ICdtYXJrZXItbm9ybWFsJyxcblx0XHRcdFx0bWFya2VyTGFyZ2U6ICdtYXJrZXItbGFyZ2UnLFxuXHRcdFx0XHRtYXJrZXJTdWI6ICdtYXJrZXItc3ViJyxcblx0XHRcdFx0dmFsdWU6ICd2YWx1ZScsXG5cdFx0XHRcdHZhbHVlSG9yaXpvbnRhbDogJ3ZhbHVlLWhvcml6b250YWwnLFxuXHRcdFx0XHR2YWx1ZVZlcnRpY2FsOiAndmFsdWUtdmVydGljYWwnLFxuXHRcdFx0XHR2YWx1ZU5vcm1hbDogJ3ZhbHVlLW5vcm1hbCcsXG5cdFx0XHRcdHZhbHVlTGFyZ2U6ICd2YWx1ZS1sYXJnZScsXG5cdFx0XHRcdHZhbHVlU3ViOiAndmFsdWUtc3ViJ1xuXHRcdFx0fSxcblx0XHRcdCd1c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnOiB0cnVlXG5cdFx0fTtcblxuXHRcdC8vIEFyaWFGb3JtYXQgZGVmYXVsdHMgdG8gcmVndWxhciBmb3JtYXQsIGlmIGFueS5cblx0XHRpZiAob3B0aW9ucy5mb3JtYXQgJiYgIW9wdGlvbnMuYXJpYUZvcm1hdCkge1xuXHRcdFx0b3B0aW9ucy5hcmlhRm9ybWF0ID0gb3B0aW9ucy5mb3JtYXQ7XG5cdFx0fVxuXG5cdFx0Ly8gUnVuIGFsbCBvcHRpb25zIHRocm91Z2ggYSB0ZXN0aW5nIG1lY2hhbmlzbSB0byBlbnN1cmUgY29ycmVjdFxuXHRcdC8vIGlucHV0LiBJdCBzaG91bGQgYmUgbm90ZWQgdGhhdCBvcHRpb25zIG1pZ2h0IGdldCBtb2RpZmllZCB0b1xuXHRcdC8vIGJlIGhhbmRsZWQgcHJvcGVybHkuIEUuZy4gd3JhcHBpbmcgaW50ZWdlcnMgaW4gYXJyYXlzLlxuXHRcdE9iamVjdC5rZXlzKHRlc3RzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG5cblx0XHRcdC8vIElmIHRoZSBvcHRpb24gaXNuJ3Qgc2V0LCBidXQgaXQgaXMgcmVxdWlyZWQsIHRocm93IGFuIGVycm9yLlxuXHRcdFx0aWYgKG9wdGlvbnNbbmFtZV0gPT09IHVuZGVmaW5lZCAmJiBkZWZhdWx0c1tuYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG5cblx0XHRcdFx0aWYgKHRlc3RzW25hbWVdLnIpIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdcIiArIG5hbWUgKyBcIicgaXMgcmVxdWlyZWQuXCIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdHRlc3RzW25hbWVdLnQocGFyc2VkLCBvcHRpb25zW25hbWVdID09PSB1bmRlZmluZWQgPyBkZWZhdWx0c1tuYW1lXSA6IG9wdGlvbnNbbmFtZV0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gRm9yd2FyZCBwaXBzIG9wdGlvbnNcblx0XHRwYXJzZWQucGlwcyA9IG9wdGlvbnMucGlwcztcblxuXHRcdHZhciBzdHlsZXMgPSBbWydsZWZ0JywgJ3RvcCddLCBbJ3JpZ2h0JywgJ2JvdHRvbSddXTtcblxuXHRcdC8vIFByZS1kZWZpbmUgdGhlIHN0eWxlcy5cblx0XHRwYXJzZWQuc3R5bGUgPSBzdHlsZXNbcGFyc2VkLmRpcl1bcGFyc2VkLm9ydF07XG5cdFx0cGFyc2VkLnN0eWxlT3Bvc2l0ZSA9IHN0eWxlc1twYXJzZWQuZGlyID8gMCA6IDFdW3BhcnNlZC5vcnRdO1xuXG5cdFx0cmV0dXJuIHBhcnNlZDtcblx0fVxuXG5cdGZ1bmN0aW9uIGNsb3N1cmUodGFyZ2V0LCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMpIHtcblxuXHRcdHZhciBhY3Rpb25zID0gZ2V0QWN0aW9ucygpO1xuXHRcdHZhciBzdXBwb3J0c1RvdWNoQWN0aW9uTm9uZSA9IGdldFN1cHBvcnRzVG91Y2hBY3Rpb25Ob25lKCk7XG5cdFx0dmFyIHN1cHBvcnRzUGFzc2l2ZSA9IHN1cHBvcnRzVG91Y2hBY3Rpb25Ob25lICYmIGdldFN1cHBvcnRzUGFzc2l2ZSgpO1xuXG5cdFx0Ly8gQWxsIHZhcmlhYmxlcyBsb2NhbCB0byAnY2xvc3VyZScgYXJlIHByZWZpeGVkIHdpdGggJ3Njb3BlXydcblx0XHR2YXIgc2NvcGVfVGFyZ2V0ID0gdGFyZ2V0O1xuXHRcdHZhciBzY29wZV9Mb2NhdGlvbnMgPSBbXTtcblx0XHR2YXIgc2NvcGVfQmFzZTtcblx0XHR2YXIgc2NvcGVfSGFuZGxlcztcblx0XHR2YXIgc2NvcGVfSGFuZGxlTnVtYmVycyA9IFtdO1xuXHRcdHZhciBzY29wZV9BY3RpdmVIYW5kbGUgPSBmYWxzZTtcblx0XHR2YXIgc2NvcGVfQ29ubmVjdHM7XG5cdFx0dmFyIHNjb3BlX1NwZWN0cnVtID0gb3B0aW9ucy5zcGVjdHJ1bTtcblx0XHR2YXIgc2NvcGVfVmFsdWVzID0gW107XG5cdFx0dmFyIHNjb3BlX0V2ZW50cyA9IHt9O1xuXHRcdHZhciBzY29wZV9TZWxmO1xuXHRcdHZhciBzY29wZV9QaXBzO1xuXHRcdHZhciBzY29wZV9MaXN0ZW5lcnMgPSBudWxsO1xuXHRcdHZhciBzY29wZV9Eb2N1bWVudCA9IHRhcmdldC5vd25lckRvY3VtZW50O1xuXHRcdHZhciBzY29wZV9Eb2N1bWVudEVsZW1lbnQgPSBzY29wZV9Eb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdFx0dmFyIHNjb3BlX0JvZHkgPSBzY29wZV9Eb2N1bWVudC5ib2R5O1xuXG5cdFx0Ly8gQ3JlYXRlcyBhIG5vZGUsIGFkZHMgaXQgdG8gdGFyZ2V0LCByZXR1cm5zIHRoZSBuZXcgbm9kZS5cblx0XHRmdW5jdGlvbiBhZGROb2RlVG8odGFyZ2V0LCBjbGFzc05hbWUpIHtcblxuXHRcdFx0dmFyIGRpdiA9IHNjb3BlX0RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG5cdFx0XHRpZiAoY2xhc3NOYW1lKSB7XG5cdFx0XHRcdGFkZENsYXNzKGRpdiwgY2xhc3NOYW1lKTtcblx0XHRcdH1cblxuXHRcdFx0dGFyZ2V0LmFwcGVuZENoaWxkKGRpdik7XG5cblx0XHRcdHJldHVybiBkaXY7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwZW5kIGEgb3JpZ2luIHRvIHRoZSBiYXNlXG5cdFx0ZnVuY3Rpb24gYWRkT3JpZ2luKGJhc2UsIGhhbmRsZU51bWJlcikge1xuXG5cdFx0XHR2YXIgb3JpZ2luID0gYWRkTm9kZVRvKGJhc2UsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5vcmlnaW4pO1xuXHRcdFx0dmFyIGhhbmRsZSA9IGFkZE5vZGVUbyhvcmlnaW4sIG9wdGlvbnMuY3NzQ2xhc3Nlcy5oYW5kbGUpO1xuXG5cdFx0XHRoYW5kbGUuc2V0QXR0cmlidXRlKCdkYXRhLWhhbmRsZScsIGhhbmRsZU51bWJlcik7XG5cblx0XHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvR2xvYmFsX2F0dHJpYnV0ZXMvdGFiaW5kZXhcblx0XHRcdC8vIDAgPSBmb2N1c2FibGUgYW5kIHJlYWNoYWJsZVxuXHRcdFx0aGFuZGxlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuXHRcdFx0aGFuZGxlLnNldEF0dHJpYnV0ZSgncm9sZScsICdzbGlkZXInKTtcblx0XHRcdGhhbmRsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtb3JpZW50YXRpb24nLCBvcHRpb25zLm9ydCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCcpO1xuXG5cdFx0XHRpZiAoaGFuZGxlTnVtYmVyID09PSAwKSB7XG5cdFx0XHRcdGFkZENsYXNzKGhhbmRsZSwgb3B0aW9ucy5jc3NDbGFzc2VzLmhhbmRsZUxvd2VyKTtcblx0XHRcdH0gZWxzZSBpZiAoaGFuZGxlTnVtYmVyID09PSBvcHRpb25zLmhhbmRsZXMgLSAxKSB7XG5cdFx0XHRcdGFkZENsYXNzKGhhbmRsZSwgb3B0aW9ucy5jc3NDbGFzc2VzLmhhbmRsZVVwcGVyKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG9yaWdpbjtcblx0XHR9XG5cblx0XHQvLyBJbnNlcnQgbm9kZXMgZm9yIGNvbm5lY3QgZWxlbWVudHNcblx0XHRmdW5jdGlvbiBhZGRDb25uZWN0KGJhc2UsIGFkZCkge1xuXG5cdFx0XHRpZiAoIWFkZCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBhZGROb2RlVG8oYmFzZSwgb3B0aW9ucy5jc3NDbGFzc2VzLmNvbm5lY3QpO1xuXHRcdH1cblxuXHRcdC8vIEFkZCBoYW5kbGVzIHRvIHRoZSBzbGlkZXIgYmFzZS5cblx0XHRmdW5jdGlvbiBhZGRFbGVtZW50cyhjb25uZWN0T3B0aW9ucywgYmFzZSkge1xuXG5cdFx0XHRzY29wZV9IYW5kbGVzID0gW107XG5cdFx0XHRzY29wZV9Db25uZWN0cyA9IFtdO1xuXG5cdFx0XHRzY29wZV9Db25uZWN0cy5wdXNoKGFkZENvbm5lY3QoYmFzZSwgY29ubmVjdE9wdGlvbnNbMF0pKTtcblxuXHRcdFx0Ly8gWzo6OjpPPT09PU89PT09Tz09PT1dXG5cdFx0XHQvLyBjb25uZWN0T3B0aW9ucyA9IFswLCAxLCAxLCAxXVxuXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbnMuaGFuZGxlczsgaSsrKSB7XG5cdFx0XHRcdC8vIEtlZXAgYSBsaXN0IG9mIGFsbCBhZGRlZCBoYW5kbGVzLlxuXHRcdFx0XHRzY29wZV9IYW5kbGVzLnB1c2goYWRkT3JpZ2luKGJhc2UsIGkpKTtcblx0XHRcdFx0c2NvcGVfSGFuZGxlTnVtYmVyc1tpXSA9IGk7XG5cdFx0XHRcdHNjb3BlX0Nvbm5lY3RzLnB1c2goYWRkQ29ubmVjdChiYXNlLCBjb25uZWN0T3B0aW9uc1tpICsgMV0pKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBJbml0aWFsaXplIGEgc2luZ2xlIHNsaWRlci5cblx0XHRmdW5jdGlvbiBhZGRTbGlkZXIodGFyZ2V0KSB7XG5cblx0XHRcdC8vIEFwcGx5IGNsYXNzZXMgYW5kIGRhdGEgdG8gdGhlIHRhcmdldC5cblx0XHRcdGFkZENsYXNzKHRhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLnRhcmdldCk7XG5cblx0XHRcdGlmIChvcHRpb25zLmRpciA9PT0gMCkge1xuXHRcdFx0XHRhZGRDbGFzcyh0YXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5sdHIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YWRkQ2xhc3ModGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMucnRsKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKG9wdGlvbnMub3J0ID09PSAwKSB7XG5cdFx0XHRcdGFkZENsYXNzKHRhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLmhvcml6b250YWwpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YWRkQ2xhc3ModGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMudmVydGljYWwpO1xuXHRcdFx0fVxuXG5cdFx0XHRzY29wZV9CYXNlID0gYWRkTm9kZVRvKHRhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLmJhc2UpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGFkZFRvb2x0aXAoaGFuZGxlLCBoYW5kbGVOdW1iZXIpIHtcblxuXHRcdFx0aWYgKCFvcHRpb25zLnRvb2x0aXBzW2hhbmRsZU51bWJlcl0pIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gYWRkTm9kZVRvKGhhbmRsZS5maXJzdENoaWxkLCBvcHRpb25zLmNzc0NsYXNzZXMudG9vbHRpcCk7XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIHRvb2x0aXBzIG9wdGlvbiBpcyBhIHNob3J0aGFuZCBmb3IgdXNpbmcgdGhlICd1cGRhdGUnIGV2ZW50LlxuXHRcdGZ1bmN0aW9uIHRvb2x0aXBzKCkge1xuXG5cdFx0XHQvLyBUb29sdGlwcyBhcmUgYWRkZWQgd2l0aCBvcHRpb25zLnRvb2x0aXBzIGluIG9yaWdpbmFsIG9yZGVyLlxuXHRcdFx0dmFyIHRpcHMgPSBzY29wZV9IYW5kbGVzLm1hcChhZGRUb29sdGlwKTtcblxuXHRcdFx0YmluZEV2ZW50KCd1cGRhdGUnLCBmdW5jdGlvbiAodmFsdWVzLCBoYW5kbGVOdW1iZXIsIHVuZW5jb2RlZCkge1xuXG5cdFx0XHRcdGlmICghdGlwc1toYW5kbGVOdW1iZXJdKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIGZvcm1hdHRlZFZhbHVlID0gdmFsdWVzW2hhbmRsZU51bWJlcl07XG5cblx0XHRcdFx0aWYgKG9wdGlvbnMudG9vbHRpcHNbaGFuZGxlTnVtYmVyXSAhPT0gdHJ1ZSkge1xuXHRcdFx0XHRcdGZvcm1hdHRlZFZhbHVlID0gb3B0aW9ucy50b29sdGlwc1toYW5kbGVOdW1iZXJdLnRvKHVuZW5jb2RlZFtoYW5kbGVOdW1iZXJdKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRpcHNbaGFuZGxlTnVtYmVyXS5pbm5lckhUTUwgPSBmb3JtYXR0ZWRWYWx1ZTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGFyaWEoKSB7XG5cblx0XHRcdGJpbmRFdmVudCgndXBkYXRlJywgZnVuY3Rpb24gKHZhbHVlcywgaGFuZGxlTnVtYmVyLCB1bmVuY29kZWQsIHRhcCwgcG9zaXRpb25zKSB7XG5cblx0XHRcdFx0Ly8gVXBkYXRlIEFyaWEgVmFsdWVzIGZvciBhbGwgaGFuZGxlcywgYXMgYSBjaGFuZ2UgaW4gb25lIGNoYW5nZXMgbWluIGFuZCBtYXggdmFsdWVzIGZvciB0aGUgbmV4dC5cblx0XHRcdFx0c2NvcGVfSGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVOdW1iZXIpIHtcblxuXHRcdFx0XHRcdHZhciBoYW5kbGUgPSBzY29wZV9IYW5kbGVzW2hhbmRsZU51bWJlcl07XG5cblx0XHRcdFx0XHR2YXIgbWluID0gY2hlY2tIYW5kbGVQb3NpdGlvbihzY29wZV9Mb2NhdGlvbnMsIGhhbmRsZU51bWJlciwgMCwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0dmFyIG1heCA9IGNoZWNrSGFuZGxlUG9zaXRpb24oc2NvcGVfTG9jYXRpb25zLCBoYW5kbGVOdW1iZXIsIDEwMCwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG5cblx0XHRcdFx0XHR2YXIgbm93ID0gcG9zaXRpb25zW2hhbmRsZU51bWJlcl07XG5cdFx0XHRcdFx0dmFyIHRleHQgPSBvcHRpb25zLmFyaWFGb3JtYXQudG8odW5lbmNvZGVkW2hhbmRsZU51bWJlcl0pO1xuXG5cdFx0XHRcdFx0aGFuZGxlLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW1pbicsIG1pbi50b0ZpeGVkKDEpKTtcblx0XHRcdFx0XHRoYW5kbGUuY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbWF4JywgbWF4LnRvRml4ZWQoMSkpO1xuXHRcdFx0XHRcdGhhbmRsZS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVub3cnLCBub3cudG9GaXhlZCgxKSk7XG5cdFx0XHRcdFx0aGFuZGxlLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZXRleHQnLCB0ZXh0KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRHcm91cChtb2RlLCB2YWx1ZXMsIHN0ZXBwZWQpIHtcblxuXHRcdFx0Ly8gVXNlIHRoZSByYW5nZS5cblx0XHRcdGlmIChtb2RlID09PSAncmFuZ2UnIHx8IG1vZGUgPT09ICdzdGVwcycpIHtcblx0XHRcdFx0cmV0dXJuIHNjb3BlX1NwZWN0cnVtLnhWYWw7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChtb2RlID09PSAnY291bnQnKSB7XG5cblx0XHRcdFx0aWYgKCF2YWx1ZXMpIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICd2YWx1ZXMnIHJlcXVpcmVkIGZvciBtb2RlICdjb3VudCcuXCIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRGl2aWRlIDAgLSAxMDAgaW4gJ2NvdW50JyBwYXJ0cy5cblx0XHRcdFx0dmFyIHNwcmVhZCA9IDEwMCAvICh2YWx1ZXMgLSAxKTtcblx0XHRcdFx0dmFyIHY7XG5cdFx0XHRcdHZhciBpID0gMDtcblxuXHRcdFx0XHR2YWx1ZXMgPSBbXTtcblxuXHRcdFx0XHQvLyBMaXN0IHRoZXNlIHBhcnRzIGFuZCBoYXZlIHRoZW0gaGFuZGxlZCBhcyAncG9zaXRpb25zJy5cblx0XHRcdFx0d2hpbGUgKCh2ID0gaSsrICogc3ByZWFkKSA8PSAxMDApIHtcblx0XHRcdFx0XHR2YWx1ZXMucHVzaCh2KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdG1vZGUgPSAncG9zaXRpb25zJztcblx0XHRcdH1cblxuXHRcdFx0aWYgKG1vZGUgPT09ICdwb3NpdGlvbnMnKSB7XG5cblx0XHRcdFx0Ly8gTWFwIGFsbCBwZXJjZW50YWdlcyB0byBvbi1yYW5nZSB2YWx1ZXMuXG5cdFx0XHRcdHJldHVybiB2YWx1ZXMubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdFx0XHRcdHJldHVybiBzY29wZV9TcGVjdHJ1bS5mcm9tU3RlcHBpbmcoc3RlcHBlZCA/IHNjb3BlX1NwZWN0cnVtLmdldFN0ZXAodmFsdWUpIDogdmFsdWUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKG1vZGUgPT09ICd2YWx1ZXMnKSB7XG5cblx0XHRcdFx0Ly8gSWYgdGhlIHZhbHVlIG11c3QgYmUgc3RlcHBlZCwgaXQgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIGEgcGVyY2VudGFnZSBmaXJzdC5cblx0XHRcdFx0aWYgKHN0ZXBwZWQpIHtcblxuXHRcdFx0XHRcdHJldHVybiB2YWx1ZXMubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuXG5cdFx0XHRcdFx0XHQvLyBDb252ZXJ0IHRvIHBlcmNlbnRhZ2UsIGFwcGx5IHN0ZXAsIHJldHVybiB0byB2YWx1ZS5cblx0XHRcdFx0XHRcdHJldHVybiBzY29wZV9TcGVjdHJ1bS5mcm9tU3RlcHBpbmcoc2NvcGVfU3BlY3RydW0uZ2V0U3RlcChzY29wZV9TcGVjdHJ1bS50b1N0ZXBwaW5nKHZhbHVlKSkpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCB3ZSBjYW4gc2ltcGx5IHVzZSB0aGUgdmFsdWVzLlxuXHRcdFx0XHRyZXR1cm4gdmFsdWVzO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdlbmVyYXRlU3ByZWFkKGRlbnNpdHksIG1vZGUsIGdyb3VwKSB7XG5cblx0XHRcdGZ1bmN0aW9uIHNhZmVJbmNyZW1lbnQodmFsdWUsIGluY3JlbWVudCkge1xuXHRcdFx0XHQvLyBBdm9pZCBmbG9hdGluZyBwb2ludCB2YXJpYW5jZSBieSBkcm9wcGluZyB0aGUgc21hbGxlc3QgZGVjaW1hbCBwbGFjZXMuXG5cdFx0XHRcdHJldHVybiAodmFsdWUgKyBpbmNyZW1lbnQpLnRvRml4ZWQoNykgLyAxO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgaW5kZXhlcyA9IHt9O1xuXHRcdFx0dmFyIGZpcnN0SW5SYW5nZSA9IHNjb3BlX1NwZWN0cnVtLnhWYWxbMF07XG5cdFx0XHR2YXIgbGFzdEluUmFuZ2UgPSBzY29wZV9TcGVjdHJ1bS54VmFsW3Njb3BlX1NwZWN0cnVtLnhWYWwubGVuZ3RoIC0gMV07XG5cdFx0XHR2YXIgaWdub3JlRmlyc3QgPSBmYWxzZTtcblx0XHRcdHZhciBpZ25vcmVMYXN0ID0gZmFsc2U7XG5cdFx0XHR2YXIgcHJldlBjdCA9IDA7XG5cblx0XHRcdC8vIENyZWF0ZSBhIGNvcHkgb2YgdGhlIGdyb3VwLCBzb3J0IGl0IGFuZCBmaWx0ZXIgYXdheSBhbGwgZHVwbGljYXRlcy5cblx0XHRcdGdyb3VwID0gdW5pcXVlKGdyb3VwLnNsaWNlKCkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuXHRcdFx0XHRyZXR1cm4gYSAtIGI7XG5cdFx0XHR9KSk7XG5cblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgcmFuZ2Ugc3RhcnRzIHdpdGggdGhlIGZpcnN0IGVsZW1lbnQuXG5cdFx0XHRpZiAoZ3JvdXBbMF0gIT09IGZpcnN0SW5SYW5nZSkge1xuXHRcdFx0XHRncm91cC51bnNoaWZ0KGZpcnN0SW5SYW5nZSk7XG5cdFx0XHRcdGlnbm9yZUZpcnN0ID0gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTGlrZXdpc2UgZm9yIHRoZSBsYXN0IG9uZS5cblx0XHRcdGlmIChncm91cFtncm91cC5sZW5ndGggLSAxXSAhPT0gbGFzdEluUmFuZ2UpIHtcblx0XHRcdFx0Z3JvdXAucHVzaChsYXN0SW5SYW5nZSk7XG5cdFx0XHRcdGlnbm9yZUxhc3QgPSB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRncm91cC5mb3JFYWNoKGZ1bmN0aW9uIChjdXJyZW50LCBpbmRleCkge1xuXG5cdFx0XHRcdC8vIEdldCB0aGUgY3VycmVudCBzdGVwIGFuZCB0aGUgbG93ZXIgKyB1cHBlciBwb3NpdGlvbnMuXG5cdFx0XHRcdHZhciBzdGVwO1xuXHRcdFx0XHR2YXIgaTtcblx0XHRcdFx0dmFyIHE7XG5cdFx0XHRcdHZhciBsb3cgPSBjdXJyZW50O1xuXHRcdFx0XHR2YXIgaGlnaCA9IGdyb3VwW2luZGV4ICsgMV07XG5cdFx0XHRcdHZhciBuZXdQY3Q7XG5cdFx0XHRcdHZhciBwY3REaWZmZXJlbmNlO1xuXHRcdFx0XHR2YXIgcGN0UG9zO1xuXHRcdFx0XHR2YXIgdHlwZTtcblx0XHRcdFx0dmFyIHN0ZXBzO1xuXHRcdFx0XHR2YXIgcmVhbFN0ZXBzO1xuXHRcdFx0XHR2YXIgc3RlcHNpemU7XG5cblx0XHRcdFx0Ly8gV2hlbiB1c2luZyAnc3RlcHMnIG1vZGUsIHVzZSB0aGUgcHJvdmlkZWQgc3RlcHMuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSwgd2UnbGwgc3RlcCBvbiB0byB0aGUgbmV4dCBzdWJyYW5nZS5cblx0XHRcdFx0aWYgKG1vZGUgPT09ICdzdGVwcycpIHtcblx0XHRcdFx0XHRzdGVwID0gc2NvcGVfU3BlY3RydW0ueE51bVN0ZXBzW2luZGV4XTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIERlZmF1bHQgdG8gYSAnZnVsbCcgc3RlcC5cblx0XHRcdFx0aWYgKCFzdGVwKSB7XG5cdFx0XHRcdFx0c3RlcCA9IGhpZ2ggLSBsb3c7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBMb3cgY2FuIGJlIDAsIHNvIHRlc3QgZm9yIGZhbHNlLiBJZiBoaWdoIGlzIHVuZGVmaW5lZCxcblx0XHRcdFx0Ly8gd2UgYXJlIGF0IHRoZSBsYXN0IHN1YnJhbmdlLiBJbmRleCAwIGlzIGFscmVhZHkgaGFuZGxlZC5cblx0XHRcdFx0aWYgKGxvdyA9PT0gZmFsc2UgfHwgaGlnaCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gTWFrZSBzdXJlIHN0ZXAgaXNuJ3QgMCwgd2hpY2ggd291bGQgY2F1c2UgYW4gaW5maW5pdGUgbG9vcCAoIzY1NClcblx0XHRcdFx0c3RlcCA9IE1hdGgubWF4KHN0ZXAsIDAuMDAwMDAwMSk7XG5cblx0XHRcdFx0Ly8gRmluZCBhbGwgc3RlcHMgaW4gdGhlIHN1YnJhbmdlLlxuXHRcdFx0XHRmb3IgKGkgPSBsb3c7IGkgPD0gaGlnaDsgaSA9IHNhZmVJbmNyZW1lbnQoaSwgc3RlcCkpIHtcblxuXHRcdFx0XHRcdC8vIEdldCB0aGUgcGVyY2VudGFnZSB2YWx1ZSBmb3IgdGhlIGN1cnJlbnQgc3RlcCxcblx0XHRcdFx0XHQvLyBjYWxjdWxhdGUgdGhlIHNpemUgZm9yIHRoZSBzdWJyYW5nZS5cblx0XHRcdFx0XHRuZXdQY3QgPSBzY29wZV9TcGVjdHJ1bS50b1N0ZXBwaW5nKGkpO1xuXHRcdFx0XHRcdHBjdERpZmZlcmVuY2UgPSBuZXdQY3QgLSBwcmV2UGN0O1xuXG5cdFx0XHRcdFx0c3RlcHMgPSBwY3REaWZmZXJlbmNlIC8gZGVuc2l0eTtcblx0XHRcdFx0XHRyZWFsU3RlcHMgPSBNYXRoLnJvdW5kKHN0ZXBzKTtcblxuXHRcdFx0XHRcdC8vIFRoaXMgcmF0aW8gcmVwcmVzZW50cyB0aGUgYW1tb3VudCBvZiBwZXJjZW50YWdlLXNwYWNlIGEgcG9pbnQgaW5kaWNhdGVzLlxuXHRcdFx0XHRcdC8vIEZvciBhIGRlbnNpdHkgMSB0aGUgcG9pbnRzL3BlcmNlbnRhZ2UgPSAxLiBGb3IgZGVuc2l0eSAyLCB0aGF0IHBlcmNlbnRhZ2UgbmVlZHMgdG8gYmUgcmUtZGV2aWRlZC5cblx0XHRcdFx0XHQvLyBSb3VuZCB0aGUgcGVyY2VudGFnZSBvZmZzZXQgdG8gYW4gZXZlbiBudW1iZXIsIHRoZW4gZGl2aWRlIGJ5IHR3b1xuXHRcdFx0XHRcdC8vIHRvIHNwcmVhZCB0aGUgb2Zmc2V0IG9uIGJvdGggc2lkZXMgb2YgdGhlIHJhbmdlLlxuXHRcdFx0XHRcdHN0ZXBzaXplID0gcGN0RGlmZmVyZW5jZSAvIHJlYWxTdGVwcztcblxuXHRcdFx0XHRcdC8vIERpdmlkZSBhbGwgcG9pbnRzIGV2ZW5seSwgYWRkaW5nIHRoZSBjb3JyZWN0IG51bWJlciB0byB0aGlzIHN1YnJhbmdlLlxuXHRcdFx0XHRcdC8vIFJ1biB1cCB0byA8PSBzbyB0aGF0IDEwMCUgZ2V0cyBhIHBvaW50LCBldmVudCBpZiBpZ25vcmVMYXN0IGlzIHNldC5cblx0XHRcdFx0XHRmb3IgKHEgPSAxOyBxIDw9IHJlYWxTdGVwczsgcSArPSAxKSB7XG5cblx0XHRcdFx0XHRcdC8vIFRoZSByYXRpbyBiZXR3ZWVuIHRoZSByb3VuZGVkIHZhbHVlIGFuZCB0aGUgYWN0dWFsIHNpemUgbWlnaHQgYmUgfjElIG9mZi5cblx0XHRcdFx0XHRcdC8vIENvcnJlY3QgdGhlIHBlcmNlbnRhZ2Ugb2Zmc2V0IGJ5IHRoZSBudW1iZXIgb2YgcG9pbnRzXG5cdFx0XHRcdFx0XHQvLyBwZXIgc3VicmFuZ2UuIGRlbnNpdHkgPSAxIHdpbGwgcmVzdWx0IGluIDEwMCBwb2ludHMgb24gdGhlXG5cdFx0XHRcdFx0XHQvLyBmdWxsIHJhbmdlLCAyIGZvciA1MCwgNCBmb3IgMjUsIGV0Yy5cblx0XHRcdFx0XHRcdHBjdFBvcyA9IHByZXZQY3QgKyBxICogc3RlcHNpemU7XG5cdFx0XHRcdFx0XHRpbmRleGVzW3BjdFBvcy50b0ZpeGVkKDUpXSA9IFsneCcsIDBdO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIERldGVybWluZSB0aGUgcG9pbnQgdHlwZS5cblx0XHRcdFx0XHR0eXBlID0gZ3JvdXAuaW5kZXhPZihpKSA+IC0xID8gMSA6IG1vZGUgPT09ICdzdGVwcycgPyAyIDogMDtcblxuXHRcdFx0XHRcdC8vIEVuZm9yY2UgdGhlICdpZ25vcmVGaXJzdCcgb3B0aW9uIGJ5IG92ZXJ3cml0aW5nIHRoZSB0eXBlIGZvciAwLlxuXHRcdFx0XHRcdGlmICghaW5kZXggJiYgaWdub3JlRmlyc3QpIHtcblx0XHRcdFx0XHRcdHR5cGUgPSAwO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICghKGkgPT09IGhpZ2ggJiYgaWdub3JlTGFzdCkpIHtcblx0XHRcdFx0XHRcdC8vIE1hcmsgdGhlICd0eXBlJyBvZiB0aGlzIHBvaW50LiAwID0gcGxhaW4sIDEgPSByZWFsIHZhbHVlLCAyID0gc3RlcCB2YWx1ZS5cblx0XHRcdFx0XHRcdGluZGV4ZXNbbmV3UGN0LnRvRml4ZWQoNSldID0gW2ksIHR5cGVdO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFVwZGF0ZSB0aGUgcGVyY2VudGFnZSBjb3VudC5cblx0XHRcdFx0XHRwcmV2UGN0ID0gbmV3UGN0O1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGluZGV4ZXM7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYWRkTWFya2luZyhzcHJlYWQsIGZpbHRlckZ1bmMsIGZvcm1hdHRlcikge1xuXG5cdFx0XHR2YXIgZWxlbWVudCA9IHNjb3BlX0RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG5cdFx0XHR2YXIgdmFsdWVTaXplQ2xhc3NlcyA9IFtvcHRpb25zLmNzc0NsYXNzZXMudmFsdWVOb3JtYWwsIG9wdGlvbnMuY3NzQ2xhc3Nlcy52YWx1ZUxhcmdlLCBvcHRpb25zLmNzc0NsYXNzZXMudmFsdWVTdWJdO1xuXHRcdFx0dmFyIG1hcmtlclNpemVDbGFzc2VzID0gW29wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXJOb3JtYWwsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXJMYXJnZSwgb3B0aW9ucy5jc3NDbGFzc2VzLm1hcmtlclN1Yl07XG5cdFx0XHR2YXIgdmFsdWVPcmllbnRhdGlvbkNsYXNzZXMgPSBbb3B0aW9ucy5jc3NDbGFzc2VzLnZhbHVlSG9yaXpvbnRhbCwgb3B0aW9ucy5jc3NDbGFzc2VzLnZhbHVlVmVydGljYWxdO1xuXHRcdFx0dmFyIG1hcmtlck9yaWVudGF0aW9uQ2xhc3NlcyA9IFtvcHRpb25zLmNzc0NsYXNzZXMubWFya2VySG9yaXpvbnRhbCwgb3B0aW9ucy5jc3NDbGFzc2VzLm1hcmtlclZlcnRpY2FsXTtcblxuXHRcdFx0YWRkQ2xhc3MoZWxlbWVudCwgb3B0aW9ucy5jc3NDbGFzc2VzLnBpcHMpO1xuXHRcdFx0YWRkQ2xhc3MoZWxlbWVudCwgb3B0aW9ucy5vcnQgPT09IDAgPyBvcHRpb25zLmNzc0NsYXNzZXMucGlwc0hvcml6b250YWwgOiBvcHRpb25zLmNzc0NsYXNzZXMucGlwc1ZlcnRpY2FsKTtcblxuXHRcdFx0ZnVuY3Rpb24gZ2V0Q2xhc3Nlcyh0eXBlLCBzb3VyY2UpIHtcblx0XHRcdFx0dmFyIGEgPSBzb3VyY2UgPT09IG9wdGlvbnMuY3NzQ2xhc3Nlcy52YWx1ZTtcblx0XHRcdFx0dmFyIG9yaWVudGF0aW9uQ2xhc3NlcyA9IGEgPyB2YWx1ZU9yaWVudGF0aW9uQ2xhc3NlcyA6IG1hcmtlck9yaWVudGF0aW9uQ2xhc3Nlcztcblx0XHRcdFx0dmFyIHNpemVDbGFzc2VzID0gYSA/IHZhbHVlU2l6ZUNsYXNzZXMgOiBtYXJrZXJTaXplQ2xhc3NlcztcblxuXHRcdFx0XHRyZXR1cm4gc291cmNlICsgJyAnICsgb3JpZW50YXRpb25DbGFzc2VzW29wdGlvbnMub3J0XSArICcgJyArIHNpemVDbGFzc2VzW3R5cGVdO1xuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBhZGRTcHJlYWQob2Zmc2V0LCB2YWx1ZXMpIHtcblxuXHRcdFx0XHQvLyBBcHBseSB0aGUgZmlsdGVyIGZ1bmN0aW9uLCBpZiBpdCBpcyBzZXQuXG5cdFx0XHRcdHZhbHVlc1sxXSA9IHZhbHVlc1sxXSAmJiBmaWx0ZXJGdW5jID8gZmlsdGVyRnVuYyh2YWx1ZXNbMF0sIHZhbHVlc1sxXSkgOiB2YWx1ZXNbMV07XG5cblx0XHRcdFx0Ly8gQWRkIGEgbWFya2VyIGZvciBldmVyeSBwb2ludFxuXHRcdFx0XHR2YXIgbm9kZSA9IGFkZE5vZGVUbyhlbGVtZW50LCBmYWxzZSk7XG5cdFx0XHRcdG5vZGUuY2xhc3NOYW1lID0gZ2V0Q2xhc3Nlcyh2YWx1ZXNbMV0sIG9wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXIpO1xuXHRcdFx0XHRub2RlLnN0eWxlW29wdGlvbnMuc3R5bGVdID0gb2Zmc2V0ICsgJyUnO1xuXG5cdFx0XHRcdC8vIFZhbHVlcyBhcmUgb25seSBhcHBlbmRlZCBmb3IgcG9pbnRzIG1hcmtlZCAnMScgb3IgJzInLlxuXHRcdFx0XHRpZiAodmFsdWVzWzFdKSB7XG5cdFx0XHRcdFx0bm9kZSA9IGFkZE5vZGVUbyhlbGVtZW50LCBmYWxzZSk7XG5cdFx0XHRcdFx0bm9kZS5jbGFzc05hbWUgPSBnZXRDbGFzc2VzKHZhbHVlc1sxXSwgb3B0aW9ucy5jc3NDbGFzc2VzLnZhbHVlKTtcblx0XHRcdFx0XHRub2RlLnN0eWxlW29wdGlvbnMuc3R5bGVdID0gb2Zmc2V0ICsgJyUnO1xuXHRcdFx0XHRcdG5vZGUuaW5uZXJUZXh0ID0gZm9ybWF0dGVyLnRvKHZhbHVlc1swXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gQXBwZW5kIGFsbCBwb2ludHMuXG5cdFx0XHRPYmplY3Qua2V5cyhzcHJlYWQpLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcblx0XHRcdFx0YWRkU3ByZWFkKGEsIHNwcmVhZFthXSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlUGlwcygpIHtcblx0XHRcdGlmIChzY29wZV9QaXBzKSB7XG5cdFx0XHRcdHJlbW92ZUVsZW1lbnQoc2NvcGVfUGlwcyk7XG5cdFx0XHRcdHNjb3BlX1BpcHMgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHBpcHMoZ3JpZCkge1xuXG5cdFx0XHQvLyBGaXggIzY2OVxuXHRcdFx0cmVtb3ZlUGlwcygpO1xuXG5cdFx0XHR2YXIgbW9kZSA9IGdyaWQubW9kZTtcblx0XHRcdHZhciBkZW5zaXR5ID0gZ3JpZC5kZW5zaXR5IHx8IDE7XG5cdFx0XHR2YXIgZmlsdGVyID0gZ3JpZC5maWx0ZXIgfHwgZmFsc2U7XG5cdFx0XHR2YXIgdmFsdWVzID0gZ3JpZC52YWx1ZXMgfHwgZmFsc2U7XG5cdFx0XHR2YXIgc3RlcHBlZCA9IGdyaWQuc3RlcHBlZCB8fCBmYWxzZTtcblx0XHRcdHZhciBncm91cCA9IGdldEdyb3VwKG1vZGUsIHZhbHVlcywgc3RlcHBlZCk7XG5cdFx0XHR2YXIgc3ByZWFkID0gZ2VuZXJhdGVTcHJlYWQoZGVuc2l0eSwgbW9kZSwgZ3JvdXApO1xuXHRcdFx0dmFyIGZvcm1hdCA9IGdyaWQuZm9ybWF0IHx8IHtcblx0XHRcdFx0dG86IE1hdGgucm91bmRcblx0XHRcdH07XG5cblx0XHRcdHNjb3BlX1BpcHMgPSBzY29wZV9UYXJnZXQuYXBwZW5kQ2hpbGQoYWRkTWFya2luZyhzcHJlYWQsIGZpbHRlciwgZm9ybWF0KSk7XG5cblx0XHRcdHJldHVybiBzY29wZV9QaXBzO1xuXHRcdH1cblxuXHRcdC8vIFNob3J0aGFuZCBmb3IgYmFzZSBkaW1lbnNpb25zLlxuXHRcdGZ1bmN0aW9uIGJhc2VTaXplKCkge1xuXHRcdFx0dmFyIHJlY3QgPSBzY29wZV9CYXNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuXHRcdFx0ICAgIGFsdCA9ICdvZmZzZXQnICsgWydXaWR0aCcsICdIZWlnaHQnXVtvcHRpb25zLm9ydF07XG5cdFx0XHRyZXR1cm4gb3B0aW9ucy5vcnQgPT09IDAgPyByZWN0LndpZHRoIHx8IHNjb3BlX0Jhc2VbYWx0XSA6IHJlY3QuaGVpZ2h0IHx8IHNjb3BlX0Jhc2VbYWx0XTtcblx0XHR9XG5cblx0XHQvLyBIYW5kbGVyIGZvciBhdHRhY2hpbmcgZXZlbnRzIHRyb3VnaCBhIHByb3h5LlxuXHRcdGZ1bmN0aW9uIGF0dGFjaEV2ZW50KGV2ZW50cywgZWxlbWVudCwgY2FsbGJhY2ssIGRhdGEpIHtcblxuXHRcdFx0Ly8gVGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byAnZmlsdGVyJyBldmVudHMgdG8gdGhlIHNsaWRlci5cblx0XHRcdC8vIGVsZW1lbnQgaXMgYSBub2RlLCBub3QgYSBub2RlTGlzdFxuXG5cdFx0XHR2YXIgbWV0aG9kID0gZnVuY3Rpb24gbWV0aG9kKGUpIHtcblxuXHRcdFx0XHRpZiAoc2NvcGVfVGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFN0b3AgaWYgYW4gYWN0aXZlICd0YXAnIHRyYW5zaXRpb24gaXMgdGFraW5nIHBsYWNlLlxuXHRcdFx0XHRpZiAoaGFzQ2xhc3Moc2NvcGVfVGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMudGFwKSkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGUgPSBmaXhFdmVudChlLCBkYXRhLnBhZ2VPZmZzZXQpO1xuXG5cdFx0XHRcdC8vIEhhbmRsZSByZWplY3Qgb2YgbXVsdGl0b3VjaFxuXHRcdFx0XHRpZiAoIWUpIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJZ25vcmUgcmlnaHQgb3IgbWlkZGxlIGNsaWNrcyBvbiBzdGFydCAjNDU0XG5cdFx0XHRcdGlmIChldmVudHMgPT09IGFjdGlvbnMuc3RhcnQgJiYgZS5idXR0b25zICE9PSB1bmRlZmluZWQgJiYgZS5idXR0b25zID4gMSkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElnbm9yZSByaWdodCBvciBtaWRkbGUgY2xpY2tzIG9uIHN0YXJ0ICM0NTRcblx0XHRcdFx0aWYgKGRhdGEuaG92ZXIgJiYgZS5idXR0b25zKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gJ3N1cHBvcnRzUGFzc2l2ZScgaXMgb25seSB0cnVlIGlmIGEgYnJvd3NlciBhbHNvIHN1cHBvcnRzIHRvdWNoLWFjdGlvbjogbm9uZSBpbiBDU1MuXG5cdFx0XHRcdC8vIGlPUyBzYWZhcmkgZG9lcyBub3QsIHNvIGl0IGRvZXNuJ3QgZ2V0IHRvIGJlbmVmaXQgZnJvbSBwYXNzaXZlIHNjcm9sbGluZy4gaU9TIGRvZXMgc3VwcG9ydFxuXHRcdFx0XHQvLyB0b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbiwgYnV0IHRoYXQgYWxsb3dzIHBhbm5pbmcsIHdoaWNoIGJyZWFrc1xuXHRcdFx0XHQvLyBzbGlkZXJzIGFmdGVyIHpvb21pbmcvb24gbm9uLXJlc3BvbnNpdmUgcGFnZXMuXG5cdFx0XHRcdC8vIFNlZTogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzMzExMlxuXHRcdFx0XHRpZiAoIXN1cHBvcnRzUGFzc2l2ZSkge1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGUuY2FsY1BvaW50ID0gZS5wb2ludHNbb3B0aW9ucy5vcnRdO1xuXG5cdFx0XHRcdC8vIENhbGwgdGhlIGV2ZW50IGhhbmRsZXIgd2l0aCB0aGUgZXZlbnQgWyBhbmQgYWRkaXRpb25hbCBkYXRhIF0uXG5cdFx0XHRcdGNhbGxiYWNrKGUsIGRhdGEpO1xuXHRcdFx0fTtcblxuXHRcdFx0dmFyIG1ldGhvZHMgPSBbXTtcblxuXHRcdFx0Ly8gQmluZCBhIGNsb3N1cmUgb24gdGhlIHRhcmdldCBmb3IgZXZlcnkgZXZlbnQgdHlwZS5cblx0XHRcdGV2ZW50cy5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuXHRcdFx0XHRlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBtZXRob2QsIHN1cHBvcnRzUGFzc2l2ZSA/IHsgcGFzc2l2ZTogdHJ1ZSB9IDogZmFsc2UpO1xuXHRcdFx0XHRtZXRob2RzLnB1c2goW2V2ZW50TmFtZSwgbWV0aG9kXSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIG1ldGhvZHM7XG5cdFx0fVxuXG5cdFx0Ly8gUHJvdmlkZSBhIGNsZWFuIGV2ZW50IHdpdGggc3RhbmRhcmRpemVkIG9mZnNldCB2YWx1ZXMuXG5cdFx0ZnVuY3Rpb24gZml4RXZlbnQoZSwgcGFnZU9mZnNldCkge1xuXG5cdFx0XHQvLyBGaWx0ZXIgdGhlIGV2ZW50IHRvIHJlZ2lzdGVyIHRoZSB0eXBlLCB3aGljaCBjYW4gYmVcblx0XHRcdC8vIHRvdWNoLCBtb3VzZSBvciBwb2ludGVyLiBPZmZzZXQgY2hhbmdlcyBuZWVkIHRvIGJlXG5cdFx0XHQvLyBtYWRlIG9uIGFuIGV2ZW50IHNwZWNpZmljIGJhc2lzLlxuXHRcdFx0dmFyIHRvdWNoID0gZS50eXBlLmluZGV4T2YoJ3RvdWNoJykgPT09IDA7XG5cdFx0XHR2YXIgbW91c2UgPSBlLnR5cGUuaW5kZXhPZignbW91c2UnKSA9PT0gMDtcblx0XHRcdHZhciBwb2ludGVyID0gZS50eXBlLmluZGV4T2YoJ3BvaW50ZXInKSA9PT0gMDtcblxuXHRcdFx0dmFyIHg7XG5cdFx0XHR2YXIgeTtcblxuXHRcdFx0Ly8gSUUxMCBpbXBsZW1lbnRlZCBwb2ludGVyIGV2ZW50cyB3aXRoIGEgcHJlZml4O1xuXHRcdFx0aWYgKGUudHlwZS5pbmRleE9mKCdNU1BvaW50ZXInKSA9PT0gMCkge1xuXHRcdFx0XHRwb2ludGVyID0gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHRvdWNoKSB7XG5cblx0XHRcdFx0Ly8gRml4IGJ1ZyB3aGVuIHVzZXIgdG91Y2hlcyB3aXRoIHR3byBvciBtb3JlIGZpbmdlcnMgb24gbW9iaWxlIGRldmljZXMuXG5cdFx0XHRcdC8vIEl0J3MgdXNlZnVsIHdoZW4geW91IGhhdmUgdHdvIG9yIG1vcmUgc2xpZGVycyBvbiBvbmUgcGFnZSxcblx0XHRcdFx0Ly8gdGhhdCBjYW4gYmUgdG91Y2hlZCBzaW11bHRhbmVvdXNseS5cblx0XHRcdFx0Ly8gIzY0OSwgIzY2MywgIzY2OFxuXHRcdFx0XHRpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBub1VpU2xpZGVyIHN1cHBvcnRzIG9uZSBtb3ZlbWVudCBhdCBhIHRpbWUsXG5cdFx0XHRcdC8vIHNvIHdlIGNhbiBzZWxlY3QgdGhlIGZpcnN0ICdjaGFuZ2VkVG91Y2gnLlxuXHRcdFx0XHR4ID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDtcblx0XHRcdFx0eSA9IGUuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVk7XG5cdFx0XHR9XG5cblx0XHRcdHBhZ2VPZmZzZXQgPSBwYWdlT2Zmc2V0IHx8IGdldFBhZ2VPZmZzZXQoc2NvcGVfRG9jdW1lbnQpO1xuXG5cdFx0XHRpZiAobW91c2UgfHwgcG9pbnRlcikge1xuXHRcdFx0XHR4ID0gZS5jbGllbnRYICsgcGFnZU9mZnNldC54O1xuXHRcdFx0XHR5ID0gZS5jbGllbnRZICsgcGFnZU9mZnNldC55O1xuXHRcdFx0fVxuXG5cdFx0XHRlLnBhZ2VPZmZzZXQgPSBwYWdlT2Zmc2V0O1xuXHRcdFx0ZS5wb2ludHMgPSBbeCwgeV07XG5cdFx0XHRlLmN1cnNvciA9IG1vdXNlIHx8IHBvaW50ZXI7IC8vIEZpeCAjNDM1XG5cblx0XHRcdHJldHVybiBlO1xuXHRcdH1cblxuXHRcdC8vIFRyYW5zbGF0ZSBhIGNvb3JkaW5hdGUgaW4gdGhlIGRvY3VtZW50IHRvIGEgcGVyY2VudGFnZSBvbiB0aGUgc2xpZGVyXG5cdFx0ZnVuY3Rpb24gY2FsY1BvaW50VG9QZXJjZW50YWdlKGNhbGNQb2ludCkge1xuXHRcdFx0dmFyIGxvY2F0aW9uID0gY2FsY1BvaW50IC0gb2Zmc2V0KHNjb3BlX0Jhc2UsIG9wdGlvbnMub3J0KTtcblx0XHRcdHZhciBwcm9wb3NhbCA9IGxvY2F0aW9uICogMTAwIC8gYmFzZVNpemUoKTtcblx0XHRcdHJldHVybiBvcHRpb25zLmRpciA/IDEwMCAtIHByb3Bvc2FsIDogcHJvcG9zYWw7XG5cdFx0fVxuXG5cdFx0Ly8gRmluZCBoYW5kbGUgY2xvc2VzdCB0byBhIGNlcnRhaW4gcGVyY2VudGFnZSBvbiB0aGUgc2xpZGVyXG5cdFx0ZnVuY3Rpb24gZ2V0Q2xvc2VzdEhhbmRsZShwcm9wb3NhbCkge1xuXG5cdFx0XHR2YXIgY2xvc2VzdCA9IDEwMDtcblx0XHRcdHZhciBoYW5kbGVOdW1iZXIgPSBmYWxzZTtcblxuXHRcdFx0c2NvcGVfSGFuZGxlcy5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGUsIGluZGV4KSB7XG5cblx0XHRcdFx0Ly8gRGlzYWJsZWQgaGFuZGxlcyBhcmUgaWdub3JlZFxuXHRcdFx0XHRpZiAoaGFuZGxlLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBwb3MgPSBNYXRoLmFicyhzY29wZV9Mb2NhdGlvbnNbaW5kZXhdIC0gcHJvcG9zYWwpO1xuXG5cdFx0XHRcdGlmIChwb3MgPCBjbG9zZXN0KSB7XG5cdFx0XHRcdFx0aGFuZGxlTnVtYmVyID0gaW5kZXg7XG5cdFx0XHRcdFx0Y2xvc2VzdCA9IHBvcztcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBoYW5kbGVOdW1iZXI7XG5cdFx0fVxuXG5cdFx0Ly8gTW92ZXMgaGFuZGxlKHMpIGJ5IGEgcGVyY2VudGFnZVxuXHRcdC8vIChib29sLCAlIHRvIG1vdmUsIFslIHdoZXJlIGhhbmRsZSBzdGFydGVkLCAuLi5dLCBbaW5kZXggaW4gc2NvcGVfSGFuZGxlcywgLi4uXSlcblx0XHRmdW5jdGlvbiBtb3ZlSGFuZGxlcyh1cHdhcmQsIHByb3Bvc2FsLCBsb2NhdGlvbnMsIGhhbmRsZU51bWJlcnMpIHtcblxuXHRcdFx0dmFyIHByb3Bvc2FscyA9IGxvY2F0aW9ucy5zbGljZSgpO1xuXG5cdFx0XHR2YXIgYiA9IFshdXB3YXJkLCB1cHdhcmRdO1xuXHRcdFx0dmFyIGYgPSBbdXB3YXJkLCAhdXB3YXJkXTtcblxuXHRcdFx0Ly8gQ29weSBoYW5kbGVOdW1iZXJzIHNvIHdlIGRvbid0IGNoYW5nZSB0aGUgZGF0YXNldFxuXHRcdFx0aGFuZGxlTnVtYmVycyA9IGhhbmRsZU51bWJlcnMuc2xpY2UoKTtcblxuXHRcdFx0Ly8gQ2hlY2sgdG8gc2VlIHdoaWNoIGhhbmRsZSBpcyAnbGVhZGluZycuXG5cdFx0XHQvLyBJZiB0aGF0IG9uZSBjYW4ndCBtb3ZlIHRoZSBzZWNvbmQgY2FuJ3QgZWl0aGVyLlxuXHRcdFx0aWYgKHVwd2FyZCkge1xuXHRcdFx0XHRoYW5kbGVOdW1iZXJzLnJldmVyc2UoKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RlcCAxOiBnZXQgdGhlIG1heGltdW0gcGVyY2VudGFnZSB0aGF0IGFueSBvZiB0aGUgaGFuZGxlcyBjYW4gbW92ZVxuXHRcdFx0aWYgKGhhbmRsZU51bWJlcnMubGVuZ3RoID4gMSkge1xuXG5cdFx0XHRcdGhhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlTnVtYmVyLCBvKSB7XG5cblx0XHRcdFx0XHR2YXIgdG8gPSBjaGVja0hhbmRsZVBvc2l0aW9uKHByb3Bvc2FscywgaGFuZGxlTnVtYmVyLCBwcm9wb3NhbHNbaGFuZGxlTnVtYmVyXSArIHByb3Bvc2FsLCBiW29dLCBmW29dLCBmYWxzZSk7XG5cblx0XHRcdFx0XHQvLyBTdG9wIGlmIG9uZSBvZiB0aGUgaGFuZGxlcyBjYW4ndCBtb3ZlLlxuXHRcdFx0XHRcdGlmICh0byA9PT0gZmFsc2UpIHtcblx0XHRcdFx0XHRcdHByb3Bvc2FsID0gMDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cHJvcG9zYWwgPSB0byAtIHByb3Bvc2Fsc1toYW5kbGVOdW1iZXJdO1xuXHRcdFx0XHRcdFx0cHJvcG9zYWxzW2hhbmRsZU51bWJlcl0gPSB0bztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiB1c2luZyBvbmUgaGFuZGxlLCBjaGVjayBiYWNrd2FyZCBBTkQgZm9yd2FyZFxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0YiA9IGYgPSBbdHJ1ZV07XG5cdFx0XHRcdH1cblxuXHRcdFx0dmFyIHN0YXRlID0gZmFsc2U7XG5cblx0XHRcdC8vIFN0ZXAgMjogVHJ5IHRvIHNldCB0aGUgaGFuZGxlcyB3aXRoIHRoZSBmb3VuZCBwZXJjZW50YWdlXG5cdFx0XHRoYW5kbGVOdW1iZXJzLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZU51bWJlciwgbykge1xuXHRcdFx0XHRzdGF0ZSA9IHNldEhhbmRsZShoYW5kbGVOdW1iZXIsIGxvY2F0aW9uc1toYW5kbGVOdW1iZXJdICsgcHJvcG9zYWwsIGJbb10sIGZbb10pIHx8IHN0YXRlO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFN0ZXAgMzogSWYgYSBoYW5kbGUgbW92ZWQsIGZpcmUgZXZlbnRzXG5cdFx0XHRpZiAoc3RhdGUpIHtcblx0XHRcdFx0aGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVOdW1iZXIpIHtcblx0XHRcdFx0XHRmaXJlRXZlbnQoJ3VwZGF0ZScsIGhhbmRsZU51bWJlcik7XG5cdFx0XHRcdFx0ZmlyZUV2ZW50KCdzbGlkZScsIGhhbmRsZU51bWJlcik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEV4dGVybmFsIGV2ZW50IGhhbmRsaW5nXG5cdFx0ZnVuY3Rpb24gZmlyZUV2ZW50KGV2ZW50TmFtZSwgaGFuZGxlTnVtYmVyLCB0YXApIHtcblxuXHRcdFx0T2JqZWN0LmtleXMoc2NvcGVfRXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXRFdmVudCkge1xuXG5cdFx0XHRcdHZhciBldmVudFR5cGUgPSB0YXJnZXRFdmVudC5zcGxpdCgnLicpWzBdO1xuXG5cdFx0XHRcdGlmIChldmVudE5hbWUgPT09IGV2ZW50VHlwZSkge1xuXHRcdFx0XHRcdHNjb3BlX0V2ZW50c1t0YXJnZXRFdmVudF0uZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcblxuXHRcdFx0XHRcdFx0Y2FsbGJhY2suY2FsbChcblx0XHRcdFx0XHRcdC8vIFVzZSB0aGUgc2xpZGVyIHB1YmxpYyBBUEkgYXMgdGhlIHNjb3BlICgndGhpcycpXG5cdFx0XHRcdFx0XHRzY29wZV9TZWxmLFxuXHRcdFx0XHRcdFx0Ly8gUmV0dXJuIHZhbHVlcyBhcyBhcnJheSwgc28gYXJnXzFbYXJnXzJdIGlzIGFsd2F5cyB2YWxpZC5cblx0XHRcdFx0XHRcdHNjb3BlX1ZhbHVlcy5tYXAob3B0aW9ucy5mb3JtYXQudG8pLFxuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGluZGV4LCAwIG9yIDFcblx0XHRcdFx0XHRcdGhhbmRsZU51bWJlcixcblx0XHRcdFx0XHRcdC8vIFVuZm9ybWF0dGVkIHNsaWRlciB2YWx1ZXNcblx0XHRcdFx0XHRcdHNjb3BlX1ZhbHVlcy5zbGljZSgpLFxuXHRcdFx0XHRcdFx0Ly8gRXZlbnQgaXMgZmlyZWQgYnkgdGFwLCB0cnVlIG9yIGZhbHNlXG5cdFx0XHRcdFx0XHR0YXAgfHwgZmFsc2UsXG5cdFx0XHRcdFx0XHQvLyBMZWZ0IG9mZnNldCBvZiB0aGUgaGFuZGxlLCBpbiByZWxhdGlvbiB0byB0aGUgc2xpZGVyXG5cdFx0XHRcdFx0XHRzY29wZV9Mb2NhdGlvbnMuc2xpY2UoKSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vIEZpcmUgJ2VuZCcgd2hlbiBhIG1vdXNlIG9yIHBlbiBsZWF2ZXMgdGhlIGRvY3VtZW50LlxuXHRcdGZ1bmN0aW9uIGRvY3VtZW50TGVhdmUoZXZlbnQsIGRhdGEpIHtcblx0XHRcdGlmIChldmVudC50eXBlID09PSBcIm1vdXNlb3V0XCIgJiYgZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID09PSBcIkhUTUxcIiAmJiBldmVudC5yZWxhdGVkVGFyZ2V0ID09PSBudWxsKSB7XG5cdFx0XHRcdGV2ZW50RW5kKGV2ZW50LCBkYXRhKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBIYW5kbGUgbW92ZW1lbnQgb24gZG9jdW1lbnQgZm9yIGhhbmRsZSBhbmQgcmFuZ2UgZHJhZy5cblx0XHRmdW5jdGlvbiBldmVudE1vdmUoZXZlbnQsIGRhdGEpIHtcblxuXHRcdFx0Ly8gRml4ICM0OThcblx0XHRcdC8vIENoZWNrIHZhbHVlIG9mIC5idXR0b25zIGluICdzdGFydCcgdG8gd29yayBhcm91bmQgYSBidWcgaW4gSUUxMCBtb2JpbGUgKGRhdGEuYnV0dG9uc1Byb3BlcnR5KS5cblx0XHRcdC8vIGh0dHBzOi8vY29ubmVjdC5taWNyb3NvZnQuY29tL0lFL2ZlZWRiYWNrL2RldGFpbHMvOTI3MDA1L21vYmlsZS1pZTEwLXdpbmRvd3MtcGhvbmUtYnV0dG9ucy1wcm9wZXJ0eS1vZi1wb2ludGVybW92ZS1ldmVudC1hbHdheXMtemVyb1xuXHRcdFx0Ly8gSUU5IGhhcyAuYnV0dG9ucyBhbmQgLndoaWNoIHplcm8gb24gbW91c2Vtb3ZlLlxuXHRcdFx0Ly8gRmlyZWZveCBicmVha3MgdGhlIHNwZWMgTUROIGRlZmluZXMuXG5cdFx0XHRpZiAobmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZihcIk1TSUUgOVwiKSA9PT0gLTEgJiYgZXZlbnQuYnV0dG9ucyA9PT0gMCAmJiBkYXRhLmJ1dHRvbnNQcm9wZXJ0eSAhPT0gMCkge1xuXHRcdFx0XHRyZXR1cm4gZXZlbnRFbmQoZXZlbnQsIGRhdGEpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDaGVjayBpZiB3ZSBhcmUgbW92aW5nIHVwIG9yIGRvd25cblx0XHRcdHZhciBtb3ZlbWVudCA9IChvcHRpb25zLmRpciA/IC0xIDogMSkgKiAoZXZlbnQuY2FsY1BvaW50IC0gZGF0YS5zdGFydENhbGNQb2ludCk7XG5cblx0XHRcdC8vIENvbnZlcnQgdGhlIG1vdmVtZW50IGludG8gYSBwZXJjZW50YWdlIG9mIHRoZSBzbGlkZXIgd2lkdGgvaGVpZ2h0XG5cdFx0XHR2YXIgcHJvcG9zYWwgPSBtb3ZlbWVudCAqIDEwMCAvIGRhdGEuYmFzZVNpemU7XG5cblx0XHRcdG1vdmVIYW5kbGVzKG1vdmVtZW50ID4gMCwgcHJvcG9zYWwsIGRhdGEubG9jYXRpb25zLCBkYXRhLmhhbmRsZU51bWJlcnMpO1xuXHRcdH1cblxuXHRcdC8vIFVuYmluZCBtb3ZlIGV2ZW50cyBvbiBkb2N1bWVudCwgY2FsbCBjYWxsYmFja3MuXG5cdFx0ZnVuY3Rpb24gZXZlbnRFbmQoZXZlbnQsIGRhdGEpIHtcblxuXHRcdFx0Ly8gVGhlIGhhbmRsZSBpcyBubyBsb25nZXIgYWN0aXZlLCBzbyByZW1vdmUgdGhlIGNsYXNzLlxuXHRcdFx0aWYgKHNjb3BlX0FjdGl2ZUhhbmRsZSkge1xuXHRcdFx0XHRyZW1vdmVDbGFzcyhzY29wZV9BY3RpdmVIYW5kbGUsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5hY3RpdmUpO1xuXHRcdFx0XHRzY29wZV9BY3RpdmVIYW5kbGUgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVtb3ZlIGN1cnNvciBzdHlsZXMgYW5kIHRleHQtc2VsZWN0aW9uIGV2ZW50cyBib3VuZCB0byB0aGUgYm9keS5cblx0XHRcdGlmIChldmVudC5jdXJzb3IpIHtcblx0XHRcdFx0c2NvcGVfQm9keS5zdHlsZS5jdXJzb3IgPSAnJztcblx0XHRcdFx0c2NvcGVfQm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdzZWxlY3RzdGFydCcsIHByZXZlbnREZWZhdWx0KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVW5iaW5kIHRoZSBtb3ZlIGFuZCBlbmQgZXZlbnRzLCB3aGljaCBhcmUgYWRkZWQgb24gJ3N0YXJ0Jy5cblx0XHRcdHNjb3BlX0xpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG5cdFx0XHRcdHNjb3BlX0RvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGNbMF0sIGNbMV0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFJlbW92ZSBkcmFnZ2luZyBjbGFzcy5cblx0XHRcdHJlbW92ZUNsYXNzKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLmRyYWcpO1xuXG5cdFx0XHRzZXRaaW5kZXgoKTtcblxuXHRcdFx0ZGF0YS5oYW5kbGVOdW1iZXJzLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZU51bWJlcikge1xuXHRcdFx0XHRmaXJlRXZlbnQoJ2NoYW5nZScsIGhhbmRsZU51bWJlcik7XG5cdFx0XHRcdGZpcmVFdmVudCgnc2V0JywgaGFuZGxlTnVtYmVyKTtcblx0XHRcdFx0ZmlyZUV2ZW50KCdlbmQnLCBoYW5kbGVOdW1iZXIpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8gQmluZCBtb3ZlIGV2ZW50cyBvbiBkb2N1bWVudC5cblx0XHRmdW5jdGlvbiBldmVudFN0YXJ0KGV2ZW50LCBkYXRhKSB7XG5cblx0XHRcdGlmIChkYXRhLmhhbmRsZU51bWJlcnMubGVuZ3RoID09PSAxKSB7XG5cblx0XHRcdFx0dmFyIGhhbmRsZSA9IHNjb3BlX0hhbmRsZXNbZGF0YS5oYW5kbGVOdW1iZXJzWzBdXTtcblxuXHRcdFx0XHQvLyBJZ25vcmUgJ2Rpc2FibGVkJyBoYW5kbGVzXG5cdFx0XHRcdGlmIChoYW5kbGUuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gTWFyayB0aGUgaGFuZGxlIGFzICdhY3RpdmUnIHNvIGl0IGNhbiBiZSBzdHlsZWQuXG5cdFx0XHRcdHNjb3BlX0FjdGl2ZUhhbmRsZSA9IGhhbmRsZS5jaGlsZHJlblswXTtcblx0XHRcdFx0YWRkQ2xhc3Moc2NvcGVfQWN0aXZlSGFuZGxlLCBvcHRpb25zLmNzc0NsYXNzZXMuYWN0aXZlKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQSBkcmFnIHNob3VsZCBuZXZlciBwcm9wYWdhdGUgdXAgdG8gdGhlICd0YXAnIGV2ZW50LlxuXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHRcdC8vIEF0dGFjaCB0aGUgbW92ZSBhbmQgZW5kIGV2ZW50cy5cblx0XHRcdHZhciBtb3ZlRXZlbnQgPSBhdHRhY2hFdmVudChhY3Rpb25zLm1vdmUsIHNjb3BlX0RvY3VtZW50RWxlbWVudCwgZXZlbnRNb3ZlLCB7XG5cdFx0XHRcdHN0YXJ0Q2FsY1BvaW50OiBldmVudC5jYWxjUG9pbnQsXG5cdFx0XHRcdGJhc2VTaXplOiBiYXNlU2l6ZSgpLFxuXHRcdFx0XHRwYWdlT2Zmc2V0OiBldmVudC5wYWdlT2Zmc2V0LFxuXHRcdFx0XHRoYW5kbGVOdW1iZXJzOiBkYXRhLmhhbmRsZU51bWJlcnMsXG5cdFx0XHRcdGJ1dHRvbnNQcm9wZXJ0eTogZXZlbnQuYnV0dG9ucyxcblx0XHRcdFx0bG9jYXRpb25zOiBzY29wZV9Mb2NhdGlvbnMuc2xpY2UoKVxuXHRcdFx0fSk7XG5cblx0XHRcdHZhciBlbmRFdmVudCA9IGF0dGFjaEV2ZW50KGFjdGlvbnMuZW5kLCBzY29wZV9Eb2N1bWVudEVsZW1lbnQsIGV2ZW50RW5kLCB7XG5cdFx0XHRcdGhhbmRsZU51bWJlcnM6IGRhdGEuaGFuZGxlTnVtYmVyc1xuXHRcdFx0fSk7XG5cblx0XHRcdHZhciBvdXRFdmVudCA9IGF0dGFjaEV2ZW50KFwibW91c2VvdXRcIiwgc2NvcGVfRG9jdW1lbnRFbGVtZW50LCBkb2N1bWVudExlYXZlLCB7XG5cdFx0XHRcdGhhbmRsZU51bWJlcnM6IGRhdGEuaGFuZGxlTnVtYmVyc1xuXHRcdFx0fSk7XG5cblx0XHRcdHNjb3BlX0xpc3RlbmVycyA9IG1vdmVFdmVudC5jb25jYXQoZW5kRXZlbnQsIG91dEV2ZW50KTtcblxuXHRcdFx0Ly8gVGV4dCBzZWxlY3Rpb24gaXNuJ3QgYW4gaXNzdWUgb24gdG91Y2ggZGV2aWNlcyxcblx0XHRcdC8vIHNvIGFkZGluZyBjdXJzb3Igc3R5bGVzIGNhbiBiZSBza2lwcGVkLlxuXHRcdFx0aWYgKGV2ZW50LmN1cnNvcikge1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgdGhlICdJJyBjdXJzb3IgYW5kIGV4dGVuZCB0aGUgcmFuZ2UtZHJhZyBjdXJzb3IuXG5cdFx0XHRcdHNjb3BlX0JvZHkuc3R5bGUuY3Vyc29yID0gZ2V0Q29tcHV0ZWRTdHlsZShldmVudC50YXJnZXQpLmN1cnNvcjtcblxuXHRcdFx0XHQvLyBNYXJrIHRoZSB0YXJnZXQgd2l0aCBhIGRyYWdnaW5nIHN0YXRlLlxuXHRcdFx0XHRpZiAoc2NvcGVfSGFuZGxlcy5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdFx0YWRkQ2xhc3Moc2NvcGVfVGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMuZHJhZyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBQcmV2ZW50IHRleHQgc2VsZWN0aW9uIHdoZW4gZHJhZ2dpbmcgdGhlIGhhbmRsZXMuXG5cdFx0XHRcdC8vIEluIG5vVWlTbGlkZXIgPD0gOS4yLjAsIHRoaXMgd2FzIGhhbmRsZWQgYnkgY2FsbGluZyBwcmV2ZW50RGVmYXVsdCBvbiBtb3VzZS90b3VjaCBzdGFydC9tb3ZlLFxuXHRcdFx0XHQvLyB3aGljaCBpcyBzY3JvbGwgYmxvY2tpbmcuIFRoZSBzZWxlY3RzdGFydCBldmVudCBpcyBzdXBwb3J0ZWQgYnkgRmlyZUZveCBzdGFydGluZyBmcm9tIHZlcnNpb24gNTIsXG5cdFx0XHRcdC8vIG1lYW5pbmcgdGhlIG9ubHkgaG9sZG91dCBpcyBpT1MgU2FmYXJpLiBUaGlzIGRvZXNuJ3QgbWF0dGVyOiB0ZXh0IHNlbGVjdGlvbiBpc24ndCB0cmlnZ2VyZWQgdGhlcmUuXG5cdFx0XHRcdC8vIFRoZSAnY3Vyc29yJyBmbGFnIGlzIGZhbHNlLlxuXHRcdFx0XHQvLyBTZWU6IGh0dHA6Ly9jYW5pdXNlLmNvbS8jc2VhcmNoPXNlbGVjdHN0YXJ0XG5cdFx0XHRcdHNjb3BlX0JvZHkuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0c3RhcnQnLCBwcmV2ZW50RGVmYXVsdCwgZmFsc2UpO1xuXHRcdFx0fVxuXG5cdFx0XHRkYXRhLmhhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlTnVtYmVyKSB7XG5cdFx0XHRcdGZpcmVFdmVudCgnc3RhcnQnLCBoYW5kbGVOdW1iZXIpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8gTW92ZSBjbG9zZXN0IGhhbmRsZSB0byB0YXBwZWQgbG9jYXRpb24uXG5cdFx0ZnVuY3Rpb24gZXZlbnRUYXAoZXZlbnQpIHtcblxuXHRcdFx0Ly8gVGhlIHRhcCBldmVudCBzaG91bGRuJ3QgcHJvcGFnYXRlIHVwXG5cdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdFx0dmFyIHByb3Bvc2FsID0gY2FsY1BvaW50VG9QZXJjZW50YWdlKGV2ZW50LmNhbGNQb2ludCk7XG5cdFx0XHR2YXIgaGFuZGxlTnVtYmVyID0gZ2V0Q2xvc2VzdEhhbmRsZShwcm9wb3NhbCk7XG5cblx0XHRcdC8vIFRhY2tsZSB0aGUgY2FzZSB0aGF0IGFsbCBoYW5kbGVzIGFyZSAnZGlzYWJsZWQnLlxuXHRcdFx0aWYgKGhhbmRsZU51bWJlciA9PT0gZmFsc2UpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBGbGFnIHRoZSBzbGlkZXIgYXMgaXQgaXMgbm93IGluIGEgdHJhbnNpdGlvbmFsIHN0YXRlLlxuXHRcdFx0Ly8gVHJhbnNpdGlvbiB0YWtlcyBhIGNvbmZpZ3VyYWJsZSBhbW91bnQgb2YgbXMgKGRlZmF1bHQgMzAwKS4gUmUtZW5hYmxlIHRoZSBzbGlkZXIgYWZ0ZXIgdGhhdC5cblx0XHRcdGlmICghb3B0aW9ucy5ldmVudHMuc25hcCkge1xuXHRcdFx0XHRhZGRDbGFzc0ZvcihzY29wZV9UYXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy50YXAsIG9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24pO1xuXHRcdFx0fVxuXG5cdFx0XHRzZXRIYW5kbGUoaGFuZGxlTnVtYmVyLCBwcm9wb3NhbCwgdHJ1ZSwgdHJ1ZSk7XG5cblx0XHRcdHNldFppbmRleCgpO1xuXG5cdFx0XHRmaXJlRXZlbnQoJ3NsaWRlJywgaGFuZGxlTnVtYmVyLCB0cnVlKTtcblx0XHRcdGZpcmVFdmVudCgndXBkYXRlJywgaGFuZGxlTnVtYmVyLCB0cnVlKTtcblx0XHRcdGZpcmVFdmVudCgnY2hhbmdlJywgaGFuZGxlTnVtYmVyLCB0cnVlKTtcblx0XHRcdGZpcmVFdmVudCgnc2V0JywgaGFuZGxlTnVtYmVyLCB0cnVlKTtcblxuXHRcdFx0aWYgKG9wdGlvbnMuZXZlbnRzLnNuYXApIHtcblx0XHRcdFx0ZXZlbnRTdGFydChldmVudCwgeyBoYW5kbGVOdW1iZXJzOiBbaGFuZGxlTnVtYmVyXSB9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBGaXJlcyBhICdob3ZlcicgZXZlbnQgZm9yIGEgaG92ZXJlZCBtb3VzZS9wZW4gcG9zaXRpb24uXG5cdFx0ZnVuY3Rpb24gZXZlbnRIb3ZlcihldmVudCkge1xuXG5cdFx0XHR2YXIgcHJvcG9zYWwgPSBjYWxjUG9pbnRUb1BlcmNlbnRhZ2UoZXZlbnQuY2FsY1BvaW50KTtcblxuXHRcdFx0dmFyIHRvID0gc2NvcGVfU3BlY3RydW0uZ2V0U3RlcChwcm9wb3NhbCk7XG5cdFx0XHR2YXIgdmFsdWUgPSBzY29wZV9TcGVjdHJ1bS5mcm9tU3RlcHBpbmcodG8pO1xuXG5cdFx0XHRPYmplY3Qua2V5cyhzY29wZV9FdmVudHMpLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldEV2ZW50KSB7XG5cdFx0XHRcdGlmICgnaG92ZXInID09PSB0YXJnZXRFdmVudC5zcGxpdCgnLicpWzBdKSB7XG5cdFx0XHRcdFx0c2NvcGVfRXZlbnRzW3RhcmdldEV2ZW50XS5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2suY2FsbChzY29wZV9TZWxmLCB2YWx1ZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vIEF0dGFjaCBldmVudHMgdG8gc2V2ZXJhbCBzbGlkZXIgcGFydHMuXG5cdFx0ZnVuY3Rpb24gYmluZFNsaWRlckV2ZW50cyhiZWhhdmlvdXIpIHtcblxuXHRcdFx0Ly8gQXR0YWNoIHRoZSBzdGFuZGFyZCBkcmFnIGV2ZW50IHRvIHRoZSBoYW5kbGVzLlxuXHRcdFx0aWYgKCFiZWhhdmlvdXIuZml4ZWQpIHtcblxuXHRcdFx0XHRzY29wZV9IYW5kbGVzLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZSwgaW5kZXgpIHtcblxuXHRcdFx0XHRcdC8vIFRoZXNlIGV2ZW50cyBhcmUgb25seSBib3VuZCB0byB0aGUgdmlzdWFsIGhhbmRsZVxuXHRcdFx0XHRcdC8vIGVsZW1lbnQsIG5vdCB0aGUgJ3JlYWwnIG9yaWdpbiBlbGVtZW50LlxuXHRcdFx0XHRcdGF0dGFjaEV2ZW50KGFjdGlvbnMuc3RhcnQsIGhhbmRsZS5jaGlsZHJlblswXSwgZXZlbnRTdGFydCwge1xuXHRcdFx0XHRcdFx0aGFuZGxlTnVtYmVyczogW2luZGV4XVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXR0YWNoIHRoZSB0YXAgZXZlbnQgdG8gdGhlIHNsaWRlciBiYXNlLlxuXHRcdFx0aWYgKGJlaGF2aW91ci50YXApIHtcblx0XHRcdFx0YXR0YWNoRXZlbnQoYWN0aW9ucy5zdGFydCwgc2NvcGVfQmFzZSwgZXZlbnRUYXAsIHt9KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRmlyZSBob3ZlciBldmVudHNcblx0XHRcdGlmIChiZWhhdmlvdXIuaG92ZXIpIHtcblx0XHRcdFx0YXR0YWNoRXZlbnQoYWN0aW9ucy5tb3ZlLCBzY29wZV9CYXNlLCBldmVudEhvdmVyLCB7IGhvdmVyOiB0cnVlIH0pO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWtlIHRoZSByYW5nZSBkcmFnZ2FibGUuXG5cdFx0XHRpZiAoYmVoYXZpb3VyLmRyYWcpIHtcblxuXHRcdFx0XHRzY29wZV9Db25uZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb25uZWN0LCBpbmRleCkge1xuXG5cdFx0XHRcdFx0aWYgKGNvbm5lY3QgPT09IGZhbHNlIHx8IGluZGV4ID09PSAwIHx8IGluZGV4ID09PSBzY29wZV9Db25uZWN0cy5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dmFyIGhhbmRsZUJlZm9yZSA9IHNjb3BlX0hhbmRsZXNbaW5kZXggLSAxXTtcblx0XHRcdFx0XHR2YXIgaGFuZGxlQWZ0ZXIgPSBzY29wZV9IYW5kbGVzW2luZGV4XTtcblx0XHRcdFx0XHR2YXIgZXZlbnRIb2xkZXJzID0gW2Nvbm5lY3RdO1xuXG5cdFx0XHRcdFx0YWRkQ2xhc3MoY29ubmVjdCwgb3B0aW9ucy5jc3NDbGFzc2VzLmRyYWdnYWJsZSk7XG5cblx0XHRcdFx0XHQvLyBXaGVuIHRoZSByYW5nZSBpcyBmaXhlZCwgdGhlIGVudGlyZSByYW5nZSBjYW5cblx0XHRcdFx0XHQvLyBiZSBkcmFnZ2VkIGJ5IHRoZSBoYW5kbGVzLiBUaGUgaGFuZGxlIGluIHRoZSBmaXJzdFxuXHRcdFx0XHRcdC8vIG9yaWdpbiB3aWxsIHByb3BhZ2F0ZSB0aGUgc3RhcnQgZXZlbnQgdXB3YXJkLFxuXHRcdFx0XHRcdC8vIGJ1dCBpdCBuZWVkcyB0byBiZSBib3VuZCBtYW51YWxseSBvbiB0aGUgb3RoZXIuXG5cdFx0XHRcdFx0aWYgKGJlaGF2aW91ci5maXhlZCkge1xuXHRcdFx0XHRcdFx0ZXZlbnRIb2xkZXJzLnB1c2goaGFuZGxlQmVmb3JlLmNoaWxkcmVuWzBdKTtcblx0XHRcdFx0XHRcdGV2ZW50SG9sZGVycy5wdXNoKGhhbmRsZUFmdGVyLmNoaWxkcmVuWzBdKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRldmVudEhvbGRlcnMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnRIb2xkZXIpIHtcblx0XHRcdFx0XHRcdGF0dGFjaEV2ZW50KGFjdGlvbnMuc3RhcnQsIGV2ZW50SG9sZGVyLCBldmVudFN0YXJ0LCB7XG5cdFx0XHRcdFx0XHRcdGhhbmRsZXM6IFtoYW5kbGVCZWZvcmUsIGhhbmRsZUFmdGVyXSxcblx0XHRcdFx0XHRcdFx0aGFuZGxlTnVtYmVyczogW2luZGV4IC0gMSwgaW5kZXhdXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU3BsaXQgb3V0IHRoZSBoYW5kbGUgcG9zaXRpb25pbmcgbG9naWMgc28gdGhlIE1vdmUgZXZlbnQgY2FuIHVzZSBpdCwgdG9vXG5cdFx0ZnVuY3Rpb24gY2hlY2tIYW5kbGVQb3NpdGlvbihyZWZlcmVuY2UsIGhhbmRsZU51bWJlciwgdG8sIGxvb2tCYWNrd2FyZCwgbG9va0ZvcndhcmQsIGdldFZhbHVlKSB7XG5cblx0XHRcdC8vIEZvciBzbGlkZXJzIHdpdGggbXVsdGlwbGUgaGFuZGxlcywgbGltaXQgbW92ZW1lbnQgdG8gdGhlIG90aGVyIGhhbmRsZS5cblx0XHRcdC8vIEFwcGx5IHRoZSBtYXJnaW4gb3B0aW9uIGJ5IGFkZGluZyBpdCB0byB0aGUgaGFuZGxlIHBvc2l0aW9ucy5cblx0XHRcdGlmIChzY29wZV9IYW5kbGVzLmxlbmd0aCA+IDEpIHtcblxuXHRcdFx0XHRpZiAobG9va0JhY2t3YXJkICYmIGhhbmRsZU51bWJlciA+IDApIHtcblx0XHRcdFx0XHR0byA9IE1hdGgubWF4KHRvLCByZWZlcmVuY2VbaGFuZGxlTnVtYmVyIC0gMV0gKyBvcHRpb25zLm1hcmdpbik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAobG9va0ZvcndhcmQgJiYgaGFuZGxlTnVtYmVyIDwgc2NvcGVfSGFuZGxlcy5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdFx0dG8gPSBNYXRoLm1pbih0bywgcmVmZXJlbmNlW2hhbmRsZU51bWJlciArIDFdIC0gb3B0aW9ucy5tYXJnaW4pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRoZSBsaW1pdCBvcHRpb24gaGFzIHRoZSBvcHBvc2l0ZSBlZmZlY3QsIGxpbWl0aW5nIGhhbmRsZXMgdG8gYVxuXHRcdFx0Ly8gbWF4aW11bSBkaXN0YW5jZSBmcm9tIGFub3RoZXIuIExpbWl0IG11c3QgYmUgPiAwLCBhcyBvdGhlcndpc2Vcblx0XHRcdC8vIGhhbmRsZXMgd291bGQgYmUgdW5tb3ZlYWJsZS5cblx0XHRcdGlmIChzY29wZV9IYW5kbGVzLmxlbmd0aCA+IDEgJiYgb3B0aW9ucy5saW1pdCkge1xuXG5cdFx0XHRcdGlmIChsb29rQmFja3dhcmQgJiYgaGFuZGxlTnVtYmVyID4gMCkge1xuXHRcdFx0XHRcdHRvID0gTWF0aC5taW4odG8sIHJlZmVyZW5jZVtoYW5kbGVOdW1iZXIgLSAxXSArIG9wdGlvbnMubGltaXQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGxvb2tGb3J3YXJkICYmIGhhbmRsZU51bWJlciA8IHNjb3BlX0hhbmRsZXMubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdHRvID0gTWF0aC5tYXgodG8sIHJlZmVyZW5jZVtoYW5kbGVOdW1iZXIgKyAxXSAtIG9wdGlvbnMubGltaXQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRoZSBwYWRkaW5nIG9wdGlvbiBrZWVwcyB0aGUgaGFuZGxlcyBhIGNlcnRhaW4gZGlzdGFuY2UgZnJvbSB0aGVcblx0XHRcdC8vIGVkZ2VzIG9mIHRoZSBzbGlkZXIuIFBhZGRpbmcgbXVzdCBiZSA+IDAuXG5cdFx0XHRpZiAob3B0aW9ucy5wYWRkaW5nKSB7XG5cblx0XHRcdFx0aWYgKGhhbmRsZU51bWJlciA9PT0gMCkge1xuXHRcdFx0XHRcdHRvID0gTWF0aC5tYXgodG8sIG9wdGlvbnMucGFkZGluZyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoaGFuZGxlTnVtYmVyID09PSBzY29wZV9IYW5kbGVzLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHR0byA9IE1hdGgubWluKHRvLCAxMDAgLSBvcHRpb25zLnBhZGRpbmcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHRvID0gc2NvcGVfU3BlY3RydW0uZ2V0U3RlcCh0byk7XG5cblx0XHRcdC8vIExpbWl0IHBlcmNlbnRhZ2UgdG8gdGhlIDAgLSAxMDAgcmFuZ2Vcblx0XHRcdHRvID0gbGltaXQodG8pO1xuXG5cdFx0XHQvLyBSZXR1cm4gZmFsc2UgaWYgaGFuZGxlIGNhbid0IG1vdmVcblx0XHRcdGlmICh0byA9PT0gcmVmZXJlbmNlW2hhbmRsZU51bWJlcl0gJiYgIWdldFZhbHVlKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHRvO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHRvUGN0KHBjdCkge1xuXHRcdFx0cmV0dXJuIHBjdCArICclJztcblx0XHR9XG5cblx0XHQvLyBVcGRhdGVzIHNjb3BlX0xvY2F0aW9ucyBhbmQgc2NvcGVfVmFsdWVzLCB1cGRhdGVzIHZpc3VhbCBzdGF0ZVxuXHRcdGZ1bmN0aW9uIHVwZGF0ZUhhbmRsZVBvc2l0aW9uKGhhbmRsZU51bWJlciwgdG8pIHtcblxuXHRcdFx0Ly8gVXBkYXRlIGxvY2F0aW9ucy5cblx0XHRcdHNjb3BlX0xvY2F0aW9uc1toYW5kbGVOdW1iZXJdID0gdG87XG5cblx0XHRcdC8vIENvbnZlcnQgdGhlIHZhbHVlIHRvIHRoZSBzbGlkZXIgc3RlcHBpbmcvcmFuZ2UuXG5cdFx0XHRzY29wZV9WYWx1ZXNbaGFuZGxlTnVtYmVyXSA9IHNjb3BlX1NwZWN0cnVtLmZyb21TdGVwcGluZyh0byk7XG5cblx0XHRcdC8vIENhbGxlZCBzeW5jaHJvbm91c2x5IG9yIG9uIHRoZSBuZXh0IGFuaW1hdGlvbkZyYW1lXG5cdFx0XHR2YXIgc3RhdGVVcGRhdGUgPSBmdW5jdGlvbiBzdGF0ZVVwZGF0ZSgpIHtcblx0XHRcdFx0c2NvcGVfSGFuZGxlc1toYW5kbGVOdW1iZXJdLnN0eWxlW29wdGlvbnMuc3R5bGVdID0gdG9QY3QodG8pO1xuXHRcdFx0XHR1cGRhdGVDb25uZWN0KGhhbmRsZU51bWJlcik7XG5cdFx0XHRcdHVwZGF0ZUNvbm5lY3QoaGFuZGxlTnVtYmVyICsgMSk7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBTZXQgdGhlIGhhbmRsZSB0byB0aGUgbmV3IHBvc2l0aW9uLlxuXHRcdFx0Ly8gVXNlIHJlcXVlc3RBbmltYXRpb25GcmFtZSBmb3IgZWZmaWNpZW50IHBhaW50aW5nLlxuXHRcdFx0Ly8gTm8gc2lnbmlmaWNhbnQgZWZmZWN0IGluIENocm9tZSwgRWRnZSBzZWVzIGRyYW1hdGljIHBlcmZvcm1hY2UgaW1wcm92ZW1lbnRzLlxuXHRcdFx0Ly8gT3B0aW9uIHRvIGRpc2FibGUgaXMgdXNlZnVsIGZvciB1bml0IHRlc3RzLCBhbmQgc2luZ2xlLXN0ZXAgZGVidWdnaW5nLlxuXHRcdFx0aWYgKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgJiYgb3B0aW9ucy51c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcblx0XHRcdFx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzdGF0ZVVwZGF0ZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzdGF0ZVVwZGF0ZSgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHNldFppbmRleCgpIHtcblxuXHRcdFx0c2NvcGVfSGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVOdW1iZXIpIHtcblx0XHRcdFx0Ly8gSGFuZGxlcyBiZWZvcmUgdGhlIHNsaWRlciBtaWRkbGUgYXJlIHN0YWNrZWQgbGF0ZXIgPSBoaWdoZXIsXG5cdFx0XHRcdC8vIEhhbmRsZXMgYWZ0ZXIgdGhlIG1pZGRsZSBsYXRlciBpcyBsb3dlclxuXHRcdFx0XHQvLyBbWzddIFs4XSAuLi4uLi4uLi4uIHwgLi4uLi4uLi4uLiBbNV0gWzRdXG5cdFx0XHRcdHZhciBkaXIgPSBzY29wZV9Mb2NhdGlvbnNbaGFuZGxlTnVtYmVyXSA+IDUwID8gLTEgOiAxO1xuXHRcdFx0XHR2YXIgekluZGV4ID0gMyArIChzY29wZV9IYW5kbGVzLmxlbmd0aCArIGRpciAqIGhhbmRsZU51bWJlcik7XG5cdFx0XHRcdHNjb3BlX0hhbmRsZXNbaGFuZGxlTnVtYmVyXS5jaGlsZE5vZGVzWzBdLnN0eWxlLnpJbmRleCA9IHpJbmRleDtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vIFRlc3Qgc3VnZ2VzdGVkIHZhbHVlcyBhbmQgYXBwbHkgbWFyZ2luLCBzdGVwLlxuXHRcdGZ1bmN0aW9uIHNldEhhbmRsZShoYW5kbGVOdW1iZXIsIHRvLCBsb29rQmFja3dhcmQsIGxvb2tGb3J3YXJkKSB7XG5cblx0XHRcdHRvID0gY2hlY2tIYW5kbGVQb3NpdGlvbihzY29wZV9Mb2NhdGlvbnMsIGhhbmRsZU51bWJlciwgdG8sIGxvb2tCYWNrd2FyZCwgbG9va0ZvcndhcmQsIGZhbHNlKTtcblxuXHRcdFx0aWYgKHRvID09PSBmYWxzZSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdHVwZGF0ZUhhbmRsZVBvc2l0aW9uKGhhbmRsZU51bWJlciwgdG8pO1xuXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBVcGRhdGVzIHN0eWxlIGF0dHJpYnV0ZSBmb3IgY29ubmVjdCBub2Rlc1xuXHRcdGZ1bmN0aW9uIHVwZGF0ZUNvbm5lY3QoaW5kZXgpIHtcblxuXHRcdFx0Ly8gU2tpcCBjb25uZWN0cyBzZXQgdG8gZmFsc2Vcblx0XHRcdGlmICghc2NvcGVfQ29ubmVjdHNbaW5kZXhdKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGwgPSAwO1xuXHRcdFx0dmFyIGggPSAxMDA7XG5cblx0XHRcdGlmIChpbmRleCAhPT0gMCkge1xuXHRcdFx0XHRsID0gc2NvcGVfTG9jYXRpb25zW2luZGV4IC0gMV07XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpbmRleCAhPT0gc2NvcGVfQ29ubmVjdHMubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRoID0gc2NvcGVfTG9jYXRpb25zW2luZGV4XTtcblx0XHRcdH1cblxuXHRcdFx0c2NvcGVfQ29ubmVjdHNbaW5kZXhdLnN0eWxlW29wdGlvbnMuc3R5bGVdID0gdG9QY3QobCk7XG5cdFx0XHRzY29wZV9Db25uZWN0c1tpbmRleF0uc3R5bGVbb3B0aW9ucy5zdHlsZU9wb3NpdGVdID0gdG9QY3QoMTAwIC0gaCk7XG5cdFx0fVxuXG5cdFx0Ly8gLi4uXG5cdFx0ZnVuY3Rpb24gc2V0VmFsdWUodG8sIGhhbmRsZU51bWJlcikge1xuXG5cdFx0XHQvLyBTZXR0aW5nIHdpdGggbnVsbCBpbmRpY2F0ZXMgYW4gJ2lnbm9yZScuXG5cdFx0XHQvLyBJbnB1dHRpbmcgJ2ZhbHNlJyBpcyBpbnZhbGlkLlxuXHRcdFx0aWYgKHRvID09PSBudWxsIHx8IHRvID09PSBmYWxzZSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGEgZm9ybWF0dGVkIG51bWJlciB3YXMgcGFzc2VkLCBhdHRlbXQgdG8gZGVjb2RlIGl0LlxuXHRcdFx0aWYgKHR5cGVvZiB0byA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0dG8gPSBTdHJpbmcodG8pO1xuXHRcdFx0fVxuXG5cdFx0XHR0byA9IG9wdGlvbnMuZm9ybWF0LmZyb20odG8pO1xuXG5cdFx0XHQvLyBSZXF1ZXN0IGFuIHVwZGF0ZSBmb3IgYWxsIGxpbmtzIGlmIHRoZSB2YWx1ZSB3YXMgaW52YWxpZC5cblx0XHRcdC8vIERvIHNvIHRvbyBpZiBzZXR0aW5nIHRoZSBoYW5kbGUgZmFpbHMuXG5cdFx0XHRpZiAodG8gIT09IGZhbHNlICYmICFpc05hTih0bykpIHtcblx0XHRcdFx0c2V0SGFuZGxlKGhhbmRsZU51bWJlciwgc2NvcGVfU3BlY3RydW0udG9TdGVwcGluZyh0byksIGZhbHNlLCBmYWxzZSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBzbGlkZXIgdmFsdWUuXG5cdFx0ZnVuY3Rpb24gdmFsdWVTZXQoaW5wdXQsIGZpcmVTZXRFdmVudCkge1xuXG5cdFx0XHR2YXIgdmFsdWVzID0gYXNBcnJheShpbnB1dCk7XG5cdFx0XHR2YXIgaXNJbml0ID0gc2NvcGVfTG9jYXRpb25zWzBdID09PSB1bmRlZmluZWQ7XG5cblx0XHRcdC8vIEV2ZW50IGZpcmVzIGJ5IGRlZmF1bHRcblx0XHRcdGZpcmVTZXRFdmVudCA9IGZpcmVTZXRFdmVudCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6ICEhZmlyZVNldEV2ZW50O1xuXG5cdFx0XHR2YWx1ZXMuZm9yRWFjaChzZXRWYWx1ZSk7XG5cblx0XHRcdC8vIEFuaW1hdGlvbiBpcyBvcHRpb25hbC5cblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgaW5pdGlhbCB2YWx1ZXMgd2VyZSBzZXQgYmVmb3JlIHVzaW5nIGFuaW1hdGVkIHBsYWNlbWVudC5cblx0XHRcdGlmIChvcHRpb25zLmFuaW1hdGUgJiYgIWlzSW5pdCkge1xuXHRcdFx0XHRhZGRDbGFzc0ZvcihzY29wZV9UYXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy50YXAsIG9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24pO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBOb3cgdGhhdCBhbGwgYmFzZSB2YWx1ZXMgYXJlIHNldCwgYXBwbHkgY29uc3RyYWludHNcblx0XHRcdHNjb3BlX0hhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlTnVtYmVyKSB7XG5cdFx0XHRcdHNldEhhbmRsZShoYW5kbGVOdW1iZXIsIHNjb3BlX0xvY2F0aW9uc1toYW5kbGVOdW1iZXJdLCB0cnVlLCBmYWxzZSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0c2V0WmluZGV4KCk7XG5cblx0XHRcdHNjb3BlX0hhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlTnVtYmVyKSB7XG5cblx0XHRcdFx0ZmlyZUV2ZW50KCd1cGRhdGUnLCBoYW5kbGVOdW1iZXIpO1xuXG5cdFx0XHRcdC8vIEZpcmUgdGhlIGV2ZW50IG9ubHkgZm9yIGhhbmRsZXMgdGhhdCByZWNlaXZlZCBhIG5ldyB2YWx1ZSwgYXMgcGVyICM1Nzlcblx0XHRcdFx0aWYgKHZhbHVlc1toYW5kbGVOdW1iZXJdICE9PSBudWxsICYmIGZpcmVTZXRFdmVudCkge1xuXHRcdFx0XHRcdGZpcmVFdmVudCgnc2V0JywgaGFuZGxlTnVtYmVyKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8gUmVzZXQgc2xpZGVyIHRvIGluaXRpYWwgdmFsdWVzXG5cdFx0ZnVuY3Rpb24gdmFsdWVSZXNldChmaXJlU2V0RXZlbnQpIHtcblx0XHRcdHZhbHVlU2V0KG9wdGlvbnMuc3RhcnQsIGZpcmVTZXRFdmVudCk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IHRoZSBzbGlkZXIgdmFsdWUuXG5cdFx0ZnVuY3Rpb24gdmFsdWVHZXQoKSB7XG5cblx0XHRcdHZhciB2YWx1ZXMgPSBzY29wZV9WYWx1ZXMubWFwKG9wdGlvbnMuZm9ybWF0LnRvKTtcblxuXHRcdFx0Ly8gSWYgb25seSBvbmUgaGFuZGxlIGlzIHVzZWQsIHJldHVybiBhIHNpbmdsZSB2YWx1ZS5cblx0XHRcdGlmICh2YWx1ZXMubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdHJldHVybiB2YWx1ZXNbMF07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB2YWx1ZXM7XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlcyBjbGFzc2VzIGZyb20gdGhlIHJvb3QgYW5kIGVtcHRpZXMgaXQuXG5cdFx0ZnVuY3Rpb24gZGVzdHJveSgpIHtcblxuXHRcdFx0Zm9yICh2YXIga2V5IGluIG9wdGlvbnMuY3NzQ2xhc3Nlcykge1xuXHRcdFx0XHRpZiAoIW9wdGlvbnMuY3NzQ2xhc3Nlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmVtb3ZlQ2xhc3Moc2NvcGVfVGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXNba2V5XSk7XG5cdFx0XHR9XG5cblx0XHRcdHdoaWxlIChzY29wZV9UYXJnZXQuZmlyc3RDaGlsZCkge1xuXHRcdFx0XHRzY29wZV9UYXJnZXQucmVtb3ZlQ2hpbGQoc2NvcGVfVGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHRcdFx0fVxuXG5cdFx0XHRkZWxldGUgc2NvcGVfVGFyZ2V0Lm5vVWlTbGlkZXI7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IHRoZSBjdXJyZW50IHN0ZXAgc2l6ZSBmb3IgdGhlIHNsaWRlci5cblx0XHRmdW5jdGlvbiBnZXRDdXJyZW50U3RlcCgpIHtcblxuXHRcdFx0Ly8gQ2hlY2sgYWxsIGxvY2F0aW9ucywgbWFwIHRoZW0gdG8gdGhlaXIgc3RlcHBpbmcgcG9pbnQuXG5cdFx0XHQvLyBHZXQgdGhlIHN0ZXAgcG9pbnQsIHRoZW4gZmluZCBpdCBpbiB0aGUgaW5wdXQgbGlzdC5cblx0XHRcdHJldHVybiBzY29wZV9Mb2NhdGlvbnMubWFwKGZ1bmN0aW9uIChsb2NhdGlvbiwgaW5kZXgpIHtcblxuXHRcdFx0XHR2YXIgbmVhcmJ5U3RlcHMgPSBzY29wZV9TcGVjdHJ1bS5nZXROZWFyYnlTdGVwcyhsb2NhdGlvbik7XG5cdFx0XHRcdHZhciB2YWx1ZSA9IHNjb3BlX1ZhbHVlc1tpbmRleF07XG5cdFx0XHRcdHZhciBpbmNyZW1lbnQgPSBuZWFyYnlTdGVwcy50aGlzU3RlcC5zdGVwO1xuXHRcdFx0XHR2YXIgZGVjcmVtZW50ID0gbnVsbDtcblxuXHRcdFx0XHQvLyBJZiB0aGUgbmV4dCB2YWx1ZSBpbiB0aGlzIHN0ZXAgbW92ZXMgaW50byB0aGUgbmV4dCBzdGVwLFxuXHRcdFx0XHQvLyB0aGUgaW5jcmVtZW50IGlzIHRoZSBzdGFydCBvZiB0aGUgbmV4dCBzdGVwIC0gdGhlIGN1cnJlbnQgdmFsdWVcblx0XHRcdFx0aWYgKGluY3JlbWVudCAhPT0gZmFsc2UpIHtcblx0XHRcdFx0XHRpZiAodmFsdWUgKyBpbmNyZW1lbnQgPiBuZWFyYnlTdGVwcy5zdGVwQWZ0ZXIuc3RhcnRWYWx1ZSkge1xuXHRcdFx0XHRcdFx0aW5jcmVtZW50ID0gbmVhcmJ5U3RlcHMuc3RlcEFmdGVyLnN0YXJ0VmFsdWUgLSB2YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJZiB0aGUgdmFsdWUgaXMgYmV5b25kIHRoZSBzdGFydGluZyBwb2ludFxuXHRcdFx0XHRpZiAodmFsdWUgPiBuZWFyYnlTdGVwcy50aGlzU3RlcC5zdGFydFZhbHVlKSB7XG5cdFx0XHRcdFx0ZGVjcmVtZW50ID0gbmVhcmJ5U3RlcHMudGhpc1N0ZXAuc3RlcDtcblx0XHRcdFx0fSBlbHNlIGlmIChuZWFyYnlTdGVwcy5zdGVwQmVmb3JlLnN0ZXAgPT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0ZGVjcmVtZW50ID0gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJZiBhIGhhbmRsZSBpcyBhdCB0aGUgc3RhcnQgb2YgYSBzdGVwLCBpdCBhbHdheXMgc3RlcHMgYmFjayBpbnRvIHRoZSBwcmV2aW91cyBzdGVwIGZpcnN0XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0ZGVjcmVtZW50ID0gdmFsdWUgLSBuZWFyYnlTdGVwcy5zdGVwQmVmb3JlLmhpZ2hlc3RTdGVwO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBOb3csIGlmIGF0IHRoZSBzbGlkZXIgZWRnZXMsIHRoZXJlIGlzIG5vdCBpbi9kZWNyZW1lbnRcblx0XHRcdFx0aWYgKGxvY2F0aW9uID09PSAxMDApIHtcblx0XHRcdFx0XHRpbmNyZW1lbnQgPSBudWxsO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGxvY2F0aW9uID09PSAwKSB7XG5cdFx0XHRcdFx0ZGVjcmVtZW50ID0gbnVsbDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFzIHBlciAjMzkxLCB0aGUgY29tcGFyaXNvbiBmb3IgdGhlIGRlY3JlbWVudCBzdGVwIGNhbiBoYXZlIHNvbWUgcm91bmRpbmcgaXNzdWVzLlxuXHRcdFx0XHR2YXIgc3RlcERlY2ltYWxzID0gc2NvcGVfU3BlY3RydW0uY291bnRTdGVwRGVjaW1hbHMoKTtcblxuXHRcdFx0XHQvLyBSb3VuZCBwZXIgIzM5MVxuXHRcdFx0XHRpZiAoaW5jcmVtZW50ICE9PSBudWxsICYmIGluY3JlbWVudCAhPT0gZmFsc2UpIHtcblx0XHRcdFx0XHRpbmNyZW1lbnQgPSBOdW1iZXIoaW5jcmVtZW50LnRvRml4ZWQoc3RlcERlY2ltYWxzKSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoZGVjcmVtZW50ICE9PSBudWxsICYmIGRlY3JlbWVudCAhPT0gZmFsc2UpIHtcblx0XHRcdFx0XHRkZWNyZW1lbnQgPSBOdW1iZXIoZGVjcmVtZW50LnRvRml4ZWQoc3RlcERlY2ltYWxzKSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gW2RlY3JlbWVudCwgaW5jcmVtZW50XTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vIEF0dGFjaCBhbiBldmVudCB0byB0aGlzIHNsaWRlciwgcG9zc2libHkgaW5jbHVkaW5nIGEgbmFtZXNwYWNlXG5cdFx0ZnVuY3Rpb24gYmluZEV2ZW50KG5hbWVzcGFjZWRFdmVudCwgY2FsbGJhY2spIHtcblx0XHRcdHNjb3BlX0V2ZW50c1tuYW1lc3BhY2VkRXZlbnRdID0gc2NvcGVfRXZlbnRzW25hbWVzcGFjZWRFdmVudF0gfHwgW107XG5cdFx0XHRzY29wZV9FdmVudHNbbmFtZXNwYWNlZEV2ZW50XS5wdXNoKGNhbGxiYWNrKTtcblxuXHRcdFx0Ly8gSWYgdGhlIGV2ZW50IGJvdW5kIGlzICd1cGRhdGUsJyBmaXJlIGl0IGltbWVkaWF0ZWx5IGZvciBhbGwgaGFuZGxlcy5cblx0XHRcdGlmIChuYW1lc3BhY2VkRXZlbnQuc3BsaXQoJy4nKVswXSA9PT0gJ3VwZGF0ZScpIHtcblx0XHRcdFx0c2NvcGVfSGFuZGxlcy5mb3JFYWNoKGZ1bmN0aW9uIChhLCBpbmRleCkge1xuXHRcdFx0XHRcdGZpcmVFdmVudCgndXBkYXRlJywgaW5kZXgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBVbmRvIGF0dGFjaG1lbnQgb2YgZXZlbnRcblx0XHRmdW5jdGlvbiByZW1vdmVFdmVudChuYW1lc3BhY2VkRXZlbnQpIHtcblxuXHRcdFx0dmFyIGV2ZW50ID0gbmFtZXNwYWNlZEV2ZW50ICYmIG5hbWVzcGFjZWRFdmVudC5zcGxpdCgnLicpWzBdO1xuXHRcdFx0dmFyIG5hbWVzcGFjZSA9IGV2ZW50ICYmIG5hbWVzcGFjZWRFdmVudC5zdWJzdHJpbmcoZXZlbnQubGVuZ3RoKTtcblxuXHRcdFx0T2JqZWN0LmtleXMoc2NvcGVfRXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uIChiaW5kKSB7XG5cblx0XHRcdFx0dmFyIHRFdmVudCA9IGJpbmQuc3BsaXQoJy4nKVswXSxcblx0XHRcdFx0ICAgIHROYW1lc3BhY2UgPSBiaW5kLnN1YnN0cmluZyh0RXZlbnQubGVuZ3RoKTtcblxuXHRcdFx0XHRpZiAoKCFldmVudCB8fCBldmVudCA9PT0gdEV2ZW50KSAmJiAoIW5hbWVzcGFjZSB8fCBuYW1lc3BhY2UgPT09IHROYW1lc3BhY2UpKSB7XG5cdFx0XHRcdFx0ZGVsZXRlIHNjb3BlX0V2ZW50c1tiaW5kXTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8gVXBkYXRlYWJsZTogbWFyZ2luLCBsaW1pdCwgcGFkZGluZywgc3RlcCwgcmFuZ2UsIGFuaW1hdGUsIHNuYXBcblx0XHRmdW5jdGlvbiB1cGRhdGVPcHRpb25zKG9wdGlvbnNUb1VwZGF0ZSwgZmlyZVNldEV2ZW50KSB7XG5cblx0XHRcdC8vIFNwZWN0cnVtIGlzIGNyZWF0ZWQgdXNpbmcgdGhlIHJhbmdlLCBzbmFwLCBkaXJlY3Rpb24gYW5kIHN0ZXAgb3B0aW9ucy5cblx0XHRcdC8vICdzbmFwJyBhbmQgJ3N0ZXAnIGNhbiBiZSB1cGRhdGVkLlxuXHRcdFx0Ly8gSWYgJ3NuYXAnIGFuZCAnc3RlcCcgYXJlIG5vdCBwYXNzZWQsIHRoZXkgc2hvdWxkIHJlbWFpbiB1bmNoYW5nZWQuXG5cdFx0XHR2YXIgdiA9IHZhbHVlR2V0KCk7XG5cblx0XHRcdHZhciB1cGRhdGVBYmxlID0gWydtYXJnaW4nLCAnbGltaXQnLCAncGFkZGluZycsICdyYW5nZScsICdhbmltYXRlJywgJ3NuYXAnLCAnc3RlcCcsICdmb3JtYXQnXTtcblxuXHRcdFx0Ly8gT25seSBjaGFuZ2Ugb3B0aW9ucyB0aGF0IHdlJ3JlIGFjdHVhbGx5IHBhc3NlZCB0byB1cGRhdGUuXG5cdFx0XHR1cGRhdGVBYmxlLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcblx0XHRcdFx0aWYgKG9wdGlvbnNUb1VwZGF0ZVtuYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0b3JpZ2luYWxPcHRpb25zW25hbWVdID0gb3B0aW9uc1RvVXBkYXRlW25hbWVdO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0dmFyIG5ld09wdGlvbnMgPSB0ZXN0T3B0aW9ucyhvcmlnaW5hbE9wdGlvbnMpO1xuXG5cdFx0XHQvLyBMb2FkIG5ldyBvcHRpb25zIGludG8gdGhlIHNsaWRlciBzdGF0ZVxuXHRcdFx0dXBkYXRlQWJsZS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG5cdFx0XHRcdGlmIChvcHRpb25zVG9VcGRhdGVbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdG9wdGlvbnNbbmFtZV0gPSBuZXdPcHRpb25zW25hbWVdO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0c2NvcGVfU3BlY3RydW0gPSBuZXdPcHRpb25zLnNwZWN0cnVtO1xuXG5cdFx0XHQvLyBMaW1pdCwgbWFyZ2luIGFuZCBwYWRkaW5nIGRlcGVuZCBvbiB0aGUgc3BlY3RydW0gYnV0IGFyZSBzdG9yZWQgb3V0c2lkZSBvZiBpdC4gKCM2NzcpXG5cdFx0XHRvcHRpb25zLm1hcmdpbiA9IG5ld09wdGlvbnMubWFyZ2luO1xuXHRcdFx0b3B0aW9ucy5saW1pdCA9IG5ld09wdGlvbnMubGltaXQ7XG5cdFx0XHRvcHRpb25zLnBhZGRpbmcgPSBuZXdPcHRpb25zLnBhZGRpbmc7XG5cblx0XHRcdC8vIFVwZGF0ZSBwaXBzLCByZW1vdmVzIGV4aXN0aW5nLlxuXHRcdFx0aWYgKG9wdGlvbnMucGlwcykge1xuXHRcdFx0XHRwaXBzKG9wdGlvbnMucGlwcyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEludmFsaWRhdGUgdGhlIGN1cnJlbnQgcG9zaXRpb25pbmcgc28gdmFsdWVTZXQgZm9yY2VzIGFuIHVwZGF0ZS5cblx0XHRcdHNjb3BlX0xvY2F0aW9ucyA9IFtdO1xuXHRcdFx0dmFsdWVTZXQob3B0aW9uc1RvVXBkYXRlLnN0YXJ0IHx8IHYsIGZpcmVTZXRFdmVudCk7XG5cdFx0fVxuXG5cdFx0Ly8gVGhyb3cgYW4gZXJyb3IgaWYgdGhlIHNsaWRlciB3YXMgYWxyZWFkeSBpbml0aWFsaXplZC5cblx0XHRpZiAoc2NvcGVfVGFyZ2V0Lm5vVWlTbGlkZXIpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogU2xpZGVyIHdhcyBhbHJlYWR5IGluaXRpYWxpemVkLlwiKTtcblx0XHR9XG5cblx0XHQvLyBDcmVhdGUgdGhlIGJhc2UgZWxlbWVudCwgaW5pdGlhbGlzZSBIVE1MIGFuZCBzZXQgY2xhc3Nlcy5cblx0XHQvLyBBZGQgaGFuZGxlcyBhbmQgY29ubmVjdCBlbGVtZW50cy5cblx0XHRhZGRTbGlkZXIoc2NvcGVfVGFyZ2V0KTtcblx0XHRhZGRFbGVtZW50cyhvcHRpb25zLmNvbm5lY3QsIHNjb3BlX0Jhc2UpO1xuXG5cdFx0c2NvcGVfU2VsZiA9IHtcblx0XHRcdGRlc3Ryb3k6IGRlc3Ryb3ksXG5cdFx0XHRzdGVwczogZ2V0Q3VycmVudFN0ZXAsXG5cdFx0XHRvbjogYmluZEV2ZW50LFxuXHRcdFx0b2ZmOiByZW1vdmVFdmVudCxcblx0XHRcdGdldDogdmFsdWVHZXQsXG5cdFx0XHRzZXQ6IHZhbHVlU2V0LFxuXHRcdFx0cmVzZXQ6IHZhbHVlUmVzZXQsXG5cdFx0XHQvLyBFeHBvc2VkIGZvciB1bml0IHRlc3RpbmcsIGRvbid0IHVzZSB0aGlzIGluIHlvdXIgYXBwbGljYXRpb24uXG5cdFx0XHRfX21vdmVIYW5kbGVzOiBmdW5jdGlvbiBfX21vdmVIYW5kbGVzKGEsIGIsIGMpIHtcblx0XHRcdFx0bW92ZUhhbmRsZXMoYSwgYiwgc2NvcGVfTG9jYXRpb25zLCBjKTtcblx0XHRcdH0sXG5cdFx0XHRvcHRpb25zOiBvcmlnaW5hbE9wdGlvbnMsIC8vIElzc3VlICM2MDAsICM2Nzhcblx0XHRcdHVwZGF0ZU9wdGlvbnM6IHVwZGF0ZU9wdGlvbnMsXG5cdFx0XHR0YXJnZXQ6IHNjb3BlX1RhcmdldCwgLy8gSXNzdWUgIzU5N1xuXHRcdFx0cmVtb3ZlUGlwczogcmVtb3ZlUGlwcyxcblx0XHRcdHBpcHM6IHBpcHMgLy8gSXNzdWUgIzU5NFxuXHRcdH07XG5cblx0XHQvLyBBdHRhY2ggdXNlciBldmVudHMuXG5cdFx0YmluZFNsaWRlckV2ZW50cyhvcHRpb25zLmV2ZW50cyk7XG5cblx0XHQvLyBVc2UgdGhlIHB1YmxpYyB2YWx1ZSBtZXRob2QgdG8gc2V0IHRoZSBzdGFydCB2YWx1ZXMuXG5cdFx0dmFsdWVTZXQob3B0aW9ucy5zdGFydCk7XG5cblx0XHRpZiAob3B0aW9ucy5waXBzKSB7XG5cdFx0XHRwaXBzKG9wdGlvbnMucGlwcyk7XG5cdFx0fVxuXG5cdFx0aWYgKG9wdGlvbnMudG9vbHRpcHMpIHtcblx0XHRcdHRvb2x0aXBzKCk7XG5cdFx0fVxuXG5cdFx0YXJpYSgpO1xuXG5cdFx0cmV0dXJuIHNjb3BlX1NlbGY7XG5cdH1cblxuXHQvLyBSdW4gdGhlIHN0YW5kYXJkIGluaXRpYWxpemVyXG5cdGZ1bmN0aW9uIGluaXRpYWxpemUodGFyZ2V0LCBvcmlnaW5hbE9wdGlvbnMpIHtcblxuXHRcdGlmICghdGFyZ2V0IHx8ICF0YXJnZXQubm9kZU5hbWUpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogY3JlYXRlIHJlcXVpcmVzIGEgc2luZ2xlIGVsZW1lbnQsIGdvdDogXCIgKyB0YXJnZXQpO1xuXHRcdH1cblxuXHRcdC8vIFRlc3QgdGhlIG9wdGlvbnMgYW5kIGNyZWF0ZSB0aGUgc2xpZGVyIGVudmlyb25tZW50O1xuXHRcdHZhciBvcHRpb25zID0gdGVzdE9wdGlvbnMob3JpZ2luYWxPcHRpb25zLCB0YXJnZXQpO1xuXHRcdHZhciBhcGkgPSBjbG9zdXJlKHRhcmdldCwgb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zKTtcblxuXHRcdHRhcmdldC5ub1VpU2xpZGVyID0gYXBpO1xuXG5cdFx0cmV0dXJuIGFwaTtcblx0fVxuXG5cdC8vIFVzZSBhbiBvYmplY3QgaW5zdGVhZCBvZiBhIGZ1bmN0aW9uIGZvciBmdXR1cmUgZXhwYW5zaWJpbGl0eTtcblx0cmV0dXJuIHtcblx0XHR2ZXJzaW9uOiBWRVJTSU9OLFxuXHRcdGNyZWF0ZTogaW5pdGlhbGl6ZVxuXHR9O1xufSk7XG5cbi8qKiovIH0pLFxuLyogMzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX190dXJmX2Rlc3RpbmF0aW9uX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX3R1cmZfaGVscGVyc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7XG5cblxuXG4vKipcbiAqIFRha2VzIGEge0BsaW5rIFBvaW50fSBhbmQgY2FsY3VsYXRlcyB0aGUgY2lyY2xlIHBvbHlnb24gZ2l2ZW4gYSByYWRpdXMgaW4gZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnM7IGFuZCBzdGVwcyBmb3IgcHJlY2lzaW9uLlxuICpcbiAqIEBuYW1lIGNpcmNsZVxuICogQHBhcmFtIHtGZWF0dXJlPFBvaW50PnxudW1iZXJbXX0gY2VudGVyIGNlbnRlciBwb2ludFxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyByYWRpdXMgb2YgdGhlIGNpcmNsZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBPcHRpb25hbCBwYXJhbWV0ZXJzXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuc3RlcHM9NjRdIG51bWJlciBvZiBzdGVwc1xuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnVuaXRzPSdraWxvbWV0ZXJzJ10gbWlsZXMsIGtpbG9tZXRlcnMsIGRlZ3JlZXMsIG9yIHJhZGlhbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5wcm9wZXJ0aWVzPXt9XSBwcm9wZXJ0aWVzXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxQb2x5Z29uPn0gY2lyY2xlIHBvbHlnb25cbiAqIEBleGFtcGxlXG4gKiB2YXIgY2VudGVyID0gWy03NS4zNDMsIDM5Ljk4NF07XG4gKiB2YXIgcmFkaXVzID0gNTtcbiAqIHZhciBzdGVwcyA9IDEwO1xuICogdmFyIHVuaXRzID0gJ2tpbG9tZXRlcnMnO1xuICogdmFyIHByb3BlcnRpZXMgPSB7Zm9vOiAnYmFyJ307XG4gKlxuICogdmFyIGNpcmNsZSA9IHR1cmYuY2lyY2xlKGNlbnRlciwgcmFkaXVzLCBzdGVwcywgdW5pdHMsIHByb3BlcnRpZXMpO1xuICpcbiAqIC8vYWRkVG9NYXBcbiAqIHZhciBhZGRUb01hcCA9IFt0dXJmLnBvaW50KGNlbnRlciksIGNpcmNsZV1cbiAqL1xuZnVuY3Rpb24gY2lyY2xlKGNlbnRlciwgcmFkaXVzLCBvcHRpb25zKSB7XG4gICAgLy8gT3B0aW9uYWwgcGFyYW1zXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdmFyIHN0ZXBzID0gb3B0aW9ucy5zdGVwcyB8fCA2NDtcbiAgICB2YXIgdW5pdHMgPSBvcHRpb25zLnVuaXRzO1xuICAgIHZhciBwcm9wZXJ0aWVzID0gb3B0aW9ucy5wcm9wZXJ0aWVzO1xuXG4gICAgLy8gdmFsaWRhdGlvblxuICAgIGlmICghY2VudGVyKSB0aHJvdyBuZXcgRXJyb3IoJ2NlbnRlciBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghcmFkaXVzKSB0aHJvdyBuZXcgRXJyb3IoJ3JhZGl1cyBpcyByZXF1aXJlZCcpO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHRocm93IG5ldyBFcnJvcignb3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgIGlmICh0eXBlb2Ygc3RlcHMgIT09ICdudW1iZXInKSB0aHJvdyBuZXcgRXJyb3IoJ3N0ZXBzIG11c3QgYmUgYSBudW1iZXInKTtcblxuICAgIC8vIGRlZmF1bHQgcGFyYW1zXG4gICAgc3RlcHMgPSBzdGVwcyB8fCA2NDtcbiAgICBwcm9wZXJ0aWVzID0gcHJvcGVydGllcyB8fCBjZW50ZXIucHJvcGVydGllcyB8fCB7fTtcblxuICAgIHZhciBjb29yZGluYXRlcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RlcHM7IGkrKykge1xuICAgICAgICBjb29yZGluYXRlcy5wdXNoKE9iamVjdChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX3R1cmZfZGVzdGluYXRpb25fX1tcImFcIiAvKiBkZWZhdWx0ICovXSkoY2VudGVyLCByYWRpdXMsIGkgKiAzNjAgLyBzdGVwcywgdW5pdHMpLmdlb21ldHJ5LmNvb3JkaW5hdGVzKTtcbiAgICB9XG4gICAgY29vcmRpbmF0ZXMucHVzaChjb29yZGluYXRlc1swXSk7XG5cbiAgICByZXR1cm4gT2JqZWN0KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fdHVyZl9oZWxwZXJzX19bXCJhXCIgLyogcG9seWdvbiAqL10pKFtjb29yZGluYXRlc10sIHByb3BlcnRpZXMpO1xufVxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGNpcmNsZSk7XG5cblxuLyoqKi8gfSksXG4vKiAzMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX3R1cmZfaW52YXJpYW50X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX3R1cmZfaGVscGVyc19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG4vL2h0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSGF2ZXJzaW5lX2Zvcm11bGFcbi8vaHR0cDovL3d3dy5tb3ZhYmxlLXR5cGUuY28udWsvc2NyaXB0cy9sYXRsb25nLmh0bWxcblxuXG5cbi8qKlxuICogVGFrZXMgYSB7QGxpbmsgUG9pbnR9IGFuZCBjYWxjdWxhdGVzIHRoZSBsb2NhdGlvbiBvZiBhIGRlc3RpbmF0aW9uIHBvaW50IGdpdmVuIGEgZGlzdGFuY2UgaW4gZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnM7IGFuZCBiZWFyaW5nIGluIGRlZ3JlZXMuIFRoaXMgdXNlcyB0aGUgW0hhdmVyc2luZSBmb3JtdWxhXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hhdmVyc2luZV9mb3JtdWxhKSB0byBhY2NvdW50IGZvciBnbG9iYWwgY3VydmF0dXJlLlxuICpcbiAqIEBuYW1lIGRlc3RpbmF0aW9uXG4gKiBAcGFyYW0ge0dlb21ldHJ5fEZlYXR1cmU8UG9pbnQ+fEFycmF5PG51bWJlcj59IG9yaWdpbiBzdGFydGluZyBwb2ludFxuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIGRpc3RhbmNlIGZyb20gdGhlIG9yaWdpbiBwb2ludFxuICogQHBhcmFtIHtudW1iZXJ9IGJlYXJpbmcgcmFuZ2luZyBmcm9tIC0xODAgdG8gMTgwXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25hbCBwYXJhbWV0ZXJzXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMudW5pdHM9J2tpbG9tZXRlcnMnXSBtaWxlcywga2lsb21ldGVycywgZGVncmVlcywgb3IgcmFkaWFuc1xuICogQHJldHVybnMge0ZlYXR1cmU8UG9pbnQ+fSBkZXN0aW5hdGlvbiBwb2ludFxuICogQGV4YW1wbGVcbiAqIHZhciBwb2ludCA9IHR1cmYucG9pbnQoWy03NS4zNDMsIDM5Ljk4NF0pO1xuICogdmFyIGRpc3RhbmNlID0gNTA7XG4gKiB2YXIgYmVhcmluZyA9IDkwO1xuICogdmFyIHVuaXRzID0gJ21pbGVzJztcbiAqXG4gKiB2YXIgZGVzdGluYXRpb24gPSB0dXJmLmRlc3RpbmF0aW9uKHBvaW50LCBkaXN0YW5jZSwgYmVhcmluZywgdW5pdHMpO1xuICpcbiAqIC8vYWRkVG9NYXBcbiAqIHZhciBhZGRUb01hcCA9IFtwb2ludCwgZGVzdGluYXRpb25dXG4gKiBkZXN0aW5hdGlvbi5wcm9wZXJ0aWVzWydtYXJrZXItY29sb3InXSA9ICcjZjAwJztcbiAqIHBvaW50LnByb3BlcnRpZXNbJ21hcmtlci1jb2xvciddID0gJyMwZjAnO1xuICovXG5mdW5jdGlvbiBkZXN0aW5hdGlvbihvcmlnaW4sIGRpc3RhbmNlLCBiZWFyaW5nLCBvcHRpb25zKSB7XG4gICAgLy8gQmFja3dhcmRzIGNvbXBhdGlibGUgd2l0aCB2NC4wXG4gICAgdmFyIHVuaXRzID0gKHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0JykgPyBvcHRpb25zLnVuaXRzIDogb3B0aW9ucztcblxuICAgIHZhciBkZWdyZWVzMnJhZGlhbnMgPSBNYXRoLlBJIC8gMTgwO1xuICAgIHZhciByYWRpYW5zMmRlZ3JlZXMgPSAxODAgLyBNYXRoLlBJO1xuICAgIHZhciBjb29yZGluYXRlczEgPSBPYmplY3QoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX190dXJmX2ludmFyaWFudF9fW1wiYVwiIC8qIGdldENvb3JkICovXSkob3JpZ2luKTtcbiAgICB2YXIgbG9uZ2l0dWRlMSA9IGRlZ3JlZXMycmFkaWFucyAqIGNvb3JkaW5hdGVzMVswXTtcbiAgICB2YXIgbGF0aXR1ZGUxID0gZGVncmVlczJyYWRpYW5zICogY29vcmRpbmF0ZXMxWzFdO1xuICAgIHZhciBiZWFyaW5nX3JhZCA9IGRlZ3JlZXMycmFkaWFucyAqIGJlYXJpbmc7XG5cbiAgICB2YXIgcmFkaWFucyA9IE9iamVjdChfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX3R1cmZfaGVscGVyc19fW1wiYVwiIC8qIGRpc3RhbmNlVG9SYWRpYW5zICovXSkoZGlzdGFuY2UsIHVuaXRzKTtcblxuICAgIHZhciBsYXRpdHVkZTIgPSBNYXRoLmFzaW4oTWF0aC5zaW4obGF0aXR1ZGUxKSAqIE1hdGguY29zKHJhZGlhbnMpICtcbiAgICAgICAgTWF0aC5jb3MobGF0aXR1ZGUxKSAqIE1hdGguc2luKHJhZGlhbnMpICogTWF0aC5jb3MoYmVhcmluZ19yYWQpKTtcbiAgICB2YXIgbG9uZ2l0dWRlMiA9IGxvbmdpdHVkZTEgKyBNYXRoLmF0YW4yKE1hdGguc2luKGJlYXJpbmdfcmFkKSAqIE1hdGguc2luKHJhZGlhbnMpICogTWF0aC5jb3MobGF0aXR1ZGUxKSxcbiAgICAgICAgTWF0aC5jb3MocmFkaWFucykgLSBNYXRoLnNpbihsYXRpdHVkZTEpICogTWF0aC5zaW4obGF0aXR1ZGUyKSk7XG5cbiAgICByZXR1cm4gT2JqZWN0KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fdHVyZl9oZWxwZXJzX19bXCJiXCIgLyogcG9pbnQgKi9dKShbcmFkaWFuczJkZWdyZWVzICogbG9uZ2l0dWRlMiwgcmFkaWFuczJkZWdyZWVzICogbGF0aXR1ZGUyXSk7XG59XG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImFcIl0gPSAoZGVzdGluYXRpb24pO1xuXG5cbi8qKiovIH0pLFxuLyogMzMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGV4cG9ydCAoaW1tdXRhYmxlKSAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IGdldENvb3JkO1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IGdldENvb3JkcyAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IGNvbnRhaW5zTnVtYmVyICovXG4vKiB1bnVzZWQgaGFybW9ueSBleHBvcnQgZ2VvanNvblR5cGUgKi9cbi8qIHVudXNlZCBoYXJtb255IGV4cG9ydCBmZWF0dXJlT2YgKi9cbi8qIHVudXNlZCBoYXJtb255IGV4cG9ydCBjb2xsZWN0aW9uT2YgKi9cbi8qIHVudXNlZCBoYXJtb255IGV4cG9ydCBnZXRHZW9tICovXG4vKiB1bnVzZWQgaGFybW9ueSBleHBvcnQgZ2V0R2VvbVR5cGUgKi9cbi8qIHVudXNlZCBoYXJtb255IGV4cG9ydCBnZXRUeXBlICovXG4vKipcbiAqIFVud3JhcCBhIGNvb3JkaW5hdGUgZnJvbSBhIFBvaW50IEZlYXR1cmUsIEdlb21ldHJ5IG9yIGEgc2luZ2xlIGNvb3JkaW5hdGUuXG4gKlxuICogQG5hbWUgZ2V0Q29vcmRcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPnxHZW9tZXRyeTxQb2ludD58RmVhdHVyZTxQb2ludD59IG9iaiBPYmplY3RcbiAqIEByZXR1cm5zIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlc1xuICogQGV4YW1wbGVcbiAqIHZhciBwdCA9IHR1cmYucG9pbnQoWzEwLCAxMF0pO1xuICpcbiAqIHZhciBjb29yZCA9IHR1cmYuZ2V0Q29vcmQocHQpO1xuICogLy89IFsxMCwgMTBdXG4gKi9cbmZ1bmN0aW9uIGdldENvb3JkKG9iaikge1xuICAgIGlmICghb2JqKSB0aHJvdyBuZXcgRXJyb3IoJ29iaiBpcyByZXF1aXJlZCcpO1xuXG4gICAgdmFyIGNvb3JkaW5hdGVzID0gZ2V0Q29vcmRzKG9iaik7XG5cbiAgICAvLyBnZXRDb29yZCgpIG11c3QgY29udGFpbiBhdCBsZWFzdCB0d28gbnVtYmVycyAoUG9pbnQpXG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA+IDEgJiZcbiAgICAgICAgdHlwZW9mIGNvb3JkaW5hdGVzWzBdID09PSAnbnVtYmVyJyAmJlxuICAgICAgICB0eXBlb2YgY29vcmRpbmF0ZXNbMV0gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiBjb29yZGluYXRlcztcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGUgaXMgbm90IGEgdmFsaWQgUG9pbnQnKTtcbiAgICB9XG59XG5cbi8qKlxuICogVW53cmFwIGNvb3JkaW5hdGVzIGZyb20gYSBGZWF0dXJlLCBHZW9tZXRyeSBPYmplY3Qgb3IgYW4gQXJyYXkgb2YgbnVtYmVyc1xuICpcbiAqIEBuYW1lIGdldENvb3Jkc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fEdlb21ldHJ5fEZlYXR1cmV9IG9iaiBPYmplY3RcbiAqIEByZXR1cm5zIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlc1xuICogQGV4YW1wbGVcbiAqIHZhciBwb2x5ID0gdHVyZi5wb2x5Z29uKFtbWzExOS4zMiwgLTguN10sIFsxMTkuNTUsIC04LjY5XSwgWzExOS41MSwgLTguNTRdLCBbMTE5LjMyLCAtOC43XV1dKTtcbiAqXG4gKiB2YXIgY29vcmQgPSB0dXJmLmdldENvb3Jkcyhwb2x5KTtcbiAqIC8vPSBbW1sxMTkuMzIsIC04LjddLCBbMTE5LjU1LCAtOC42OV0sIFsxMTkuNTEsIC04LjU0XSwgWzExOS4zMiwgLTguN11dXVxuICovXG5mdW5jdGlvbiBnZXRDb29yZHMob2JqKSB7XG4gICAgaWYgKCFvYmopIHRocm93IG5ldyBFcnJvcignb2JqIGlzIHJlcXVpcmVkJyk7XG4gICAgdmFyIGNvb3JkaW5hdGVzO1xuXG4gICAgLy8gQXJyYXkgb2YgbnVtYmVyc1xuICAgIGlmIChvYmoubGVuZ3RoKSB7XG4gICAgICAgIGNvb3JkaW5hdGVzID0gb2JqO1xuXG4gICAgLy8gR2VvbWV0cnkgT2JqZWN0XG4gICAgfSBlbHNlIGlmIChvYmouY29vcmRpbmF0ZXMpIHtcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBvYmouY29vcmRpbmF0ZXM7XG5cbiAgICAvLyBGZWF0dXJlXG4gICAgfSBlbHNlIGlmIChvYmouZ2VvbWV0cnkgJiYgb2JqLmdlb21ldHJ5LmNvb3JkaW5hdGVzKSB7XG4gICAgICAgIGNvb3JkaW5hdGVzID0gb2JqLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICAgIH1cbiAgICAvLyBDaGVja3MgaWYgY29vcmRpbmF0ZXMgY29udGFpbnMgYSBudW1iZXJcbiAgICBpZiAoY29vcmRpbmF0ZXMpIHtcbiAgICAgICAgY29udGFpbnNOdW1iZXIoY29vcmRpbmF0ZXMpO1xuICAgICAgICByZXR1cm4gY29vcmRpbmF0ZXM7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignTm8gdmFsaWQgY29vcmRpbmF0ZXMnKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgY29vcmRpbmF0ZXMgY29udGFpbnMgYSBudW1iZXJcbiAqXG4gKiBAbmFtZSBjb250YWluc051bWJlclxuICogQHBhcmFtIHtBcnJheTxhbnk+fSBjb29yZGluYXRlcyBHZW9KU09OIENvb3JkaW5hdGVzXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBBcnJheSBjb250YWlucyBhIG51bWJlclxuICovXG5mdW5jdGlvbiBjb250YWluc051bWJlcihjb29yZGluYXRlcykge1xuICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPiAxICYmXG4gICAgICAgIHR5cGVvZiBjb29yZGluYXRlc1swXSA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgdHlwZW9mIGNvb3JkaW5hdGVzWzFdID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb29yZGluYXRlc1swXSkgJiYgY29vcmRpbmF0ZXNbMF0ubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBjb250YWluc051bWJlcihjb29yZGluYXRlc1swXSk7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignY29vcmRpbmF0ZXMgbXVzdCBvbmx5IGNvbnRhaW4gbnVtYmVycycpO1xufVxuXG4vKipcbiAqIEVuZm9yY2UgZXhwZWN0YXRpb25zIGFib3V0IHR5cGVzIG9mIEdlb0pTT04gb2JqZWN0cyBmb3IgVHVyZi5cbiAqXG4gKiBAbmFtZSBnZW9qc29uVHlwZVxuICogQHBhcmFtIHtHZW9KU09OfSB2YWx1ZSBhbnkgR2VvSlNPTiBvYmplY3RcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIGV4cGVjdGVkIEdlb0pTT04gdHlwZVxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgbmFtZSBvZiBjYWxsaW5nIGZ1bmN0aW9uXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgdmFsdWUgaXMgbm90IHRoZSBleHBlY3RlZCB0eXBlLlxuICovXG5mdW5jdGlvbiBnZW9qc29uVHlwZSh2YWx1ZSwgdHlwZSwgbmFtZSkge1xuICAgIGlmICghdHlwZSB8fCAhbmFtZSkgdGhyb3cgbmV3IEVycm9yKCd0eXBlIGFuZCBuYW1lIHJlcXVpcmVkJyk7XG5cbiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlLnR5cGUgIT09IHR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0IHRvICcgKyBuYW1lICsgJzogbXVzdCBiZSBhICcgKyB0eXBlICsgJywgZ2l2ZW4gJyArIHZhbHVlLnR5cGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbmZvcmNlIGV4cGVjdGF0aW9ucyBhYm91dCB0eXBlcyBvZiB7QGxpbmsgRmVhdHVyZX0gaW5wdXRzIGZvciBUdXJmLlxuICogSW50ZXJuYWxseSB0aGlzIHVzZXMge0BsaW5rIGdlb2pzb25UeXBlfSB0byBqdWRnZSBnZW9tZXRyeSB0eXBlcy5cbiAqXG4gKiBAbmFtZSBmZWF0dXJlT2ZcbiAqIEBwYXJhbSB7RmVhdHVyZX0gZmVhdHVyZSBhIGZlYXR1cmUgd2l0aCBhbiBleHBlY3RlZCBnZW9tZXRyeSB0eXBlXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBleHBlY3RlZCBHZW9KU09OIHR5cGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgY2FsbGluZyBmdW5jdGlvblxuICogQHRocm93cyB7RXJyb3J9IGVycm9yIGlmIHZhbHVlIGlzIG5vdCB0aGUgZXhwZWN0ZWQgdHlwZS5cbiAqL1xuZnVuY3Rpb24gZmVhdHVyZU9mKGZlYXR1cmUsIHR5cGUsIG5hbWUpIHtcbiAgICBpZiAoIWZlYXR1cmUpIHRocm93IG5ldyBFcnJvcignTm8gZmVhdHVyZSBwYXNzZWQnKTtcbiAgICBpZiAoIW5hbWUpIHRocm93IG5ldyBFcnJvcignLmZlYXR1cmVPZigpIHJlcXVpcmVzIGEgbmFtZScpO1xuICAgIGlmICghZmVhdHVyZSB8fCBmZWF0dXJlLnR5cGUgIT09ICdGZWF0dXJlJyB8fCAhZmVhdHVyZS5nZW9tZXRyeSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaW5wdXQgdG8gJyArIG5hbWUgKyAnLCBGZWF0dXJlIHdpdGggZ2VvbWV0cnkgcmVxdWlyZWQnKTtcbiAgICB9XG4gICAgaWYgKCFmZWF0dXJlLmdlb21ldHJ5IHx8IGZlYXR1cmUuZ2VvbWV0cnkudHlwZSAhPT0gdHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaW5wdXQgdG8gJyArIG5hbWUgKyAnOiBtdXN0IGJlIGEgJyArIHR5cGUgKyAnLCBnaXZlbiAnICsgZmVhdHVyZS5nZW9tZXRyeS50eXBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogRW5mb3JjZSBleHBlY3RhdGlvbnMgYWJvdXQgdHlwZXMgb2Yge0BsaW5rIEZlYXR1cmVDb2xsZWN0aW9ufSBpbnB1dHMgZm9yIFR1cmYuXG4gKiBJbnRlcm5hbGx5IHRoaXMgdXNlcyB7QGxpbmsgZ2VvanNvblR5cGV9IHRvIGp1ZGdlIGdlb21ldHJ5IHR5cGVzLlxuICpcbiAqIEBuYW1lIGNvbGxlY3Rpb25PZlxuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbn0gZmVhdHVyZUNvbGxlY3Rpb24gYSBGZWF0dXJlQ29sbGVjdGlvbiBmb3Igd2hpY2ggZmVhdHVyZXMgd2lsbCBiZSBqdWRnZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIGV4cGVjdGVkIEdlb0pTT04gdHlwZVxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgbmFtZSBvZiBjYWxsaW5nIGZ1bmN0aW9uXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgdmFsdWUgaXMgbm90IHRoZSBleHBlY3RlZCB0eXBlLlxuICovXG5mdW5jdGlvbiBjb2xsZWN0aW9uT2YoZmVhdHVyZUNvbGxlY3Rpb24sIHR5cGUsIG5hbWUpIHtcbiAgICBpZiAoIWZlYXR1cmVDb2xsZWN0aW9uKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGZlYXR1cmVDb2xsZWN0aW9uIHBhc3NlZCcpO1xuICAgIGlmICghbmFtZSkgdGhyb3cgbmV3IEVycm9yKCcuY29sbGVjdGlvbk9mKCkgcmVxdWlyZXMgYSBuYW1lJyk7XG4gICAgaWYgKCFmZWF0dXJlQ29sbGVjdGlvbiB8fCBmZWF0dXJlQ29sbGVjdGlvbi50eXBlICE9PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCB0byAnICsgbmFtZSArICcsIEZlYXR1cmVDb2xsZWN0aW9uIHJlcXVpcmVkJyk7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmVhdHVyZUNvbGxlY3Rpb24uZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGZlYXR1cmUgPSBmZWF0dXJlQ29sbGVjdGlvbi5mZWF0dXJlc1tpXTtcbiAgICAgICAgaWYgKCFmZWF0dXJlIHx8IGZlYXR1cmUudHlwZSAhPT0gJ0ZlYXR1cmUnIHx8ICFmZWF0dXJlLmdlb21ldHJ5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaW5wdXQgdG8gJyArIG5hbWUgKyAnLCBGZWF0dXJlIHdpdGggZ2VvbWV0cnkgcmVxdWlyZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZlYXR1cmUuZ2VvbWV0cnkgfHwgZmVhdHVyZS5nZW9tZXRyeS50eXBlICE9PSB0eXBlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaW5wdXQgdG8gJyArIG5hbWUgKyAnOiBtdXN0IGJlIGEgJyArIHR5cGUgKyAnLCBnaXZlbiAnICsgZmVhdHVyZS5nZW9tZXRyeS50eXBlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBHZXQgR2VvbWV0cnkgZnJvbSBGZWF0dXJlIG9yIEdlb21ldHJ5IE9iamVjdFxuICpcbiAqIEBwYXJhbSB7RmVhdHVyZXxHZW9tZXRyeX0gZ2VvanNvbiBHZW9KU09OIEZlYXR1cmUgb3IgR2VvbWV0cnkgT2JqZWN0XG4gKiBAcmV0dXJucyB7R2VvbWV0cnl8bnVsbH0gR2VvSlNPTiBHZW9tZXRyeSBPYmplY3RcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBnZW9qc29uIGlzIG5vdCBhIEZlYXR1cmUgb3IgR2VvbWV0cnkgT2JqZWN0XG4gKiBAZXhhbXBsZVxuICogdmFyIHBvaW50ID0ge1xuICogICBcInR5cGVcIjogXCJGZWF0dXJlXCIsXG4gKiAgIFwicHJvcGVydGllc1wiOiB7fSxcbiAqICAgXCJnZW9tZXRyeVwiOiB7XG4gKiAgICAgXCJ0eXBlXCI6IFwiUG9pbnRcIixcbiAqICAgICBcImNvb3JkaW5hdGVzXCI6IFsxMTAsIDQwXVxuICogICB9XG4gKiB9XG4gKiB2YXIgZ2VvbSA9IHR1cmYuZ2V0R2VvbShwb2ludClcbiAqIC8vPXtcInR5cGVcIjogXCJQb2ludFwiLCBcImNvb3JkaW5hdGVzXCI6IFsxMTAsIDQwXX1cbiAqL1xuZnVuY3Rpb24gZ2V0R2VvbShnZW9qc29uKSB7XG4gICAgaWYgKCFnZW9qc29uKSB0aHJvdyBuZXcgRXJyb3IoJ2dlb2pzb24gaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoZ2VvanNvbi5nZW9tZXRyeSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gZ2VvanNvbi5nZW9tZXRyeTtcbiAgICBpZiAoZ2VvanNvbi5jb29yZGluYXRlcyB8fCBnZW9qc29uLmdlb21ldHJpZXMpIHJldHVybiBnZW9qc29uO1xuICAgIHRocm93IG5ldyBFcnJvcignZ2VvanNvbiBtdXN0IGJlIGEgdmFsaWQgRmVhdHVyZSBvciBHZW9tZXRyeSBPYmplY3QnKTtcbn1cblxuLyoqXG4gKiBHZXQgR2VvbWV0cnkgVHlwZSBmcm9tIEZlYXR1cmUgb3IgR2VvbWV0cnkgT2JqZWN0XG4gKlxuICogQHRocm93cyB7RXJyb3J9ICoqREVQUkVDQVRFRCoqIGluIHY1LjAuMCBpbiBmYXZvciBvZiBnZXRUeXBlXG4gKi9cbmZ1bmN0aW9uIGdldEdlb21UeXBlKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignaW52YXJpYW50LmdldEdlb21UeXBlIGhhcyBiZWVuIGRlcHJlY2F0ZWQgaW4gdjUuMCBpbiBmYXZvciBvZiBpbnZhcmlhbnQuZ2V0VHlwZScpO1xufVxuXG4vKipcbiAqIEdldCBHZW9KU09OIG9iamVjdCdzIHR5cGUsIEdlb21ldHJ5IHR5cGUgaXMgcHJpb3JpdGl6ZS5cbiAqXG4gKiBAcGFyYW0ge0dlb0pTT059IGdlb2pzb24gR2VvSlNPTiBvYmplY3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbmFtZV0gbmFtZSBvZiB0aGUgdmFyaWFibGUgdG8gZGlzcGxheSBpbiBlcnJvciBtZXNzYWdlXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBHZW9KU09OIHR5cGVcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9pbnQgPSB7XG4gKiAgIFwidHlwZVwiOiBcIkZlYXR1cmVcIixcbiAqICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICogICBcImdlb21ldHJ5XCI6IHtcbiAqICAgICBcInR5cGVcIjogXCJQb2ludFwiLFxuICogICAgIFwiY29vcmRpbmF0ZXNcIjogWzExMCwgNDBdXG4gKiAgIH1cbiAqIH1cbiAqIHZhciBnZW9tID0gdHVyZi5nZXRUeXBlKHBvaW50KVxuICogLy89XCJQb2ludFwiXG4gKi9cbmZ1bmN0aW9uIGdldFR5cGUoZ2VvanNvbiwgbmFtZSkge1xuICAgIGlmICghZ2VvanNvbikgdGhyb3cgbmV3IEVycm9yKChuYW1lIHx8ICdnZW9qc29uJykgKyAnIGlzIHJlcXVpcmVkJyk7XG4gICAgLy8gR2VvSlNPTiBGZWF0dXJlICYgR2VvbWV0cnlDb2xsZWN0aW9uXG4gICAgaWYgKGdlb2pzb24uZ2VvbWV0cnkgJiYgZ2VvanNvbi5nZW9tZXRyeS50eXBlKSByZXR1cm4gZ2VvanNvbi5nZW9tZXRyeS50eXBlO1xuICAgIC8vIEdlb0pTT04gR2VvbWV0cnkgJiBGZWF0dXJlQ29sbGVjdGlvblxuICAgIGlmIChnZW9qc29uLnR5cGUpIHJldHVybiBnZW9qc29uLnR5cGU7XG4gICAgdGhyb3cgbmV3IEVycm9yKChuYW1lIHx8ICdnZW9qc29uJykgKyAnIGlzIGludmFsaWQnKTtcbn1cblxuXG4vKioqLyB9KSxcbi8qIDM0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IGZlYXR1cmUgKi9cbi8qIHVudXNlZCBoYXJtb255IGV4cG9ydCBnZW9tZXRyeSAqL1xuLyogaGFybW9ueSBleHBvcnQgKGltbXV0YWJsZSkgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImJcIl0gPSBwb2ludDtcbi8qIHVudXNlZCBoYXJtb255IGV4cG9ydCBwb2x5Z29uICovXG4vKiB1bnVzZWQgaGFybW9ueSBleHBvcnQgbGluZVN0cmluZyAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IGZlYXR1cmVDb2xsZWN0aW9uICovXG4vKiB1bnVzZWQgaGFybW9ueSBleHBvcnQgbXVsdGlMaW5lU3RyaW5nICovXG4vKiB1bnVzZWQgaGFybW9ueSBleHBvcnQgbXVsdGlQb2ludCAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IG11bHRpUG9seWdvbiAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IGdlb21ldHJ5Q29sbGVjdGlvbiAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IHJvdW5kICovXG4vKiB1bnVzZWQgaGFybW9ueSBleHBvcnQgcmFkaWFuc1RvRGlzdGFuY2UgKi9cbi8qIGhhcm1vbnkgZXhwb3J0IChpbW11dGFibGUpICovIF9fd2VicGFja19leHBvcnRzX19bXCJhXCJdID0gZGlzdGFuY2VUb1JhZGlhbnM7XG4vKiB1bnVzZWQgaGFybW9ueSBleHBvcnQgZGlzdGFuY2VUb0RlZ3JlZXMgKi9cbi8qIHVudXNlZCBoYXJtb255IGV4cG9ydCBiZWFyaW5nVG9BbmdsZSAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IHJhZGlhbnMyZGVncmVlcyAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IGRlZ3JlZXMycmFkaWFucyAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IGNvbnZlcnREaXN0YW5jZSAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IGNvbnZlcnRBcmVhICovXG4vKiB1bnVzZWQgaGFybW9ueSBleHBvcnQgaXNOdW1iZXIgKi9cbi8qIHVudXNlZCBoYXJtb255IGV4cG9ydCBpc09iamVjdCAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IGVhcnRoUmFkaXVzICovXG4vKipcbiAqIFdyYXBzIGEgR2VvSlNPTiB7QGxpbmsgR2VvbWV0cnl9IGluIGEgR2VvSlNPTiB7QGxpbmsgRmVhdHVyZX0uXG4gKlxuICogQG5hbWUgZmVhdHVyZVxuICogQHBhcmFtIHtHZW9tZXRyeX0gZ2VvbWV0cnkgaW5wdXQgZ2VvbWV0cnlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlfSBhIEdlb0pTT04gRmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBnZW9tZXRyeSA9IHtcbiAqICAgXCJ0eXBlXCI6IFwiUG9pbnRcIixcbiAqICAgXCJjb29yZGluYXRlc1wiOiBbMTEwLCA1MF1cbiAqIH07XG4gKlxuICogdmFyIGZlYXR1cmUgPSB0dXJmLmZlYXR1cmUoZ2VvbWV0cnkpO1xuICpcbiAqIC8vPWZlYXR1cmVcbiAqL1xuZnVuY3Rpb24gZmVhdHVyZShnZW9tZXRyeSwgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoZ2VvbWV0cnkgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdnZW9tZXRyeSBpcyByZXF1aXJlZCcpO1xuICAgIGlmIChwcm9wZXJ0aWVzICYmIHByb3BlcnRpZXMuY29uc3RydWN0b3IgIT09IE9iamVjdCkgdGhyb3cgbmV3IEVycm9yKCdwcm9wZXJ0aWVzIG11c3QgYmUgYW4gT2JqZWN0Jyk7XG4gICAgaWYgKGJib3ggJiYgYmJveC5sZW5ndGggIT09IDQpIHRocm93IG5ldyBFcnJvcignYmJveCBtdXN0IGJlIGFuIEFycmF5IG9mIDQgbnVtYmVycycpO1xuICAgIGlmIChpZCAmJiBbJ3N0cmluZycsICdudW1iZXInXS5pbmRleE9mKHR5cGVvZiBpZCkgPT09IC0xKSB0aHJvdyBuZXcgRXJyb3IoJ2lkIG11c3QgYmUgYSBudW1iZXIgb3IgYSBzdHJpbmcnKTtcblxuICAgIHZhciBmZWF0ID0ge3R5cGU6ICdGZWF0dXJlJ307XG4gICAgaWYgKGlkKSBmZWF0LmlkID0gaWQ7XG4gICAgaWYgKGJib3gpIGZlYXQuYmJveCA9IGJib3g7XG4gICAgZmVhdC5wcm9wZXJ0aWVzID0gcHJvcGVydGllcyB8fCB7fTtcbiAgICBmZWF0Lmdlb21ldHJ5ID0gZ2VvbWV0cnk7XG4gICAgcmV0dXJuIGZlYXQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIEdlb0pTT04ge0BsaW5rIEdlb21ldHJ5fSBmcm9tIGEgR2VvbWV0cnkgc3RyaW5nIHR5cGUgJiBjb29yZGluYXRlcy5cbiAqIEZvciBHZW9tZXRyeUNvbGxlY3Rpb24gdHlwZSB1c2UgYGhlbHBlcnMuZ2VvbWV0cnlDb2xsZWN0aW9uYFxuICpcbiAqIEBuYW1lIGdlb21ldHJ5XG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBHZW9tZXRyeSBUeXBlXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcmV0dXJucyB7R2VvbWV0cnl9IGEgR2VvSlNPTiBHZW9tZXRyeVxuICogQGV4YW1wbGVcbiAqIHZhciB0eXBlID0gJ1BvaW50JztcbiAqIHZhciBjb29yZGluYXRlcyA9IFsxMTAsIDUwXTtcbiAqXG4gKiB2YXIgZ2VvbWV0cnkgPSB0dXJmLmdlb21ldHJ5KHR5cGUsIGNvb3JkaW5hdGVzKTtcbiAqXG4gKiAvLz1nZW9tZXRyeVxuICovXG5mdW5jdGlvbiBnZW9tZXRyeSh0eXBlLCBjb29yZGluYXRlcywgYmJveCkge1xuICAgIC8vIFZhbGlkYXRpb25cbiAgICBpZiAoIXR5cGUpIHRocm93IG5ldyBFcnJvcigndHlwZSBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignY29vcmRpbmF0ZXMgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29vcmRpbmF0ZXMpKSB0aHJvdyBuZXcgRXJyb3IoJ2Nvb3JkaW5hdGVzIG11c3QgYmUgYW4gQXJyYXknKTtcbiAgICBpZiAoYmJveCAmJiBiYm94Lmxlbmd0aCAhPT0gNCkgdGhyb3cgbmV3IEVycm9yKCdiYm94IG11c3QgYmUgYW4gQXJyYXkgb2YgNCBudW1iZXJzJyk7XG5cbiAgICB2YXIgZ2VvbTtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdQb2ludCc6IGdlb20gPSBwb2ludChjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGNhc2UgJ0xpbmVTdHJpbmcnOiBnZW9tID0gbGluZVN0cmluZyhjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGNhc2UgJ1BvbHlnb24nOiBnZW9tID0gcG9seWdvbihjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGNhc2UgJ011bHRpUG9pbnQnOiBnZW9tID0gbXVsdGlQb2ludChjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGNhc2UgJ011bHRpTGluZVN0cmluZyc6IGdlb20gPSBtdWx0aUxpbmVTdHJpbmcoY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBjYXNlICdNdWx0aVBvbHlnb24nOiBnZW9tID0gbXVsdGlQb2x5Z29uKGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKHR5cGUgKyAnIGlzIGludmFsaWQnKTtcbiAgICB9XG4gICAgaWYgKGJib3gpIGdlb20uYmJveCA9IGJib3g7XG4gICAgcmV0dXJuIGdlb207XG59XG5cbi8qKlxuICogVGFrZXMgY29vcmRpbmF0ZXMgYW5kIHByb3BlcnRpZXMgKG9wdGlvbmFsKSBhbmQgcmV0dXJucyBhIG5ldyB7QGxpbmsgUG9pbnR9IGZlYXR1cmUuXG4gKlxuICogQG5hbWUgcG9pbnRcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXMgbG9uZ2l0dWRlLCBsYXRpdHVkZSBwb3NpdGlvbiAoZWFjaCBpbiBkZWNpbWFsIGRlZ3JlZXMpXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxQb2ludD59IGEgUG9pbnQgZmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBwb2ludCA9IHR1cmYucG9pbnQoWy03NS4zNDMsIDM5Ljk4NF0pO1xuICpcbiAqIC8vPXBvaW50XG4gKi9cbmZ1bmN0aW9uIHBvaW50KGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgYmUgYW4gYXJyYXknKTtcbiAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoIDwgMikgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGJlIGF0IGxlYXN0IDIgbnVtYmVycyBsb25nJyk7XG4gICAgaWYgKCFpc051bWJlcihjb29yZGluYXRlc1swXSkgfHwgIWlzTnVtYmVyKGNvb3JkaW5hdGVzWzFdKSkgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGNvbnRhaW4gbnVtYmVycycpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8qKlxuICogVGFrZXMgYW4gYXJyYXkgb2YgTGluZWFyUmluZ3MgYW5kIG9wdGlvbmFsbHkgYW4ge0BsaW5rIE9iamVjdH0gd2l0aCBwcm9wZXJ0aWVzIGFuZCByZXR1cm5zIGEge0BsaW5rIFBvbHlnb259IGZlYXR1cmUuXG4gKlxuICogQG5hbWUgcG9seWdvblxuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxudW1iZXI+Pj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIExpbmVhclJpbmdzXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxQb2x5Z29uPn0gYSBQb2x5Z29uIGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSB0aHJvdyBhbiBlcnJvciBpZiBhIExpbmVhclJpbmcgb2YgdGhlIHBvbHlnb24gaGFzIHRvbyBmZXcgcG9zaXRpb25zXG4gKiBvciBpZiBhIExpbmVhclJpbmcgb2YgdGhlIFBvbHlnb24gZG9lcyBub3QgaGF2ZSBtYXRjaGluZyBQb3NpdGlvbnMgYXQgdGhlIGJlZ2lubmluZyAmIGVuZC5cbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9seWdvbiA9IHR1cmYucG9seWdvbihbW1xuICogICBbLTIuMjc1NTQzLCA1My40NjQ1NDddLFxuICogICBbLTIuMjc1NTQzLCA1My40ODkyNzFdLFxuICogICBbLTIuMjE1MTE4LCA1My40ODkyNzFdLFxuICogICBbLTIuMjE1MTE4LCA1My40NjQ1NDddLFxuICogICBbLTIuMjc1NTQzLCA1My40NjQ1NDddXG4gKiBdXSwgeyBuYW1lOiAncG9seTEnLCBwb3B1bGF0aW9uOiA0MDB9KTtcbiAqXG4gKiAvLz1wb2x5Z29uXG4gKi9cbmZ1bmN0aW9uIHBvbHlnb24oY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29vcmRpbmF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHJpbmcgPSBjb29yZGluYXRlc1tpXTtcbiAgICAgICAgaWYgKHJpbmcubGVuZ3RoIDwgNCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFYWNoIExpbmVhclJpbmcgb2YgYSBQb2x5Z29uIG11c3QgaGF2ZSA0IG9yIG1vcmUgUG9zaXRpb25zLicpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmluZ1tyaW5nLmxlbmd0aCAtIDFdLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBmaXJzdCBwb2ludCBvZiBQb2x5Z29uIGNvbnRhaW5zIHR3byBudW1iZXJzXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCAmJiBqID09PSAwICYmICFpc051bWJlcihyaW5nWzBdWzBdKSB8fCAhaXNOdW1iZXIocmluZ1swXVsxXSkpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBjb250YWluIG51bWJlcnMnKTtcbiAgICAgICAgICAgIGlmIChyaW5nW3JpbmcubGVuZ3RoIC0gMV1bal0gIT09IHJpbmdbMF1bal0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpcnN0IGFuZCBsYXN0IFBvc2l0aW9uIGFyZSBub3QgZXF1aXZhbGVudC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ1BvbHlnb24nLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBMaW5lU3RyaW5nfSBiYXNlZCBvbiBhXG4gKiBjb29yZGluYXRlIGFycmF5LiBQcm9wZXJ0aWVzIGNhbiBiZSBhZGRlZCBvcHRpb25hbGx5LlxuICpcbiAqIEBuYW1lIGxpbmVTdHJpbmdcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIFBvc2l0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8TGluZVN0cmluZz59IGEgTGluZVN0cmluZyBmZWF0dXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgbm8gY29vcmRpbmF0ZXMgYXJlIHBhc3NlZFxuICogQGV4YW1wbGVcbiAqIHZhciBsaW5lc3RyaW5nMSA9IHR1cmYubGluZVN0cmluZyhbXG4gKiAgIFstMjEuOTY0NDE2LCA2NC4xNDgyMDNdLFxuICogICBbLTIxLjk1NjE3NiwgNjQuMTQxMzE2XSxcbiAqICAgWy0yMS45MzkwMSwgNjQuMTM1OTI0XSxcbiAqICAgWy0yMS45MjczMzcsIDY0LjEzNjY3M11cbiAqIF0pO1xuICogdmFyIGxpbmVzdHJpbmcyID0gdHVyZi5saW5lU3RyaW5nKFtcbiAqICAgWy0yMS45MjkwNTQsIDY0LjEyNzk4NV0sXG4gKiAgIFstMjEuOTEyOTE4LCA2NC4xMzQ3MjZdLFxuICogICBbLTIxLjkxNjAwNywgNjQuMTQxMDE2XSxcbiAqICAgWy0yMS45MzAwODQsIDY0LjE0NDQ2XVxuICogXSwge25hbWU6ICdsaW5lIDEnLCBkaXN0YW5jZTogMTQ1fSk7XG4gKlxuICogLy89bGluZXN0cmluZzFcbiAqXG4gKiAvLz1saW5lc3RyaW5nMlxuICovXG5mdW5jdGlvbiBsaW5lU3RyaW5nKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA8IDIpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBiZSBhbiBhcnJheSBvZiB0d28gb3IgbW9yZSBwb3NpdGlvbnMnKTtcbiAgICAvLyBDaGVjayBpZiBmaXJzdCBwb2ludCBvZiBMaW5lU3RyaW5nIGNvbnRhaW5zIHR3byBudW1iZXJzXG4gICAgaWYgKCFpc051bWJlcihjb29yZGluYXRlc1swXVsxXSkgfHwgIWlzTnVtYmVyKGNvb3JkaW5hdGVzWzBdWzFdKSkgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGNvbnRhaW4gbnVtYmVycycpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnTGluZVN0cmluZycsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBUYWtlcyBvbmUgb3IgbW9yZSB7QGxpbmsgRmVhdHVyZXxGZWF0dXJlc30gYW5kIGNyZWF0ZXMgYSB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259LlxuICpcbiAqIEBuYW1lIGZlYXR1cmVDb2xsZWN0aW9uXG4gKiBAcGFyYW0ge0ZlYXR1cmVbXX0gZmVhdHVyZXMgaW5wdXQgZmVhdHVyZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZUNvbGxlY3Rpb259IGEgRmVhdHVyZUNvbGxlY3Rpb24gb2YgaW5wdXQgZmVhdHVyZXNcbiAqIEBleGFtcGxlXG4gKiB2YXIgZmVhdHVyZXMgPSBbXG4gKiAgdHVyZi5wb2ludChbLTc1LjM0MywgMzkuOTg0XSwge25hbWU6ICdMb2NhdGlvbiBBJ30pLFxuICogIHR1cmYucG9pbnQoWy03NS44MzMsIDM5LjI4NF0sIHtuYW1lOiAnTG9jYXRpb24gQid9KSxcbiAqICB0dXJmLnBvaW50KFstNzUuNTM0LCAzOS4xMjNdLCB7bmFtZTogJ0xvY2F0aW9uIEMnfSlcbiAqIF07XG4gKlxuICogdmFyIGNvbGxlY3Rpb24gPSB0dXJmLmZlYXR1cmVDb2xsZWN0aW9uKGZlYXR1cmVzKTtcbiAqXG4gKiAvLz1jb2xsZWN0aW9uXG4gKi9cbmZ1bmN0aW9uIGZlYXR1cmVDb2xsZWN0aW9uKGZlYXR1cmVzLCBiYm94LCBpZCkge1xuICAgIGlmICghZmVhdHVyZXMpIHRocm93IG5ldyBFcnJvcignTm8gZmVhdHVyZXMgcGFzc2VkJyk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGZlYXR1cmVzKSkgdGhyb3cgbmV3IEVycm9yKCdmZWF0dXJlcyBtdXN0IGJlIGFuIEFycmF5Jyk7XG4gICAgaWYgKGJib3ggJiYgYmJveC5sZW5ndGggIT09IDQpIHRocm93IG5ldyBFcnJvcignYmJveCBtdXN0IGJlIGFuIEFycmF5IG9mIDQgbnVtYmVycycpO1xuICAgIGlmIChpZCAmJiBbJ3N0cmluZycsICdudW1iZXInXS5pbmRleE9mKHR5cGVvZiBpZCkgPT09IC0xKSB0aHJvdyBuZXcgRXJyb3IoJ2lkIG11c3QgYmUgYSBudW1iZXIgb3IgYSBzdHJpbmcnKTtcblxuICAgIHZhciBmYyA9IHt0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nfTtcbiAgICBpZiAoaWQpIGZjLmlkID0gaWQ7XG4gICAgaWYgKGJib3gpIGZjLmJib3ggPSBiYm94O1xuICAgIGZjLmZlYXR1cmVzID0gZmVhdHVyZXM7XG4gICAgcmV0dXJuIGZjO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgRmVhdHVyZTxNdWx0aUxpbmVTdHJpbmc+fSBiYXNlZCBvbiBhXG4gKiBjb29yZGluYXRlIGFycmF5LiBQcm9wZXJ0aWVzIGNhbiBiZSBhZGRlZCBvcHRpb25hbGx5LlxuICpcbiAqIEBuYW1lIG11bHRpTGluZVN0cmluZ1xuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxudW1iZXI+Pj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIExpbmVTdHJpbmdzXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxNdWx0aUxpbmVTdHJpbmc+fSBhIE11bHRpTGluZVN0cmluZyBmZWF0dXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgbm8gY29vcmRpbmF0ZXMgYXJlIHBhc3NlZFxuICogQGV4YW1wbGVcbiAqIHZhciBtdWx0aUxpbmUgPSB0dXJmLm11bHRpTGluZVN0cmluZyhbW1swLDBdLFsxMCwxMF1dXSk7XG4gKlxuICogLy89bXVsdGlMaW5lXG4gKi9cbmZ1bmN0aW9uIG11bHRpTGluZVN0cmluZyhjb29yZGluYXRlcywgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvb3JkaW5hdGVzIHBhc3NlZCcpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnTXVsdGlMaW5lU3RyaW5nJyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgRmVhdHVyZTxNdWx0aVBvaW50Pn0gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBtdWx0aVBvaW50XG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBQb3NpdGlvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPE11bHRpUG9pbnQ+fSBhIE11bHRpUG9pbnQgZmVhdHVyZVxuICogQHRocm93cyB7RXJyb3J9IGlmIG5vIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWRcbiAqIEBleGFtcGxlXG4gKiB2YXIgbXVsdGlQdCA9IHR1cmYubXVsdGlQb2ludChbWzAsMF0sWzEwLDEwXV0pO1xuICpcbiAqIC8vPW11bHRpUHRcbiAqL1xuZnVuY3Rpb24gbXVsdGlQb2ludChjb29yZGluYXRlcywgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvb3JkaW5hdGVzIHBhc3NlZCcpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnTXVsdGlQb2ludCcsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8TXVsdGlQb2x5Z29uPn0gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBtdWx0aVBvbHlnb25cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8QXJyYXk8bnVtYmVyPj4+Pn0gY29vcmRpbmF0ZXMgYW4gYXJyYXkgb2YgUG9seWdvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPE11bHRpUG9seWdvbj59IGEgbXVsdGlwb2x5Z29uIGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBubyBjb29yZGluYXRlcyBhcmUgcGFzc2VkXG4gKiBAZXhhbXBsZVxuICogdmFyIG11bHRpUG9seSA9IHR1cmYubXVsdGlQb2x5Z29uKFtbW1swLDBdLFswLDEwXSxbMTAsMTBdLFsxMCwwXSxbMCwwXV1dXSk7XG4gKlxuICogLy89bXVsdGlQb2x5XG4gKlxuICovXG5mdW5jdGlvbiBtdWx0aVBvbHlnb24oY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ011bHRpUG9seWdvbicsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8R2VvbWV0cnlDb2xsZWN0aW9uPn0gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBnZW9tZXRyeUNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7QXJyYXk8R2VvbWV0cnk+fSBnZW9tZXRyaWVzIGFuIGFycmF5IG9mIEdlb0pTT04gR2VvbWV0cmllc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8R2VvbWV0cnlDb2xsZWN0aW9uPn0gYSBHZW9KU09OIEdlb21ldHJ5Q29sbGVjdGlvbiBGZWF0dXJlXG4gKiBAZXhhbXBsZVxuICogdmFyIHB0ID0ge1xuICogICAgIFwidHlwZVwiOiBcIlBvaW50XCIsXG4gKiAgICAgICBcImNvb3JkaW5hdGVzXCI6IFsxMDAsIDBdXG4gKiAgICAgfTtcbiAqIHZhciBsaW5lID0ge1xuICogICAgIFwidHlwZVwiOiBcIkxpbmVTdHJpbmdcIixcbiAqICAgICBcImNvb3JkaW5hdGVzXCI6IFsgWzEwMSwgMF0sIFsxMDIsIDFdIF1cbiAqICAgfTtcbiAqIHZhciBjb2xsZWN0aW9uID0gdHVyZi5nZW9tZXRyeUNvbGxlY3Rpb24oW3B0LCBsaW5lXSk7XG4gKlxuICogLy89Y29sbGVjdGlvblxuICovXG5mdW5jdGlvbiBnZW9tZXRyeUNvbGxlY3Rpb24oZ2VvbWV0cmllcywgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWdlb21ldHJpZXMpIHRocm93IG5ldyBFcnJvcignZ2VvbWV0cmllcyBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShnZW9tZXRyaWVzKSkgdGhyb3cgbmV3IEVycm9yKCdnZW9tZXRyaWVzIG11c3QgYmUgYW4gQXJyYXknKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ0dlb21ldHJ5Q29sbGVjdGlvbicsXG4gICAgICAgIGdlb21ldHJpZXM6IGdlb21ldHJpZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dyZWF0LWNpcmNsZV9kaXN0YW5jZSNSYWRpdXNfZm9yX3NwaGVyaWNhbF9FYXJ0aFxudmFyIGZhY3RvcnMgPSB7XG4gICAgbWlsZXM6IDM5NjAsXG4gICAgbmF1dGljYWxtaWxlczogMzQ0MS4xNDUsXG4gICAgZGVncmVlczogNTcuMjk1Nzc5NSxcbiAgICByYWRpYW5zOiAxLFxuICAgIGluY2hlczogMjUwOTA1NjAwLFxuICAgIHlhcmRzOiA2OTY5NjAwLFxuICAgIG1ldGVyczogNjM3MzAwMCxcbiAgICBtZXRyZXM6IDYzNzMwMDAsXG4gICAgY2VudGltZXRlcnM6IDYuMzczZSs4LFxuICAgIGNlbnRpbWV0cmVzOiA2LjM3M2UrOCxcbiAgICBraWxvbWV0ZXJzOiA2MzczLFxuICAgIGtpbG9tZXRyZXM6IDYzNzMsXG4gICAgZmVldDogMjA5MDg3OTIuNjVcbn07XG5cbnZhciBhcmVhRmFjdG9ycyA9IHtcbiAgICBraWxvbWV0ZXJzOiAwLjAwMDAwMSxcbiAgICBraWxvbWV0cmVzOiAwLjAwMDAwMSxcbiAgICBtZXRlcnM6IDEsXG4gICAgbWV0cmVzOiAxLFxuICAgIGNlbnRpbWV0cmVzOiAxMDAwMCxcbiAgICBtaWxsaW1ldGVyOiAxMDAwMDAwLFxuICAgIGFjcmVzOiAwLjAwMDI0NzEwNSxcbiAgICBtaWxlczogMy44NmUtNyxcbiAgICB5YXJkczogMS4xOTU5OTAwNDYsXG4gICAgZmVldDogMTAuNzYzOTEwNDE3LFxuICAgIGluY2hlczogMTU1MC4wMDMxMDAwMDZcbn07XG5cbi8qKlxuICogUm91bmQgbnVtYmVyIHRvIHByZWNpc2lvblxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBudW0gTnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gW3ByZWNpc2lvbj0wXSBQcmVjaXNpb25cbiAqIEByZXR1cm5zIHtudW1iZXJ9IHJvdW5kZWQgbnVtYmVyXG4gKiBAZXhhbXBsZVxuICogdHVyZi5yb3VuZCgxMjAuNDMyMSlcbiAqIC8vPTEyMFxuICpcbiAqIHR1cmYucm91bmQoMTIwLjQzMjEsIDIpXG4gKiAvLz0xMjAuNDNcbiAqL1xuZnVuY3Rpb24gcm91bmQobnVtLCBwcmVjaXNpb24pIHtcbiAgICBpZiAobnVtID09PSB1bmRlZmluZWQgfHwgbnVtID09PSBudWxsIHx8IGlzTmFOKG51bSkpIHRocm93IG5ldyBFcnJvcignbnVtIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKHByZWNpc2lvbiAmJiAhKHByZWNpc2lvbiA+PSAwKSkgdGhyb3cgbmV3IEVycm9yKCdwcmVjaXNpb24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICAgIHZhciBtdWx0aXBsaWVyID0gTWF0aC5wb3coMTAsIHByZWNpc2lvbiB8fCAwKTtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChudW0gKiBtdWx0aXBsaWVyKSAvIG11bHRpcGxpZXI7XG59XG5cbi8qKlxuICogQ29udmVydCBhIGRpc3RhbmNlIG1lYXN1cmVtZW50IChhc3N1bWluZyBhIHNwaGVyaWNhbCBFYXJ0aCkgZnJvbSByYWRpYW5zIHRvIGEgbW9yZSBmcmllbmRseSB1bml0LlxuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywga2lsb21ldGVycywgY2VudGltZXRlcnMsIGZlZXRcbiAqXG4gKiBAbmFtZSByYWRpYW5zVG9EaXN0YW5jZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGlhbnMgaW4gcmFkaWFucyBhY3Jvc3MgdGhlIHNwaGVyZVxuICogQHBhcmFtIHtzdHJpbmd9IFt1bml0cz1cImtpbG9tZXRlcnNcIl0gY2FuIGJlIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzIGluY2hlcywgeWFyZHMsIG1ldHJlcywgbWV0ZXJzLCBraWxvbWV0cmVzLCBraWxvbWV0ZXJzLlxuICogQHJldHVybnMge251bWJlcn0gZGlzdGFuY2VcbiAqL1xuZnVuY3Rpb24gcmFkaWFuc1RvRGlzdGFuY2UocmFkaWFucywgdW5pdHMpIHtcbiAgICBpZiAocmFkaWFucyA9PT0gdW5kZWZpbmVkIHx8IHJhZGlhbnMgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcigncmFkaWFucyBpcyByZXF1aXJlZCcpO1xuXG4gICAgaWYgKHVuaXRzICYmIHR5cGVvZiB1bml0cyAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcigndW5pdHMgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgIHZhciBmYWN0b3IgPSBmYWN0b3JzW3VuaXRzIHx8ICdraWxvbWV0ZXJzJ107XG4gICAgaWYgKCFmYWN0b3IpIHRocm93IG5ldyBFcnJvcih1bml0cyArICcgdW5pdHMgaXMgaW52YWxpZCcpO1xuICAgIHJldHVybiByYWRpYW5zICogZmFjdG9yO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSBkaXN0YW5jZSBtZWFzdXJlbWVudCAoYXNzdW1pbmcgYSBzcGhlcmljYWwgRWFydGgpIGZyb20gYSByZWFsLXdvcmxkIHVuaXQgaW50byByYWRpYW5zXG4gKiBWYWxpZCB1bml0czogbWlsZXMsIG5hdXRpY2FsbWlsZXMsIGluY2hlcywgeWFyZHMsIG1ldGVycywgbWV0cmVzLCBraWxvbWV0ZXJzLCBjZW50aW1ldGVycywgZmVldFxuICpcbiAqIEBuYW1lIGRpc3RhbmNlVG9SYWRpYW5zXG4gKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2UgaW4gcmVhbCB1bml0c1xuICogQHBhcmFtIHtzdHJpbmd9IFt1bml0cz1raWxvbWV0ZXJzXSBjYW4gYmUgZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnMgaW5jaGVzLCB5YXJkcywgbWV0cmVzLCBtZXRlcnMsIGtpbG9tZXRyZXMsIGtpbG9tZXRlcnMuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSByYWRpYW5zXG4gKi9cbmZ1bmN0aW9uIGRpc3RhbmNlVG9SYWRpYW5zKGRpc3RhbmNlLCB1bml0cykge1xuICAgIGlmIChkaXN0YW5jZSA9PT0gdW5kZWZpbmVkIHx8IGRpc3RhbmNlID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoJ2Rpc3RhbmNlIGlzIHJlcXVpcmVkJyk7XG5cbiAgICBpZiAodW5pdHMgJiYgdHlwZW9mIHVuaXRzICE9PSAnc3RyaW5nJykgdGhyb3cgbmV3IEVycm9yKCd1bml0cyBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgdmFyIGZhY3RvciA9IGZhY3RvcnNbdW5pdHMgfHwgJ2tpbG9tZXRlcnMnXTtcbiAgICBpZiAoIWZhY3RvcikgdGhyb3cgbmV3IEVycm9yKHVuaXRzICsgJyB1bml0cyBpcyBpbnZhbGlkJyk7XG4gICAgcmV0dXJuIGRpc3RhbmNlIC8gZmFjdG9yO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSBkaXN0YW5jZSBtZWFzdXJlbWVudCAoYXNzdW1pbmcgYSBzcGhlcmljYWwgRWFydGgpIGZyb20gYSByZWFsLXdvcmxkIHVuaXQgaW50byBkZWdyZWVzXG4gKiBWYWxpZCB1bml0czogbWlsZXMsIG5hdXRpY2FsbWlsZXMsIGluY2hlcywgeWFyZHMsIG1ldGVycywgbWV0cmVzLCBjZW50aW1ldGVycywga2lsb21ldHJlcywgZmVldFxuICpcbiAqIEBuYW1lIGRpc3RhbmNlVG9EZWdyZWVzXG4gKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2UgaW4gcmVhbCB1bml0c1xuICogQHBhcmFtIHtzdHJpbmd9IFt1bml0cz1raWxvbWV0ZXJzXSBjYW4gYmUgZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnMgaW5jaGVzLCB5YXJkcywgbWV0cmVzLCBtZXRlcnMsIGtpbG9tZXRyZXMsIGtpbG9tZXRlcnMuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBkZWdyZWVzXG4gKi9cbmZ1bmN0aW9uIGRpc3RhbmNlVG9EZWdyZWVzKGRpc3RhbmNlLCB1bml0cykge1xuICAgIHJldHVybiByYWRpYW5zMmRlZ3JlZXMoZGlzdGFuY2VUb1JhZGlhbnMoZGlzdGFuY2UsIHVuaXRzKSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYW55IGJlYXJpbmcgYW5nbGUgZnJvbSB0aGUgbm9ydGggbGluZSBkaXJlY3Rpb24gKHBvc2l0aXZlIGNsb2Nrd2lzZSlcbiAqIGFuZCByZXR1cm5zIGFuIGFuZ2xlIGJldHdlZW4gMC0zNjAgZGVncmVlcyAocG9zaXRpdmUgY2xvY2t3aXNlKSwgMCBiZWluZyB0aGUgbm9ydGggbGluZVxuICpcbiAqIEBuYW1lIGJlYXJpbmdUb0FuZ2xlXG4gKiBAcGFyYW0ge251bWJlcn0gYmVhcmluZyBhbmdsZSwgYmV0d2VlbiAtMTgwIGFuZCArMTgwIGRlZ3JlZXNcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGFuZ2xlIGJldHdlZW4gMCBhbmQgMzYwIGRlZ3JlZXNcbiAqL1xuZnVuY3Rpb24gYmVhcmluZ1RvQW5nbGUoYmVhcmluZykge1xuICAgIGlmIChiZWFyaW5nID09PSBudWxsIHx8IGJlYXJpbmcgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdiZWFyaW5nIGlzIHJlcXVpcmVkJyk7XG5cbiAgICB2YXIgYW5nbGUgPSBiZWFyaW5nICUgMzYwO1xuICAgIGlmIChhbmdsZSA8IDApIGFuZ2xlICs9IDM2MDtcbiAgICByZXR1cm4gYW5nbGU7XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gYW5nbGUgaW4gcmFkaWFucyB0byBkZWdyZWVzXG4gKlxuICogQG5hbWUgcmFkaWFuczJkZWdyZWVzXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaWFucyBhbmdsZSBpbiByYWRpYW5zXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBkZWdyZWVzIGJldHdlZW4gMCBhbmQgMzYwIGRlZ3JlZXNcbiAqL1xuZnVuY3Rpb24gcmFkaWFuczJkZWdyZWVzKHJhZGlhbnMpIHtcbiAgICBpZiAocmFkaWFucyA9PT0gbnVsbCB8fCByYWRpYW5zID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcigncmFkaWFucyBpcyByZXF1aXJlZCcpO1xuXG4gICAgdmFyIGRlZ3JlZXMgPSByYWRpYW5zICUgKDIgKiBNYXRoLlBJKTtcbiAgICByZXR1cm4gZGVncmVlcyAqIDE4MCAvIE1hdGguUEk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gYW5nbGUgaW4gZGVncmVlcyB0byByYWRpYW5zXG4gKlxuICogQG5hbWUgZGVncmVlczJyYWRpYW5zXG4gKiBAcGFyYW0ge251bWJlcn0gZGVncmVlcyBhbmdsZSBiZXR3ZWVuIDAgYW5kIDM2MCBkZWdyZWVzXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBhbmdsZSBpbiByYWRpYW5zXG4gKi9cbmZ1bmN0aW9uIGRlZ3JlZXMycmFkaWFucyhkZWdyZWVzKSB7XG4gICAgaWYgKGRlZ3JlZXMgPT09IG51bGwgfHwgZGVncmVlcyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ2RlZ3JlZXMgaXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciByYWRpYW5zID0gZGVncmVlcyAlIDM2MDtcbiAgICByZXR1cm4gcmFkaWFucyAqIE1hdGguUEkgLyAxODA7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBkaXN0YW5jZSB0byB0aGUgcmVxdWVzdGVkIHVuaXQuXG4gKiBWYWxpZCB1bml0czogbWlsZXMsIG5hdXRpY2FsbWlsZXMsIGluY2hlcywgeWFyZHMsIG1ldGVycywgbWV0cmVzLCBraWxvbWV0ZXJzLCBjZW50aW1ldGVycywgZmVldFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0YW5jZSB0byBiZSBjb252ZXJ0ZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcmlnaW5hbFVuaXQgb2YgdGhlIGRpc3RhbmNlXG4gKiBAcGFyYW0ge3N0cmluZ30gW2ZpbmFsVW5pdD1raWxvbWV0ZXJzXSByZXR1cm5lZCB1bml0XG4gKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgY29udmVydGVkIGRpc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnREaXN0YW5jZShkaXN0YW5jZSwgb3JpZ2luYWxVbml0LCBmaW5hbFVuaXQpIHtcbiAgICBpZiAoZGlzdGFuY2UgPT09IG51bGwgfHwgZGlzdGFuY2UgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdkaXN0YW5jZSBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghKGRpc3RhbmNlID49IDApKSB0aHJvdyBuZXcgRXJyb3IoJ2Rpc3RhbmNlIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcblxuICAgIHZhciBjb252ZXJ0ZWREaXN0YW5jZSA9IHJhZGlhbnNUb0Rpc3RhbmNlKGRpc3RhbmNlVG9SYWRpYW5zKGRpc3RhbmNlLCBvcmlnaW5hbFVuaXQpLCBmaW5hbFVuaXQgfHwgJ2tpbG9tZXRlcnMnKTtcbiAgICByZXR1cm4gY29udmVydGVkRGlzdGFuY2U7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBhcmVhIHRvIHRoZSByZXF1ZXN0ZWQgdW5pdC5cbiAqIFZhbGlkIHVuaXRzOiBraWxvbWV0ZXJzLCBraWxvbWV0cmVzLCBtZXRlcnMsIG1ldHJlcywgY2VudGltZXRyZXMsIG1pbGxpbWV0ZXIsIGFjcmUsIG1pbGUsIHlhcmQsIGZvb3QsIGluY2hcbiAqIEBwYXJhbSB7bnVtYmVyfSBhcmVhIHRvIGJlIGNvbnZlcnRlZFxuICogQHBhcmFtIHtzdHJpbmd9IFtvcmlnaW5hbFVuaXQ9bWV0ZXJzXSBvZiB0aGUgZGlzdGFuY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBbZmluYWxVbml0PWtpbG9tZXRlcnNdIHJldHVybmVkIHVuaXRcbiAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSBjb252ZXJ0ZWQgZGlzdGFuY2VcbiAqL1xuZnVuY3Rpb24gY29udmVydEFyZWEoYXJlYSwgb3JpZ2luYWxVbml0LCBmaW5hbFVuaXQpIHtcbiAgICBpZiAoYXJlYSA9PT0gbnVsbCB8fCBhcmVhID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignYXJlYSBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghKGFyZWEgPj0gMCkpIHRocm93IG5ldyBFcnJvcignYXJlYSBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG5cbiAgICB2YXIgc3RhcnRGYWN0b3IgPSBhcmVhRmFjdG9yc1tvcmlnaW5hbFVuaXQgfHwgJ21ldGVycyddO1xuICAgIGlmICghc3RhcnRGYWN0b3IpIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBvcmlnaW5hbCB1bml0cycpO1xuXG4gICAgdmFyIGZpbmFsRmFjdG9yID0gYXJlYUZhY3RvcnNbZmluYWxVbml0IHx8ICdraWxvbWV0ZXJzJ107XG4gICAgaWYgKCFmaW5hbEZhY3RvcikgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGZpbmFsIHVuaXRzJyk7XG5cbiAgICByZXR1cm4gKGFyZWEgLyBzdGFydEZhY3RvcikgKiBmaW5hbEZhY3Rvcjtcbn1cblxuLyoqXG4gKiBpc051bWJlclxuICpcbiAqIEBwYXJhbSB7Kn0gbnVtIE51bWJlciB0byB2YWxpZGF0ZVxuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUvZmFsc2VcbiAqIEBleGFtcGxlXG4gKiB0dXJmLmlzTnVtYmVyKDEyMylcbiAqIC8vPXRydWVcbiAqIHR1cmYuaXNOdW1iZXIoJ2ZvbycpXG4gKiAvLz1mYWxzZVxuICovXG5mdW5jdGlvbiBpc051bWJlcihudW0pIHtcbiAgICByZXR1cm4gIWlzTmFOKG51bSkgJiYgbnVtICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KG51bSk7XG59XG5cbi8qKlxuICogaXNPYmplY3RcbiAqXG4gKiBAcGFyYW0geyp9IGlucHV0IHZhcmlhYmxlIHRvIHZhbGlkYXRlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZS9mYWxzZVxuICogQGV4YW1wbGVcbiAqIHR1cmYuaXNPYmplY3Qoe2VsZXZhdGlvbjogMTB9KVxuICogLy89dHJ1ZVxuICogdHVyZi5pc09iamVjdCgnZm9vJylcbiAqIC8vPWZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KGlucHV0KSB7XG4gICAgcmV0dXJuICghIWlucHV0KSAmJiAoaW5wdXQuY29uc3RydWN0b3IgPT09IE9iamVjdCk7XG59XG5cbi8qKlxuICogRWFydGggUmFkaXVzIHVzZWQgd2l0aCB0aGUgSGFydmVzaW5lIGZvcm11bGEgYW5kIGFwcHJveGltYXRlcyB1c2luZyBhIHNwaGVyaWNhbCAobm9uLWVsbGlwc29pZCkgRWFydGguXG4gKi9cbnZhciBlYXJ0aFJhZGl1cyA9IDYzNzEwMDguODtcblxuXG4vKioqLyB9KSxcbi8qIDM1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IGZlYXR1cmUgKi9cbi8qIHVudXNlZCBoYXJtb255IGV4cG9ydCBnZW9tZXRyeSAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IHBvaW50ICovXG4vKiBoYXJtb255IGV4cG9ydCAoaW1tdXRhYmxlKSAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiYVwiXSA9IHBvbHlnb247XG4vKiB1bnVzZWQgaGFybW9ueSBleHBvcnQgbGluZVN0cmluZyAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IGZlYXR1cmVDb2xsZWN0aW9uICovXG4vKiB1bnVzZWQgaGFybW9ueSBleHBvcnQgbXVsdGlMaW5lU3RyaW5nICovXG4vKiB1bnVzZWQgaGFybW9ueSBleHBvcnQgbXVsdGlQb2ludCAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IG11bHRpUG9seWdvbiAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IGdlb21ldHJ5Q29sbGVjdGlvbiAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IHJvdW5kICovXG4vKiB1bnVzZWQgaGFybW9ueSBleHBvcnQgcmFkaWFuc1RvRGlzdGFuY2UgKi9cbi8qIHVudXNlZCBoYXJtb255IGV4cG9ydCBkaXN0YW5jZVRvUmFkaWFucyAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IGRpc3RhbmNlVG9EZWdyZWVzICovXG4vKiB1bnVzZWQgaGFybW9ueSBleHBvcnQgYmVhcmluZ1RvQW5nbGUgKi9cbi8qIHVudXNlZCBoYXJtb255IGV4cG9ydCByYWRpYW5zMmRlZ3JlZXMgKi9cbi8qIHVudXNlZCBoYXJtb255IGV4cG9ydCBkZWdyZWVzMnJhZGlhbnMgKi9cbi8qIHVudXNlZCBoYXJtb255IGV4cG9ydCBjb252ZXJ0RGlzdGFuY2UgKi9cbi8qIHVudXNlZCBoYXJtb255IGV4cG9ydCBjb252ZXJ0QXJlYSAqL1xuLyogdW51c2VkIGhhcm1vbnkgZXhwb3J0IGlzTnVtYmVyICovXG4vKiB1bnVzZWQgaGFybW9ueSBleHBvcnQgaXNPYmplY3QgKi9cbi8qIHVudXNlZCBoYXJtb255IGV4cG9ydCBlYXJ0aFJhZGl1cyAqL1xuLyoqXG4gKiBXcmFwcyBhIEdlb0pTT04ge0BsaW5rIEdlb21ldHJ5fSBpbiBhIEdlb0pTT04ge0BsaW5rIEZlYXR1cmV9LlxuICpcbiAqIEBuYW1lIGZlYXR1cmVcbiAqIEBwYXJhbSB7R2VvbWV0cnl9IGdlb21ldHJ5IGlucHV0IGdlb21ldHJ5XG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZX0gYSBHZW9KU09OIEZlYXR1cmVcbiAqIEBleGFtcGxlXG4gKiB2YXIgZ2VvbWV0cnkgPSB7XG4gKiAgIFwidHlwZVwiOiBcIlBvaW50XCIsXG4gKiAgIFwiY29vcmRpbmF0ZXNcIjogWzExMCwgNTBdXG4gKiB9O1xuICpcbiAqIHZhciBmZWF0dXJlID0gdHVyZi5mZWF0dXJlKGdlb21ldHJ5KTtcbiAqXG4gKiAvLz1mZWF0dXJlXG4gKi9cbmZ1bmN0aW9uIGZlYXR1cmUoZ2VvbWV0cnksIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKGdlb21ldHJ5ID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignZ2VvbWV0cnkgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAocHJvcGVydGllcyAmJiBwcm9wZXJ0aWVzLmNvbnN0cnVjdG9yICE9PSBPYmplY3QpIHRocm93IG5ldyBFcnJvcigncHJvcGVydGllcyBtdXN0IGJlIGFuIE9iamVjdCcpO1xuICAgIGlmIChiYm94ICYmIGJib3gubGVuZ3RoICE9PSA0KSB0aHJvdyBuZXcgRXJyb3IoJ2Jib3ggbXVzdCBiZSBhbiBBcnJheSBvZiA0IG51bWJlcnMnKTtcbiAgICBpZiAoaWQgJiYgWydzdHJpbmcnLCAnbnVtYmVyJ10uaW5kZXhPZih0eXBlb2YgaWQpID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKCdpZCBtdXN0IGJlIGEgbnVtYmVyIG9yIGEgc3RyaW5nJyk7XG5cbiAgICB2YXIgZmVhdCA9IHt0eXBlOiAnRmVhdHVyZSd9O1xuICAgIGlmIChpZCkgZmVhdC5pZCA9IGlkO1xuICAgIGlmIChiYm94KSBmZWF0LmJib3ggPSBiYm94O1xuICAgIGZlYXQucHJvcGVydGllcyA9IHByb3BlcnRpZXMgfHwge307XG4gICAgZmVhdC5nZW9tZXRyeSA9IGdlb21ldHJ5O1xuICAgIHJldHVybiBmZWF0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBHZW9KU09OIHtAbGluayBHZW9tZXRyeX0gZnJvbSBhIEdlb21ldHJ5IHN0cmluZyB0eXBlICYgY29vcmRpbmF0ZXMuXG4gKiBGb3IgR2VvbWV0cnlDb2xsZWN0aW9uIHR5cGUgdXNlIGBoZWxwZXJzLmdlb21ldHJ5Q29sbGVjdGlvbmBcbiAqXG4gKiBAbmFtZSBnZW9tZXRyeVxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgR2VvbWV0cnkgVHlwZVxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlcyBDb29yZGluYXRlc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHJldHVybnMge0dlb21ldHJ5fSBhIEdlb0pTT04gR2VvbWV0cnlcbiAqIEBleGFtcGxlXG4gKiB2YXIgdHlwZSA9ICdQb2ludCc7XG4gKiB2YXIgY29vcmRpbmF0ZXMgPSBbMTEwLCA1MF07XG4gKlxuICogdmFyIGdlb21ldHJ5ID0gdHVyZi5nZW9tZXRyeSh0eXBlLCBjb29yZGluYXRlcyk7XG4gKlxuICogLy89Z2VvbWV0cnlcbiAqL1xuZnVuY3Rpb24gZ2VvbWV0cnkodHlwZSwgY29vcmRpbmF0ZXMsIGJib3gpIHtcbiAgICAvLyBWYWxpZGF0aW9uXG4gICAgaWYgKCF0eXBlKSB0aHJvdyBuZXcgRXJyb3IoJ3R5cGUgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ2Nvb3JkaW5hdGVzIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGNvb3JkaW5hdGVzKSkgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBtdXN0IGJlIGFuIEFycmF5Jyk7XG4gICAgaWYgKGJib3ggJiYgYmJveC5sZW5ndGggIT09IDQpIHRocm93IG5ldyBFcnJvcignYmJveCBtdXN0IGJlIGFuIEFycmF5IG9mIDQgbnVtYmVycycpO1xuXG4gICAgdmFyIGdlb207XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnUG9pbnQnOiBnZW9tID0gcG9pbnQoY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBjYXNlICdMaW5lU3RyaW5nJzogZ2VvbSA9IGxpbmVTdHJpbmcoY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBjYXNlICdQb2x5Z29uJzogZ2VvbSA9IHBvbHlnb24oY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBjYXNlICdNdWx0aVBvaW50JzogZ2VvbSA9IG11bHRpUG9pbnQoY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBjYXNlICdNdWx0aUxpbmVTdHJpbmcnOiBnZW9tID0gbXVsdGlMaW5lU3RyaW5nKGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgY2FzZSAnTXVsdGlQb2x5Z29uJzogZ2VvbSA9IG11bHRpUG9seWdvbihjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcih0eXBlICsgJyBpcyBpbnZhbGlkJyk7XG4gICAgfVxuICAgIGlmIChiYm94KSBnZW9tLmJib3ggPSBiYm94O1xuICAgIHJldHVybiBnZW9tO1xufVxuXG4vKipcbiAqIFRha2VzIGNvb3JkaW5hdGVzIGFuZCBwcm9wZXJ0aWVzIChvcHRpb25hbCkgYW5kIHJldHVybnMgYSBuZXcge0BsaW5rIFBvaW50fSBmZWF0dXJlLlxuICpcbiAqIEBuYW1lIHBvaW50XG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzIGxvbmdpdHVkZSwgbGF0aXR1ZGUgcG9zaXRpb24gKGVhY2ggaW4gZGVjaW1hbCBkZWdyZWVzKVxuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8UG9pbnQ+fSBhIFBvaW50IGZlYXR1cmVcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9pbnQgPSB0dXJmLnBvaW50KFstNzUuMzQzLCAzOS45ODRdKTtcbiAqXG4gKiAvLz1wb2ludFxuICovXG5mdW5jdGlvbiBwb2ludChjb29yZGluYXRlcywgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvb3JkaW5hdGVzIHBhc3NlZCcpO1xuICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGJlIGFuIGFycmF5Jyk7XG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA8IDIpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBiZSBhdCBsZWFzdCAyIG51bWJlcnMgbG9uZycpO1xuICAgIGlmICghaXNOdW1iZXIoY29vcmRpbmF0ZXNbMF0pIHx8ICFpc051bWJlcihjb29yZGluYXRlc1sxXSkpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBjb250YWluIG51bWJlcnMnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ1BvaW50JyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIFRha2VzIGFuIGFycmF5IG9mIExpbmVhclJpbmdzIGFuZCBvcHRpb25hbGx5IGFuIHtAbGluayBPYmplY3R9IHdpdGggcHJvcGVydGllcyBhbmQgcmV0dXJucyBhIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlLlxuICpcbiAqIEBuYW1lIHBvbHlnb25cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8bnVtYmVyPj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBMaW5lYXJSaW5nc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8UG9seWdvbj59IGEgUG9seWdvbiBmZWF0dXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gdGhyb3cgYW4gZXJyb3IgaWYgYSBMaW5lYXJSaW5nIG9mIHRoZSBwb2x5Z29uIGhhcyB0b28gZmV3IHBvc2l0aW9uc1xuICogb3IgaWYgYSBMaW5lYXJSaW5nIG9mIHRoZSBQb2x5Z29uIGRvZXMgbm90IGhhdmUgbWF0Y2hpbmcgUG9zaXRpb25zIGF0IHRoZSBiZWdpbm5pbmcgJiBlbmQuXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvbHlnb24gPSB0dXJmLnBvbHlnb24oW1tcbiAqICAgWy0yLjI3NTU0MywgNTMuNDY0NTQ3XSxcbiAqICAgWy0yLjI3NTU0MywgNTMuNDg5MjcxXSxcbiAqICAgWy0yLjIxNTExOCwgNTMuNDg5MjcxXSxcbiAqICAgWy0yLjIxNTExOCwgNTMuNDY0NTQ3XSxcbiAqICAgWy0yLjI3NTU0MywgNTMuNDY0NTQ3XVxuICogXV0sIHsgbmFtZTogJ3BvbHkxJywgcG9wdWxhdGlvbjogNDAwfSk7XG4gKlxuICogLy89cG9seWdvblxuICovXG5mdW5jdGlvbiBwb2x5Z29uKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByaW5nID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgIGlmIChyaW5nLmxlbmd0aCA8IDQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRWFjaCBMaW5lYXJSaW5nIG9mIGEgUG9seWdvbiBtdXN0IGhhdmUgNCBvciBtb3JlIFBvc2l0aW9ucy4nKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJpbmdbcmluZy5sZW5ndGggLSAxXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZmlyc3QgcG9pbnQgb2YgUG9seWdvbiBjb250YWlucyB0d28gbnVtYmVyc1xuICAgICAgICAgICAgaWYgKGkgPT09IDAgJiYgaiA9PT0gMCAmJiAhaXNOdW1iZXIocmluZ1swXVswXSkgfHwgIWlzTnVtYmVyKHJpbmdbMF1bMV0pKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgY29udGFpbiBudW1iZXJzJyk7XG4gICAgICAgICAgICBpZiAocmluZ1tyaW5nLmxlbmd0aCAtIDFdW2pdICE9PSByaW5nWzBdW2pdKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJzdCBhbmQgbGFzdCBQb3NpdGlvbiBhcmUgbm90IGVxdWl2YWxlbnQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdQb2x5Z29uJyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgTGluZVN0cmluZ30gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBsaW5lU3RyaW5nXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBQb3NpdGlvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPExpbmVTdHJpbmc+fSBhIExpbmVTdHJpbmcgZmVhdHVyZVxuICogQHRocm93cyB7RXJyb3J9IGlmIG5vIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWRcbiAqIEBleGFtcGxlXG4gKiB2YXIgbGluZXN0cmluZzEgPSB0dXJmLmxpbmVTdHJpbmcoW1xuICogICBbLTIxLjk2NDQxNiwgNjQuMTQ4MjAzXSxcbiAqICAgWy0yMS45NTYxNzYsIDY0LjE0MTMxNl0sXG4gKiAgIFstMjEuOTM5MDEsIDY0LjEzNTkyNF0sXG4gKiAgIFstMjEuOTI3MzM3LCA2NC4xMzY2NzNdXG4gKiBdKTtcbiAqIHZhciBsaW5lc3RyaW5nMiA9IHR1cmYubGluZVN0cmluZyhbXG4gKiAgIFstMjEuOTI5MDU0LCA2NC4xMjc5ODVdLFxuICogICBbLTIxLjkxMjkxOCwgNjQuMTM0NzI2XSxcbiAqICAgWy0yMS45MTYwMDcsIDY0LjE0MTAxNl0sXG4gKiAgIFstMjEuOTMwMDg0LCA2NC4xNDQ0Nl1cbiAqIF0sIHtuYW1lOiAnbGluZSAxJywgZGlzdGFuY2U6IDE0NX0pO1xuICpcbiAqIC8vPWxpbmVzdHJpbmcxXG4gKlxuICogLy89bGluZXN0cmluZzJcbiAqL1xuZnVuY3Rpb24gbGluZVN0cmluZyhjb29yZGluYXRlcywgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvb3JkaW5hdGVzIHBhc3NlZCcpO1xuICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPCAyKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgYmUgYW4gYXJyYXkgb2YgdHdvIG9yIG1vcmUgcG9zaXRpb25zJyk7XG4gICAgLy8gQ2hlY2sgaWYgZmlyc3QgcG9pbnQgb2YgTGluZVN0cmluZyBjb250YWlucyB0d28gbnVtYmVyc1xuICAgIGlmICghaXNOdW1iZXIoY29vcmRpbmF0ZXNbMF1bMV0pIHx8ICFpc051bWJlcihjb29yZGluYXRlc1swXVsxXSkpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBjb250YWluIG51bWJlcnMnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ0xpbmVTdHJpbmcnLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8qKlxuICogVGFrZXMgb25lIG9yIG1vcmUge0BsaW5rIEZlYXR1cmV8RmVhdHVyZXN9IGFuZCBjcmVhdGVzIGEge0BsaW5rIEZlYXR1cmVDb2xsZWN0aW9ufS5cbiAqXG4gKiBAbmFtZSBmZWF0dXJlQ29sbGVjdGlvblxuICogQHBhcmFtIHtGZWF0dXJlW119IGZlYXR1cmVzIGlucHV0IGZlYXR1cmVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmVDb2xsZWN0aW9ufSBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIGlucHV0IGZlYXR1cmVzXG4gKiBAZXhhbXBsZVxuICogdmFyIGZlYXR1cmVzID0gW1xuICogIHR1cmYucG9pbnQoWy03NS4zNDMsIDM5Ljk4NF0sIHtuYW1lOiAnTG9jYXRpb24gQSd9KSxcbiAqICB0dXJmLnBvaW50KFstNzUuODMzLCAzOS4yODRdLCB7bmFtZTogJ0xvY2F0aW9uIEInfSksXG4gKiAgdHVyZi5wb2ludChbLTc1LjUzNCwgMzkuMTIzXSwge25hbWU6ICdMb2NhdGlvbiBDJ30pXG4gKiBdO1xuICpcbiAqIHZhciBjb2xsZWN0aW9uID0gdHVyZi5mZWF0dXJlQ29sbGVjdGlvbihmZWF0dXJlcyk7XG4gKlxuICogLy89Y29sbGVjdGlvblxuICovXG5mdW5jdGlvbiBmZWF0dXJlQ29sbGVjdGlvbihmZWF0dXJlcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWZlYXR1cmVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGZlYXR1cmVzIHBhc3NlZCcpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShmZWF0dXJlcykpIHRocm93IG5ldyBFcnJvcignZmVhdHVyZXMgbXVzdCBiZSBhbiBBcnJheScpO1xuICAgIGlmIChiYm94ICYmIGJib3gubGVuZ3RoICE9PSA0KSB0aHJvdyBuZXcgRXJyb3IoJ2Jib3ggbXVzdCBiZSBhbiBBcnJheSBvZiA0IG51bWJlcnMnKTtcbiAgICBpZiAoaWQgJiYgWydzdHJpbmcnLCAnbnVtYmVyJ10uaW5kZXhPZih0eXBlb2YgaWQpID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKCdpZCBtdXN0IGJlIGEgbnVtYmVyIG9yIGEgc3RyaW5nJyk7XG5cbiAgICB2YXIgZmMgPSB7dHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJ307XG4gICAgaWYgKGlkKSBmYy5pZCA9IGlkO1xuICAgIGlmIChiYm94KSBmYy5iYm94ID0gYmJveDtcbiAgICBmYy5mZWF0dXJlcyA9IGZlYXR1cmVzO1xuICAgIHJldHVybiBmYztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8TXVsdGlMaW5lU3RyaW5nPn0gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBtdWx0aUxpbmVTdHJpbmdcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8bnVtYmVyPj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBMaW5lU3RyaW5nc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8TXVsdGlMaW5lU3RyaW5nPn0gYSBNdWx0aUxpbmVTdHJpbmcgZmVhdHVyZVxuICogQHRocm93cyB7RXJyb3J9IGlmIG5vIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWRcbiAqIEBleGFtcGxlXG4gKiB2YXIgbXVsdGlMaW5lID0gdHVyZi5tdWx0aUxpbmVTdHJpbmcoW1tbMCwwXSxbMTAsMTBdXV0pO1xuICpcbiAqIC8vPW11bHRpTGluZVxuICovXG5mdW5jdGlvbiBtdWx0aUxpbmVTdHJpbmcoY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ011bHRpTGluZVN0cmluZycsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8TXVsdGlQb2ludD59IGJhc2VkIG9uIGFcbiAqIGNvb3JkaW5hdGUgYXJyYXkuIFByb3BlcnRpZXMgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHkuXG4gKlxuICogQG5hbWUgbXVsdGlQb2ludFxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gY29vcmRpbmF0ZXMgYW4gYXJyYXkgb2YgUG9zaXRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxNdWx0aVBvaW50Pn0gYSBNdWx0aVBvaW50IGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBubyBjb29yZGluYXRlcyBhcmUgcGFzc2VkXG4gKiBAZXhhbXBsZVxuICogdmFyIG11bHRpUHQgPSB0dXJmLm11bHRpUG9pbnQoW1swLDBdLFsxMCwxMF1dKTtcbiAqXG4gKiAvLz1tdWx0aVB0XG4gKi9cbmZ1bmN0aW9uIG11bHRpUG9pbnQoY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ011bHRpUG9pbnQnLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBGZWF0dXJlPE11bHRpUG9seWdvbj59IGJhc2VkIG9uIGFcbiAqIGNvb3JkaW5hdGUgYXJyYXkuIFByb3BlcnRpZXMgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHkuXG4gKlxuICogQG5hbWUgbXVsdGlQb2x5Z29uXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PEFycmF5PEFycmF5PG51bWJlcj4+Pj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIFBvbHlnb25zXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxNdWx0aVBvbHlnb24+fSBhIG11bHRpcG9seWdvbiBmZWF0dXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgbm8gY29vcmRpbmF0ZXMgYXJlIHBhc3NlZFxuICogQGV4YW1wbGVcbiAqIHZhciBtdWx0aVBvbHkgPSB0dXJmLm11bHRpUG9seWdvbihbW1tbMCwwXSxbMCwxMF0sWzEwLDEwXSxbMTAsMF0sWzAsMF1dXV0pO1xuICpcbiAqIC8vPW11bHRpUG9seVxuICpcbiAqL1xuZnVuY3Rpb24gbXVsdGlQb2x5Z29uKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdNdWx0aVBvbHlnb24nLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBGZWF0dXJlPEdlb21ldHJ5Q29sbGVjdGlvbj59IGJhc2VkIG9uIGFcbiAqIGNvb3JkaW5hdGUgYXJyYXkuIFByb3BlcnRpZXMgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHkuXG4gKlxuICogQG5hbWUgZ2VvbWV0cnlDb2xsZWN0aW9uXG4gKiBAcGFyYW0ge0FycmF5PEdlb21ldHJ5Pn0gZ2VvbWV0cmllcyBhbiBhcnJheSBvZiBHZW9KU09OIEdlb21ldHJpZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPEdlb21ldHJ5Q29sbGVjdGlvbj59IGEgR2VvSlNPTiBHZW9tZXRyeUNvbGxlY3Rpb24gRmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBwdCA9IHtcbiAqICAgICBcInR5cGVcIjogXCJQb2ludFwiLFxuICogICAgICAgXCJjb29yZGluYXRlc1wiOiBbMTAwLCAwXVxuICogICAgIH07XG4gKiB2YXIgbGluZSA9IHtcbiAqICAgICBcInR5cGVcIjogXCJMaW5lU3RyaW5nXCIsXG4gKiAgICAgXCJjb29yZGluYXRlc1wiOiBbIFsxMDEsIDBdLCBbMTAyLCAxXSBdXG4gKiAgIH07XG4gKiB2YXIgY29sbGVjdGlvbiA9IHR1cmYuZ2VvbWV0cnlDb2xsZWN0aW9uKFtwdCwgbGluZV0pO1xuICpcbiAqIC8vPWNvbGxlY3Rpb25cbiAqL1xuZnVuY3Rpb24gZ2VvbWV0cnlDb2xsZWN0aW9uKGdlb21ldHJpZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFnZW9tZXRyaWVzKSB0aHJvdyBuZXcgRXJyb3IoJ2dlb21ldHJpZXMgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZ2VvbWV0cmllcykpIHRocm93IG5ldyBFcnJvcignZ2VvbWV0cmllcyBtdXN0IGJlIGFuIEFycmF5Jyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdHZW9tZXRyeUNvbGxlY3Rpb24nLFxuICAgICAgICBnZW9tZXRyaWVzOiBnZW9tZXRyaWVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9HcmVhdC1jaXJjbGVfZGlzdGFuY2UjUmFkaXVzX2Zvcl9zcGhlcmljYWxfRWFydGhcbnZhciBmYWN0b3JzID0ge1xuICAgIG1pbGVzOiAzOTYwLFxuICAgIG5hdXRpY2FsbWlsZXM6IDM0NDEuMTQ1LFxuICAgIGRlZ3JlZXM6IDU3LjI5NTc3OTUsXG4gICAgcmFkaWFuczogMSxcbiAgICBpbmNoZXM6IDI1MDkwNTYwMCxcbiAgICB5YXJkczogNjk2OTYwMCxcbiAgICBtZXRlcnM6IDYzNzMwMDAsXG4gICAgbWV0cmVzOiA2MzczMDAwLFxuICAgIGNlbnRpbWV0ZXJzOiA2LjM3M2UrOCxcbiAgICBjZW50aW1ldHJlczogNi4zNzNlKzgsXG4gICAga2lsb21ldGVyczogNjM3MyxcbiAgICBraWxvbWV0cmVzOiA2MzczLFxuICAgIGZlZXQ6IDIwOTA4NzkyLjY1XG59O1xuXG52YXIgYXJlYUZhY3RvcnMgPSB7XG4gICAga2lsb21ldGVyczogMC4wMDAwMDEsXG4gICAga2lsb21ldHJlczogMC4wMDAwMDEsXG4gICAgbWV0ZXJzOiAxLFxuICAgIG1ldHJlczogMSxcbiAgICBjZW50aW1ldHJlczogMTAwMDAsXG4gICAgbWlsbGltZXRlcjogMTAwMDAwMCxcbiAgICBhY3JlczogMC4wMDAyNDcxMDUsXG4gICAgbWlsZXM6IDMuODZlLTcsXG4gICAgeWFyZHM6IDEuMTk1OTkwMDQ2LFxuICAgIGZlZXQ6IDEwLjc2MzkxMDQxNyxcbiAgICBpbmNoZXM6IDE1NTAuMDAzMTAwMDA2XG59O1xuXG4vKipcbiAqIFJvdW5kIG51bWJlciB0byBwcmVjaXNpb25cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtIE51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IFtwcmVjaXNpb249MF0gUHJlY2lzaW9uXG4gKiBAcmV0dXJucyB7bnVtYmVyfSByb3VuZGVkIG51bWJlclxuICogQGV4YW1wbGVcbiAqIHR1cmYucm91bmQoMTIwLjQzMjEpXG4gKiAvLz0xMjBcbiAqXG4gKiB0dXJmLnJvdW5kKDEyMC40MzIxLCAyKVxuICogLy89MTIwLjQzXG4gKi9cbmZ1bmN0aW9uIHJvdW5kKG51bSwgcHJlY2lzaW9uKSB7XG4gICAgaWYgKG51bSA9PT0gdW5kZWZpbmVkIHx8IG51bSA9PT0gbnVsbCB8fCBpc05hTihudW0pKSB0aHJvdyBuZXcgRXJyb3IoJ251bSBpcyByZXF1aXJlZCcpO1xuICAgIGlmIChwcmVjaXNpb24gJiYgIShwcmVjaXNpb24gPj0gMCkpIHRocm93IG5ldyBFcnJvcigncHJlY2lzaW9uIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgICB2YXIgbXVsdGlwbGllciA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24gfHwgMCk7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogbXVsdGlwbGllcikgLyBtdWx0aXBsaWVyO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSBkaXN0YW5jZSBtZWFzdXJlbWVudCAoYXNzdW1pbmcgYSBzcGhlcmljYWwgRWFydGgpIGZyb20gcmFkaWFucyB0byBhIG1vcmUgZnJpZW5kbHkgdW5pdC5cbiAqIFZhbGlkIHVuaXRzOiBtaWxlcywgbmF1dGljYWxtaWxlcywgaW5jaGVzLCB5YXJkcywgbWV0ZXJzLCBtZXRyZXMsIGtpbG9tZXRlcnMsIGNlbnRpbWV0ZXJzLCBmZWV0XG4gKlxuICogQG5hbWUgcmFkaWFuc1RvRGlzdGFuY2VcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpYW5zIGluIHJhZGlhbnMgYWNyb3NzIHRoZSBzcGhlcmVcbiAqIEBwYXJhbSB7c3RyaW5nfSBbdW5pdHM9XCJraWxvbWV0ZXJzXCJdIGNhbiBiZSBkZWdyZWVzLCByYWRpYW5zLCBtaWxlcywgb3Iga2lsb21ldGVycyBpbmNoZXMsIHlhcmRzLCBtZXRyZXMsIG1ldGVycywga2lsb21ldHJlcywga2lsb21ldGVycy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IGRpc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIHJhZGlhbnNUb0Rpc3RhbmNlKHJhZGlhbnMsIHVuaXRzKSB7XG4gICAgaWYgKHJhZGlhbnMgPT09IHVuZGVmaW5lZCB8fCByYWRpYW5zID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoJ3JhZGlhbnMgaXMgcmVxdWlyZWQnKTtcblxuICAgIGlmICh1bml0cyAmJiB0eXBlb2YgdW5pdHMgIT09ICdzdHJpbmcnKSB0aHJvdyBuZXcgRXJyb3IoJ3VuaXRzIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICB2YXIgZmFjdG9yID0gZmFjdG9yc1t1bml0cyB8fCAna2lsb21ldGVycyddO1xuICAgIGlmICghZmFjdG9yKSB0aHJvdyBuZXcgRXJyb3IodW5pdHMgKyAnIHVuaXRzIGlzIGludmFsaWQnKTtcbiAgICByZXR1cm4gcmFkaWFucyAqIGZhY3Rvcjtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgZGlzdGFuY2UgbWVhc3VyZW1lbnQgKGFzc3VtaW5nIGEgc3BoZXJpY2FsIEVhcnRoKSBmcm9tIGEgcmVhbC13b3JsZCB1bml0IGludG8gcmFkaWFuc1xuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywga2lsb21ldGVycywgY2VudGltZXRlcnMsIGZlZXRcbiAqXG4gKiBAbmFtZSBkaXN0YW5jZVRvUmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIGluIHJlYWwgdW5pdHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBbdW5pdHM9a2lsb21ldGVyc10gY2FuIGJlIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzIGluY2hlcywgeWFyZHMsIG1ldHJlcywgbWV0ZXJzLCBraWxvbWV0cmVzLCBraWxvbWV0ZXJzLlxuICogQHJldHVybnMge251bWJlcn0gcmFkaWFuc1xuICovXG5mdW5jdGlvbiBkaXN0YW5jZVRvUmFkaWFucyhkaXN0YW5jZSwgdW5pdHMpIHtcbiAgICBpZiAoZGlzdGFuY2UgPT09IHVuZGVmaW5lZCB8fCBkaXN0YW5jZSA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKCdkaXN0YW5jZSBpcyByZXF1aXJlZCcpO1xuXG4gICAgaWYgKHVuaXRzICYmIHR5cGVvZiB1bml0cyAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcigndW5pdHMgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgIHZhciBmYWN0b3IgPSBmYWN0b3JzW3VuaXRzIHx8ICdraWxvbWV0ZXJzJ107XG4gICAgaWYgKCFmYWN0b3IpIHRocm93IG5ldyBFcnJvcih1bml0cyArICcgdW5pdHMgaXMgaW52YWxpZCcpO1xuICAgIHJldHVybiBkaXN0YW5jZSAvIGZhY3Rvcjtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgZGlzdGFuY2UgbWVhc3VyZW1lbnQgKGFzc3VtaW5nIGEgc3BoZXJpY2FsIEVhcnRoKSBmcm9tIGEgcmVhbC13b3JsZCB1bml0IGludG8gZGVncmVlc1xuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywgY2VudGltZXRlcnMsIGtpbG9tZXRyZXMsIGZlZXRcbiAqXG4gKiBAbmFtZSBkaXN0YW5jZVRvRGVncmVlc1xuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIGluIHJlYWwgdW5pdHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBbdW5pdHM9a2lsb21ldGVyc10gY2FuIGJlIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzIGluY2hlcywgeWFyZHMsIG1ldHJlcywgbWV0ZXJzLCBraWxvbWV0cmVzLCBraWxvbWV0ZXJzLlxuICogQHJldHVybnMge251bWJlcn0gZGVncmVlc1xuICovXG5mdW5jdGlvbiBkaXN0YW5jZVRvRGVncmVlcyhkaXN0YW5jZSwgdW5pdHMpIHtcbiAgICByZXR1cm4gcmFkaWFuczJkZWdyZWVzKGRpc3RhbmNlVG9SYWRpYW5zKGRpc3RhbmNlLCB1bml0cykpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFueSBiZWFyaW5nIGFuZ2xlIGZyb20gdGhlIG5vcnRoIGxpbmUgZGlyZWN0aW9uIChwb3NpdGl2ZSBjbG9ja3dpc2UpXG4gKiBhbmQgcmV0dXJucyBhbiBhbmdsZSBiZXR3ZWVuIDAtMzYwIGRlZ3JlZXMgKHBvc2l0aXZlIGNsb2Nrd2lzZSksIDAgYmVpbmcgdGhlIG5vcnRoIGxpbmVcbiAqXG4gKiBAbmFtZSBiZWFyaW5nVG9BbmdsZVxuICogQHBhcmFtIHtudW1iZXJ9IGJlYXJpbmcgYW5nbGUsIGJldHdlZW4gLTE4MCBhbmQgKzE4MCBkZWdyZWVzXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBhbmdsZSBiZXR3ZWVuIDAgYW5kIDM2MCBkZWdyZWVzXG4gKi9cbmZ1bmN0aW9uIGJlYXJpbmdUb0FuZ2xlKGJlYXJpbmcpIHtcbiAgICBpZiAoYmVhcmluZyA9PT0gbnVsbCB8fCBiZWFyaW5nID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignYmVhcmluZyBpcyByZXF1aXJlZCcpO1xuXG4gICAgdmFyIGFuZ2xlID0gYmVhcmluZyAlIDM2MDtcbiAgICBpZiAoYW5nbGUgPCAwKSBhbmdsZSArPSAzNjA7XG4gICAgcmV0dXJuIGFuZ2xlO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFuZ2xlIGluIHJhZGlhbnMgdG8gZGVncmVlc1xuICpcbiAqIEBuYW1lIHJhZGlhbnMyZGVncmVlc1xuICogQHBhcmFtIHtudW1iZXJ9IHJhZGlhbnMgYW5nbGUgaW4gcmFkaWFuc1xuICogQHJldHVybnMge251bWJlcn0gZGVncmVlcyBiZXR3ZWVuIDAgYW5kIDM2MCBkZWdyZWVzXG4gKi9cbmZ1bmN0aW9uIHJhZGlhbnMyZGVncmVlcyhyYWRpYW5zKSB7XG4gICAgaWYgKHJhZGlhbnMgPT09IG51bGwgfHwgcmFkaWFucyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ3JhZGlhbnMgaXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciBkZWdyZWVzID0gcmFkaWFucyAlICgyICogTWF0aC5QSSk7XG4gICAgcmV0dXJuIGRlZ3JlZXMgKiAxODAgLyBNYXRoLlBJO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFuZ2xlIGluIGRlZ3JlZXMgdG8gcmFkaWFuc1xuICpcbiAqIEBuYW1lIGRlZ3JlZXMycmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGRlZ3JlZXMgYW5nbGUgYmV0d2VlbiAwIGFuZCAzNjAgZGVncmVlc1xuICogQHJldHVybnMge251bWJlcn0gYW5nbGUgaW4gcmFkaWFuc1xuICovXG5mdW5jdGlvbiBkZWdyZWVzMnJhZGlhbnMoZGVncmVlcykge1xuICAgIGlmIChkZWdyZWVzID09PSBudWxsIHx8IGRlZ3JlZXMgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdkZWdyZWVzIGlzIHJlcXVpcmVkJyk7XG5cbiAgICB2YXIgcmFkaWFucyA9IGRlZ3JlZXMgJSAzNjA7XG4gICAgcmV0dXJuIHJhZGlhbnMgKiBNYXRoLlBJIC8gMTgwO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgZGlzdGFuY2UgdG8gdGhlIHJlcXVlc3RlZCB1bml0LlxuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywga2lsb21ldGVycywgY2VudGltZXRlcnMsIGZlZXRcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2UgdG8gYmUgY29udmVydGVkXG4gKiBAcGFyYW0ge3N0cmluZ30gb3JpZ2luYWxVbml0IG9mIHRoZSBkaXN0YW5jZVxuICogQHBhcmFtIHtzdHJpbmd9IFtmaW5hbFVuaXQ9a2lsb21ldGVyc10gcmV0dXJuZWQgdW5pdFxuICogQHJldHVybnMge251bWJlcn0gdGhlIGNvbnZlcnRlZCBkaXN0YW5jZVxuICovXG5mdW5jdGlvbiBjb252ZXJ0RGlzdGFuY2UoZGlzdGFuY2UsIG9yaWdpbmFsVW5pdCwgZmluYWxVbml0KSB7XG4gICAgaWYgKGRpc3RhbmNlID09PSBudWxsIHx8IGRpc3RhbmNlID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignZGlzdGFuY2UgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIShkaXN0YW5jZSA+PSAwKSkgdGhyb3cgbmV3IEVycm9yKCdkaXN0YW5jZSBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG5cbiAgICB2YXIgY29udmVydGVkRGlzdGFuY2UgPSByYWRpYW5zVG9EaXN0YW5jZShkaXN0YW5jZVRvUmFkaWFucyhkaXN0YW5jZSwgb3JpZ2luYWxVbml0KSwgZmluYWxVbml0IHx8ICdraWxvbWV0ZXJzJyk7XG4gICAgcmV0dXJuIGNvbnZlcnRlZERpc3RhbmNlO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgYXJlYSB0byB0aGUgcmVxdWVzdGVkIHVuaXQuXG4gKiBWYWxpZCB1bml0czoga2lsb21ldGVycywga2lsb21ldHJlcywgbWV0ZXJzLCBtZXRyZXMsIGNlbnRpbWV0cmVzLCBtaWxsaW1ldGVyLCBhY3JlLCBtaWxlLCB5YXJkLCBmb290LCBpbmNoXG4gKiBAcGFyYW0ge251bWJlcn0gYXJlYSB0byBiZSBjb252ZXJ0ZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3JpZ2luYWxVbml0PW1ldGVyc10gb2YgdGhlIGRpc3RhbmNlXG4gKiBAcGFyYW0ge3N0cmluZ30gW2ZpbmFsVW5pdD1raWxvbWV0ZXJzXSByZXR1cm5lZCB1bml0XG4gKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgY29udmVydGVkIGRpc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnRBcmVhKGFyZWEsIG9yaWdpbmFsVW5pdCwgZmluYWxVbml0KSB7XG4gICAgaWYgKGFyZWEgPT09IG51bGwgfHwgYXJlYSA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ2FyZWEgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIShhcmVhID49IDApKSB0aHJvdyBuZXcgRXJyb3IoJ2FyZWEgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuXG4gICAgdmFyIHN0YXJ0RmFjdG9yID0gYXJlYUZhY3RvcnNbb3JpZ2luYWxVbml0IHx8ICdtZXRlcnMnXTtcbiAgICBpZiAoIXN0YXJ0RmFjdG9yKSB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgb3JpZ2luYWwgdW5pdHMnKTtcblxuICAgIHZhciBmaW5hbEZhY3RvciA9IGFyZWFGYWN0b3JzW2ZpbmFsVW5pdCB8fCAna2lsb21ldGVycyddO1xuICAgIGlmICghZmluYWxGYWN0b3IpIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBmaW5hbCB1bml0cycpO1xuXG4gICAgcmV0dXJuIChhcmVhIC8gc3RhcnRGYWN0b3IpICogZmluYWxGYWN0b3I7XG59XG5cbi8qKlxuICogaXNOdW1iZXJcbiAqXG4gKiBAcGFyYW0geyp9IG51bSBOdW1iZXIgdG8gdmFsaWRhdGVcbiAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlL2ZhbHNlXG4gKiBAZXhhbXBsZVxuICogdHVyZi5pc051bWJlcigxMjMpXG4gKiAvLz10cnVlXG4gKiB0dXJmLmlzTnVtYmVyKCdmb28nKVxuICogLy89ZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNOdW1iZXIobnVtKSB7XG4gICAgcmV0dXJuICFpc05hTihudW0pICYmIG51bSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShudW0pO1xufVxuXG4vKipcbiAqIGlzT2JqZWN0XG4gKlxuICogQHBhcmFtIHsqfSBpbnB1dCB2YXJpYWJsZSB0byB2YWxpZGF0ZVxuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUvZmFsc2VcbiAqIEBleGFtcGxlXG4gKiB0dXJmLmlzT2JqZWN0KHtlbGV2YXRpb246IDEwfSlcbiAqIC8vPXRydWVcbiAqIHR1cmYuaXNPYmplY3QoJ2ZvbycpXG4gKiAvLz1mYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdChpbnB1dCkge1xuICAgIHJldHVybiAoISFpbnB1dCkgJiYgKGlucHV0LmNvbnN0cnVjdG9yID09PSBPYmplY3QpO1xufVxuXG4vKipcbiAqIEVhcnRoIFJhZGl1cyB1c2VkIHdpdGggdGhlIEhhcnZlc2luZSBmb3JtdWxhIGFuZCBhcHByb3hpbWF0ZXMgdXNpbmcgYSBzcGhlcmljYWwgKG5vbi1lbGxpcHNvaWQpIEVhcnRoLlxuICovXG52YXIgZWFydGhSYWRpdXMgPSA2MzcxMDA4Ljg7XG5cblxuLyoqKi8gfSksXG4vKiAzNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3dlYnBhY2tfZXhwb3J0c19fLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJlYXJ0aFJhZGl1c1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGVhcnRoUmFkaXVzOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJmYWN0b3JzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZmFjdG9yczsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwidW5pdHNGYWN0b3JzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gdW5pdHNGYWN0b3JzOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhcmVhRmFjdG9yc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGFyZWFGYWN0b3JzOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChpbW11dGFibGUpICovIF9fd2VicGFja19leHBvcnRzX19bXCJmZWF0dXJlXCJdID0gZmVhdHVyZTtcbi8qIGhhcm1vbnkgZXhwb3J0IChpbW11dGFibGUpICovIF9fd2VicGFja19leHBvcnRzX19bXCJnZW9tZXRyeVwiXSA9IGdlb21ldHJ5O1xuLyogaGFybW9ueSBleHBvcnQgKGltbXV0YWJsZSkgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcInBvaW50XCJdID0gcG9pbnQ7XG4vKiBoYXJtb255IGV4cG9ydCAoaW1tdXRhYmxlKSAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wicG9seWdvblwiXSA9IHBvbHlnb247XG4vKiBoYXJtb255IGV4cG9ydCAoaW1tdXRhYmxlKSAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wibGluZVN0cmluZ1wiXSA9IGxpbmVTdHJpbmc7XG4vKiBoYXJtb255IGV4cG9ydCAoaW1tdXRhYmxlKSAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZmVhdHVyZUNvbGxlY3Rpb25cIl0gPSBmZWF0dXJlQ29sbGVjdGlvbjtcbi8qIGhhcm1vbnkgZXhwb3J0IChpbW11dGFibGUpICovIF9fd2VicGFja19leHBvcnRzX19bXCJtdWx0aUxpbmVTdHJpbmdcIl0gPSBtdWx0aUxpbmVTdHJpbmc7XG4vKiBoYXJtb255IGV4cG9ydCAoaW1tdXRhYmxlKSAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wibXVsdGlQb2ludFwiXSA9IG11bHRpUG9pbnQ7XG4vKiBoYXJtb255IGV4cG9ydCAoaW1tdXRhYmxlKSAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wibXVsdGlQb2x5Z29uXCJdID0gbXVsdGlQb2x5Z29uO1xuLyogaGFybW9ueSBleHBvcnQgKGltbXV0YWJsZSkgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImdlb21ldHJ5Q29sbGVjdGlvblwiXSA9IGdlb21ldHJ5Q29sbGVjdGlvbjtcbi8qIGhhcm1vbnkgZXhwb3J0IChpbW11dGFibGUpICovIF9fd2VicGFja19leHBvcnRzX19bXCJyb3VuZFwiXSA9IHJvdW5kO1xuLyogaGFybW9ueSBleHBvcnQgKGltbXV0YWJsZSkgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcInJhZGlhbnNUb0Rpc3RhbmNlXCJdID0gcmFkaWFuc1RvRGlzdGFuY2U7XG4vKiBoYXJtb255IGV4cG9ydCAoaW1tdXRhYmxlKSAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGlzdGFuY2VUb1JhZGlhbnNcIl0gPSBkaXN0YW5jZVRvUmFkaWFucztcbi8qIGhhcm1vbnkgZXhwb3J0IChpbW11dGFibGUpICovIF9fd2VicGFja19leHBvcnRzX19bXCJkaXN0YW5jZVRvRGVncmVlc1wiXSA9IGRpc3RhbmNlVG9EZWdyZWVzO1xuLyogaGFybW9ueSBleHBvcnQgKGltbXV0YWJsZSkgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImJlYXJpbmdUb0FuZ2xlXCJdID0gYmVhcmluZ1RvQW5nbGU7XG4vKiBoYXJtb255IGV4cG9ydCAoaW1tdXRhYmxlKSAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wicmFkaWFuczJkZWdyZWVzXCJdID0gcmFkaWFuczJkZWdyZWVzO1xuLyogaGFybW9ueSBleHBvcnQgKGltbXV0YWJsZSkgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZ3JlZXMycmFkaWFuc1wiXSA9IGRlZ3JlZXMycmFkaWFucztcbi8qIGhhcm1vbnkgZXhwb3J0IChpbW11dGFibGUpICovIF9fd2VicGFja19leHBvcnRzX19bXCJjb252ZXJ0RGlzdGFuY2VcIl0gPSBjb252ZXJ0RGlzdGFuY2U7XG4vKiBoYXJtb255IGV4cG9ydCAoaW1tdXRhYmxlKSAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiY29udmVydEFyZWFcIl0gPSBjb252ZXJ0QXJlYTtcbi8qIGhhcm1vbnkgZXhwb3J0IChpbW11dGFibGUpICovIF9fd2VicGFja19leHBvcnRzX19bXCJpc051bWJlclwiXSA9IGlzTnVtYmVyO1xuLyogaGFybW9ueSBleHBvcnQgKGltbXV0YWJsZSkgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImlzT2JqZWN0XCJdID0gaXNPYmplY3Q7XG4vKipcbiAqIEVhcnRoIFJhZGl1cyB1c2VkIHdpdGggdGhlIEhhcnZlc2luZSBmb3JtdWxhIGFuZCBhcHByb3hpbWF0ZXMgdXNpbmcgYSBzcGhlcmljYWwgKG5vbi1lbGxpcHNvaWQpIEVhcnRoLlxuICovXG52YXIgZWFydGhSYWRpdXMgPSA2MzcxMDA4Ljg7XG5cbi8qKlxuICogVW5pdCBvZiBtZWFzdXJlbWVudCBmYWN0b3JzIHVzaW5nIGEgc3BoZXJpY2FsIChub24tZWxsaXBzb2lkKSBlYXJ0aCByYWRpdXMuXG4gKi9cbnZhciBmYWN0b3JzID0ge1xuICAgIG1ldGVyczogZWFydGhSYWRpdXMsXG4gICAgbWV0cmVzOiBlYXJ0aFJhZGl1cyxcbiAgICBtaWxsaW1ldGVyczogZWFydGhSYWRpdXMgKiAxMDAwLFxuICAgIG1pbGxpbWV0cmVzOiBlYXJ0aFJhZGl1cyAqIDEwMDAsXG4gICAgY2VudGltZXRlcnM6IGVhcnRoUmFkaXVzICogMTAwLFxuICAgIGNlbnRpbWV0cmVzOiBlYXJ0aFJhZGl1cyAqIDEwMCxcbiAgICBraWxvbWV0ZXJzOiBlYXJ0aFJhZGl1cyAvIDEwMDAsXG4gICAga2lsb21ldHJlczogZWFydGhSYWRpdXMgLyAxMDAwLFxuICAgIG1pbGVzOiBlYXJ0aFJhZGl1cyAvIDE2MDkuMzQ0LFxuICAgIG5hdXRpY2FsbWlsZXM6IGVhcnRoUmFkaXVzIC8gMTg1MixcbiAgICBpbmNoZXM6IGVhcnRoUmFkaXVzICogMzkuMzcwLFxuICAgIHlhcmRzOiBlYXJ0aFJhZGl1cyAvIDEuMDkzNixcbiAgICBmZWV0OiBlYXJ0aFJhZGl1cyAqIDMuMjgwODQsXG4gICAgcmFkaWFuczogMSxcbiAgICBkZWdyZWVzOiBlYXJ0aFJhZGl1cyAvIDExMTMyNSxcbn07XG5cbi8qKlxuICogVW5pdHMgb2YgbWVhc3VyZW1lbnQgZmFjdG9ycyBiYXNlZCBvbiAxIG1ldGVyLlxuICovXG52YXIgdW5pdHNGYWN0b3JzID0ge1xuICAgIG1ldGVyczogMSxcbiAgICBtZXRyZXM6IDEsXG4gICAgbWlsbGltZXRlcnM6IDEwMDAsXG4gICAgbWlsbGltZXRyZXM6IDEwMDAsXG4gICAgY2VudGltZXRlcnM6IDEwMCxcbiAgICBjZW50aW1ldHJlczogMTAwLFxuICAgIGtpbG9tZXRlcnM6IDEgLyAxMDAwLFxuICAgIGtpbG9tZXRyZXM6IDEgLyAxMDAwLFxuICAgIG1pbGVzOiAxIC8gMTYwOS4zNDQsXG4gICAgbmF1dGljYWxtaWxlczogMSAvIDE4NTIsXG4gICAgaW5jaGVzOiAzOS4zNzAsXG4gICAgeWFyZHM6IDEgLyAxLjA5MzYsXG4gICAgZmVldDogMy4yODA4NCxcbiAgICByYWRpYW5zOiAxIC8gZWFydGhSYWRpdXMsXG4gICAgZGVncmVlczogMSAvIDExMTMyNSxcbn07XG5cbi8qKlxuICogQXJlYSBvZiBtZWFzdXJlbWVudCBmYWN0b3JzIGJhc2VkIG9uIDEgc3F1YXJlIG1ldGVyLlxuICovXG52YXIgYXJlYUZhY3RvcnMgPSB7XG4gICAgbWV0ZXJzOiAxLFxuICAgIG1ldHJlczogMSxcbiAgICBtaWxsaW1ldGVyczogMTAwMDAwMCxcbiAgICBtaWxsaW1ldHJlczogMTAwMDAwMCxcbiAgICBjZW50aW1ldGVyczogMTAwMDAsXG4gICAgY2VudGltZXRyZXM6IDEwMDAwLFxuICAgIGtpbG9tZXRlcnM6IDAuMDAwMDAxLFxuICAgIGtpbG9tZXRyZXM6IDAuMDAwMDAxLFxuICAgIGFjcmVzOiAwLjAwMDI0NzEwNSxcbiAgICBtaWxlczogMy44NmUtNyxcbiAgICB5YXJkczogMS4xOTU5OTAwNDYsXG4gICAgZmVldDogMTAuNzYzOTEwNDE3LFxuICAgIGluY2hlczogMTU1MC4wMDMxMDAwMDZcbn07XG5cbi8qKlxuICogV3JhcHMgYSBHZW9KU09OIHtAbGluayBHZW9tZXRyeX0gaW4gYSBHZW9KU09OIHtAbGluayBGZWF0dXJlfS5cbiAqXG4gKiBAbmFtZSBmZWF0dXJlXG4gKiBAcGFyYW0ge0dlb21ldHJ5fSBnZW9tZXRyeSBpbnB1dCBnZW9tZXRyeVxuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmV9IGEgR2VvSlNPTiBGZWF0dXJlXG4gKiBAZXhhbXBsZVxuICogdmFyIGdlb21ldHJ5ID0ge1xuICogICBcInR5cGVcIjogXCJQb2ludFwiLFxuICogICBcImNvb3JkaW5hdGVzXCI6IFsxMTAsIDUwXVxuICogfTtcbiAqXG4gKiB2YXIgZmVhdHVyZSA9IHR1cmYuZmVhdHVyZShnZW9tZXRyeSk7XG4gKlxuICogLy89ZmVhdHVyZVxuICovXG5mdW5jdGlvbiBmZWF0dXJlKGdlb21ldHJ5LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmIChnZW9tZXRyeSA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ2dlb21ldHJ5IGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKHByb3BlcnRpZXMgJiYgcHJvcGVydGllcy5jb25zdHJ1Y3RvciAhPT0gT2JqZWN0KSB0aHJvdyBuZXcgRXJyb3IoJ3Byb3BlcnRpZXMgbXVzdCBiZSBhbiBPYmplY3QnKTtcbiAgICBpZiAoYmJveCAmJiBiYm94Lmxlbmd0aCAhPT0gNCkgdGhyb3cgbmV3IEVycm9yKCdiYm94IG11c3QgYmUgYW4gQXJyYXkgb2YgNCBudW1iZXJzJyk7XG4gICAgaWYgKGlkICYmIFsnc3RyaW5nJywgJ251bWJlciddLmluZGV4T2YodHlwZW9mIGlkKSA9PT0gLTEpIHRocm93IG5ldyBFcnJvcignaWQgbXVzdCBiZSBhIG51bWJlciBvciBhIHN0cmluZycpO1xuXG4gICAgdmFyIGZlYXQgPSB7dHlwZTogJ0ZlYXR1cmUnfTtcbiAgICBpZiAoaWQpIGZlYXQuaWQgPSBpZDtcbiAgICBpZiAoYmJveCkgZmVhdC5iYm94ID0gYmJveDtcbiAgICBmZWF0LnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IHt9O1xuICAgIGZlYXQuZ2VvbWV0cnkgPSBnZW9tZXRyeTtcbiAgICByZXR1cm4gZmVhdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgR2VvSlNPTiB7QGxpbmsgR2VvbWV0cnl9IGZyb20gYSBHZW9tZXRyeSBzdHJpbmcgdHlwZSAmIGNvb3JkaW5hdGVzLlxuICogRm9yIEdlb21ldHJ5Q29sbGVjdGlvbiB0eXBlIHVzZSBgaGVscGVycy5nZW9tZXRyeUNvbGxlY3Rpb25gXG4gKlxuICogQG5hbWUgZ2VvbWV0cnlcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEdlb21ldHJ5IFR5cGVcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEByZXR1cm5zIHtHZW9tZXRyeX0gYSBHZW9KU09OIEdlb21ldHJ5XG4gKiBAZXhhbXBsZVxuICogdmFyIHR5cGUgPSAnUG9pbnQnO1xuICogdmFyIGNvb3JkaW5hdGVzID0gWzExMCwgNTBdO1xuICpcbiAqIHZhciBnZW9tZXRyeSA9IHR1cmYuZ2VvbWV0cnkodHlwZSwgY29vcmRpbmF0ZXMpO1xuICpcbiAqIC8vPWdlb21ldHJ5XG4gKi9cbmZ1bmN0aW9uIGdlb21ldHJ5KHR5cGUsIGNvb3JkaW5hdGVzLCBiYm94KSB7XG4gICAgLy8gVmFsaWRhdGlvblxuICAgIGlmICghdHlwZSkgdGhyb3cgbmV3IEVycm9yKCd0eXBlIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShjb29yZGluYXRlcykpIHRocm93IG5ldyBFcnJvcignY29vcmRpbmF0ZXMgbXVzdCBiZSBhbiBBcnJheScpO1xuICAgIGlmIChiYm94ICYmIGJib3gubGVuZ3RoICE9PSA0KSB0aHJvdyBuZXcgRXJyb3IoJ2Jib3ggbXVzdCBiZSBhbiBBcnJheSBvZiA0IG51bWJlcnMnKTtcblxuICAgIHZhciBnZW9tO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ1BvaW50JzogZ2VvbSA9IHBvaW50KGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgY2FzZSAnTGluZVN0cmluZyc6IGdlb20gPSBsaW5lU3RyaW5nKGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgY2FzZSAnUG9seWdvbic6IGdlb20gPSBwb2x5Z29uKGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgY2FzZSAnTXVsdGlQb2ludCc6IGdlb20gPSBtdWx0aVBvaW50KGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgY2FzZSAnTXVsdGlMaW5lU3RyaW5nJzogZ2VvbSA9IG11bHRpTGluZVN0cmluZyhjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGNhc2UgJ011bHRpUG9seWdvbic6IGdlb20gPSBtdWx0aVBvbHlnb24oY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IodHlwZSArICcgaXMgaW52YWxpZCcpO1xuICAgIH1cbiAgICBpZiAoYmJveCkgZ2VvbS5iYm94ID0gYmJveDtcbiAgICByZXR1cm4gZ2VvbTtcbn1cblxuLyoqXG4gKiBUYWtlcyBjb29yZGluYXRlcyBhbmQgcHJvcGVydGllcyAob3B0aW9uYWwpIGFuZCByZXR1cm5zIGEgbmV3IHtAbGluayBQb2ludH0gZmVhdHVyZS5cbiAqXG4gKiBAbmFtZSBwb2ludFxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlcyBsb25naXR1ZGUsIGxhdGl0dWRlIHBvc2l0aW9uIChlYWNoIGluIGRlY2ltYWwgZGVncmVlcylcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPFBvaW50Pn0gYSBQb2ludCBmZWF0dXJlXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvaW50ID0gdHVyZi5wb2ludChbLTc1LjM0MywgMzkuOTg0XSk7XG4gKlxuICogLy89cG9pbnRcbiAqL1xuZnVuY3Rpb24gcG9pbnQoY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcbiAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBiZSBhbiBhcnJheScpO1xuICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPCAyKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgYmUgYXQgbGVhc3QgMiBudW1iZXJzIGxvbmcnKTtcbiAgICBpZiAoIWlzTnVtYmVyKGNvb3JkaW5hdGVzWzBdKSB8fCAhaXNOdW1iZXIoY29vcmRpbmF0ZXNbMV0pKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgY29udGFpbiBudW1iZXJzJyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdQb2ludCcsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBUYWtlcyBhbiBhcnJheSBvZiBMaW5lYXJSaW5ncyBhbmQgb3B0aW9uYWxseSBhbiB7QGxpbmsgT2JqZWN0fSB3aXRoIHByb3BlcnRpZXMgYW5kIHJldHVybnMgYSB7QGxpbmsgUG9seWdvbn0gZmVhdHVyZS5cbiAqXG4gKiBAbmFtZSBwb2x5Z29uXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PEFycmF5PG51bWJlcj4+Pn0gY29vcmRpbmF0ZXMgYW4gYXJyYXkgb2YgTGluZWFyUmluZ3NcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPFBvbHlnb24+fSBhIFBvbHlnb24gZmVhdHVyZVxuICogQHRocm93cyB7RXJyb3J9IHRocm93IGFuIGVycm9yIGlmIGEgTGluZWFyUmluZyBvZiB0aGUgcG9seWdvbiBoYXMgdG9vIGZldyBwb3NpdGlvbnNcbiAqIG9yIGlmIGEgTGluZWFyUmluZyBvZiB0aGUgUG9seWdvbiBkb2VzIG5vdCBoYXZlIG1hdGNoaW5nIFBvc2l0aW9ucyBhdCB0aGUgYmVnaW5uaW5nICYgZW5kLlxuICogQGV4YW1wbGVcbiAqIHZhciBwb2x5Z29uID0gdHVyZi5wb2x5Z29uKFtbXG4gKiAgIFstMi4yNzU1NDMsIDUzLjQ2NDU0N10sXG4gKiAgIFstMi4yNzU1NDMsIDUzLjQ4OTI3MV0sXG4gKiAgIFstMi4yMTUxMTgsIDUzLjQ4OTI3MV0sXG4gKiAgIFstMi4yMTUxMTgsIDUzLjQ2NDU0N10sXG4gKiAgIFstMi4yNzU1NDMsIDUzLjQ2NDU0N11cbiAqIF1dLCB7IG5hbWU6ICdwb2x5MScsIHBvcHVsYXRpb246IDQwMH0pO1xuICpcbiAqIC8vPXBvbHlnb25cbiAqL1xuZnVuY3Rpb24gcG9seWdvbihjb29yZGluYXRlcywgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvb3JkaW5hdGVzIHBhc3NlZCcpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29yZGluYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmluZyA9IGNvb3JkaW5hdGVzW2ldO1xuICAgICAgICBpZiAocmluZy5sZW5ndGggPCA0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VhY2ggTGluZWFyUmluZyBvZiBhIFBvbHlnb24gbXVzdCBoYXZlIDQgb3IgbW9yZSBQb3NpdGlvbnMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByaW5nW3JpbmcubGVuZ3RoIC0gMV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGZpcnN0IHBvaW50IG9mIFBvbHlnb24gY29udGFpbnMgdHdvIG51bWJlcnNcbiAgICAgICAgICAgIGlmIChpID09PSAwICYmIGogPT09IDAgJiYgIWlzTnVtYmVyKHJpbmdbMF1bMF0pIHx8ICFpc051bWJlcihyaW5nWzBdWzFdKSkgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGNvbnRhaW4gbnVtYmVycycpO1xuICAgICAgICAgICAgaWYgKHJpbmdbcmluZy5sZW5ndGggLSAxXVtqXSAhPT0gcmluZ1swXVtqXSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmlyc3QgYW5kIGxhc3QgUG9zaXRpb24gYXJlIG5vdCBlcXVpdmFsZW50LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnUG9seWdvbicsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIExpbmVTdHJpbmd9IGJhc2VkIG9uIGFcbiAqIGNvb3JkaW5hdGUgYXJyYXkuIFByb3BlcnRpZXMgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHkuXG4gKlxuICogQG5hbWUgbGluZVN0cmluZ1xuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gY29vcmRpbmF0ZXMgYW4gYXJyYXkgb2YgUG9zaXRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxMaW5lU3RyaW5nPn0gYSBMaW5lU3RyaW5nIGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBubyBjb29yZGluYXRlcyBhcmUgcGFzc2VkXG4gKiBAZXhhbXBsZVxuICogdmFyIGxpbmVzdHJpbmcxID0gdHVyZi5saW5lU3RyaW5nKFtcbiAqICAgWy0yMS45NjQ0MTYsIDY0LjE0ODIwM10sXG4gKiAgIFstMjEuOTU2MTc2LCA2NC4xNDEzMTZdLFxuICogICBbLTIxLjkzOTAxLCA2NC4xMzU5MjRdLFxuICogICBbLTIxLjkyNzMzNywgNjQuMTM2NjczXVxuICogXSk7XG4gKiB2YXIgbGluZXN0cmluZzIgPSB0dXJmLmxpbmVTdHJpbmcoW1xuICogICBbLTIxLjkyOTA1NCwgNjQuMTI3OTg1XSxcbiAqICAgWy0yMS45MTI5MTgsIDY0LjEzNDcyNl0sXG4gKiAgIFstMjEuOTE2MDA3LCA2NC4xNDEwMTZdLFxuICogICBbLTIxLjkzMDA4NCwgNjQuMTQ0NDZdXG4gKiBdLCB7bmFtZTogJ2xpbmUgMScsIGRpc3RhbmNlOiAxNDV9KTtcbiAqXG4gKiAvLz1saW5lc3RyaW5nMVxuICpcbiAqIC8vPWxpbmVzdHJpbmcyXG4gKi9cbmZ1bmN0aW9uIGxpbmVTdHJpbmcoY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcbiAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoIDwgMikgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGJlIGFuIGFycmF5IG9mIHR3byBvciBtb3JlIHBvc2l0aW9ucycpO1xuICAgIC8vIENoZWNrIGlmIGZpcnN0IHBvaW50IG9mIExpbmVTdHJpbmcgY29udGFpbnMgdHdvIG51bWJlcnNcbiAgICBpZiAoIWlzTnVtYmVyKGNvb3JkaW5hdGVzWzBdWzFdKSB8fCAhaXNOdW1iZXIoY29vcmRpbmF0ZXNbMF1bMV0pKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgY29udGFpbiBudW1iZXJzJyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdMaW5lU3RyaW5nJyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIFRha2VzIG9uZSBvciBtb3JlIHtAbGluayBGZWF0dXJlfEZlYXR1cmVzfSBhbmQgY3JlYXRlcyBhIHtAbGluayBGZWF0dXJlQ29sbGVjdGlvbn0uXG4gKlxuICogQG5hbWUgZmVhdHVyZUNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7RmVhdHVyZVtdfSBmZWF0dXJlcyBpbnB1dCBmZWF0dXJlc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlQ29sbGVjdGlvbn0gYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiBpbnB1dCBmZWF0dXJlc1xuICogQGV4YW1wbGVcbiAqIHZhciBmZWF0dXJlcyA9IFtcbiAqICB0dXJmLnBvaW50KFstNzUuMzQzLCAzOS45ODRdLCB7bmFtZTogJ0xvY2F0aW9uIEEnfSksXG4gKiAgdHVyZi5wb2ludChbLTc1LjgzMywgMzkuMjg0XSwge25hbWU6ICdMb2NhdGlvbiBCJ30pLFxuICogIHR1cmYucG9pbnQoWy03NS41MzQsIDM5LjEyM10sIHtuYW1lOiAnTG9jYXRpb24gQyd9KVxuICogXTtcbiAqXG4gKiB2YXIgY29sbGVjdGlvbiA9IHR1cmYuZmVhdHVyZUNvbGxlY3Rpb24oZmVhdHVyZXMpO1xuICpcbiAqIC8vPWNvbGxlY3Rpb25cbiAqL1xuZnVuY3Rpb24gZmVhdHVyZUNvbGxlY3Rpb24oZmVhdHVyZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFmZWF0dXJlcykgdGhyb3cgbmV3IEVycm9yKCdObyBmZWF0dXJlcyBwYXNzZWQnKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZmVhdHVyZXMpKSB0aHJvdyBuZXcgRXJyb3IoJ2ZlYXR1cmVzIG11c3QgYmUgYW4gQXJyYXknKTtcbiAgICBpZiAoYmJveCAmJiBiYm94Lmxlbmd0aCAhPT0gNCkgdGhyb3cgbmV3IEVycm9yKCdiYm94IG11c3QgYmUgYW4gQXJyYXkgb2YgNCBudW1iZXJzJyk7XG4gICAgaWYgKGlkICYmIFsnc3RyaW5nJywgJ251bWJlciddLmluZGV4T2YodHlwZW9mIGlkKSA9PT0gLTEpIHRocm93IG5ldyBFcnJvcignaWQgbXVzdCBiZSBhIG51bWJlciBvciBhIHN0cmluZycpO1xuXG4gICAgdmFyIGZjID0ge3R5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbid9O1xuICAgIGlmIChpZCkgZmMuaWQgPSBpZDtcbiAgICBpZiAoYmJveCkgZmMuYmJveCA9IGJib3g7XG4gICAgZmMuZmVhdHVyZXMgPSBmZWF0dXJlcztcbiAgICByZXR1cm4gZmM7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBGZWF0dXJlPE11bHRpTGluZVN0cmluZz59IGJhc2VkIG9uIGFcbiAqIGNvb3JkaW5hdGUgYXJyYXkuIFByb3BlcnRpZXMgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHkuXG4gKlxuICogQG5hbWUgbXVsdGlMaW5lU3RyaW5nXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PEFycmF5PG51bWJlcj4+Pn0gY29vcmRpbmF0ZXMgYW4gYXJyYXkgb2YgTGluZVN0cmluZ3NcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPE11bHRpTGluZVN0cmluZz59IGEgTXVsdGlMaW5lU3RyaW5nIGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBubyBjb29yZGluYXRlcyBhcmUgcGFzc2VkXG4gKiBAZXhhbXBsZVxuICogdmFyIG11bHRpTGluZSA9IHR1cmYubXVsdGlMaW5lU3RyaW5nKFtbWzAsMF0sWzEwLDEwXV1dKTtcbiAqXG4gKiAvLz1tdWx0aUxpbmVcbiAqL1xuZnVuY3Rpb24gbXVsdGlMaW5lU3RyaW5nKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdNdWx0aUxpbmVTdHJpbmcnLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBGZWF0dXJlPE11bHRpUG9pbnQ+fSBiYXNlZCBvbiBhXG4gKiBjb29yZGluYXRlIGFycmF5LiBQcm9wZXJ0aWVzIGNhbiBiZSBhZGRlZCBvcHRpb25hbGx5LlxuICpcbiAqIEBuYW1lIG11bHRpUG9pbnRcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIFBvc2l0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8TXVsdGlQb2ludD59IGEgTXVsdGlQb2ludCBmZWF0dXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgbm8gY29vcmRpbmF0ZXMgYXJlIHBhc3NlZFxuICogQGV4YW1wbGVcbiAqIHZhciBtdWx0aVB0ID0gdHVyZi5tdWx0aVBvaW50KFtbMCwwXSxbMTAsMTBdXSk7XG4gKlxuICogLy89bXVsdGlQdFxuICovXG5mdW5jdGlvbiBtdWx0aVBvaW50KGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdNdWx0aVBvaW50JyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgRmVhdHVyZTxNdWx0aVBvbHlnb24+fSBiYXNlZCBvbiBhXG4gKiBjb29yZGluYXRlIGFycmF5LiBQcm9wZXJ0aWVzIGNhbiBiZSBhZGRlZCBvcHRpb25hbGx5LlxuICpcbiAqIEBuYW1lIG11bHRpUG9seWdvblxuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxBcnJheTxudW1iZXI+Pj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBQb2x5Z29uc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8TXVsdGlQb2x5Z29uPn0gYSBtdWx0aXBvbHlnb24gZmVhdHVyZVxuICogQHRocm93cyB7RXJyb3J9IGlmIG5vIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWRcbiAqIEBleGFtcGxlXG4gKiB2YXIgbXVsdGlQb2x5ID0gdHVyZi5tdWx0aVBvbHlnb24oW1tbWzAsMF0sWzAsMTBdLFsxMCwxMF0sWzEwLDBdLFswLDBdXV1dKTtcbiAqXG4gKiAvLz1tdWx0aVBvbHlcbiAqXG4gKi9cbmZ1bmN0aW9uIG11bHRpUG9seWdvbihjb29yZGluYXRlcywgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvb3JkaW5hdGVzIHBhc3NlZCcpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnTXVsdGlQb2x5Z29uJyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgRmVhdHVyZTxHZW9tZXRyeUNvbGxlY3Rpb24+fSBiYXNlZCBvbiBhXG4gKiBjb29yZGluYXRlIGFycmF5LiBQcm9wZXJ0aWVzIGNhbiBiZSBhZGRlZCBvcHRpb25hbGx5LlxuICpcbiAqIEBuYW1lIGdlb21ldHJ5Q29sbGVjdGlvblxuICogQHBhcmFtIHtBcnJheTxHZW9tZXRyeT59IGdlb21ldHJpZXMgYW4gYXJyYXkgb2YgR2VvSlNPTiBHZW9tZXRyaWVzXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxHZW9tZXRyeUNvbGxlY3Rpb24+fSBhIEdlb0pTT04gR2VvbWV0cnlDb2xsZWN0aW9uIEZlYXR1cmVcbiAqIEBleGFtcGxlXG4gKiB2YXIgcHQgPSB7XG4gKiAgICAgXCJ0eXBlXCI6IFwiUG9pbnRcIixcbiAqICAgICAgIFwiY29vcmRpbmF0ZXNcIjogWzEwMCwgMF1cbiAqICAgICB9O1xuICogdmFyIGxpbmUgPSB7XG4gKiAgICAgXCJ0eXBlXCI6IFwiTGluZVN0cmluZ1wiLFxuICogICAgIFwiY29vcmRpbmF0ZXNcIjogWyBbMTAxLCAwXSwgWzEwMiwgMV0gXVxuICogICB9O1xuICogdmFyIGNvbGxlY3Rpb24gPSB0dXJmLmdlb21ldHJ5Q29sbGVjdGlvbihbcHQsIGxpbmVdKTtcbiAqXG4gKiAvLz1jb2xsZWN0aW9uXG4gKi9cbmZ1bmN0aW9uIGdlb21ldHJ5Q29sbGVjdGlvbihnZW9tZXRyaWVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghZ2VvbWV0cmllcykgdGhyb3cgbmV3IEVycm9yKCdnZW9tZXRyaWVzIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGdlb21ldHJpZXMpKSB0aHJvdyBuZXcgRXJyb3IoJ2dlb21ldHJpZXMgbXVzdCBiZSBhbiBBcnJheScpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnR2VvbWV0cnlDb2xsZWN0aW9uJyxcbiAgICAgICAgZ2VvbWV0cmllczogZ2VvbWV0cmllc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBSb3VuZCBudW1iZXIgdG8gcHJlY2lzaW9uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG51bSBOdW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbcHJlY2lzaW9uPTBdIFByZWNpc2lvblxuICogQHJldHVybnMge251bWJlcn0gcm91bmRlZCBudW1iZXJcbiAqIEBleGFtcGxlXG4gKiB0dXJmLnJvdW5kKDEyMC40MzIxKVxuICogLy89MTIwXG4gKlxuICogdHVyZi5yb3VuZCgxMjAuNDMyMSwgMilcbiAqIC8vPTEyMC40M1xuICovXG5mdW5jdGlvbiByb3VuZChudW0sIHByZWNpc2lvbikge1xuICAgIGlmIChudW0gPT09IHVuZGVmaW5lZCB8fCBudW0gPT09IG51bGwgfHwgaXNOYU4obnVtKSkgdGhyb3cgbmV3IEVycm9yKCdudW0gaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAocHJlY2lzaW9uICYmICEocHJlY2lzaW9uID49IDApKSB0aHJvdyBuZXcgRXJyb3IoJ3ByZWNpc2lvbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gICAgdmFyIG11bHRpcGxpZXIgPSBNYXRoLnBvdygxMCwgcHJlY2lzaW9uIHx8IDApO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG51bSAqIG11bHRpcGxpZXIpIC8gbXVsdGlwbGllcjtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgZGlzdGFuY2UgbWVhc3VyZW1lbnQgKGFzc3VtaW5nIGEgc3BoZXJpY2FsIEVhcnRoKSBmcm9tIHJhZGlhbnMgdG8gYSBtb3JlIGZyaWVuZGx5IHVuaXQuXG4gKiBWYWxpZCB1bml0czogbWlsZXMsIG5hdXRpY2FsbWlsZXMsIGluY2hlcywgeWFyZHMsIG1ldGVycywgbWV0cmVzLCBraWxvbWV0ZXJzLCBjZW50aW1ldGVycywgZmVldFxuICpcbiAqIEBuYW1lIHJhZGlhbnNUb0Rpc3RhbmNlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaWFucyBpbiByYWRpYW5zIGFjcm9zcyB0aGUgc3BoZXJlXG4gKiBAcGFyYW0ge3N0cmluZ30gW3VuaXRzPSdraWxvbWV0ZXJzJ10gY2FuIGJlIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzIGluY2hlcywgeWFyZHMsIG1ldHJlcywgbWV0ZXJzLCBraWxvbWV0cmVzLCBraWxvbWV0ZXJzLlxuICogQHJldHVybnMge251bWJlcn0gZGlzdGFuY2VcbiAqL1xuZnVuY3Rpb24gcmFkaWFuc1RvRGlzdGFuY2UocmFkaWFucywgdW5pdHMpIHtcbiAgICBpZiAocmFkaWFucyA9PT0gdW5kZWZpbmVkIHx8IHJhZGlhbnMgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcigncmFkaWFucyBpcyByZXF1aXJlZCcpO1xuXG4gICAgaWYgKHVuaXRzICYmIHR5cGVvZiB1bml0cyAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcigndW5pdHMgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgIHZhciBmYWN0b3IgPSBmYWN0b3JzW3VuaXRzIHx8ICdraWxvbWV0ZXJzJ107XG4gICAgaWYgKCFmYWN0b3IpIHRocm93IG5ldyBFcnJvcih1bml0cyArICcgdW5pdHMgaXMgaW52YWxpZCcpO1xuICAgIHJldHVybiByYWRpYW5zICogZmFjdG9yO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSBkaXN0YW5jZSBtZWFzdXJlbWVudCAoYXNzdW1pbmcgYSBzcGhlcmljYWwgRWFydGgpIGZyb20gYSByZWFsLXdvcmxkIHVuaXQgaW50byByYWRpYW5zXG4gKiBWYWxpZCB1bml0czogbWlsZXMsIG5hdXRpY2FsbWlsZXMsIGluY2hlcywgeWFyZHMsIG1ldGVycywgbWV0cmVzLCBraWxvbWV0ZXJzLCBjZW50aW1ldGVycywgZmVldFxuICpcbiAqIEBuYW1lIGRpc3RhbmNlVG9SYWRpYW5zXG4gKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2UgaW4gcmVhbCB1bml0c1xuICogQHBhcmFtIHtzdHJpbmd9IFt1bml0cz0na2lsb21ldGVycyddIGNhbiBiZSBkZWdyZWVzLCByYWRpYW5zLCBtaWxlcywgb3Iga2lsb21ldGVycyBpbmNoZXMsIHlhcmRzLCBtZXRyZXMsIG1ldGVycywga2lsb21ldHJlcywga2lsb21ldGVycy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IHJhZGlhbnNcbiAqL1xuZnVuY3Rpb24gZGlzdGFuY2VUb1JhZGlhbnMoZGlzdGFuY2UsIHVuaXRzKSB7XG4gICAgaWYgKGRpc3RhbmNlID09PSB1bmRlZmluZWQgfHwgZGlzdGFuY2UgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcignZGlzdGFuY2UgaXMgcmVxdWlyZWQnKTtcblxuICAgIGlmICh1bml0cyAmJiB0eXBlb2YgdW5pdHMgIT09ICdzdHJpbmcnKSB0aHJvdyBuZXcgRXJyb3IoJ3VuaXRzIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICB2YXIgZmFjdG9yID0gZmFjdG9yc1t1bml0cyB8fCAna2lsb21ldGVycyddO1xuICAgIGlmICghZmFjdG9yKSB0aHJvdyBuZXcgRXJyb3IodW5pdHMgKyAnIHVuaXRzIGlzIGludmFsaWQnKTtcbiAgICByZXR1cm4gZGlzdGFuY2UgLyBmYWN0b3I7XG59XG5cbi8qKlxuICogQ29udmVydCBhIGRpc3RhbmNlIG1lYXN1cmVtZW50IChhc3N1bWluZyBhIHNwaGVyaWNhbCBFYXJ0aCkgZnJvbSBhIHJlYWwtd29ybGQgdW5pdCBpbnRvIGRlZ3JlZXNcbiAqIFZhbGlkIHVuaXRzOiBtaWxlcywgbmF1dGljYWxtaWxlcywgaW5jaGVzLCB5YXJkcywgbWV0ZXJzLCBtZXRyZXMsIGNlbnRpbWV0ZXJzLCBraWxvbWV0cmVzLCBmZWV0XG4gKlxuICogQG5hbWUgZGlzdGFuY2VUb0RlZ3JlZXNcbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0YW5jZSBpbiByZWFsIHVuaXRzXG4gKiBAcGFyYW0ge3N0cmluZ30gW3VuaXRzPSdraWxvbWV0ZXJzJ10gY2FuIGJlIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzIGluY2hlcywgeWFyZHMsIG1ldHJlcywgbWV0ZXJzLCBraWxvbWV0cmVzLCBraWxvbWV0ZXJzLlxuICogQHJldHVybnMge251bWJlcn0gZGVncmVlc1xuICovXG5mdW5jdGlvbiBkaXN0YW5jZVRvRGVncmVlcyhkaXN0YW5jZSwgdW5pdHMpIHtcbiAgICByZXR1cm4gcmFkaWFuczJkZWdyZWVzKGRpc3RhbmNlVG9SYWRpYW5zKGRpc3RhbmNlLCB1bml0cykpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFueSBiZWFyaW5nIGFuZ2xlIGZyb20gdGhlIG5vcnRoIGxpbmUgZGlyZWN0aW9uIChwb3NpdGl2ZSBjbG9ja3dpc2UpXG4gKiBhbmQgcmV0dXJucyBhbiBhbmdsZSBiZXR3ZWVuIDAtMzYwIGRlZ3JlZXMgKHBvc2l0aXZlIGNsb2Nrd2lzZSksIDAgYmVpbmcgdGhlIG5vcnRoIGxpbmVcbiAqXG4gKiBAbmFtZSBiZWFyaW5nVG9BbmdsZVxuICogQHBhcmFtIHtudW1iZXJ9IGJlYXJpbmcgYW5nbGUsIGJldHdlZW4gLTE4MCBhbmQgKzE4MCBkZWdyZWVzXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBhbmdsZSBiZXR3ZWVuIDAgYW5kIDM2MCBkZWdyZWVzXG4gKi9cbmZ1bmN0aW9uIGJlYXJpbmdUb0FuZ2xlKGJlYXJpbmcpIHtcbiAgICBpZiAoYmVhcmluZyA9PT0gbnVsbCB8fCBiZWFyaW5nID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignYmVhcmluZyBpcyByZXF1aXJlZCcpO1xuXG4gICAgdmFyIGFuZ2xlID0gYmVhcmluZyAlIDM2MDtcbiAgICBpZiAoYW5nbGUgPCAwKSBhbmdsZSArPSAzNjA7XG4gICAgcmV0dXJuIGFuZ2xlO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFuZ2xlIGluIHJhZGlhbnMgdG8gZGVncmVlc1xuICpcbiAqIEBuYW1lIHJhZGlhbnMyZGVncmVlc1xuICogQHBhcmFtIHtudW1iZXJ9IHJhZGlhbnMgYW5nbGUgaW4gcmFkaWFuc1xuICogQHJldHVybnMge251bWJlcn0gZGVncmVlcyBiZXR3ZWVuIDAgYW5kIDM2MCBkZWdyZWVzXG4gKi9cbmZ1bmN0aW9uIHJhZGlhbnMyZGVncmVlcyhyYWRpYW5zKSB7XG4gICAgaWYgKHJhZGlhbnMgPT09IG51bGwgfHwgcmFkaWFucyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ3JhZGlhbnMgaXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciBkZWdyZWVzID0gcmFkaWFucyAlICgyICogTWF0aC5QSSk7XG4gICAgcmV0dXJuIGRlZ3JlZXMgKiAxODAgLyBNYXRoLlBJO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFuZ2xlIGluIGRlZ3JlZXMgdG8gcmFkaWFuc1xuICpcbiAqIEBuYW1lIGRlZ3JlZXMycmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGRlZ3JlZXMgYW5nbGUgYmV0d2VlbiAwIGFuZCAzNjAgZGVncmVlc1xuICogQHJldHVybnMge251bWJlcn0gYW5nbGUgaW4gcmFkaWFuc1xuICovXG5mdW5jdGlvbiBkZWdyZWVzMnJhZGlhbnMoZGVncmVlcykge1xuICAgIGlmIChkZWdyZWVzID09PSBudWxsIHx8IGRlZ3JlZXMgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdkZWdyZWVzIGlzIHJlcXVpcmVkJyk7XG5cbiAgICB2YXIgcmFkaWFucyA9IGRlZ3JlZXMgJSAzNjA7XG4gICAgcmV0dXJuIHJhZGlhbnMgKiBNYXRoLlBJIC8gMTgwO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgZGlzdGFuY2UgdG8gdGhlIHJlcXVlc3RlZCB1bml0LlxuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywga2lsb21ldGVycywgY2VudGltZXRlcnMsIGZlZXRcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2UgdG8gYmUgY29udmVydGVkXG4gKiBAcGFyYW0ge3N0cmluZ30gb3JpZ2luYWxVbml0IG9mIHRoZSBkaXN0YW5jZVxuICogQHBhcmFtIHtzdHJpbmd9IFtmaW5hbFVuaXQ9J2tpbG9tZXRlcnMnXSByZXR1cm5lZCB1bml0XG4gKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgY29udmVydGVkIGRpc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnREaXN0YW5jZShkaXN0YW5jZSwgb3JpZ2luYWxVbml0LCBmaW5hbFVuaXQpIHtcbiAgICBpZiAoZGlzdGFuY2UgPT09IG51bGwgfHwgZGlzdGFuY2UgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdkaXN0YW5jZSBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghKGRpc3RhbmNlID49IDApKSB0aHJvdyBuZXcgRXJyb3IoJ2Rpc3RhbmNlIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcblxuICAgIHZhciBjb252ZXJ0ZWREaXN0YW5jZSA9IHJhZGlhbnNUb0Rpc3RhbmNlKGRpc3RhbmNlVG9SYWRpYW5zKGRpc3RhbmNlLCBvcmlnaW5hbFVuaXQpLCBmaW5hbFVuaXQgfHwgJ2tpbG9tZXRlcnMnKTtcbiAgICByZXR1cm4gY29udmVydGVkRGlzdGFuY2U7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBhcmVhIHRvIHRoZSByZXF1ZXN0ZWQgdW5pdC5cbiAqIFZhbGlkIHVuaXRzOiBraWxvbWV0ZXJzLCBraWxvbWV0cmVzLCBtZXRlcnMsIG1ldHJlcywgY2VudGltZXRyZXMsIG1pbGxpbWV0ZXIsIGFjcmUsIG1pbGUsIHlhcmQsIGZvb3QsIGluY2hcbiAqIEBwYXJhbSB7bnVtYmVyfSBhcmVhIHRvIGJlIGNvbnZlcnRlZFxuICogQHBhcmFtIHtzdHJpbmd9IFtvcmlnaW5hbFVuaXQ9J21ldGVycyddIG9mIHRoZSBkaXN0YW5jZVxuICogQHBhcmFtIHtzdHJpbmd9IFtmaW5hbFVuaXQ9J2tpbG9tZXRlcnMnXSByZXR1cm5lZCB1bml0XG4gKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgY29udmVydGVkIGRpc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnRBcmVhKGFyZWEsIG9yaWdpbmFsVW5pdCwgZmluYWxVbml0KSB7XG4gICAgaWYgKGFyZWEgPT09IG51bGwgfHwgYXJlYSA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ2FyZWEgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIShhcmVhID49IDApKSB0aHJvdyBuZXcgRXJyb3IoJ2FyZWEgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuXG4gICAgdmFyIHN0YXJ0RmFjdG9yID0gYXJlYUZhY3RvcnNbb3JpZ2luYWxVbml0IHx8ICdtZXRlcnMnXTtcbiAgICBpZiAoIXN0YXJ0RmFjdG9yKSB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgb3JpZ2luYWwgdW5pdHMnKTtcblxuICAgIHZhciBmaW5hbEZhY3RvciA9IGFyZWFGYWN0b3JzW2ZpbmFsVW5pdCB8fCAna2lsb21ldGVycyddO1xuICAgIGlmICghZmluYWxGYWN0b3IpIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBmaW5hbCB1bml0cycpO1xuXG4gICAgcmV0dXJuIChhcmVhIC8gc3RhcnRGYWN0b3IpICogZmluYWxGYWN0b3I7XG59XG5cbi8qKlxuICogaXNOdW1iZXJcbiAqXG4gKiBAcGFyYW0geyp9IG51bSBOdW1iZXIgdG8gdmFsaWRhdGVcbiAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlL2ZhbHNlXG4gKiBAZXhhbXBsZVxuICogdHVyZi5pc051bWJlcigxMjMpXG4gKiAvLz10cnVlXG4gKiB0dXJmLmlzTnVtYmVyKCdmb28nKVxuICogLy89ZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNOdW1iZXIobnVtKSB7XG4gICAgcmV0dXJuICFpc05hTihudW0pICYmIG51bSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShudW0pO1xufVxuXG4vKipcbiAqIGlzT2JqZWN0XG4gKlxuICogQHBhcmFtIHsqfSBpbnB1dCB2YXJpYWJsZSB0byB2YWxpZGF0ZVxuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUvZmFsc2VcbiAqIEBleGFtcGxlXG4gKiB0dXJmLmlzT2JqZWN0KHtlbGV2YXRpb246IDEwfSlcbiAqIC8vPXRydWVcbiAqIHR1cmYuaXNPYmplY3QoJ2ZvbycpXG4gKiAvLz1mYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdChpbnB1dCkge1xuICAgIHJldHVybiAoISFpbnB1dCkgJiYgKGlucHV0LmNvbnN0cnVjdG9yID09PSBPYmplY3QpO1xufVxuXG5cbi8qKiovIH0pLFxuLyogMzcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIGluc2lkZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpO1xudmFyIGZlYXR1cmVDb2xsZWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCkuZmVhdHVyZUNvbGxlY3Rpb247XG5cbi8qKlxuICogVGFrZXMgYSBzZXQgb2Yge0BsaW5rIFBvaW50fHBvaW50c30gYW5kIGEgc2V0IG9mIHtAbGluayBQb2x5Z29ufHBvbHlnb25zfSBhbmQgcmV0dXJucyB0aGUgcG9pbnRzIHRoYXQgZmFsbCB3aXRoaW4gdGhlIHBvbHlnb25zLlxuICpcbiAqIEBuYW1lIHdpdGhpblxuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbjxQb2ludD59IHBvaW50cyBpbnB1dCBwb2ludHNcbiAqIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb248UG9seWdvbj59IHBvbHlnb25zIGlucHV0IHBvbHlnb25zXG4gKiBAcmV0dXJucyB7RmVhdHVyZUNvbGxlY3Rpb248UG9pbnQ+fSBwb2ludHMgdGhhdCBsYW5kIHdpdGhpbiBhdCBsZWFzdCBvbmUgcG9seWdvblxuICogQGV4YW1wbGVcbiAqIHZhciBzZWFyY2hXaXRoaW4gPSB0dXJmLmZlYXR1cmVDb2xsZWN0aW9uKFtcbiAqICAgICB0dXJmLnBvbHlnb24oW1tcbiAqICAgICAgICAgWy00Ni42NTMsLTIzLjU0M10sXG4gKiAgICAgICAgIFstNDYuNjM0LC0yMy41MzQ2XSxcbiAqICAgICAgICAgWy00Ni42MTMsLTIzLjU0M10sXG4gKiAgICAgICAgIFstNDYuNjE0LC0yMy41NTldLFxuICogICAgICAgICBbLTQ2LjYzMSwtMjMuNTY3XSxcbiAqICAgICAgICAgWy00Ni42NTMsLTIzLjU2MF0sXG4gKiAgICAgICAgIFstNDYuNjUzLC0yMy41NDNdXG4gKiAgICAgXV0pXG4gKiBdKTtcbiAqIHZhciBwb2ludHMgPSB0dXJmLmZlYXR1cmVDb2xsZWN0aW9uKFtcbiAqICAgICB0dXJmLnBvaW50KFstNDYuNjMxOCwgLTIzLjU1MjNdKSxcbiAqICAgICB0dXJmLnBvaW50KFstNDYuNjI0NiwgLTIzLjUzMjVdKSxcbiAqICAgICB0dXJmLnBvaW50KFstNDYuNjA2MiwgLTIzLjU1MTNdKSxcbiAqICAgICB0dXJmLnBvaW50KFstNDYuNjYzLCAtMjMuNTU0XSksXG4gKiAgICAgdHVyZi5wb2ludChbLTQ2LjY0MywgLTIzLjU1N10pXG4gKiBdKTtcbiAqXG4gKiB2YXIgcHRzV2l0aGluID0gdHVyZi53aXRoaW4ocG9pbnRzLCBzZWFyY2hXaXRoaW4pO1xuICpcbiAqIC8vYWRkVG9NYXBcbiAqIHZhciBhZGRUb01hcCA9IFtwb2ludHMsIHNlYXJjaFdpdGhpbiwgcHRzV2l0aGluXVxuICogdHVyZi5mZWF0dXJlRWFjaChwdHNXaXRoaW4sIGZ1bmN0aW9uIChjdXJyZW50RmVhdHVyZSkge1xuICogICBjdXJyZW50RmVhdHVyZS5wcm9wZXJ0aWVzWydtYXJrZXItc2l6ZSddID0gJ2xhcmdlJztcbiAqICAgY3VycmVudEZlYXR1cmUucHJvcGVydGllc1snbWFya2VyLWNvbG9yJ10gPSAnIzAwMCc7XG4gKiB9KTtcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocG9pbnRzLCBwb2x5Z29ucykge1xuICAgIHZhciBwb2ludHNXaXRoaW4gPSBmZWF0dXJlQ29sbGVjdGlvbihbXSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2x5Z29ucy5mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHBvaW50cy5mZWF0dXJlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIGlzSW5zaWRlID0gaW5zaWRlKHBvaW50cy5mZWF0dXJlc1tqXSwgcG9seWdvbnMuZmVhdHVyZXNbaV0pO1xuICAgICAgICAgICAgaWYgKGlzSW5zaWRlKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRzV2l0aGluLmZlYXR1cmVzLnB1c2gocG9pbnRzLmZlYXR1cmVzW2pdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9pbnRzV2l0aGluO1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDM4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBpbnZhcmlhbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcbnZhciBnZXRDb29yZCA9IGludmFyaWFudC5nZXRDb29yZDtcbnZhciBnZXRDb29yZHMgPSBpbnZhcmlhbnQuZ2V0Q29vcmRzO1xuXG4vLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0V2ZW4lRTIlODAlOTNvZGRfcnVsZVxuLy8gbW9kaWZpZWQgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL3N1YnN0YWNrL3BvaW50LWluLXBvbHlnb24vYmxvYi9tYXN0ZXIvaW5kZXguanNcbi8vIHdoaWNoIHdhcyBtb2RpZmllZCBmcm9tIGh0dHA6Ly93d3cuZWNzZS5ycGkuZWR1L0hvbWVwYWdlcy93cmYvUmVzZWFyY2gvU2hvcnRfTm90ZXMvcG5wb2x5Lmh0bWxcblxuLyoqXG4gKiBUYWtlcyBhIHtAbGluayBQb2ludH0gYW5kIGEge0BsaW5rIFBvbHlnb259IG9yIHtAbGluayBNdWx0aVBvbHlnb259IGFuZCBkZXRlcm1pbmVzIGlmIHRoZSBwb2ludCByZXNpZGVzIGluc2lkZSB0aGUgcG9seWdvbi4gVGhlIHBvbHlnb24gY2FuXG4gKiBiZSBjb252ZXggb3IgY29uY2F2ZS4gVGhlIGZ1bmN0aW9uIGFjY291bnRzIGZvciBob2xlcy5cbiAqXG4gKiBAbmFtZSBpbnNpZGVcbiAqIEBwYXJhbSB7RmVhdHVyZTxQb2ludD59IHBvaW50IGlucHV0IHBvaW50XG4gKiBAcGFyYW0ge0ZlYXR1cmU8UG9seWdvbnxNdWx0aVBvbHlnb24+fSBwb2x5Z29uIGlucHV0IHBvbHlnb24gb3IgbXVsdGlwb2x5Z29uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpZ25vcmVCb3VuZGFyeT1mYWxzZV0gVHJ1ZSBpZiBwb2x5Z29uIGJvdW5kYXJ5IHNob3VsZCBiZSBpZ25vcmVkIHdoZW4gZGV0ZXJtaW5pbmcgaWYgdGhlIHBvaW50IGlzIGluc2lkZSB0aGUgcG9seWdvbiBvdGhlcndpc2UgZmFsc2UuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBQb2ludCBpcyBpbnNpZGUgdGhlIFBvbHlnb247IGBmYWxzZWAgaWYgdGhlIFBvaW50IGlzIG5vdCBpbnNpZGUgdGhlIFBvbHlnb25cbiAqIEBleGFtcGxlXG4gKiB2YXIgcHQgPSB0dXJmLnBvaW50KFstNzcsIDQ0XSk7XG4gKiB2YXIgcG9seSA9IHR1cmYucG9seWdvbihbW1xuICogICBbLTgxLCA0MV0sXG4gKiAgIFstODEsIDQ3XSxcbiAqICAgWy03MiwgNDddLFxuICogICBbLTcyLCA0MV0sXG4gKiAgIFstODEsIDQxXVxuICogXV0pO1xuICpcbiAqIHR1cmYuaW5zaWRlKHB0LCBwb2x5KTtcbiAqIC8vPSB0cnVlXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHBvaW50LCBwb2x5Z29uLCBpZ25vcmVCb3VuZGFyeSkge1xuICAgIC8vIHZhbGlkYXRpb25cbiAgICBpZiAoIXBvaW50KSB0aHJvdyBuZXcgRXJyb3IoJ3BvaW50IGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCFwb2x5Z29uKSB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlnb24gaXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciBwdCA9IGdldENvb3JkKHBvaW50KTtcbiAgICB2YXIgcG9seXMgPSBnZXRDb29yZHMocG9seWdvbik7XG4gICAgdmFyIHR5cGUgPSAocG9seWdvbi5nZW9tZXRyeSkgPyBwb2x5Z29uLmdlb21ldHJ5LnR5cGUgOiBwb2x5Z29uLnR5cGU7XG4gICAgdmFyIGJib3ggPSBwb2x5Z29uLmJib3g7XG5cbiAgICAvLyBRdWljayBlbGltaW5hdGlvbiBpZiBwb2ludCBpcyBub3QgaW5zaWRlIGJib3hcbiAgICBpZiAoYmJveCAmJiBpbkJCb3gocHQsIGJib3gpID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gbm9ybWFsaXplIHRvIG11bHRpcG9seWdvblxuICAgIGlmICh0eXBlID09PSAnUG9seWdvbicpIHBvbHlzID0gW3BvbHlzXTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBpbnNpZGVQb2x5ID0gZmFsc2U7IGkgPCBwb2x5cy5sZW5ndGggJiYgIWluc2lkZVBvbHk7IGkrKykge1xuICAgICAgICAvLyBjaGVjayBpZiBpdCBpcyBpbiB0aGUgb3V0ZXIgcmluZyBmaXJzdFxuICAgICAgICBpZiAoaW5SaW5nKHB0LCBwb2x5c1tpXVswXSwgaWdub3JlQm91bmRhcnkpKSB7XG4gICAgICAgICAgICB2YXIgaW5Ib2xlID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgayA9IDE7XG4gICAgICAgICAgICAvLyBjaGVjayBmb3IgdGhlIHBvaW50IGluIGFueSBvZiB0aGUgaG9sZXNcbiAgICAgICAgICAgIHdoaWxlIChrIDwgcG9seXNbaV0ubGVuZ3RoICYmICFpbkhvbGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5SaW5nKHB0LCBwb2x5c1tpXVtrXSwgIWlnbm9yZUJvdW5kYXJ5KSkge1xuICAgICAgICAgICAgICAgICAgICBpbkhvbGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBrKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWluSG9sZSkgaW5zaWRlUG9seSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGluc2lkZVBvbHk7XG59O1xuXG4vKipcbiAqIGluUmluZ1xuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge1tudW1iZXIsIG51bWJlcl19IHB0IFt4LHldXG4gKiBAcGFyYW0ge0FycmF5PFtudW1iZXIsIG51bWJlcl0+fSByaW5nIFtbeCx5XSwgW3gseV0sLi5dXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlnbm9yZUJvdW5kYXJ5IGlnbm9yZUJvdW5kYXJ5XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gaW5SaW5nXG4gKi9cbmZ1bmN0aW9uIGluUmluZyhwdCwgcmluZywgaWdub3JlQm91bmRhcnkpIHtcbiAgICB2YXIgaXNJbnNpZGUgPSBmYWxzZTtcbiAgICBpZiAocmluZ1swXVswXSA9PT0gcmluZ1tyaW5nLmxlbmd0aCAtIDFdWzBdICYmIHJpbmdbMF1bMV0gPT09IHJpbmdbcmluZy5sZW5ndGggLSAxXVsxXSkgcmluZyA9IHJpbmcuc2xpY2UoMCwgcmluZy5sZW5ndGggLSAxKTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBqID0gcmluZy5sZW5ndGggLSAxOyBpIDwgcmluZy5sZW5ndGg7IGogPSBpKyspIHtcbiAgICAgICAgdmFyIHhpID0gcmluZ1tpXVswXSwgeWkgPSByaW5nW2ldWzFdO1xuICAgICAgICB2YXIgeGogPSByaW5nW2pdWzBdLCB5aiA9IHJpbmdbal1bMV07XG4gICAgICAgIHZhciBvbkJvdW5kYXJ5ID0gKHB0WzFdICogKHhpIC0geGopICsgeWkgKiAoeGogLSBwdFswXSkgKyB5aiAqIChwdFswXSAtIHhpKSA9PT0gMCkgJiZcbiAgICAgICAgICAgICgoeGkgLSBwdFswXSkgKiAoeGogLSBwdFswXSkgPD0gMCkgJiYgKCh5aSAtIHB0WzFdKSAqICh5aiAtIHB0WzFdKSA8PSAwKTtcbiAgICAgICAgaWYgKG9uQm91bmRhcnkpIHJldHVybiAhaWdub3JlQm91bmRhcnk7XG4gICAgICAgIHZhciBpbnRlcnNlY3QgPSAoKHlpID4gcHRbMV0pICE9PSAoeWogPiBwdFsxXSkpICYmXG4gICAgICAgIChwdFswXSA8ICh4aiAtIHhpKSAqIChwdFsxXSAtIHlpKSAvICh5aiAtIHlpKSArIHhpKTtcbiAgICAgICAgaWYgKGludGVyc2VjdCkgaXNJbnNpZGUgPSAhaXNJbnNpZGU7XG4gICAgfVxuICAgIHJldHVybiBpc0luc2lkZTtcbn1cblxuLyoqXG4gKiBpbkJCb3hcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtbbnVtYmVyLCBudW1iZXJdfSBwdCBwb2ludCBbeCx5XVxuICogQHBhcmFtIHtbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXX0gYmJveCBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZS9mYWxzZSBpZiBwb2ludCBpcyBpbnNpZGUgQkJveFxuICovXG5mdW5jdGlvbiBpbkJCb3gocHQsIGJib3gpIHtcbiAgICByZXR1cm4gYmJveFswXSA8PSBwdFswXSAmJlxuICAgICAgICAgICBiYm94WzFdIDw9IHB0WzFdICYmXG4gICAgICAgICAgIGJib3hbMl0gPj0gcHRbMF0gJiZcbiAgICAgICAgICAgYmJveFszXSA+PSBwdFsxXTtcbn1cblxuXG4vKioqLyB9KSxcbi8qIDM5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8qKlxuICogVW53cmFwIGEgY29vcmRpbmF0ZSBmcm9tIGEgUG9pbnQgRmVhdHVyZSwgR2VvbWV0cnkgb3IgYSBzaW5nbGUgY29vcmRpbmF0ZS5cbiAqXG4gKiBAbmFtZSBnZXRDb29yZFxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fEdlb21ldHJ5PFBvaW50PnxGZWF0dXJlPFBvaW50Pn0gb2JqIE9iamVjdFxuICogQHJldHVybnMge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzXG4gKiBAZXhhbXBsZVxuICogdmFyIHB0ID0gdHVyZi5wb2ludChbMTAsIDEwXSk7XG4gKlxuICogdmFyIGNvb3JkID0gdHVyZi5nZXRDb29yZChwdCk7XG4gKiAvLz0gWzEwLCAxMF1cbiAqL1xuZnVuY3Rpb24gZ2V0Q29vcmQob2JqKSB7XG4gICAgaWYgKCFvYmopIHRocm93IG5ldyBFcnJvcignb2JqIGlzIHJlcXVpcmVkJyk7XG5cbiAgICB2YXIgY29vcmRpbmF0ZXMgPSBnZXRDb29yZHMob2JqKTtcblxuICAgIC8vIGdldENvb3JkKCkgbXVzdCBjb250YWluIGF0IGxlYXN0IHR3byBudW1iZXJzIChQb2ludClcbiAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID4gMSAmJlxuICAgICAgICB0eXBlb2YgY29vcmRpbmF0ZXNbMF0gPT09ICdudW1iZXInICYmXG4gICAgICAgIHR5cGVvZiBjb29yZGluYXRlc1sxXSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIGNvb3JkaW5hdGVzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZSBpcyBub3QgYSB2YWxpZCBQb2ludCcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBVbndyYXAgY29vcmRpbmF0ZXMgZnJvbSBhIEZlYXR1cmUsIEdlb21ldHJ5IE9iamVjdCBvciBhbiBBcnJheSBvZiBudW1iZXJzXG4gKlxuICogQG5hbWUgZ2V0Q29vcmRzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj58R2VvbWV0cnl8RmVhdHVyZX0gb2JqIE9iamVjdFxuICogQHJldHVybnMge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvbHkgPSB0dXJmLnBvbHlnb24oW1tbMTE5LjMyLCAtOC43XSwgWzExOS41NSwgLTguNjldLCBbMTE5LjUxLCAtOC41NF0sIFsxMTkuMzIsIC04LjddXV0pO1xuICpcbiAqIHZhciBjb29yZCA9IHR1cmYuZ2V0Q29vcmRzKHBvbHkpO1xuICogLy89IFtbWzExOS4zMiwgLTguN10sIFsxMTkuNTUsIC04LjY5XSwgWzExOS41MSwgLTguNTRdLCBbMTE5LjMyLCAtOC43XV1dXG4gKi9cbmZ1bmN0aW9uIGdldENvb3JkcyhvYmopIHtcbiAgICBpZiAoIW9iaikgdGhyb3cgbmV3IEVycm9yKCdvYmogaXMgcmVxdWlyZWQnKTtcbiAgICB2YXIgY29vcmRpbmF0ZXM7XG5cbiAgICAvLyBBcnJheSBvZiBudW1iZXJzXG4gICAgaWYgKG9iai5sZW5ndGgpIHtcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBvYmo7XG5cbiAgICAvLyBHZW9tZXRyeSBPYmplY3RcbiAgICB9IGVsc2UgaWYgKG9iai5jb29yZGluYXRlcykge1xuICAgICAgICBjb29yZGluYXRlcyA9IG9iai5jb29yZGluYXRlcztcblxuICAgIC8vIEZlYXR1cmVcbiAgICB9IGVsc2UgaWYgKG9iai5nZW9tZXRyeSAmJiBvYmouZ2VvbWV0cnkuY29vcmRpbmF0ZXMpIHtcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBvYmouZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gICAgfVxuICAgIC8vIENoZWNrcyBpZiBjb29yZGluYXRlcyBjb250YWlucyBhIG51bWJlclxuICAgIGlmIChjb29yZGluYXRlcykge1xuICAgICAgICBjb250YWluc051bWJlcihjb29yZGluYXRlcyk7XG4gICAgICAgIHJldHVybiBjb29yZGluYXRlcztcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyB2YWxpZCBjb29yZGluYXRlcycpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBjb29yZGluYXRlcyBjb250YWlucyBhIG51bWJlclxuICpcbiAqIEBuYW1lIGNvbnRhaW5zTnVtYmVyXG4gKiBAcGFyYW0ge0FycmF5PGFueT59IGNvb3JkaW5hdGVzIEdlb0pTT04gQ29vcmRpbmF0ZXNcbiAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIEFycmF5IGNvbnRhaW5zIGEgbnVtYmVyXG4gKi9cbmZ1bmN0aW9uIGNvbnRhaW5zTnVtYmVyKGNvb3JkaW5hdGVzKSB7XG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA+IDEgJiZcbiAgICAgICAgdHlwZW9mIGNvb3JkaW5hdGVzWzBdID09PSAnbnVtYmVyJyAmJlxuICAgICAgICB0eXBlb2YgY29vcmRpbmF0ZXNbMV0gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChBcnJheS5pc0FycmF5KGNvb3JkaW5hdGVzWzBdKSAmJiBjb29yZGluYXRlc1swXS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5zTnVtYmVyKGNvb3JkaW5hdGVzWzBdKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBtdXN0IG9ubHkgY29udGFpbiBudW1iZXJzJyk7XG59XG5cbi8qKlxuICogRW5mb3JjZSBleHBlY3RhdGlvbnMgYWJvdXQgdHlwZXMgb2YgR2VvSlNPTiBvYmplY3RzIGZvciBUdXJmLlxuICpcbiAqIEBuYW1lIGdlb2pzb25UeXBlXG4gKiBAcGFyYW0ge0dlb0pTT059IHZhbHVlIGFueSBHZW9KU09OIG9iamVjdFxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgZXhwZWN0ZWQgR2VvSlNPTiB0eXBlXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBuYW1lIG9mIGNhbGxpbmcgZnVuY3Rpb25cbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB2YWx1ZSBpcyBub3QgdGhlIGV4cGVjdGVkIHR5cGUuXG4gKi9cbmZ1bmN0aW9uIGdlb2pzb25UeXBlKHZhbHVlLCB0eXBlLCBuYW1lKSB7XG4gICAgaWYgKCF0eXBlIHx8ICFuYW1lKSB0aHJvdyBuZXcgRXJyb3IoJ3R5cGUgYW5kIG5hbWUgcmVxdWlyZWQnKTtcblxuICAgIGlmICghdmFsdWUgfHwgdmFsdWUudHlwZSAhPT0gdHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaW5wdXQgdG8gJyArIG5hbWUgKyAnOiBtdXN0IGJlIGEgJyArIHR5cGUgKyAnLCBnaXZlbiAnICsgdmFsdWUudHlwZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEVuZm9yY2UgZXhwZWN0YXRpb25zIGFib3V0IHR5cGVzIG9mIHtAbGluayBGZWF0dXJlfSBpbnB1dHMgZm9yIFR1cmYuXG4gKiBJbnRlcm5hbGx5IHRoaXMgdXNlcyB7QGxpbmsgZ2VvanNvblR5cGV9IHRvIGp1ZGdlIGdlb21ldHJ5IHR5cGVzLlxuICpcbiAqIEBuYW1lIGZlYXR1cmVPZlxuICogQHBhcmFtIHtGZWF0dXJlfSBmZWF0dXJlIGEgZmVhdHVyZSB3aXRoIGFuIGV4cGVjdGVkIGdlb21ldHJ5IHR5cGVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIGV4cGVjdGVkIEdlb0pTT04gdHlwZVxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgbmFtZSBvZiBjYWxsaW5nIGZ1bmN0aW9uXG4gKiBAdGhyb3dzIHtFcnJvcn0gZXJyb3IgaWYgdmFsdWUgaXMgbm90IHRoZSBleHBlY3RlZCB0eXBlLlxuICovXG5mdW5jdGlvbiBmZWF0dXJlT2YoZmVhdHVyZSwgdHlwZSwgbmFtZSkge1xuICAgIGlmICghZmVhdHVyZSkgdGhyb3cgbmV3IEVycm9yKCdObyBmZWF0dXJlIHBhc3NlZCcpO1xuICAgIGlmICghbmFtZSkgdGhyb3cgbmV3IEVycm9yKCcuZmVhdHVyZU9mKCkgcmVxdWlyZXMgYSBuYW1lJyk7XG4gICAgaWYgKCFmZWF0dXJlIHx8IGZlYXR1cmUudHlwZSAhPT0gJ0ZlYXR1cmUnIHx8ICFmZWF0dXJlLmdlb21ldHJ5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCB0byAnICsgbmFtZSArICcsIEZlYXR1cmUgd2l0aCBnZW9tZXRyeSByZXF1aXJlZCcpO1xuICAgIH1cbiAgICBpZiAoIWZlYXR1cmUuZ2VvbWV0cnkgfHwgZmVhdHVyZS5nZW9tZXRyeS50eXBlICE9PSB0eXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCB0byAnICsgbmFtZSArICc6IG11c3QgYmUgYSAnICsgdHlwZSArICcsIGdpdmVuICcgKyBmZWF0dXJlLmdlb21ldHJ5LnR5cGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbmZvcmNlIGV4cGVjdGF0aW9ucyBhYm91dCB0eXBlcyBvZiB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259IGlucHV0cyBmb3IgVHVyZi5cbiAqIEludGVybmFsbHkgdGhpcyB1c2VzIHtAbGluayBnZW9qc29uVHlwZX0gdG8ganVkZ2UgZ2VvbWV0cnkgdHlwZXMuXG4gKlxuICogQG5hbWUgY29sbGVjdGlvbk9mXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBmZWF0dXJlQ29sbGVjdGlvbiBhIEZlYXR1cmVDb2xsZWN0aW9uIGZvciB3aGljaCBmZWF0dXJlcyB3aWxsIGJlIGp1ZGdlZFxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgZXhwZWN0ZWQgR2VvSlNPTiB0eXBlXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBuYW1lIG9mIGNhbGxpbmcgZnVuY3Rpb25cbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB2YWx1ZSBpcyBub3QgdGhlIGV4cGVjdGVkIHR5cGUuXG4gKi9cbmZ1bmN0aW9uIGNvbGxlY3Rpb25PZihmZWF0dXJlQ29sbGVjdGlvbiwgdHlwZSwgbmFtZSkge1xuICAgIGlmICghZmVhdHVyZUNvbGxlY3Rpb24pIHRocm93IG5ldyBFcnJvcignTm8gZmVhdHVyZUNvbGxlY3Rpb24gcGFzc2VkJyk7XG4gICAgaWYgKCFuYW1lKSB0aHJvdyBuZXcgRXJyb3IoJy5jb2xsZWN0aW9uT2YoKSByZXF1aXJlcyBhIG5hbWUnKTtcbiAgICBpZiAoIWZlYXR1cmVDb2xsZWN0aW9uIHx8IGZlYXR1cmVDb2xsZWN0aW9uLnR5cGUgIT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0IHRvICcgKyBuYW1lICsgJywgRmVhdHVyZUNvbGxlY3Rpb24gcmVxdWlyZWQnKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmZWF0dXJlQ29sbGVjdGlvbi5mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZmVhdHVyZSA9IGZlYXR1cmVDb2xsZWN0aW9uLmZlYXR1cmVzW2ldO1xuICAgICAgICBpZiAoIWZlYXR1cmUgfHwgZmVhdHVyZS50eXBlICE9PSAnRmVhdHVyZScgfHwgIWZlYXR1cmUuZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCB0byAnICsgbmFtZSArICcsIEZlYXR1cmUgd2l0aCBnZW9tZXRyeSByZXF1aXJlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZmVhdHVyZS5nZW9tZXRyeSB8fCBmZWF0dXJlLmdlb21ldHJ5LnR5cGUgIT09IHR5cGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCB0byAnICsgbmFtZSArICc6IG11c3QgYmUgYSAnICsgdHlwZSArICcsIGdpdmVuICcgKyBmZWF0dXJlLmdlb21ldHJ5LnR5cGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEdldCBHZW9tZXRyeSBmcm9tIEZlYXR1cmUgb3IgR2VvbWV0cnkgT2JqZWN0XG4gKlxuICogQHBhcmFtIHtGZWF0dXJlfEdlb21ldHJ5fSBnZW9qc29uIEdlb0pTT04gRmVhdHVyZSBvciBHZW9tZXRyeSBPYmplY3RcbiAqIEByZXR1cm5zIHtHZW9tZXRyeXxudWxsfSBHZW9KU09OIEdlb21ldHJ5IE9iamVjdFxuICogQHRocm93cyB7RXJyb3J9IGlmIGdlb2pzb24gaXMgbm90IGEgRmVhdHVyZSBvciBHZW9tZXRyeSBPYmplY3RcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9pbnQgPSB7XG4gKiAgIFwidHlwZVwiOiBcIkZlYXR1cmVcIixcbiAqICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICogICBcImdlb21ldHJ5XCI6IHtcbiAqICAgICBcInR5cGVcIjogXCJQb2ludFwiLFxuICogICAgIFwiY29vcmRpbmF0ZXNcIjogWzExMCwgNDBdXG4gKiAgIH1cbiAqIH1cbiAqIHZhciBnZW9tID0gdHVyZi5nZXRHZW9tKHBvaW50KVxuICogLy89e1widHlwZVwiOiBcIlBvaW50XCIsIFwiY29vcmRpbmF0ZXNcIjogWzExMCwgNDBdfVxuICovXG5mdW5jdGlvbiBnZXRHZW9tKGdlb2pzb24pIHtcbiAgICBpZiAoIWdlb2pzb24pIHRocm93IG5ldyBFcnJvcignZ2VvanNvbiBpcyByZXF1aXJlZCcpO1xuICAgIGlmIChnZW9qc29uLmdlb21ldHJ5ICE9PSB1bmRlZmluZWQpIHJldHVybiBnZW9qc29uLmdlb21ldHJ5O1xuICAgIGlmIChnZW9qc29uLmNvb3JkaW5hdGVzIHx8IGdlb2pzb24uZ2VvbWV0cmllcykgcmV0dXJuIGdlb2pzb247XG4gICAgdGhyb3cgbmV3IEVycm9yKCdnZW9qc29uIG11c3QgYmUgYSB2YWxpZCBGZWF0dXJlIG9yIEdlb21ldHJ5IE9iamVjdCcpO1xufVxuXG4vKipcbiAqIEdldCBHZW9tZXRyeSBUeXBlIGZyb20gRmVhdHVyZSBvciBHZW9tZXRyeSBPYmplY3RcbiAqXG4gKiBAcGFyYW0ge0ZlYXR1cmV8R2VvbWV0cnl9IGdlb2pzb24gR2VvSlNPTiBGZWF0dXJlIG9yIEdlb21ldHJ5IE9iamVjdFxuICogQHJldHVybnMge3N0cmluZ30gR2VvSlNPTiBHZW9tZXRyeSBUeXBlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgZ2VvanNvbiBpcyBub3QgYSBGZWF0dXJlIG9yIEdlb21ldHJ5IE9iamVjdFxuICogQGV4YW1wbGVcbiAqIHZhciBwb2ludCA9IHtcbiAqICAgXCJ0eXBlXCI6IFwiRmVhdHVyZVwiLFxuICogICBcInByb3BlcnRpZXNcIjoge30sXG4gKiAgIFwiZ2VvbWV0cnlcIjoge1xuICogICAgIFwidHlwZVwiOiBcIlBvaW50XCIsXG4gKiAgICAgXCJjb29yZGluYXRlc1wiOiBbMTEwLCA0MF1cbiAqICAgfVxuICogfVxuICogdmFyIGdlb20gPSB0dXJmLmdldEdlb21UeXBlKHBvaW50KVxuICogLy89XCJQb2ludFwiXG4gKi9cbmZ1bmN0aW9uIGdldEdlb21UeXBlKGdlb2pzb24pIHtcbiAgICBpZiAoIWdlb2pzb24pIHRocm93IG5ldyBFcnJvcignZ2VvanNvbiBpcyByZXF1aXJlZCcpO1xuICAgIHZhciBnZW9tID0gZ2V0R2VvbShnZW9qc29uKTtcbiAgICBpZiAoZ2VvbSkgcmV0dXJuIGdlb20udHlwZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgZ2VvanNvblR5cGU6IGdlb2pzb25UeXBlLFxuICAgIGNvbGxlY3Rpb25PZjogY29sbGVjdGlvbk9mLFxuICAgIGZlYXR1cmVPZjogZmVhdHVyZU9mLFxuICAgIGdldENvb3JkOiBnZXRDb29yZCxcbiAgICBnZXRDb29yZHM6IGdldENvb3JkcyxcbiAgICBjb250YWluc051bWJlcjogY29udGFpbnNOdW1iZXIsXG4gICAgZ2V0R2VvbTogZ2V0R2VvbSxcbiAgICBnZXRHZW9tVHlwZTogZ2V0R2VvbVR5cGVcbn07XG5cblxuLyoqKi8gfSksXG4vKiA0MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vKipcbiAqIFdyYXBzIGEgR2VvSlNPTiB7QGxpbmsgR2VvbWV0cnl9IGluIGEgR2VvSlNPTiB7QGxpbmsgRmVhdHVyZX0uXG4gKlxuICogQG5hbWUgZmVhdHVyZVxuICogQHBhcmFtIHtHZW9tZXRyeX0gZ2VvbWV0cnkgaW5wdXQgZ2VvbWV0cnlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlfSBhIEdlb0pTT04gRmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBnZW9tZXRyeSA9IHtcbiAqICAgXCJ0eXBlXCI6IFwiUG9pbnRcIixcbiAqICAgXCJjb29yZGluYXRlc1wiOiBbMTEwLCA1MF1cbiAqIH07XG4gKlxuICogdmFyIGZlYXR1cmUgPSB0dXJmLmZlYXR1cmUoZ2VvbWV0cnkpO1xuICpcbiAqIC8vPWZlYXR1cmVcbiAqL1xuZnVuY3Rpb24gZmVhdHVyZShnZW9tZXRyeSwgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoZ2VvbWV0cnkgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdnZW9tZXRyeSBpcyByZXF1aXJlZCcpO1xuICAgIGlmIChwcm9wZXJ0aWVzICYmIHByb3BlcnRpZXMuY29uc3RydWN0b3IgIT09IE9iamVjdCkgdGhyb3cgbmV3IEVycm9yKCdwcm9wZXJ0aWVzIG11c3QgYmUgYW4gT2JqZWN0Jyk7XG4gICAgaWYgKGJib3ggJiYgYmJveC5sZW5ndGggIT09IDQpIHRocm93IG5ldyBFcnJvcignYmJveCBtdXN0IGJlIGFuIEFycmF5IG9mIDQgbnVtYmVycycpO1xuICAgIGlmIChpZCAmJiBbJ3N0cmluZycsICdudW1iZXInXS5pbmRleE9mKHR5cGVvZiBpZCkgPT09IC0xKSB0aHJvdyBuZXcgRXJyb3IoJ2lkIG11c3QgYmUgYSBudW1iZXIgb3IgYSBzdHJpbmcnKTtcblxuICAgIHZhciBmZWF0ID0ge3R5cGU6ICdGZWF0dXJlJ307XG4gICAgaWYgKGlkKSBmZWF0LmlkID0gaWQ7XG4gICAgaWYgKGJib3gpIGZlYXQuYmJveCA9IGJib3g7XG4gICAgZmVhdC5wcm9wZXJ0aWVzID0gcHJvcGVydGllcyB8fCB7fTtcbiAgICBmZWF0Lmdlb21ldHJ5ID0gZ2VvbWV0cnk7XG4gICAgcmV0dXJuIGZlYXQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIEdlb0pTT04ge0BsaW5rIEdlb21ldHJ5fSBmcm9tIGEgR2VvbWV0cnkgc3RyaW5nIHR5cGUgJiBjb29yZGluYXRlcy5cbiAqIEZvciBHZW9tZXRyeUNvbGxlY3Rpb24gdHlwZSB1c2UgYGhlbHBlcnMuZ2VvbWV0cnlDb2xsZWN0aW9uYFxuICpcbiAqIEBuYW1lIGdlb21ldHJ5XG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBHZW9tZXRyeSBUeXBlXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcmV0dXJucyB7R2VvbWV0cnl9IGEgR2VvSlNPTiBHZW9tZXRyeVxuICogQGV4YW1wbGVcbiAqIHZhciB0eXBlID0gJ1BvaW50JztcbiAqIHZhciBjb29yZGluYXRlcyA9IFsxMTAsIDUwXTtcbiAqXG4gKiB2YXIgZ2VvbWV0cnkgPSB0dXJmLmdlb21ldHJ5KHR5cGUsIGNvb3JkaW5hdGVzKTtcbiAqXG4gKiAvLz1nZW9tZXRyeVxuICovXG5mdW5jdGlvbiBnZW9tZXRyeSh0eXBlLCBjb29yZGluYXRlcywgYmJveCkge1xuICAgIC8vIFZhbGlkYXRpb25cbiAgICBpZiAoIXR5cGUpIHRocm93IG5ldyBFcnJvcigndHlwZSBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignY29vcmRpbmF0ZXMgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29vcmRpbmF0ZXMpKSB0aHJvdyBuZXcgRXJyb3IoJ2Nvb3JkaW5hdGVzIG11c3QgYmUgYW4gQXJyYXknKTtcbiAgICBpZiAoYmJveCAmJiBiYm94Lmxlbmd0aCAhPT0gNCkgdGhyb3cgbmV3IEVycm9yKCdiYm94IG11c3QgYmUgYW4gQXJyYXkgb2YgNCBudW1iZXJzJyk7XG5cbiAgICB2YXIgZ2VvbTtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdQb2ludCc6IGdlb20gPSBwb2ludChjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGNhc2UgJ0xpbmVTdHJpbmcnOiBnZW9tID0gbGluZVN0cmluZyhjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGNhc2UgJ1BvbHlnb24nOiBnZW9tID0gcG9seWdvbihjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGNhc2UgJ011bHRpUG9pbnQnOiBnZW9tID0gbXVsdGlQb2ludChjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGNhc2UgJ011bHRpTGluZVN0cmluZyc6IGdlb20gPSBtdWx0aUxpbmVTdHJpbmcoY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBjYXNlICdNdWx0aVBvbHlnb24nOiBnZW9tID0gbXVsdGlQb2x5Z29uKGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKHR5cGUgKyAnIGlzIGludmFsaWQnKTtcbiAgICB9XG4gICAgaWYgKGJib3gpIGdlb20uYmJveCA9IGJib3g7XG4gICAgcmV0dXJuIGdlb207XG59XG5cbi8qKlxuICogVGFrZXMgY29vcmRpbmF0ZXMgYW5kIHByb3BlcnRpZXMgKG9wdGlvbmFsKSBhbmQgcmV0dXJucyBhIG5ldyB7QGxpbmsgUG9pbnR9IGZlYXR1cmUuXG4gKlxuICogQG5hbWUgcG9pbnRcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXMgbG9uZ2l0dWRlLCBsYXRpdHVkZSBwb3NpdGlvbiAoZWFjaCBpbiBkZWNpbWFsIGRlZ3JlZXMpXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxQb2ludD59IGEgUG9pbnQgZmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBwb2ludCA9IHR1cmYucG9pbnQoWy03NS4zNDMsIDM5Ljk4NF0pO1xuICpcbiAqIC8vPXBvaW50XG4gKi9cbmZ1bmN0aW9uIHBvaW50KGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgYmUgYW4gYXJyYXknKTtcbiAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoIDwgMikgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGJlIGF0IGxlYXN0IDIgbnVtYmVycyBsb25nJyk7XG4gICAgaWYgKCFpc051bWJlcihjb29yZGluYXRlc1swXSkgfHwgIWlzTnVtYmVyKGNvb3JkaW5hdGVzWzFdKSkgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGNvbnRhaW4gbnVtYmVycycpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8qKlxuICogVGFrZXMgYW4gYXJyYXkgb2YgTGluZWFyUmluZ3MgYW5kIG9wdGlvbmFsbHkgYW4ge0BsaW5rIE9iamVjdH0gd2l0aCBwcm9wZXJ0aWVzIGFuZCByZXR1cm5zIGEge0BsaW5rIFBvbHlnb259IGZlYXR1cmUuXG4gKlxuICogQG5hbWUgcG9seWdvblxuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxudW1iZXI+Pj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIExpbmVhclJpbmdzXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxQb2x5Z29uPn0gYSBQb2x5Z29uIGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSB0aHJvdyBhbiBlcnJvciBpZiBhIExpbmVhclJpbmcgb2YgdGhlIHBvbHlnb24gaGFzIHRvbyBmZXcgcG9zaXRpb25zXG4gKiBvciBpZiBhIExpbmVhclJpbmcgb2YgdGhlIFBvbHlnb24gZG9lcyBub3QgaGF2ZSBtYXRjaGluZyBQb3NpdGlvbnMgYXQgdGhlIGJlZ2lubmluZyAmIGVuZC5cbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9seWdvbiA9IHR1cmYucG9seWdvbihbW1xuICogICBbLTIuMjc1NTQzLCA1My40NjQ1NDddLFxuICogICBbLTIuMjc1NTQzLCA1My40ODkyNzFdLFxuICogICBbLTIuMjE1MTE4LCA1My40ODkyNzFdLFxuICogICBbLTIuMjE1MTE4LCA1My40NjQ1NDddLFxuICogICBbLTIuMjc1NTQzLCA1My40NjQ1NDddXG4gKiBdXSwgeyBuYW1lOiAncG9seTEnLCBwb3B1bGF0aW9uOiA0MDB9KTtcbiAqXG4gKiAvLz1wb2x5Z29uXG4gKi9cbmZ1bmN0aW9uIHBvbHlnb24oY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29vcmRpbmF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHJpbmcgPSBjb29yZGluYXRlc1tpXTtcbiAgICAgICAgaWYgKHJpbmcubGVuZ3RoIDwgNCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFYWNoIExpbmVhclJpbmcgb2YgYSBQb2x5Z29uIG11c3QgaGF2ZSA0IG9yIG1vcmUgUG9zaXRpb25zLicpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmluZ1tyaW5nLmxlbmd0aCAtIDFdLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBmaXJzdCBwb2ludCBvZiBQb2x5Z29uIGNvbnRhaW5zIHR3byBudW1iZXJzXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCAmJiBqID09PSAwICYmICFpc051bWJlcihyaW5nWzBdWzBdKSB8fCAhaXNOdW1iZXIocmluZ1swXVsxXSkpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBjb250YWluIG51bWJlcnMnKTtcbiAgICAgICAgICAgIGlmIChyaW5nW3JpbmcubGVuZ3RoIC0gMV1bal0gIT09IHJpbmdbMF1bal0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpcnN0IGFuZCBsYXN0IFBvc2l0aW9uIGFyZSBub3QgZXF1aXZhbGVudC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ1BvbHlnb24nLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBMaW5lU3RyaW5nfSBiYXNlZCBvbiBhXG4gKiBjb29yZGluYXRlIGFycmF5LiBQcm9wZXJ0aWVzIGNhbiBiZSBhZGRlZCBvcHRpb25hbGx5LlxuICpcbiAqIEBuYW1lIGxpbmVTdHJpbmdcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIFBvc2l0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8TGluZVN0cmluZz59IGEgTGluZVN0cmluZyBmZWF0dXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgbm8gY29vcmRpbmF0ZXMgYXJlIHBhc3NlZFxuICogQGV4YW1wbGVcbiAqIHZhciBsaW5lc3RyaW5nMSA9IHR1cmYubGluZVN0cmluZyhbXG4gKiAgIFstMjEuOTY0NDE2LCA2NC4xNDgyMDNdLFxuICogICBbLTIxLjk1NjE3NiwgNjQuMTQxMzE2XSxcbiAqICAgWy0yMS45MzkwMSwgNjQuMTM1OTI0XSxcbiAqICAgWy0yMS45MjczMzcsIDY0LjEzNjY3M11cbiAqIF0pO1xuICogdmFyIGxpbmVzdHJpbmcyID0gdHVyZi5saW5lU3RyaW5nKFtcbiAqICAgWy0yMS45MjkwNTQsIDY0LjEyNzk4NV0sXG4gKiAgIFstMjEuOTEyOTE4LCA2NC4xMzQ3MjZdLFxuICogICBbLTIxLjkxNjAwNywgNjQuMTQxMDE2XSxcbiAqICAgWy0yMS45MzAwODQsIDY0LjE0NDQ2XVxuICogXSwge25hbWU6ICdsaW5lIDEnLCBkaXN0YW5jZTogMTQ1fSk7XG4gKlxuICogLy89bGluZXN0cmluZzFcbiAqXG4gKiAvLz1saW5lc3RyaW5nMlxuICovXG5mdW5jdGlvbiBsaW5lU3RyaW5nKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA8IDIpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBiZSBhbiBhcnJheSBvZiB0d28gb3IgbW9yZSBwb3NpdGlvbnMnKTtcbiAgICAvLyBDaGVjayBpZiBmaXJzdCBwb2ludCBvZiBMaW5lU3RyaW5nIGNvbnRhaW5zIHR3byBudW1iZXJzXG4gICAgaWYgKCFpc051bWJlcihjb29yZGluYXRlc1swXVsxXSkgfHwgIWlzTnVtYmVyKGNvb3JkaW5hdGVzWzBdWzFdKSkgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGNvbnRhaW4gbnVtYmVycycpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnTGluZVN0cmluZycsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBUYWtlcyBvbmUgb3IgbW9yZSB7QGxpbmsgRmVhdHVyZXxGZWF0dXJlc30gYW5kIGNyZWF0ZXMgYSB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259LlxuICpcbiAqIEBuYW1lIGZlYXR1cmVDb2xsZWN0aW9uXG4gKiBAcGFyYW0ge0ZlYXR1cmVbXX0gZmVhdHVyZXMgaW5wdXQgZmVhdHVyZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZUNvbGxlY3Rpb259IGEgRmVhdHVyZUNvbGxlY3Rpb24gb2YgaW5wdXQgZmVhdHVyZXNcbiAqIEBleGFtcGxlXG4gKiB2YXIgZmVhdHVyZXMgPSBbXG4gKiAgdHVyZi5wb2ludChbLTc1LjM0MywgMzkuOTg0XSwge25hbWU6ICdMb2NhdGlvbiBBJ30pLFxuICogIHR1cmYucG9pbnQoWy03NS44MzMsIDM5LjI4NF0sIHtuYW1lOiAnTG9jYXRpb24gQid9KSxcbiAqICB0dXJmLnBvaW50KFstNzUuNTM0LCAzOS4xMjNdLCB7bmFtZTogJ0xvY2F0aW9uIEMnfSlcbiAqIF07XG4gKlxuICogdmFyIGNvbGxlY3Rpb24gPSB0dXJmLmZlYXR1cmVDb2xsZWN0aW9uKGZlYXR1cmVzKTtcbiAqXG4gKiAvLz1jb2xsZWN0aW9uXG4gKi9cbmZ1bmN0aW9uIGZlYXR1cmVDb2xsZWN0aW9uKGZlYXR1cmVzLCBiYm94LCBpZCkge1xuICAgIGlmICghZmVhdHVyZXMpIHRocm93IG5ldyBFcnJvcignTm8gZmVhdHVyZXMgcGFzc2VkJyk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGZlYXR1cmVzKSkgdGhyb3cgbmV3IEVycm9yKCdmZWF0dXJlcyBtdXN0IGJlIGFuIEFycmF5Jyk7XG4gICAgaWYgKGJib3ggJiYgYmJveC5sZW5ndGggIT09IDQpIHRocm93IG5ldyBFcnJvcignYmJveCBtdXN0IGJlIGFuIEFycmF5IG9mIDQgbnVtYmVycycpO1xuICAgIGlmIChpZCAmJiBbJ3N0cmluZycsICdudW1iZXInXS5pbmRleE9mKHR5cGVvZiBpZCkgPT09IC0xKSB0aHJvdyBuZXcgRXJyb3IoJ2lkIG11c3QgYmUgYSBudW1iZXIgb3IgYSBzdHJpbmcnKTtcblxuICAgIHZhciBmYyA9IHt0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nfTtcbiAgICBpZiAoaWQpIGZjLmlkID0gaWQ7XG4gICAgaWYgKGJib3gpIGZjLmJib3ggPSBiYm94O1xuICAgIGZjLmZlYXR1cmVzID0gZmVhdHVyZXM7XG4gICAgcmV0dXJuIGZjO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgRmVhdHVyZTxNdWx0aUxpbmVTdHJpbmc+fSBiYXNlZCBvbiBhXG4gKiBjb29yZGluYXRlIGFycmF5LiBQcm9wZXJ0aWVzIGNhbiBiZSBhZGRlZCBvcHRpb25hbGx5LlxuICpcbiAqIEBuYW1lIG11bHRpTGluZVN0cmluZ1xuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxudW1iZXI+Pj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIExpbmVTdHJpbmdzXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxNdWx0aUxpbmVTdHJpbmc+fSBhIE11bHRpTGluZVN0cmluZyBmZWF0dXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgbm8gY29vcmRpbmF0ZXMgYXJlIHBhc3NlZFxuICogQGV4YW1wbGVcbiAqIHZhciBtdWx0aUxpbmUgPSB0dXJmLm11bHRpTGluZVN0cmluZyhbW1swLDBdLFsxMCwxMF1dXSk7XG4gKlxuICogLy89bXVsdGlMaW5lXG4gKi9cbmZ1bmN0aW9uIG11bHRpTGluZVN0cmluZyhjb29yZGluYXRlcywgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvb3JkaW5hdGVzIHBhc3NlZCcpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnTXVsdGlMaW5lU3RyaW5nJyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgRmVhdHVyZTxNdWx0aVBvaW50Pn0gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBtdWx0aVBvaW50XG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBQb3NpdGlvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPE11bHRpUG9pbnQ+fSBhIE11bHRpUG9pbnQgZmVhdHVyZVxuICogQHRocm93cyB7RXJyb3J9IGlmIG5vIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWRcbiAqIEBleGFtcGxlXG4gKiB2YXIgbXVsdGlQdCA9IHR1cmYubXVsdGlQb2ludChbWzAsMF0sWzEwLDEwXV0pO1xuICpcbiAqIC8vPW11bHRpUHRcbiAqL1xuZnVuY3Rpb24gbXVsdGlQb2ludChjb29yZGluYXRlcywgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvb3JkaW5hdGVzIHBhc3NlZCcpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnTXVsdGlQb2ludCcsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8TXVsdGlQb2x5Z29uPn0gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBtdWx0aVBvbHlnb25cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8QXJyYXk8bnVtYmVyPj4+Pn0gY29vcmRpbmF0ZXMgYW4gYXJyYXkgb2YgUG9seWdvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPE11bHRpUG9seWdvbj59IGEgbXVsdGlwb2x5Z29uIGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBubyBjb29yZGluYXRlcyBhcmUgcGFzc2VkXG4gKiBAZXhhbXBsZVxuICogdmFyIG11bHRpUG9seSA9IHR1cmYubXVsdGlQb2x5Z29uKFtbW1swLDBdLFswLDEwXSxbMTAsMTBdLFsxMCwwXSxbMCwwXV1dXSk7XG4gKlxuICogLy89bXVsdGlQb2x5XG4gKlxuICovXG5mdW5jdGlvbiBtdWx0aVBvbHlnb24oY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ011bHRpUG9seWdvbicsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8R2VvbWV0cnlDb2xsZWN0aW9uPn0gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBnZW9tZXRyeUNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7QXJyYXk8R2VvbWV0cnk+fSBnZW9tZXRyaWVzIGFuIGFycmF5IG9mIEdlb0pTT04gR2VvbWV0cmllc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8R2VvbWV0cnlDb2xsZWN0aW9uPn0gYSBHZW9KU09OIEdlb21ldHJ5Q29sbGVjdGlvbiBGZWF0dXJlXG4gKiBAZXhhbXBsZVxuICogdmFyIHB0ID0ge1xuICogICAgIFwidHlwZVwiOiBcIlBvaW50XCIsXG4gKiAgICAgICBcImNvb3JkaW5hdGVzXCI6IFsxMDAsIDBdXG4gKiAgICAgfTtcbiAqIHZhciBsaW5lID0ge1xuICogICAgIFwidHlwZVwiOiBcIkxpbmVTdHJpbmdcIixcbiAqICAgICBcImNvb3JkaW5hdGVzXCI6IFsgWzEwMSwgMF0sIFsxMDIsIDFdIF1cbiAqICAgfTtcbiAqIHZhciBjb2xsZWN0aW9uID0gdHVyZi5nZW9tZXRyeUNvbGxlY3Rpb24oW3B0LCBsaW5lXSk7XG4gKlxuICogLy89Y29sbGVjdGlvblxuICovXG5mdW5jdGlvbiBnZW9tZXRyeUNvbGxlY3Rpb24oZ2VvbWV0cmllcywgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWdlb21ldHJpZXMpIHRocm93IG5ldyBFcnJvcignZ2VvbWV0cmllcyBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShnZW9tZXRyaWVzKSkgdGhyb3cgbmV3IEVycm9yKCdnZW9tZXRyaWVzIG11c3QgYmUgYW4gQXJyYXknKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ0dlb21ldHJ5Q29sbGVjdGlvbicsXG4gICAgICAgIGdlb21ldHJpZXM6IGdlb21ldHJpZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dyZWF0LWNpcmNsZV9kaXN0YW5jZSNSYWRpdXNfZm9yX3NwaGVyaWNhbF9FYXJ0aFxudmFyIGZhY3RvcnMgPSB7XG4gICAgbWlsZXM6IDM5NjAsXG4gICAgbmF1dGljYWxtaWxlczogMzQ0MS4xNDUsXG4gICAgZGVncmVlczogNTcuMjk1Nzc5NSxcbiAgICByYWRpYW5zOiAxLFxuICAgIGluY2hlczogMjUwOTA1NjAwLFxuICAgIHlhcmRzOiA2OTY5NjAwLFxuICAgIG1ldGVyczogNjM3MzAwMCxcbiAgICBtZXRyZXM6IDYzNzMwMDAsXG4gICAgY2VudGltZXRlcnM6IDYuMzczZSs4LFxuICAgIGNlbnRpbWV0cmVzOiA2LjM3M2UrOCxcbiAgICBraWxvbWV0ZXJzOiA2MzczLFxuICAgIGtpbG9tZXRyZXM6IDYzNzMsXG4gICAgZmVldDogMjA5MDg3OTIuNjVcbn07XG5cbnZhciBhcmVhRmFjdG9ycyA9IHtcbiAgICBraWxvbWV0ZXJzOiAwLjAwMDAwMSxcbiAgICBraWxvbWV0cmVzOiAwLjAwMDAwMSxcbiAgICBtZXRlcnM6IDEsXG4gICAgbWV0cmVzOiAxLFxuICAgIGNlbnRpbWV0cmVzOiAxMDAwMCxcbiAgICBtaWxsaW1ldGVyOiAxMDAwMDAwLFxuICAgIGFjcmVzOiAwLjAwMDI0NzEwNSxcbiAgICBtaWxlczogMy44NmUtNyxcbiAgICB5YXJkczogMS4xOTU5OTAwNDYsXG4gICAgZmVldDogMTAuNzYzOTEwNDE3LFxuICAgIGluY2hlczogMTU1MC4wMDMxMDAwMDZcbn07XG4vKipcbiAqIFJvdW5kIG51bWJlciB0byBwcmVjaXNpb25cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtIE51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IFtwcmVjaXNpb249MF0gUHJlY2lzaW9uXG4gKiBAcmV0dXJucyB7bnVtYmVyfSByb3VuZGVkIG51bWJlclxuICogQGV4YW1wbGVcbiAqIHR1cmYucm91bmQoMTIwLjQzMjEpXG4gKiAvLz0xMjBcbiAqXG4gKiB0dXJmLnJvdW5kKDEyMC40MzIxLCAyKVxuICogLy89MTIwLjQzXG4gKi9cbmZ1bmN0aW9uIHJvdW5kKG51bSwgcHJlY2lzaW9uKSB7XG4gICAgaWYgKG51bSA9PT0gdW5kZWZpbmVkIHx8IG51bSA9PT0gbnVsbCB8fCBpc05hTihudW0pKSB0aHJvdyBuZXcgRXJyb3IoJ251bSBpcyByZXF1aXJlZCcpO1xuICAgIGlmIChwcmVjaXNpb24gJiYgIShwcmVjaXNpb24gPj0gMCkpIHRocm93IG5ldyBFcnJvcigncHJlY2lzaW9uIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgICB2YXIgbXVsdGlwbGllciA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24gfHwgMCk7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogbXVsdGlwbGllcikgLyBtdWx0aXBsaWVyO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSBkaXN0YW5jZSBtZWFzdXJlbWVudCAoYXNzdW1pbmcgYSBzcGhlcmljYWwgRWFydGgpIGZyb20gcmFkaWFucyB0byBhIG1vcmUgZnJpZW5kbHkgdW5pdC5cbiAqIFZhbGlkIHVuaXRzOiBtaWxlcywgbmF1dGljYWxtaWxlcywgaW5jaGVzLCB5YXJkcywgbWV0ZXJzLCBtZXRyZXMsIGtpbG9tZXRlcnMsIGNlbnRpbWV0ZXJzLCBmZWV0XG4gKlxuICogQG5hbWUgcmFkaWFuc1RvRGlzdGFuY2VcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpYW5zIGluIHJhZGlhbnMgYWNyb3NzIHRoZSBzcGhlcmVcbiAqIEBwYXJhbSB7c3RyaW5nfSBbdW5pdHM9a2lsb21ldGVyc10gY2FuIGJlIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzIGluY2hlcywgeWFyZHMsIG1ldHJlcywgbWV0ZXJzLCBraWxvbWV0cmVzLCBraWxvbWV0ZXJzLlxuICogQHJldHVybnMge251bWJlcn0gZGlzdGFuY2VcbiAqL1xuZnVuY3Rpb24gcmFkaWFuc1RvRGlzdGFuY2UocmFkaWFucywgdW5pdHMpIHtcbiAgICBpZiAocmFkaWFucyA9PT0gdW5kZWZpbmVkIHx8IHJhZGlhbnMgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcigncmFkaWFucyBpcyByZXF1aXJlZCcpO1xuXG4gICAgdmFyIGZhY3RvciA9IGZhY3RvcnNbdW5pdHMgfHwgJ2tpbG9tZXRlcnMnXTtcbiAgICBpZiAoIWZhY3RvcikgdGhyb3cgbmV3IEVycm9yKCd1bml0cyBpcyBpbnZhbGlkJyk7XG4gICAgcmV0dXJuIHJhZGlhbnMgKiBmYWN0b3I7XG59XG5cbi8qKlxuICogQ29udmVydCBhIGRpc3RhbmNlIG1lYXN1cmVtZW50IChhc3N1bWluZyBhIHNwaGVyaWNhbCBFYXJ0aCkgZnJvbSBhIHJlYWwtd29ybGQgdW5pdCBpbnRvIHJhZGlhbnNcbiAqIFZhbGlkIHVuaXRzOiBtaWxlcywgbmF1dGljYWxtaWxlcywgaW5jaGVzLCB5YXJkcywgbWV0ZXJzLCBtZXRyZXMsIGtpbG9tZXRlcnMsIGNlbnRpbWV0ZXJzLCBmZWV0XG4gKlxuICogQG5hbWUgZGlzdGFuY2VUb1JhZGlhbnNcbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0YW5jZSBpbiByZWFsIHVuaXRzXG4gKiBAcGFyYW0ge3N0cmluZ30gW3VuaXRzPWtpbG9tZXRlcnNdIGNhbiBiZSBkZWdyZWVzLCByYWRpYW5zLCBtaWxlcywgb3Iga2lsb21ldGVycyBpbmNoZXMsIHlhcmRzLCBtZXRyZXMsIG1ldGVycywga2lsb21ldHJlcywga2lsb21ldGVycy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IHJhZGlhbnNcbiAqL1xuZnVuY3Rpb24gZGlzdGFuY2VUb1JhZGlhbnMoZGlzdGFuY2UsIHVuaXRzKSB7XG4gICAgaWYgKGRpc3RhbmNlID09PSB1bmRlZmluZWQgfHwgZGlzdGFuY2UgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcignZGlzdGFuY2UgaXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciBmYWN0b3IgPSBmYWN0b3JzW3VuaXRzIHx8ICdraWxvbWV0ZXJzJ107XG4gICAgaWYgKCFmYWN0b3IpIHRocm93IG5ldyBFcnJvcigndW5pdHMgaXMgaW52YWxpZCcpO1xuICAgIHJldHVybiBkaXN0YW5jZSAvIGZhY3Rvcjtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgZGlzdGFuY2UgbWVhc3VyZW1lbnQgKGFzc3VtaW5nIGEgc3BoZXJpY2FsIEVhcnRoKSBmcm9tIGEgcmVhbC13b3JsZCB1bml0IGludG8gZGVncmVlc1xuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywgY2VudGltZXRlcnMsIGtpbG9tZXRyZXMsIGZlZXRcbiAqXG4gKiBAbmFtZSBkaXN0YW5jZVRvRGVncmVlc1xuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIGluIHJlYWwgdW5pdHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBbdW5pdHM9a2lsb21ldGVyc10gY2FuIGJlIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzIGluY2hlcywgeWFyZHMsIG1ldHJlcywgbWV0ZXJzLCBraWxvbWV0cmVzLCBraWxvbWV0ZXJzLlxuICogQHJldHVybnMge251bWJlcn0gZGVncmVlc1xuICovXG5mdW5jdGlvbiBkaXN0YW5jZVRvRGVncmVlcyhkaXN0YW5jZSwgdW5pdHMpIHtcbiAgICByZXR1cm4gcmFkaWFuczJkZWdyZWVzKGRpc3RhbmNlVG9SYWRpYW5zKGRpc3RhbmNlLCB1bml0cykpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFueSBiZWFyaW5nIGFuZ2xlIGZyb20gdGhlIG5vcnRoIGxpbmUgZGlyZWN0aW9uIChwb3NpdGl2ZSBjbG9ja3dpc2UpXG4gKiBhbmQgcmV0dXJucyBhbiBhbmdsZSBiZXR3ZWVuIDAtMzYwIGRlZ3JlZXMgKHBvc2l0aXZlIGNsb2Nrd2lzZSksIDAgYmVpbmcgdGhlIG5vcnRoIGxpbmVcbiAqXG4gKiBAbmFtZSBiZWFyaW5nVG9BbmdsZVxuICogQHBhcmFtIHtudW1iZXJ9IGJlYXJpbmcgYW5nbGUsIGJldHdlZW4gLTE4MCBhbmQgKzE4MCBkZWdyZWVzXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBhbmdsZSBiZXR3ZWVuIDAgYW5kIDM2MCBkZWdyZWVzXG4gKi9cbmZ1bmN0aW9uIGJlYXJpbmdUb0FuZ2xlKGJlYXJpbmcpIHtcbiAgICBpZiAoYmVhcmluZyA9PT0gbnVsbCB8fCBiZWFyaW5nID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignYmVhcmluZyBpcyByZXF1aXJlZCcpO1xuXG4gICAgdmFyIGFuZ2xlID0gYmVhcmluZyAlIDM2MDtcbiAgICBpZiAoYW5nbGUgPCAwKSBhbmdsZSArPSAzNjA7XG4gICAgcmV0dXJuIGFuZ2xlO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFuZ2xlIGluIHJhZGlhbnMgdG8gZGVncmVlc1xuICpcbiAqIEBuYW1lIHJhZGlhbnMyZGVncmVlc1xuICogQHBhcmFtIHtudW1iZXJ9IHJhZGlhbnMgYW5nbGUgaW4gcmFkaWFuc1xuICogQHJldHVybnMge251bWJlcn0gZGVncmVlcyBiZXR3ZWVuIDAgYW5kIDM2MCBkZWdyZWVzXG4gKi9cbmZ1bmN0aW9uIHJhZGlhbnMyZGVncmVlcyhyYWRpYW5zKSB7XG4gICAgaWYgKHJhZGlhbnMgPT09IG51bGwgfHwgcmFkaWFucyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ3JhZGlhbnMgaXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciBkZWdyZWVzID0gcmFkaWFucyAlICgyICogTWF0aC5QSSk7XG4gICAgcmV0dXJuIGRlZ3JlZXMgKiAxODAgLyBNYXRoLlBJO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFuZ2xlIGluIGRlZ3JlZXMgdG8gcmFkaWFuc1xuICpcbiAqIEBuYW1lIGRlZ3JlZXMycmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGRlZ3JlZXMgYW5nbGUgYmV0d2VlbiAwIGFuZCAzNjAgZGVncmVlc1xuICogQHJldHVybnMge251bWJlcn0gYW5nbGUgaW4gcmFkaWFuc1xuICovXG5mdW5jdGlvbiBkZWdyZWVzMnJhZGlhbnMoZGVncmVlcykge1xuICAgIGlmIChkZWdyZWVzID09PSBudWxsIHx8IGRlZ3JlZXMgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdkZWdyZWVzIGlzIHJlcXVpcmVkJyk7XG5cbiAgICB2YXIgcmFkaWFucyA9IGRlZ3JlZXMgJSAzNjA7XG4gICAgcmV0dXJuIHJhZGlhbnMgKiBNYXRoLlBJIC8gMTgwO1xufVxuXG5cbi8qKlxuICogQ29udmVydHMgYSBkaXN0YW5jZSB0byB0aGUgcmVxdWVzdGVkIHVuaXQuXG4gKiBWYWxpZCB1bml0czogbWlsZXMsIG5hdXRpY2FsbWlsZXMsIGluY2hlcywgeWFyZHMsIG1ldGVycywgbWV0cmVzLCBraWxvbWV0ZXJzLCBjZW50aW1ldGVycywgZmVldFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0YW5jZSB0byBiZSBjb252ZXJ0ZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcmlnaW5hbFVuaXQgb2YgdGhlIGRpc3RhbmNlXG4gKiBAcGFyYW0ge3N0cmluZ30gW2ZpbmFsVW5pdD1raWxvbWV0ZXJzXSByZXR1cm5lZCB1bml0XG4gKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgY29udmVydGVkIGRpc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnREaXN0YW5jZShkaXN0YW5jZSwgb3JpZ2luYWxVbml0LCBmaW5hbFVuaXQpIHtcbiAgICBpZiAoZGlzdGFuY2UgPT09IG51bGwgfHwgZGlzdGFuY2UgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdkaXN0YW5jZSBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghKGRpc3RhbmNlID49IDApKSB0aHJvdyBuZXcgRXJyb3IoJ2Rpc3RhbmNlIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcblxuICAgIHZhciBjb252ZXJ0ZWREaXN0YW5jZSA9IHJhZGlhbnNUb0Rpc3RhbmNlKGRpc3RhbmNlVG9SYWRpYW5zKGRpc3RhbmNlLCBvcmlnaW5hbFVuaXQpLCBmaW5hbFVuaXQgfHwgJ2tpbG9tZXRlcnMnKTtcbiAgICByZXR1cm4gY29udmVydGVkRGlzdGFuY2U7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBhcmVhIHRvIHRoZSByZXF1ZXN0ZWQgdW5pdC5cbiAqIFZhbGlkIHVuaXRzOiBraWxvbWV0ZXJzLCBraWxvbWV0cmVzLCBtZXRlcnMsIG1ldHJlcywgY2VudGltZXRyZXMsIG1pbGxpbWV0ZXIsIGFjcmUsIG1pbGUsIHlhcmQsIGZvb3QsIGluY2hcbiAqIEBwYXJhbSB7bnVtYmVyfSBhcmVhIHRvIGJlIGNvbnZlcnRlZFxuICogQHBhcmFtIHtzdHJpbmd9IFtvcmlnaW5hbFVuaXQ9bWV0ZXJzXSBvZiB0aGUgZGlzdGFuY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBbZmluYWxVbml0PWtpbG9tZXRlcnNdIHJldHVybmVkIHVuaXRcbiAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSBjb252ZXJ0ZWQgZGlzdGFuY2VcbiAqL1xuZnVuY3Rpb24gY29udmVydEFyZWEoYXJlYSwgb3JpZ2luYWxVbml0LCBmaW5hbFVuaXQpIHtcbiAgICBpZiAoYXJlYSA9PT0gbnVsbCB8fCBhcmVhID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignYXJlYSBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghKGFyZWEgPj0gMCkpIHRocm93IG5ldyBFcnJvcignYXJlYSBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG5cbiAgICB2YXIgc3RhcnRGYWN0b3IgPSBhcmVhRmFjdG9yc1tvcmlnaW5hbFVuaXQgfHwgJ21ldGVycyddO1xuICAgIGlmICghc3RhcnRGYWN0b3IpIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBvcmlnaW5hbCB1bml0cycpO1xuXG4gICAgdmFyIGZpbmFsRmFjdG9yID0gYXJlYUZhY3RvcnNbZmluYWxVbml0IHx8ICdraWxvbWV0ZXJzJ107XG4gICAgaWYgKCFmaW5hbEZhY3RvcikgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGZpbmFsIHVuaXRzJyk7XG5cbiAgICByZXR1cm4gKGFyZWEgLyBzdGFydEZhY3RvcikgKiBmaW5hbEZhY3Rvcjtcbn1cblxuLyoqXG4gKiBpc051bWJlclxuICpcbiAqIEBwYXJhbSB7Kn0gbnVtIE51bWJlciB0byB2YWxpZGF0ZVxuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUvZmFsc2VcbiAqIEBleGFtcGxlXG4gKiB0dXJmLmlzTnVtYmVyKDEyMylcbiAqIC8vPXRydWVcbiAqIHR1cmYuaXNOdW1iZXIoJ2ZvbycpXG4gKiAvLz1mYWxzZVxuICovXG5mdW5jdGlvbiBpc051bWJlcihudW0pIHtcbiAgICByZXR1cm4gIWlzTmFOKG51bSkgJiYgbnVtICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KG51bSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGZlYXR1cmU6IGZlYXR1cmUsXG4gICAgZ2VvbWV0cnk6IGdlb21ldHJ5LFxuICAgIGZlYXR1cmVDb2xsZWN0aW9uOiBmZWF0dXJlQ29sbGVjdGlvbixcbiAgICBnZW9tZXRyeUNvbGxlY3Rpb246IGdlb21ldHJ5Q29sbGVjdGlvbixcbiAgICBwb2ludDogcG9pbnQsXG4gICAgbXVsdGlQb2ludDogbXVsdGlQb2ludCxcbiAgICBsaW5lU3RyaW5nOiBsaW5lU3RyaW5nLFxuICAgIG11bHRpTGluZVN0cmluZzogbXVsdGlMaW5lU3RyaW5nLFxuICAgIHBvbHlnb246IHBvbHlnb24sXG4gICAgbXVsdGlQb2x5Z29uOiBtdWx0aVBvbHlnb24sXG4gICAgcmFkaWFuc1RvRGlzdGFuY2U6IHJhZGlhbnNUb0Rpc3RhbmNlLFxuICAgIGRpc3RhbmNlVG9SYWRpYW5zOiBkaXN0YW5jZVRvUmFkaWFucyxcbiAgICBkaXN0YW5jZVRvRGVncmVlczogZGlzdGFuY2VUb0RlZ3JlZXMsXG4gICAgcmFkaWFuczJkZWdyZWVzOiByYWRpYW5zMmRlZ3JlZXMsXG4gICAgZGVncmVlczJyYWRpYW5zOiBkZWdyZWVzMnJhZGlhbnMsXG4gICAgYmVhcmluZ1RvQW5nbGU6IGJlYXJpbmdUb0FuZ2xlLFxuICAgIGNvbnZlcnREaXN0YW5jZTogY29udmVydERpc3RhbmNlLFxuICAgIGNvbnZlcnRBcmVhOiBjb252ZXJ0QXJlYSxcbiAgICByb3VuZDogcm91bmQsXG4gICAgaXNOdW1iZXI6IGlzTnVtYmVyXG59O1xuXG5cbi8qKiovIH0pLFxuLyogNDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX2NvbmZpZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb25maWcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vLyBiZWNhdXNlIHdlIGNhbid0IGVhc2lseSBncmFiIGRhdGEgZnJvbSBtYXAsIGFuZFxuLy8gcXVlcnlTb3VyY2VGZWF0dXJlcyBvbmx5IHJldHVybnMgdGhpbmdzIHRoYXQgYXJlIHdpdGhpbiB2aWV3LlxudmFyIFN0YXRpb25GZWVkID0gZnVuY3Rpb24gU3RhdGlvbkZlZWQoKSB7XG4gIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGF0aW9uRmVlZCk7XG5cbiAgdmFyIHN0YXRpb25zID0gW107XG5cbiAgLy8gcmV0dXJucyBnZW9qc29uXG4gIHRoaXMuZ2V0U3RhdGlvbnMgPSBmdW5jdGlvbiBnZXRTdGF0aW9ucygpIHtcbiAgICByZXR1cm4gc3RhdGlvbnM7XG4gIH07XG5cbiAgLy8gcmV0dXJucyBhcnJheVxuICB0aGlzLmdldFN0YXRpb25zQXJyYXkgPSBmdW5jdGlvbiBnZXRTdGF0aW9uc0FycmF5KCkge1xuICAgIHJldHVybiBzdGF0aW9ucy5mZWF0dXJlcyA/IHN0YXRpb25zLmZlYXR1cmVzIDogW107XG4gIH07XG4gIC8vIGNvbnN0IHNldFN0YXRpb25zID0gZnVuY3Rpb24gc2V0U3RhdGlvbnMoZGF0YSkgeyBzdGF0aW9ucyA9IGRhdGE7IH1cbiAgLy8gZnVuY3Rpb24gc2V0U3RhdGlvbnMoZGF0YSkgeyBzdGF0aW9ucyA9IGRhdGE7IH1cblxuICB2YXIgZG9GZXRjaCA9IGZ1bmN0aW9uIGRvRmV0Y2goKSB7XG4gICAgZmV0Y2goX2NvbmZpZzIuZGVmYXVsdC5zdGF0aW9uc1VybCkudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgcmV0dXJuIHJlc3AuanNvbigpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdmZXRjaGVkIHN0YXRpb25zOiAnLCBkYXRhKTtcbiAgICAgIHN0YXRpb25zID0gZGF0YTtcbiAgICAgIC8vIHNldFN0YXRpb25zKGRhdGEpO1xuICAgIH0pO1xuICB9O1xuXG4gIGRvRmV0Y2goKTtcbiAgd2luZG93LnNldFRpbWVvdXQoZG9GZXRjaCwgMzAgLyogc2Vjb25kcyAqLyAqIDEwMDApO1xufTtcblxudmFyIGZlZWQgPSBuZXcgU3RhdGlvbkZlZWQoKTtcbmV4cG9ydHMuZGVmYXVsdCA9IGZlZWQ7IC8vIGV4cG9ydCBzaW5nbGV0b25cblxuLyoqKi8gfSksXG4vKiA0MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gZ2V0UG9wdXBDb250ZW50O1xuXG52YXIgX3N0YXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9zdGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdGF0ZSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKlxuICogR2V0IEdvb2dsZSBkaXJlY3Rpb25zIDxhPiBsaW5rIHRvL2Zyb20gdXAgdG8gdHdvIHBvaW50c1xuICogQHBhcmFtIHt7bGF0aXR1ZGUsIGxvbmdpdHVkZSwgYWRkcmVzc319IHN0YXJ0IGRpcmVjdGlvbnMgc3RhcnRwb2ludDsgY2FuIGJlIG51bGwuXG4gKiBAcGFyYW0ge3tsYXRpdHVkZSwgbG9uZ2l0dWRlLCBhZGRyZXNzfX0gZW5kIGRpcmVjdGlvbnMgZW5kcG9pbnRcbiAqIEBwYXJhbSB0b09yRnJvbSAtIERpcmVjdGlvbnMgJ3RvJyBvciAnZnJvbSBoZXJlXG4gKi9cbmZ1bmN0aW9uIGdldERpcmVjdGlvbnNMaW5rKHN0YXJ0LCBlbmQsIHRvT3JGcm9tKSB7XG4gIC8vIFRPRE8gLyBCVUc6IFwiYWRkcmVzc2VzXCIgd2l0aCBhICcvJyBpbiB0aGVtIGRvbid0IHdvcmssIGxpa2VcbiAgLy8gXCJDaXZpYyBDZW50ZXIvVU4gUGxhemEgQkFSVCBTdGF0aW9uIChNYXJrZXQgU3QgYXQgTWNBbGxpc3RlciBTdClcIiAtIGN1cnJlbnRseSB0aGF0IHJlc3VsdHNcbiAgLy8gaW4gZGlyZWN0aW9ucyBmcm9tIGNpdmljIGNlbnRlciB0byBVTiBwbGF6YSAoYi9jIGctbWFwcyBzZXBhcmF0ZXMgbG9jYXRpb25zIHdpdGggYSAnLycpXG5cbiAgdmFyIGZyb20gPSBzdGFydCA/IHN0YXJ0LmFkZHJlc3MgfHwgc3RhcnQubGF0aXR1ZGUgKyAnLCcgKyBzdGFydC5sb25naXR1ZGUgOiAnJztcbiAgdmFyIHRvID0gZW5kID8gZW5kLmFkZHJlc3MgfHwgZW5kLmxhdGl0dWRlICsgJywnICsgZW5kLmxvbmdpdHVkZSA6ICcnO1xuXG4gIHZhciBiYXNlVVJMID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vbWFwcy9kaXInO1xuICB2YXIgem9vbSA9IDE3O1xuXG4gIC8vIEdvb2dsZSBNYXBzIG1hZ2ljIHRoYXQgc2F5czogXCJHaXZlIG1lIHdhbGtpbmcgZGlyZWN0aW9uc1wiLlxuICAvLyBTZWUgaHR0cHM6Ly9tc3RpY2tsZXMud29yZHByZXNzLmNvbS8yMDE1LzA2LzEyL2dtYXBzLXVybHMtb3B0aW9ucy9cbiAgLy8gaHR0cHM6Ly93ZWJhcHBzLnN0YWNrZXhjaGFuZ2UuY29tL2EvNzk1NDRcbiAgdmFyIGRhdGEgPSAnZGF0YT0hNG0yITRtMSEzZTInO1xuXG4gIHZhciBkaXJlY3Rpb25zVVJMID0gYmFzZVVSTCArICcvJyArIGZyb20gKyAnLycgKyB0byArICcvQCcgKyB6b29tICsgJy8nICsgZGF0YTtcbiAgLy8gR29vZ2xlIG1hcHMgZXhwZWN0cyBhZGRyZXNzZXMgd2l0aCBuYW1lIGZpcnN0LCB0aGVuIHBsdXMtc2VwYXJhdGVkIGNvbXBvbmVudHMgbGlrZSB0aGlzOlxuICAvLyBOb2lzZWJyaWRnZSwrMjE2OStNaXNzaW9uK1N0LCtTYW4rRnJhbmNpc2NvLCtDQSs5NDExMFxuICByZXR1cm4gJzxhIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIiB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiJyArIGRpcmVjdGlvbnNVUkwgKyAnXCI+RGlyZWN0aW9ucyAnICsgdG9PckZyb20gKyAnIGhlcmU8L2E+Jztcbn1cblxuLyoqXG4gKiBHZXQgSFRNTCBjb250ZW50IGRlc2NyaWJpbmcgYSBzdGF0aW9uLlxuICogQHBhcmFtIHN0YXRpb24gLSBvbmUgc3RhdGlvbiBmcm9tIHRoZSBBUElcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZWFyYnlFbmRwb2ludCAtICdvcmlnaW4nIG9yICdkZXN0aW5hdGlvbicgKGZvciBkaXJlY3Rpb25zIGxpbmspXG4gKi9cbmZ1bmN0aW9uIGdldFBvcHVwQ29udGVudChzdGF0aW9uLCBuZWFyYnlFbmRwb2ludCkge1xuICB2YXIgX3N0YXRpb24kcHJvcGVydGllcyA9IHN0YXRpb24ucHJvcGVydGllcyxcbiAgICAgIGFkZHIgPSBfc3RhdGlvbiRwcm9wZXJ0aWVzLnN0QWRkcmVzczEsXG4gICAgICBsYXQgPSBfc3RhdGlvbiRwcm9wZXJ0aWVzLmxhdGl0dWRlLFxuICAgICAgbG5nID0gX3N0YXRpb24kcHJvcGVydGllcy5sb25naXR1ZGUsXG4gICAgICBiaWtlcyA9IF9zdGF0aW9uJHByb3BlcnRpZXMuYXZhaWxhYmxlQmlrZXMsXG4gICAgICBkb2NrcyA9IF9zdGF0aW9uJHByb3BlcnRpZXMuYXZhaWxhYmxlRG9ja3MsXG4gICAgICBzdGF0dXMgPSBfc3RhdGlvbiRwcm9wZXJ0aWVzLnN0YXR1c1ZhbHVlO1xuXG5cbiAgdmFyIHN0YXRpb25Mb2NhdGlvbiA9IHtcbiAgICBsb25naXR1ZGU6IGxuZyxcbiAgICBsYXRpdHVkZTogbGF0XG4gICAgLy8gYWRkcmVzczogYWRkcixcbiAgICAvLyBqdXN0IGlnbm9yZSB0aGUgc3RhdGlvbiBhZGRyZXNzZXMgYmVjYXVzZSB0aGV5J3JlIHVzZWxlc3M6XG4gICAgLy8gXCJ3ZXN0ZXJuIGFkZGl0aW9uIC0gY29taW5nIDIwMThcIiBkb2Vzbid0IGdlb2NvZGUuXG4gIH07XG5cbiAgdmFyIHN0YXJ0ID0gdm9pZCAwO1xuICB2YXIgZW5kID0gdm9pZCAwO1xuICB2YXIgdG9PckZyb20gPSAnJztcbiAgaWYgKG5lYXJieUVuZHBvaW50ID09PSAnb3JpZ2luJykge1xuICAgIHN0YXJ0ID0gX3N0YXRlMi5kZWZhdWx0Lm9yaWdpbjtcbiAgICBlbmQgPSBzdGF0aW9uTG9jYXRpb247XG4gICAgdG9PckZyb20gPSAndG8nO1xuICB9IGVsc2UgaWYgKG5lYXJieUVuZHBvaW50ID09PSAnZGVzdGluYXRpb24nKSB7XG4gICAgc3RhcnQgPSBzdGF0aW9uTG9jYXRpb247XG4gICAgZW5kID0gX3N0YXRlMi5kZWZhdWx0LmRlc3RpbmF0aW9uO1xuICAgIHRvT3JGcm9tID0gJ2Zyb20nO1xuICB9IGVsc2Uge1xuICAgIHN0YXJ0ID0gbnVsbDtcbiAgICBlbmQgPSBzdGF0aW9uTG9jYXRpb247XG4gIH1cbiAgdmFyIGRpcmVjdGlvbnNMaW5rID0gZ2V0RGlyZWN0aW9uc0xpbmsoc3RhcnQsIGVuZCwgdG9PckZyb20pO1xuXG4gIHZhciByb3VuZCA9IGZ1bmN0aW9uIHJvdW5kKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4pLnRvRml4ZWQoMik7XG4gIH07XG5cbiAgdmFyIGFsZXJ0TXNnID0gc3RhdHVzID09PSAnTm90IEluIFNlcnZpY2UnID8gJzxkaXYgY2xhc3M9XCJzdGF0aW9uLXBvcHVwLS1hbGVydFwiPicgKyBzdGF0dXMgKyAnPC9kaXY+JyA6ICcnO1xuXG4gIHJldHVybiAnXFxuICAgIDxkaXYgY2xhc3M9XCJzdGF0aW9uLXBvcHVwXCI+XFxuICAgICAgPGgzPicgKyBhZGRyICsgJzwvaDM+XFxuICAgICAgJyArIGFsZXJ0TXNnICsgJ1xcbiAgICAgIDxkaXYgY2xhc3M9XCJjb2x1bW5zIHN0YXRpb24tcG9wdXAtLXN0YXRzXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sdW1uIHN0YXRpb24tcG9wdXAtLWJpa2VzXCI+XFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0aW9uLXBvcHVwLS1iaWtlcy1udW1iZXJcIj4nICsgYmlrZXMgKyAnPC9kaXY+XFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0aW9uLXBvcHVwLS1iaWtlcy10ZXh0XCI+YmlrZXM8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbHVtbiBzdGF0aW9uLXBvcHVwLS1kb2Nrc1wiPlxcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdGlvbi1wb3B1cC0tZG9ja3MtbnVtYmVyXCI+JyArIGRvY2tzICsgJzwvZGl2PlxcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdGlvbi1wb3B1cC0tZG9ja3MtdGV4dFwiPmRvY2tzPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICA8L2Rpdj5cXG4gICAgICA8ZGl2IGNsYXNzPVwic3RhdGlvbi1wb3B1cC0tZGlyZWN0aW9uc1wiPlxcbiAgICAgICAgJyArIGRpcmVjdGlvbnNMaW5rICsgJ1xcbiAgICAgIDwvZGl2PlxcbiAgICAgIDxkaXYgY2xhc3M9XCJzdGF0aW9uLXBvcHVwLS1jb29yZGluYXRlc1wiPkxhdC9Mb25nOiA8YWJiciB0aXRsZT1cIicgKyBsYXQgKyAnLCAnICsgbG5nICsgJ1wiPicgKyByb3VuZChsYXQpICsgJywgJyArIHJvdW5kKGxuZykgKyAnPC9hYmJyPjwvZGl2PlxcbiAgICA8L2Rpdj4nO1xufVxuXG4vKioqLyB9KSxcbi8qIDQzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBmZXRjaFJvdXRlO1xuXG52YXIgX2RpcmVjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KTtcblxudmFyIF9kaXJlY3Rpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RpcmVjdGlvbnMpO1xuXG52YXIgX3BvbHlsaW5lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCk7XG5cbnZhciBfcG9seWxpbmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9seWxpbmUpO1xuXG52YXIgX2NvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfY29uZmlnMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbmZpZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBkaXJlY3Rpb25zQ2xpZW50ID0gKDAsIF9kaXJlY3Rpb25zMi5kZWZhdWx0KSh7IGFjY2Vzc1Rva2VuOiBfY29uZmlnMi5kZWZhdWx0Lm1hcGJveFRva2VuIH0pO1xuXG4vKipcbiAqIEZldGNoIHJvdXRlIHBvaW50IGEgdG8gcG9pbnQgYiwgY2FsbCBjYWxsYmFjayB3aGVuIGRvbmUuXG4gKiBAcGFyYW0ge1BvaW50fSBmcm9tXG4gKiBAcGFyYW0ge1BvaW50fSB0b1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqL1xuZnVuY3Rpb24gZmV0Y2hSb3V0ZShhLCBiLCBjYWxsYmFjaykge1xuICBkaXJlY3Rpb25zQ2xpZW50LmdldERpcmVjdGlvbnMoe1xuICAgIHByb2ZpbGU6ICdjeWNsaW5nJyxcbiAgICB3YXlwb2ludHM6IFt7XG4gICAgICBjb29yZGluYXRlczogW2EubG9uZ2l0dWRlLCBhLmxhdGl0dWRlXSxcbiAgICAgIHdheXBvaW50TmFtZTogYS5hZGRyZXNzXG4gICAgfSwge1xuICAgICAgY29vcmRpbmF0ZXM6IFtiLmxvbmdpdHVkZSwgYi5sYXRpdHVkZV0sXG4gICAgICB3YXlwb2ludE5hbWU6IGIuYWRkcmVzc1xuICAgIH1dXG4gIH0pLnNlbmQoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgIHZhciBkaXJlY3Rpb25zID0gcmVzcG9uc2UuYm9keTtcbiAgICBpZiAoZGlyZWN0aW9ucy5jb2RlICE9PSAnT2snKSB7XG4gICAgICAvLyBTZWU6IGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vYXBpLWRvY3VtZW50YXRpb24vI2RpcmVjdGlvbnMtYXBpLWVycm9yc1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUuZXJyb3IoZGlyZWN0aW9ucyk7XG4gICAgICB0aHJvdyBFcnJvcignRmFpbGVkIGdldHRpbmcgZGlyZWN0aW9ucy4nKTtcbiAgICB9XG4gICAgY2FsbGJhY2soX3BvbHlsaW5lMi5kZWZhdWx0LnRvR2VvSlNPTihkaXJlY3Rpb25zLnJvdXRlc1swXS5nZW9tZXRyeSkpO1xuICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygnZXJyb3IgZmV0Y2hpbmcgcm91dGU6ICcsIGVycm9yKTtcbiAgICB0aHJvdyBFcnJvcignRXJyb3Igd2hpbGUgcmVxdWVzdGluZyBkaXJlY3Rpb25zLicpO1xuICB9KTtcbn1cblxuLyoqKi8gfSksXG4vKiA0NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgdiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG52YXIgY3JlYXRlU2VydmljZUZhY3RvcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcbnZhciBvYmplY3RDbGVhbiA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpO1xudmFyIHN0cmluZ2lmeUJvb2xlYW5zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cbi8qKlxuICogRGlyZWN0aW9ucyBBUEkgc2VydmljZS5cbiAqXG4gKiBMZWFybiBtb3JlIGFib3V0IHRoaXMgc2VydmljZSBhbmQgaXRzIHJlc3BvbnNlcyBpblxuICogW3RoZSBIVFRQIHNlcnZpY2UgZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly93d3cubWFwYm94LmNvbS9hcGktZG9jdW1lbnRhdGlvbi8jZGlyZWN0aW9ucykuXG4gKi9cbnZhciBEaXJlY3Rpb25zID0ge307XG5cbi8qKlxuICogR2V0IGRpcmVjdGlvbnMuXG4gKlxuICogUGxlYXNlIHJlYWQgW3RoZSBmdWxsIEhUVFAgc2VydmljZSBkb2N1bWVudGF0aW9uXShodHRwczovL3d3dy5tYXBib3guY29tL2FwaS1kb2N1bWVudGF0aW9uLyNkaXJlY3Rpb25zKVxuICogdG8gdW5kZXJzdGFuZCBhbGwgb2YgdGhlIGF2YWlsYWJsZSBvcHRpb25zLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAqIEBwYXJhbSB7J2RyaXZpbmctdHJhZmZpYyd8J2RyaXZpbmcnfCd3YWxraW5nJ3wnY3ljbGluZyd9IFtjb25maWcucHJvZmlsZT1cImRyaXZpbmdcIl1cbiAqIEBwYXJhbSB7QXJyYXk8RGlyZWN0aW9uc1dheXBvaW50Pn0gY29uZmlnLndheXBvaW50cyAtIEFuIG9yZGVyZWQgYXJyYXkgb2YgW2BEaXJlY3Rpb25zV2F5cG9pbnRgXSgjZGlyZWN0aW9uc3dheXBvaW50KSBvYmplY3RzLCBiZXR3ZWVuIDIgYW5kIDI1IChpbmNsdXNpdmUpLlxuICogQHBhcmFtIHtib29sZWFufSBbY29uZmlnLmFsdGVybmF0aXZlcz1mYWxzZV0gLSBXaGV0aGVyIHRvIHRyeSB0byByZXR1cm4gYWx0ZXJuYXRpdmUgcm91dGVzLlxuICogQHBhcmFtIHtBcnJheTwnZHVyYXRpb24nfCdkaXN0YW5jZSd8J3NwZWVkJ3wnY29uZ2VzdGlvbic+fSBbY29uZmlnLmFubm90YXRpb25zXSAtIFNwZWNpZnkgYWRkaXRpb25hbCBtZXRhZGF0YSB0aGF0IHNob3VsZCBiZSByZXR1cm5lZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NvbmZpZy5iYW5uZXJJbnN0cnVjdGlvbnM9ZmFsc2VdIC0gU2hvdWxkIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgc3RlcHNgLlxuICogQHBhcmFtIHtib29sZWFufSBbY29uZmlnLmNvbnRpbnVlU3RyYWlnaHRdIC0gU2V0cyB0aGUgYWxsb3dlZCBkaXJlY3Rpb24gb2YgdHJhdmVsIHdoZW4gZGVwYXJ0aW5nIGludGVybWVkaWF0ZSB3YXlwb2ludHMuXG4gKiBAcGFyYW0ge3N0cmluZ30gW2NvbmZpZy5leGNsdWRlXSAtIEV4Y2x1ZGUgY2VydGFpbiByb2FkIHR5cGVzIGZyb20gcm91dGluZy4gU2VlIEhUVFAgc2VydmljZSBkb2N1bWVudGF0aW9uIGZvciBvcHRpb25zLlxuICogQHBhcmFtIHsnZ2VvanNvbid8J3BvbHlsaW5lJ3wncG9seWxpbmU2J30gW2NvbmZpZy5nZW9tZXRyaWVzPVwicG9seWxpbmVcIl0gLSBGb3JtYXQgb2YgdGhlIHJldHVybmVkIGdlb21ldHJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb25maWcubGFuZ3VhZ2U9XCJlblwiXSAtIExhbmd1YWdlIG9mIHJldHVybmVkIHR1cm4tYnktdHVybiB0ZXh0IGluc3RydWN0aW9ucy5cbiAqICAgU2VlIG9wdGlvbnMgbGlzdGVkIGluIFt0aGUgSFRUUCBzZXJ2aWNlIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vYXBpLWRvY3VtZW50YXRpb24vI2luc3RydWN0aW9ucy1sYW5ndWFnZXMpLlxuICogQHBhcmFtIHsnc2ltcGxpZmllZCd8J2Z1bGwnfCdmYWxzZSd9IFtjb25maWcub3ZlcnZpZXc9XCJzaW1wbGlmaWVkXCJdIC0gVHlwZSBvZiByZXR1cm5lZCBvdmVydmlldyBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NvbmZpZy5yb3VuZGFib3V0RXhpdHM9ZmFsc2VdIC0gRW1pdCBpbnNidHJ1Y3Rpb25zIGF0IHJvdW5kYWJvdXQgZXhpdHMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtjb25maWcuc3RlcHM9ZmFsc2VdIC0gV2hldGhlciB0byByZXR1cm4gc3RlcHMgYW5kIHR1cm4tYnktdHVybiBpbnN0cnVjdGlvbnMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtjb25maWcudm9pY2VJbnN0cnVjdGlvbnM9ZmFsc2VdIC0gV2hldGhlciBvciBub3QgdG8gcmV0dXJuIFNTTUwgbWFya2VkLXVwIHRleHQgZm9yIHZvaWNlIGd1aWRhbmNlIGFsb25nIHRoZSByb3V0ZS5cbiAqIEBwYXJhbSB7J2ltcGVyaWFsJ3wnbWV0cmljJ30gW2NvbmZpZy52b2ljZVVuaXRzPVwiaW1wZXJpYWxcIl0gLSBXaGljaCB0eXBlIG9mIHVuaXRzIHRvIHJldHVybiBpbiB0aGUgdGV4dCBmb3Igdm9pY2UgaW5zdHJ1Y3Rpb25zLlxuICogQHJldHVybiB7TWFwaVJlcXVlc3R9XG4gKi9cbkRpcmVjdGlvbnMuZ2V0RGlyZWN0aW9ucyA9IGZ1bmN0aW9uKGNvbmZpZykge1xuICB2LmFzc2VydFNoYXBlKHtcbiAgICBwcm9maWxlOiB2Lm9uZU9mKCdkcml2aW5nLXRyYWZmaWMnLCAnZHJpdmluZycsICd3YWxraW5nJywgJ2N5Y2xpbmcnKSxcbiAgICB3YXlwb2ludHM6IHYucmVxdWlyZWQoXG4gICAgICB2LmFycmF5T2YoXG4gICAgICAgIHYuc2hhcGUoe1xuICAgICAgICAgIGNvb3JkaW5hdGVzOiB2LnJlcXVpcmVkKHYuY29vcmRpbmF0ZXMpLFxuICAgICAgICAgIGFwcHJvYWNoOiB2Lm9uZU9mKCd1bnJlc3RyaWN0ZWQnLCAnY3VyYicpLFxuICAgICAgICAgIGJlYXJpbmc6IHYuYXJyYXlPZih2LnJhbmdlKFswLCAzNjBdKSksXG4gICAgICAgICAgcmFkaXVzOiB2Lm9uZU9mVHlwZSh2Lm51bWJlciwgdi5lcXVhbCgndW5saW1pdGVkJykpLFxuICAgICAgICAgIHdheXBvaW50TmFtZTogdi5zdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICApLFxuICAgIGFsdGVybmF0aXZlczogdi5ib29sZWFuLFxuICAgIGFubm90YXRpb25zOiB2LmFycmF5T2YoXG4gICAgICB2Lm9uZU9mKCdkdXJhdGlvbicsICdkaXN0YW5jZScsICdzcGVlZCcsICdjb25nZXN0aW9uJylcbiAgICApLFxuICAgIGJhbm5lckluc3RydWN0aW9uczogdi5ib29sZWFuLFxuICAgIGNvbnRpbnVlU3RyYWlnaHQ6IHYuYm9vbGVhbixcbiAgICBleGNsdWRlOiB2LnN0cmluZyxcbiAgICBnZW9tZXRyaWVzOiB2LnN0cmluZyxcbiAgICBsYW5ndWFnZTogdi5zdHJpbmcsXG4gICAgb3ZlcnZpZXc6IHYuc3RyaW5nLFxuICAgIHJvdW5kYWJvdXRFeGl0czogdi5ib29sZWFuLFxuICAgIHN0ZXBzOiB2LmJvb2xlYW4sXG4gICAgdm9pY2VJbnN0cnVjdGlvbnM6IHYuYm9vbGVhbixcbiAgICB2b2ljZVVuaXRzOiB2LnN0cmluZ1xuICB9KShjb25maWcpO1xuXG4gIGNvbmZpZy5wcm9maWxlID0gY29uZmlnLnByb2ZpbGUgfHwgJ2RyaXZpbmcnO1xuXG4gIHZhciBwYXRoID0ge1xuICAgIGNvb3JkaW5hdGVzOiBbXSxcbiAgICBhcHByb2FjaDogW10sXG4gICAgYmVhcmluZzogW10sXG4gICAgcmFkaXVzOiBbXSxcbiAgICB3YXlwb2ludE5hbWU6IFtdXG4gIH07XG5cbiAgdmFyIHdheXBvaW50Q291bnQgPSBjb25maWcud2F5cG9pbnRzLmxlbmd0aDtcbiAgaWYgKHdheXBvaW50Q291bnQgPCAyIHx8IHdheXBvaW50Q291bnQgPiAyNSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICd3YXlwb2ludHMgbXVzdCBpbmNsdWRlIGJldHdlZW4gMiBhbmQgMjUgRGlyZWN0aW9uc1dheXBvaW50cydcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlZGVmIHtPYmplY3R9IERpcmVjdGlvbnNXYXlwb2ludFxuICAgKiBAcHJvcGVydHkge0Nvb3JkaW5hdGVzfSBjb29yZGluYXRlc1xuICAgKiBAcHJvcGVydHkgeyd1bnJlc3RyaWN0ZWQnfCdjdXJiJ30gW2FwcHJvYWNoPVwidW5yZXN0cmljdGVkXCJdIC0gVXNlZCB0byBpbmRpY2F0ZSBob3cgcmVxdWVzdGVkIHJvdXRlcyBjb25zaWRlciBmcm9tIHdoaWNoIHNpZGUgb2YgdGhlIHJvYWQgdG8gYXBwcm9hY2ggdGhlIHdheXBvaW50LlxuICAgKiBAcHJvcGVydHkge1tudW1iZXIsIG51bWJlcl19IFtiZWFyaW5nXSAtIFVzZWQgdG8gZmlsdGVyIHRoZSByb2FkIHNlZ21lbnQgdGhlIHdheXBvaW50IHdpbGwgYmUgcGxhY2VkIG9uIGJ5IGRpcmVjdGlvbiBhbmQgZGljdGF0ZXMgdGhlIGFuZ2xlIG9mIGFwcHJvYWNoLlxuICAgKiAgIFRoaXMgb3B0aW9uIHNob3VsZCBhbHdheXMgYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGEgYHJhZGl1c2AuIFRoZSBmaXJzdCB2YWx1ZSBpcyBhbiBhbmdsZSBjbG9ja3dpc2UgZnJvbSB0cnVlIG5vcnRoIGJldHdlZW4gMCBhbmQgMzYwLFxuICAgKiAgIGFuZCB0aGUgc2Vjb25kIGlzIHRoZSByYW5nZSBvZiBkZWdyZWVzIHRoZSBhbmdsZSBjYW4gZGV2aWF0ZSBieS5cbiAgICogQHByb3BlcnR5IHtudW1iZXJ8J3VubGltaXRlZCd9IFtyYWRpdXNdIC0gTWF4aW11bSBkaXN0YW5jZSBpbiBtZXRlcnMgdGhhdCB0aGUgY29vcmRpbmF0ZSBpcyBhbGxvd2VkIHRvIG1vdmUgd2hlbiBzbmFwcGVkIHRvIGEgbmVhcmJ5IHJvYWQgc2VnbWVudC5cbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFt3YXlwb2ludE5hbWVdIC0gQ3VzdG9tIG5hbWUgZm9yIHRoZSB3YXlwb2ludCB1c2VkIGZvciB0aGUgYXJyaXZhbCBpbnN0cnVjdGlvbiBpbiBiYW5uZXJzIGFuZCB2b2ljZSBpbnN0cnVjdGlvbnMuXG4gICAqL1xuICBjb25maWcud2F5cG9pbnRzLmZvckVhY2goZnVuY3Rpb24od2F5cG9pbnQpIHtcbiAgICBwYXRoLmNvb3JkaW5hdGVzLnB1c2goXG4gICAgICB3YXlwb2ludC5jb29yZGluYXRlc1swXSArICcsJyArIHdheXBvaW50LmNvb3JkaW5hdGVzWzFdXG4gICAgKTtcblxuICAgIC8vIGpvaW4gcHJvcHMgd2hpY2ggY29tZSBpbiBwYWlyc1xuICAgIFsnYmVhcmluZyddLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKHdheXBvaW50Lmhhc093blByb3BlcnR5KHByb3ApICYmIHdheXBvaW50W3Byb3BdICE9IG51bGwpIHtcbiAgICAgICAgd2F5cG9pbnRbcHJvcF0gPSB3YXlwb2ludFtwcm9wXS5qb2luKCcsJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBbJ2FwcHJvYWNoJywgJ2JlYXJpbmcnLCAncmFkaXVzJywgJ3dheXBvaW50TmFtZSddLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKHdheXBvaW50Lmhhc093blByb3BlcnR5KHByb3ApICYmIHdheXBvaW50W3Byb3BdICE9IG51bGwpIHtcbiAgICAgICAgcGF0aFtwcm9wXS5wdXNoKHdheXBvaW50W3Byb3BdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhdGhbcHJvcF0ucHVzaCgnJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIFsnYXBwcm9hY2gnLCAnYmVhcmluZycsICdyYWRpdXMnLCAnd2F5cG9pbnROYW1lJ10uZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgLy8gYXZvaWQgc2VuZGluZyBwYXJhbXMgd2hpY2ggYXJlIGFsbCBgO2BcbiAgICBpZiAoXG4gICAgICBwYXRoW3Byb3BdLmV2ZXJ5KGZ1bmN0aW9uKGNoYXIpIHtcbiAgICAgICAgcmV0dXJuIGNoYXIgPT09ICcnO1xuICAgICAgfSlcbiAgICApIHtcbiAgICAgIGRlbGV0ZSBwYXRoW3Byb3BdO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXRoW3Byb3BdID0gcGF0aFtwcm9wXS5qb2luKCc7Jyk7XG4gICAgfVxuICB9KTtcblxuICB2YXIgcXVlcnkgPSBzdHJpbmdpZnlCb29sZWFucyh7XG4gICAgYWx0ZXJuYXRpdmVzOiBjb25maWcuYWx0ZXJuYXRpdmVzLFxuICAgIGFubm90YXRpb25zOiBjb25maWcuYW5ub3RhdGlvbnMsXG4gICAgYmFubmVyX2luc3RydWN0aW9uczogY29uZmlnLmJhbm5lckluc3RydWN0aW9ucyxcbiAgICBjb250aW51ZV9zdHJhaWdodDogY29uZmlnLmNvbnRpbnVlU3RyYWlnaHQsXG4gICAgZXhjbHVkZTogY29uZmlnLmV4Y2x1ZGUsXG4gICAgZ2VvbWV0cmllczogY29uZmlnLmdlb21ldHJpZXMsXG4gICAgbGFuZ3VhZ2U6IGNvbmZpZy5sYW5ndWFnZSxcbiAgICBvdmVydmlldzogY29uZmlnLm92ZXJ2aWV3LFxuICAgIHJvdW5kYWJvdXRfZXhpdHM6IGNvbmZpZy5yb3VuZGFib3V0RXhpdHMsXG4gICAgc3RlcHM6IGNvbmZpZy5zdGVwcyxcbiAgICB2b2ljZV9pbnN0cnVjdGlvbnM6IGNvbmZpZy52b2ljZUluc3RydWN0aW9ucyxcbiAgICB2b2ljZV91bml0czogY29uZmlnLnZvaWNlVW5pdHMsXG4gICAgYXBwcm9hY2hlczogcGF0aC5hcHByb2FjaCxcbiAgICBiZWFyaW5nczogcGF0aC5iZWFyaW5nLFxuICAgIHJhZGl1c2VzOiBwYXRoLnJhZGl1cyxcbiAgICB3YXlwb2ludF9uYW1lczogcGF0aC53YXlwb2ludE5hbWVcbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXMuY2xpZW50LmNyZWF0ZVJlcXVlc3Qoe1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgcGF0aDogJy9kaXJlY3Rpb25zL3Y1L21hcGJveC86cHJvZmlsZS86Y29vcmRpbmF0ZXMnLFxuICAgIHBhcmFtczoge1xuICAgICAgcHJvZmlsZTogY29uZmlnLnByb2ZpbGUsXG4gICAgICBjb29yZGluYXRlczogcGF0aC5jb29yZGluYXRlcy5qb2luKCc7JylcbiAgICB9LFxuICAgIHF1ZXJ5OiBvYmplY3RDbGVhbihxdWVyeSlcbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVNlcnZpY2VGYWN0b3J5KERpcmVjdGlvbnMpO1xuXG5cbi8qKiovIH0pLFxuLyogNDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qKlxuICogVmFsaWRhdG9ycyBhcmUgZnVuY3Rpb25zIHdoaWNoIGFzc2VydCBjZXJ0YWluIHR5cGUuXG4gKiBUaGV5IGNhbiByZXR1cm4gYSBzdHJpbmcgd2hpY2ggY2FuIHRoZW4gYmUgdXNlZFxuICogdG8gZGlzcGxheSBhIGhlbHBmdWwgZXJyb3IgbWVzc2FnZS5cbiAqIFRoZXkgY2FuIGFsc28gcmV0dXJuIGEgZnVuY3Rpb24gZm9yIGEgY3VzdG9tIGVycm9yIG1lc3NhZ2UuXG4gKi9cbnZhciBpc1BsYWluT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7XG52YXIgeHRlbmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgREVGQVVMVF9FUlJPUl9QQVRIID0gJ3ZhbHVlJztcbnZhciBORVdMSU5FX0lOREVOVCA9ICdcXG4gICc7XG5cbnZhciB2ID0ge307XG5cbi8qKlxuICogUnVubmVyc1xuICpcbiAqIFRha2Ugcm9vdCB2YWxpZGF0b3JzIGFuZCBydW4gYXNzZXJ0aW9uXG4gKi9cbnYuYXNzZXJ0ID0gZnVuY3Rpb24ocm9vdFZhbGlkYXRvciwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIG1lc3NhZ2UgPSB2YWxpZGF0ZShyb290VmFsaWRhdG9yLCB2YWx1ZSk7XG4gICAgLy8gYWxsIGdvb2RcbiAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZXJyb3JNZXNzYWdlID0gcHJvY2Vzc01lc3NhZ2UobWVzc2FnZSwgb3B0aW9ucyk7XG5cbiAgICBpZiAob3B0aW9ucy5hcGlOYW1lKSB7XG4gICAgICBlcnJvck1lc3NhZ2UgPSBvcHRpb25zLmFwaU5hbWUgKyAnOiAnICsgZXJyb3JNZXNzYWdlO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICB9O1xufTtcblxuLyoqXG4gKiBIaWdoZXIgT3JkZXIgVmFsaWRhdG9yc1xuICpcbiAqIHZhbGlkYXRvcnMgd2hpY2ggdGFrZSBvdGhlciB2YWxpZGF0b3JzIGFzIGlucHV0XG4gKiBhbmQgb3V0cHV0IGEgbmV3IHZhbGlkYXRvclxuICovXG52LnNoYXBlID0gZnVuY3Rpb24gc2hhcGUodmFsaWRhdG9yT2JqKSB7XG4gIHZhciB2YWxpZGF0b3JzID0gb2JqZWN0RW50cmllcyh2YWxpZGF0b3JPYmopO1xuICByZXR1cm4gZnVuY3Rpb24gc2hhcGVWYWxpZGF0b3IodmFsdWUpIHtcbiAgICB2YXIgdmFsaWRhdGlvblJlc3VsdCA9IHZhbGlkYXRlKHYucGxhaW5PYmplY3QsIHZhbHVlKTtcblxuICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0KSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdDtcbiAgICB9XG5cbiAgICB2YXIga2V5LCB2YWxpZGF0b3I7XG4gICAgdmFyIGVycm9yTWVzc2FnZXMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsaWRhdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0gdmFsaWRhdG9yc1tpXS5rZXk7XG4gICAgICB2YWxpZGF0b3IgPSB2YWxpZGF0b3JzW2ldLnZhbHVlO1xuICAgICAgdmFsaWRhdGlvblJlc3VsdCA9IHZhbGlkYXRlKHZhbGlkYXRvciwgdmFsdWVba2V5XSk7XG5cbiAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0KSB7XG4gICAgICAgIC8vIHJldHVybiBba2V5XS5jb25jYXQodmFsaWRhdGlvblJlc3VsdCk7XG4gICAgICAgIGVycm9yTWVzc2FnZXMucHVzaChba2V5XS5jb25jYXQodmFsaWRhdGlvblJlc3VsdCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlcnJvck1lc3NhZ2VzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHJldHVybiBlcnJvck1lc3NhZ2VzWzBdO1xuICAgIH1cblxuICAgIC8vIGVudW1lcmF0ZSBhbGwgdGhlIGVycm9yIG1lc3NhZ2VzXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGVycm9yTWVzc2FnZXMgPSBlcnJvck1lc3NhZ2VzLm1hcChmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICAgIHZhciBrZXkgPSBtZXNzYWdlWzBdO1xuICAgICAgICB2YXIgcmVuZGVyZWRNZXNzYWdlID0gcHJvY2Vzc01lc3NhZ2UobWVzc2FnZSwgb3B0aW9ucylcbiAgICAgICAgICAuc3BsaXQoJ1xcbicpXG4gICAgICAgICAgLmpvaW4oTkVXTElORV9JTkRFTlQpOyAvLyBpbmRlbnRzIGFueSBpbm5lciBuZXN0aW5nXG4gICAgICAgIHJldHVybiAnLSAnICsga2V5ICsgJzogJyArIHJlbmRlcmVkTWVzc2FnZTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgb2JqZWN0SWQgPSBvcHRpb25zLnBhdGguam9pbignLicpO1xuICAgICAgdmFyIG9mUGhyYXNlID0gb2JqZWN0SWQgPT09IERFRkFVTFRfRVJST1JfUEFUSCA/ICcnIDogJyBvZiAnICsgb2JqZWN0SWQ7XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgICdUaGUgZm9sbG93aW5nIHByb3BlcnRpZXMnICtcbiAgICAgICAgb2ZQaHJhc2UgK1xuICAgICAgICAnIGhhdmUgaW52YWxpZCB2YWx1ZXM6JyArXG4gICAgICAgIE5FV0xJTkVfSU5ERU5UICtcbiAgICAgICAgZXJyb3JNZXNzYWdlcy5qb2luKE5FV0xJTkVfSU5ERU5UKVxuICAgICAgKTtcbiAgICB9O1xuICB9O1xufTtcblxudi5zdHJpY3RTaGFwZSA9IGZ1bmN0aW9uIHN0cmljdFNoYXBlKHZhbGlkYXRvck9iaikge1xuICB2YXIgc2hhcGVWYWxpZGF0b3IgPSB2LnNoYXBlKHZhbGlkYXRvck9iaik7XG4gIHJldHVybiBmdW5jdGlvbiBzdHJpY3RTaGFwZVZhbGlkYXRvcih2YWx1ZSkge1xuICAgIHZhciBzaGFwZVJlc3VsdCA9IHNoYXBlVmFsaWRhdG9yKHZhbHVlKTtcbiAgICBpZiAoc2hhcGVSZXN1bHQpIHtcbiAgICAgIHJldHVybiBzaGFwZVJlc3VsdDtcbiAgICB9XG5cbiAgICB2YXIgaW52YWxpZEtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSkucmVkdWNlKGZ1bmN0aW9uKG1lbW8sIHZhbHVlS2V5KSB7XG4gICAgICBpZiAodmFsaWRhdG9yT2JqW3ZhbHVlS2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG1lbW8ucHVzaCh2YWx1ZUtleSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWVtbztcbiAgICB9LCBbXSk7XG5cbiAgICBpZiAoaW52YWxpZEtleXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnVGhlIGZvbGxvd2luZyBrZXlzIGFyZSBpbnZhbGlkOiAnICsgaW52YWxpZEtleXMuam9pbignLCAnKTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufTtcblxudi5hcnJheU9mID0gZnVuY3Rpb24gYXJyYXlPZih2YWxpZGF0b3IpIHtcbiAgcmV0dXJuIGNyZWF0ZUFycmF5VmFsaWRhdG9yKHZhbGlkYXRvcik7XG59O1xuXG52LnR1cGxlID0gZnVuY3Rpb24gdHVwbGUoKSB7XG4gIHZhciB2YWxpZGF0b3JzID0gQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pXG4gICAgPyBhcmd1bWVudHNbMF1cbiAgICA6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gIHJldHVybiBjcmVhdGVBcnJheVZhbGlkYXRvcih2YWxpZGF0b3JzKTtcbn07XG5cbi8vIEN1cnJlbnRseSBhcnJheSB2YWxpZGF0aW9uIGZhaWxzIHdoZW4gdGhlIGZpcnN0IGludmFsaWQgaXRlbSBpcyBmb3VuZC5cbmZ1bmN0aW9uIGNyZWF0ZUFycmF5VmFsaWRhdG9yKHZhbGlkYXRvcnMpIHtcbiAgdmFyIHZhbGlkYXRpbmdUdXBsZSA9IEFycmF5LmlzQXJyYXkodmFsaWRhdG9ycyk7XG4gIHZhciBnZXRWYWxpZGF0b3IgPSBmdW5jdGlvbihpbmRleCkge1xuICAgIGlmICh2YWxpZGF0aW5nVHVwbGUpIHtcbiAgICAgIHJldHVybiB2YWxpZGF0b3JzW2luZGV4XTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbGlkYXRvcnM7XG4gIH07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGFycmF5VmFsaWRhdG9yKHZhbHVlKSB7XG4gICAgdmFyIHZhbGlkYXRpb25SZXN1bHQgPSB2YWxpZGF0ZSh2LnBsYWluQXJyYXksIHZhbHVlKTtcbiAgICBpZiAodmFsaWRhdGlvblJlc3VsdCkge1xuICAgICAgcmV0dXJuIHZhbGlkYXRpb25SZXN1bHQ7XG4gICAgfVxuXG4gICAgaWYgKHZhbGlkYXRpbmdUdXBsZSAmJiB2YWx1ZS5sZW5ndGggIT09IHZhbGlkYXRvcnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gJ2FuIGFycmF5IHdpdGggJyArIHZhbGlkYXRvcnMubGVuZ3RoICsgJyBpdGVtcyc7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFsaWRhdGlvblJlc3VsdCA9IHZhbGlkYXRlKGdldFZhbGlkYXRvcihpKSwgdmFsdWVbaV0pO1xuICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIFtpXS5jb25jYXQodmFsaWRhdGlvblJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG52LnJlcXVpcmVkID0gZnVuY3Rpb24gcmVxdWlyZWQodmFsaWRhdG9yKSB7XG4gIGZ1bmN0aW9uIHJlcXVpcmVkVmFsaWRhdG9yKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRFcnJvck1lc3NhZ2UoXG4gICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICBpc0FycmF5Q3VscHJpdChvcHRpb25zLnBhdGgpXG4gICAgICAgICAgICA/ICdjYW5ub3QgYmUgdW5kZWZpbmVkL251bGwuJ1xuICAgICAgICAgICAgOiAnaXMgcmVxdWlyZWQuJ1xuICAgICAgICApO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbGlkYXRvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG4gIHJlcXVpcmVkVmFsaWRhdG9yLl9fcmVxdWlyZWQgPSB0cnVlO1xuXG4gIHJldHVybiByZXF1aXJlZFZhbGlkYXRvcjtcbn07XG5cbnYub25lT2ZUeXBlID0gZnVuY3Rpb24gb25lT2ZUeXBlKCkge1xuICB2YXIgdmFsaWRhdG9ycyA9IEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKVxuICAgID8gYXJndW1lbnRzWzBdXG4gICAgOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICByZXR1cm4gZnVuY3Rpb24gb25lT2ZUeXBlVmFsaWRhdG9yKHZhbHVlKSB7XG4gICAgdmFyIG1lc3NhZ2VzID0gdmFsaWRhdG9yc1xuICAgICAgLm1hcChmdW5jdGlvbih2YWxpZGF0b3IpIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlKHZhbGlkYXRvciwgdmFsdWUpO1xuICAgICAgfSlcbiAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFzIG1hbnkgbWVzc2FnZXMgYXMgbm8uIG9mIHZhbGlkYXRvcnMsXG4gICAgLy8gdGhlbiBhdCBsZWFzdCBvbmUgdmFsaWRhdG9yIHdhcyBvayB3aXRoIHRoZSB2YWx1ZS5cbiAgICBpZiAobWVzc2FnZXMubGVuZ3RoICE9PSB2YWxpZGF0b3JzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGNoZWNrIHByaW1pdGl2ZSB0eXBlXG4gICAgaWYgKFxuICAgICAgbWVzc2FnZXMuZXZlcnkoZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZS5sZW5ndGggPT09IDEgJiYgdHlwZW9mIG1lc3NhZ2VbMF0gPT09ICdzdHJpbmcnO1xuICAgICAgfSlcbiAgICApIHtcbiAgICAgIHJldHVybiBvckxpc3QoXG4gICAgICAgIG1lc3NhZ2VzLm1hcChmdW5jdGlvbihtKSB7XG4gICAgICAgICAgcmV0dXJuIG1bMF07XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIENvbXBsZXggb25lT2ZUeXBlcyBsaWtlXG4gICAgLy8gYHYub25lT2Z0eXBlcyh2LnNoYXBlKHtuYW1lOiB2LnN0cmluZ30pYCwgYHYuc2hhcGUoe25hbWU6IHYubnVtYmVyfSkpYFxuICAgIC8vIGFyZSBjb21wbGV4IMKvXFxfKOODhClfL8KvLiBGb3IgdGhlIGN1cnJlbnQgc2NvcGUgb25seSByZXR1cm5pbmcgdGhlIGxvbmdlc3QgbWVzc2FnZS5cbiAgICByZXR1cm4gbWVzc2FnZXMucmVkdWNlKGZ1bmN0aW9uKG1heCwgYXJyKSB7XG4gICAgICByZXR1cm4gYXJyLmxlbmd0aCA+IG1heC5sZW5ndGggPyBhcnIgOiBtYXg7XG4gICAgfSk7XG4gIH07XG59O1xuXG4vKipcbiAqIE1ldGEgVmFsaWRhdG9yc1xuICogd2hpY2ggdGFrZSBvcHRpb25zIGFzIGFyZ3VtZW50IChub3QgdmFsaWRhdG9ycylcbiAqIGFuZCByZXR1cm4gYSBuZXcgcHJpbWl0aXZlIHZhbGlkYXRvclxuICovXG52LmVxdWFsID0gZnVuY3Rpb24gZXF1YWwoY29tcGFyZVdpdGgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGVxdWFsVmFsaWRhdG9yKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlICE9PSBjb21wYXJlV2l0aCkge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGNvbXBhcmVXaXRoKTtcbiAgICB9XG4gIH07XG59O1xuXG52Lm9uZU9mID0gZnVuY3Rpb24gb25lT2YoKSB7XG4gIHZhciBvcHRpb25zID0gQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pXG4gICAgPyBhcmd1bWVudHNbMF1cbiAgICA6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gIHZhciB2YWxpZGF0b3JzID0gb3B0aW9ucy5tYXAoZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdi5lcXVhbCh2YWx1ZSk7XG4gIH0pO1xuXG4gIHJldHVybiB2Lm9uZU9mVHlwZS5hcHBseSh0aGlzLCB2YWxpZGF0b3JzKTtcbn07XG5cbnYucmFuZ2UgPSBmdW5jdGlvbiByYW5nZShjb21wYXJlV2l0aCkge1xuICB2YXIgbWluID0gY29tcGFyZVdpdGhbMF07XG4gIHZhciBtYXggPSBjb21wYXJlV2l0aFsxXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJhbmdlVmFsaWRhdG9yKHZhbHVlKSB7XG4gICAgdmFyIHZhbGlkYXRpb25SZXN1bHQgPSB2YWxpZGF0ZSh2Lm51bWJlciwgdmFsdWUpO1xuXG4gICAgaWYgKHZhbGlkYXRpb25SZXN1bHQgfHwgdmFsdWUgPCBtaW4gfHwgdmFsdWUgPiBtYXgpIHtcbiAgICAgIHJldHVybiAnbnVtYmVyIGJldHdlZW4gJyArIG1pbiArICcgJiAnICsgbWF4ICsgJyAoaW5jbHVzaXZlKSc7XG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBQcmltaXRpdmUgdmFsaWRhdG9yc1xuICpcbiAqIHNpbXBsZSB2YWxpZGF0b3JzIHdoaWNoIHJldHVybiBhIHN0cmluZyBvciB1bmRlZmluZWRcbiAqL1xudi5hbnkgPSBmdW5jdGlvbiBhbnkoKSB7XG4gIHJldHVybjtcbn07XG5cbnYuYm9vbGVhbiA9IGZ1bmN0aW9uIGJvb2xlYW4odmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuICdib29sZWFuJztcbiAgfVxufTtcblxudi5udW1iZXIgPSBmdW5jdGlvbiBudW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gJ251bWJlcic7XG4gIH1cbn07XG5cbnYucGxhaW5BcnJheSA9IGZ1bmN0aW9uIHBsYWluQXJyYXkodmFsdWUpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiAnYXJyYXknO1xuICB9XG59O1xuXG52LnBsYWluT2JqZWN0ID0gZnVuY3Rpb24gcGxhaW5PYmplY3QodmFsdWUpIHtcbiAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgIHJldHVybiAnb2JqZWN0JztcbiAgfVxufTtcblxudi5zdHJpbmcgPSBmdW5jdGlvbiBzdHJpbmcodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gJ3N0cmluZyc7XG4gIH1cbn07XG5cbnYuZnVuYyA9IGZ1bmN0aW9uIGZ1bmModmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiAnZnVuY3Rpb24nO1xuICB9XG59O1xuXG5mdW5jdGlvbiB2YWxpZGF0ZSh2YWxpZGF0b3IsIHZhbHVlKSB7XG4gIC8vIGFzc2VydGlvbnMgYXJlIG9wdGlvbmFsIGJ5IGRlZmF1bHQgdW5sZXNzIHdyYXBwZWQgaW4gdi5yZXF1aXJlXG4gIGlmICh2YWx1ZSA9PSBudWxsICYmICF2YWxpZGF0b3IuaGFzT3duUHJvcGVydHkoJ19fcmVxdWlyZWQnKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciByZXN1bHQgPSB2YWxpZGF0b3IodmFsdWUpO1xuXG4gIGlmIChyZXN1bHQpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShyZXN1bHQpID8gcmVzdWx0IDogW3Jlc3VsdF07XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc01lc3NhZ2UobWVzc2FnZSwgb3B0aW9ucykge1xuICAvLyBtZXNzYWdlIGFycmF5IGZvbGxvd3MgdGhlIGNvbnZlbnRpb25cbiAgLy8gWy4uLnBhdGgsIHJlc3VsdF1cbiAgLy8gcGF0aCBpcyBhbiBhcnJheSBvZiBvYmplY3Qga2V5cyAvIGFycmF5IGluZGljZXNcbiAgLy8gcmVzdWx0IGlzIG91dHB1dCBvZiB0aGUgdmFsaWRhdG9yXG4gIHZhciBsZW4gPSBtZXNzYWdlLmxlbmd0aDtcblxuICB2YXIgcmVzdWx0ID0gbWVzc2FnZVtsZW4gLSAxXTtcbiAgdmFyIHBhdGggPSBtZXNzYWdlLnNsaWNlKDAsIGxlbiAtIDEpO1xuXG4gIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgIHBhdGggPSBbREVGQVVMVF9FUlJPUl9QQVRIXTtcbiAgfVxuICBvcHRpb25zID0geHRlbmQob3B0aW9ucywgeyBwYXRoOiBwYXRoIH0pO1xuXG4gIHJldHVybiB0eXBlb2YgcmVzdWx0ID09PSAnZnVuY3Rpb24nXG4gICAgPyByZXN1bHQob3B0aW9ucykgLy8gYWxsb3dzIGN1c3RvbWl6YXRpb24gb2YgcmVzdWx0XG4gICAgOiBmb3JtYXRFcnJvck1lc3NhZ2Uob3B0aW9ucywgcHJldHRpZnlSZXN1bHQocmVzdWx0KSk7XG59XG5cbmZ1bmN0aW9uIG9yTGlzdChsaXN0KSB7XG4gIGlmIChsaXN0Lmxlbmd0aCA8IDIpIHtcbiAgICByZXR1cm4gbGlzdFswXTtcbiAgfVxuICBpZiAobGlzdC5sZW5ndGggPT09IDIpIHtcbiAgICByZXR1cm4gbGlzdC5qb2luKCcgb3IgJyk7XG4gIH1cbiAgcmV0dXJuIGxpc3Quc2xpY2UoMCwgLTEpLmpvaW4oJywgJykgKyAnLCBvciAnICsgbGlzdC5zbGljZSgtMSk7XG59XG5cbmZ1bmN0aW9uIHByZXR0aWZ5UmVzdWx0KHJlc3VsdCkge1xuICByZXR1cm4gJ211c3QgYmUgJyArIGFkZEFydGljbGUocmVzdWx0KSArICcuJztcbn1cblxuZnVuY3Rpb24gYWRkQXJ0aWNsZShub3VuUGhyYXNlKSB7XG4gIGlmICgvXmFuPyAvLnRlc3Qobm91blBocmFzZSkpIHtcbiAgICByZXR1cm4gbm91blBocmFzZTtcbiAgfVxuICBpZiAoL15bYWVpb3VdL2kudGVzdChub3VuUGhyYXNlKSkge1xuICAgIHJldHVybiAnYW4gJyArIG5vdW5QaHJhc2U7XG4gIH1cbiAgaWYgKC9eW2Etel0vaS50ZXN0KG5vdW5QaHJhc2UpKSB7XG4gICAgcmV0dXJuICdhICcgKyBub3VuUGhyYXNlO1xuICB9XG4gIHJldHVybiBub3VuUGhyYXNlO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRFcnJvck1lc3NhZ2Uob3B0aW9ucywgcHJldHR5UmVzdWx0KSB7XG4gIHZhciBhcnJheUN1bHByaXQgPSBpc0FycmF5Q3VscHJpdChvcHRpb25zLnBhdGgpO1xuICB2YXIgb3V0cHV0ID0gb3B0aW9ucy5wYXRoLmpvaW4oJy4nKSArICcgJyArIHByZXR0eVJlc3VsdDtcbiAgdmFyIHByZXBlbmQgPSBhcnJheUN1bHByaXQgPyAnSXRlbSBhdCBwb3NpdGlvbiAnIDogJyc7XG5cbiAgcmV0dXJuIHByZXBlbmQgKyBvdXRwdXQ7XG59XG5cbmZ1bmN0aW9uIGlzQXJyYXlDdWxwcml0KHBhdGgpIHtcbiAgcmV0dXJuIHR5cGVvZiBwYXRoW3BhdGgubGVuZ3RoIC0gMV0gPT0gJ251bWJlcicgfHwgdHlwZW9mIHBhdGhbMF0gPT0gJ251bWJlcic7XG59XG5cbmZ1bmN0aW9uIG9iamVjdEVudHJpZXMob2JqKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvYmogfHwge30pLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4geyBrZXk6IGtleSwgdmFsdWU6IG9ialtrZXldIH07XG4gIH0pO1xufVxuXG52LnZhbGlkYXRlID0gdmFsaWRhdGU7XG52LnByb2Nlc3NNZXNzYWdlID0gcHJvY2Vzc01lc3NhZ2U7XG5cbm1vZHVsZS5leHBvcnRzID0gdjtcblxuXG4vKioqLyB9KSxcbi8qIDQ2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh4KSB7XG5cdHZhciBwcm90b3R5cGU7XG5cdHJldHVybiB0b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBPYmplY3RdJyAmJiAocHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHgpLCBwcm90b3R5cGUgPT09IG51bGwgfHwgcHJvdG90eXBlID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yoe30pKTtcbn07XG5cblxuLyoqKi8gfSksXG4vKiA0NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24obW9kdWxlLCBnbG9iYWwpIHt2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyohIGh0dHA6Ly9tdGhzLmJlL2Jhc2U2NCB2MC4xLjAgYnkgQG1hdGhpYXMgfCBNSVQgbGljZW5zZSAqL1xuOyhmdW5jdGlvbihyb290KSB7XG5cblx0Ly8gRGV0ZWN0IGZyZWUgdmFyaWFibGVzIGBleHBvcnRzYC5cblx0dmFyIGZyZWVFeHBvcnRzID0gdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgJiYgZXhwb3J0cztcblxuXHQvLyBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgbW9kdWxlYC5cblx0dmFyIGZyZWVNb2R1bGUgPSB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZSAmJlxuXHRcdG1vZHVsZS5leHBvcnRzID09IGZyZWVFeHBvcnRzICYmIG1vZHVsZTtcblxuXHQvLyBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCwgZnJvbSBOb2RlLmpzIG9yIEJyb3dzZXJpZmllZCBjb2RlLCBhbmQgdXNlXG5cdC8vIGl0IGFzIGByb290YC5cblx0dmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbDtcblx0aWYgKGZyZWVHbG9iYWwuZ2xvYmFsID09PSBmcmVlR2xvYmFsIHx8IGZyZWVHbG9iYWwud2luZG93ID09PSBmcmVlR2xvYmFsKSB7XG5cdFx0cm9vdCA9IGZyZWVHbG9iYWw7XG5cdH1cblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHR2YXIgSW52YWxpZENoYXJhY3RlckVycm9yID0gZnVuY3Rpb24obWVzc2FnZSkge1xuXHRcdHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdH07XG5cdEludmFsaWRDaGFyYWN0ZXJFcnJvci5wcm90b3R5cGUgPSBuZXcgRXJyb3I7XG5cdEludmFsaWRDaGFyYWN0ZXJFcnJvci5wcm90b3R5cGUubmFtZSA9ICdJbnZhbGlkQ2hhcmFjdGVyRXJyb3InO1xuXG5cdHZhciBlcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblx0XHQvLyBOb3RlOiB0aGUgZXJyb3IgbWVzc2FnZXMgdXNlZCB0aHJvdWdob3V0IHRoaXMgZmlsZSBtYXRjaCB0aG9zZSB1c2VkIGJ5XG5cdFx0Ly8gdGhlIG5hdGl2ZSBgYXRvYmAvYGJ0b2FgIGltcGxlbWVudGF0aW9uIGluIENocm9taXVtLlxuXHRcdHRocm93IG5ldyBJbnZhbGlkQ2hhcmFjdGVyRXJyb3IobWVzc2FnZSk7XG5cdH07XG5cblx0dmFyIFRBQkxFID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xuXHQvLyBodHRwOi8vd2hhdHdnLm9yZy9odG1sL2NvbW1vbi1taWNyb3N5bnRheGVzLmh0bWwjc3BhY2UtY2hhcmFjdGVyXG5cdHZhciBSRUdFWF9TUEFDRV9DSEFSQUNURVJTID0gL1tcXHRcXG5cXGZcXHIgXS9nO1xuXG5cdC8vIGBkZWNvZGVgIGlzIGRlc2lnbmVkIHRvIGJlIGZ1bGx5IGNvbXBhdGlibGUgd2l0aCBgYXRvYmAgYXMgZGVzY3JpYmVkIGluIHRoZVxuXHQvLyBIVE1MIFN0YW5kYXJkLiBodHRwOi8vd2hhdHdnLm9yZy9odG1sL3dlYmFwcGFwaXMuaHRtbCNkb20td2luZG93YmFzZTY0LWF0b2Jcblx0Ly8gVGhlIG9wdGltaXplZCBiYXNlNjQtZGVjb2RpbmcgYWxnb3JpdGhtIHVzZWQgaXMgYmFzZWQgb24gQGF0a+KAmXMgZXhjZWxsZW50XG5cdC8vIGltcGxlbWVudGF0aW9uLiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9hdGsvMTAyMDM5NlxuXHR2YXIgZGVjb2RlID0gZnVuY3Rpb24oaW5wdXQpIHtcblx0XHRpbnB1dCA9IFN0cmluZyhpbnB1dClcblx0XHRcdC5yZXBsYWNlKFJFR0VYX1NQQUNFX0NIQVJBQ1RFUlMsICcnKTtcblx0XHR2YXIgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuXHRcdGlmIChsZW5ndGggJSA0ID09IDApIHtcblx0XHRcdGlucHV0ID0gaW5wdXQucmVwbGFjZSgvPT0/JC8sICcnKTtcblx0XHRcdGxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcblx0XHR9XG5cdFx0aWYgKFxuXHRcdFx0bGVuZ3RoICUgNCA9PSAxIHx8XG5cdFx0XHQvLyBodHRwOi8vd2hhdHdnLm9yZy9DI2FscGhhbnVtZXJpYy1hc2NpaS1jaGFyYWN0ZXJzXG5cdFx0XHQvW14rYS16QS1aMC05L10vLnRlc3QoaW5wdXQpXG5cdFx0KSB7XG5cdFx0XHRlcnJvcihcblx0XHRcdFx0J0ludmFsaWQgY2hhcmFjdGVyOiB0aGUgc3RyaW5nIHRvIGJlIGRlY29kZWQgaXMgbm90IGNvcnJlY3RseSBlbmNvZGVkLidcblx0XHRcdCk7XG5cdFx0fVxuXHRcdHZhciBiaXRDb3VudGVyID0gMDtcblx0XHR2YXIgYml0U3RvcmFnZTtcblx0XHR2YXIgYnVmZmVyO1xuXHRcdHZhciBvdXRwdXQgPSAnJztcblx0XHR2YXIgcG9zaXRpb24gPSAtMTtcblx0XHR3aGlsZSAoKytwb3NpdGlvbiA8IGxlbmd0aCkge1xuXHRcdFx0YnVmZmVyID0gVEFCTEUuaW5kZXhPZihpbnB1dC5jaGFyQXQocG9zaXRpb24pKTtcblx0XHRcdGJpdFN0b3JhZ2UgPSBiaXRDb3VudGVyICUgNCA/IGJpdFN0b3JhZ2UgKiA2NCArIGJ1ZmZlciA6IGJ1ZmZlcjtcblx0XHRcdC8vIFVubGVzcyB0aGlzIGlzIHRoZSBmaXJzdCBvZiBhIGdyb3VwIG9mIDQgY2hhcmFjdGVyc+KAplxuXHRcdFx0aWYgKGJpdENvdW50ZXIrKyAlIDQpIHtcblx0XHRcdFx0Ly8g4oCmY29udmVydCB0aGUgZmlyc3QgOCBiaXRzIHRvIGEgc2luZ2xlIEFTQ0lJIGNoYXJhY3Rlci5cblx0XHRcdFx0b3V0cHV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoXG5cdFx0XHRcdFx0MHhGRiAmIGJpdFN0b3JhZ2UgPj4gKC0yICogYml0Q291bnRlciAmIDYpXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBvdXRwdXQ7XG5cdH07XG5cblx0Ly8gYGVuY29kZWAgaXMgZGVzaWduZWQgdG8gYmUgZnVsbHkgY29tcGF0aWJsZSB3aXRoIGBidG9hYCBhcyBkZXNjcmliZWQgaW4gdGhlXG5cdC8vIEhUTUwgU3RhbmRhcmQ6IGh0dHA6Ly93aGF0d2cub3JnL2h0bWwvd2ViYXBwYXBpcy5odG1sI2RvbS13aW5kb3diYXNlNjQtYnRvYVxuXHR2YXIgZW5jb2RlID0gZnVuY3Rpb24oaW5wdXQpIHtcblx0XHRpbnB1dCA9IFN0cmluZyhpbnB1dCk7XG5cdFx0aWYgKC9bXlxcMC1cXHhGRl0vLnRlc3QoaW5wdXQpKSB7XG5cdFx0XHQvLyBOb3RlOiBubyBuZWVkIHRvIHNwZWNpYWwtY2FzZSBhc3RyYWwgc3ltYm9scyBoZXJlLCBhcyBzdXJyb2dhdGVzIGFyZVxuXHRcdFx0Ly8gbWF0Y2hlZCwgYW5kIHRoZSBpbnB1dCBpcyBzdXBwb3NlZCB0byBvbmx5IGNvbnRhaW4gQVNDSUkgYW55d2F5LlxuXHRcdFx0ZXJyb3IoXG5cdFx0XHRcdCdUaGUgc3RyaW5nIHRvIGJlIGVuY29kZWQgY29udGFpbnMgY2hhcmFjdGVycyBvdXRzaWRlIG9mIHRoZSAnICtcblx0XHRcdFx0J0xhdGluMSByYW5nZS4nXG5cdFx0XHQpO1xuXHRcdH1cblx0XHR2YXIgcGFkZGluZyA9IGlucHV0Lmxlbmd0aCAlIDM7XG5cdFx0dmFyIG91dHB1dCA9ICcnO1xuXHRcdHZhciBwb3NpdGlvbiA9IC0xO1xuXHRcdHZhciBhO1xuXHRcdHZhciBiO1xuXHRcdHZhciBjO1xuXHRcdHZhciBkO1xuXHRcdHZhciBidWZmZXI7XG5cdFx0Ly8gTWFrZSBzdXJlIGFueSBwYWRkaW5nIGlzIGhhbmRsZWQgb3V0c2lkZSBvZiB0aGUgbG9vcC5cblx0XHR2YXIgbGVuZ3RoID0gaW5wdXQubGVuZ3RoIC0gcGFkZGluZztcblxuXHRcdHdoaWxlICgrK3Bvc2l0aW9uIDwgbGVuZ3RoKSB7XG5cdFx0XHQvLyBSZWFkIHRocmVlIGJ5dGVzLCBpLmUuIDI0IGJpdHMuXG5cdFx0XHRhID0gaW5wdXQuY2hhckNvZGVBdChwb3NpdGlvbikgPDwgMTY7XG5cdFx0XHRiID0gaW5wdXQuY2hhckNvZGVBdCgrK3Bvc2l0aW9uKSA8PCA4O1xuXHRcdFx0YyA9IGlucHV0LmNoYXJDb2RlQXQoKytwb3NpdGlvbik7XG5cdFx0XHRidWZmZXIgPSBhICsgYiArIGM7XG5cdFx0XHQvLyBUdXJuIHRoZSAyNCBiaXRzIGludG8gZm91ciBjaHVua3Mgb2YgNiBiaXRzIGVhY2gsIGFuZCBhcHBlbmQgdGhlXG5cdFx0XHQvLyBtYXRjaGluZyBjaGFyYWN0ZXIgZm9yIGVhY2ggb2YgdGhlbSB0byB0aGUgb3V0cHV0LlxuXHRcdFx0b3V0cHV0ICs9IChcblx0XHRcdFx0VEFCTEUuY2hhckF0KGJ1ZmZlciA+PiAxOCAmIDB4M0YpICtcblx0XHRcdFx0VEFCTEUuY2hhckF0KGJ1ZmZlciA+PiAxMiAmIDB4M0YpICtcblx0XHRcdFx0VEFCTEUuY2hhckF0KGJ1ZmZlciA+PiA2ICYgMHgzRikgK1xuXHRcdFx0XHRUQUJMRS5jaGFyQXQoYnVmZmVyICYgMHgzRilcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0aWYgKHBhZGRpbmcgPT0gMikge1xuXHRcdFx0YSA9IGlucHV0LmNoYXJDb2RlQXQocG9zaXRpb24pIDw8IDg7XG5cdFx0XHRiID0gaW5wdXQuY2hhckNvZGVBdCgrK3Bvc2l0aW9uKTtcblx0XHRcdGJ1ZmZlciA9IGEgKyBiO1xuXHRcdFx0b3V0cHV0ICs9IChcblx0XHRcdFx0VEFCTEUuY2hhckF0KGJ1ZmZlciA+PiAxMCkgK1xuXHRcdFx0XHRUQUJMRS5jaGFyQXQoKGJ1ZmZlciA+PiA0KSAmIDB4M0YpICtcblx0XHRcdFx0VEFCTEUuY2hhckF0KChidWZmZXIgPDwgMikgJiAweDNGKSArXG5cdFx0XHRcdCc9J1xuXHRcdFx0KTtcblx0XHR9IGVsc2UgaWYgKHBhZGRpbmcgPT0gMSkge1xuXHRcdFx0YnVmZmVyID0gaW5wdXQuY2hhckNvZGVBdChwb3NpdGlvbik7XG5cdFx0XHRvdXRwdXQgKz0gKFxuXHRcdFx0XHRUQUJMRS5jaGFyQXQoYnVmZmVyID4+IDIpICtcblx0XHRcdFx0VEFCTEUuY2hhckF0KChidWZmZXIgPDwgNCkgJiAweDNGKSArXG5cdFx0XHRcdCc9PSdcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG91dHB1dDtcblx0fTtcblxuXHR2YXIgYmFzZTY0ID0ge1xuXHRcdCdlbmNvZGUnOiBlbmNvZGUsXG5cdFx0J2RlY29kZSc6IGRlY29kZSxcblx0XHQndmVyc2lvbic6ICcwLjEuMCdcblx0fTtcblxuXHQvLyBTb21lIEFNRCBidWlsZCBvcHRpbWl6ZXJzLCBsaWtlIHIuanMsIGNoZWNrIGZvciBzcGVjaWZpYyBjb25kaXRpb24gcGF0dGVybnNcblx0Ly8gbGlrZSB0aGUgZm9sbG93aW5nOlxuXHRpZiAoXG5cdFx0dHJ1ZVxuXHQpIHtcblx0XHQhKF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gYmFzZTY0O1xuXHRcdH0uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fLCBleHBvcnRzLCBtb2R1bGUpLFxuXHRcdFx0XHRfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG5cdH1cdGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmICFmcmVlRXhwb3J0cy5ub2RlVHlwZSkge1xuXHRcdGlmIChmcmVlTW9kdWxlKSB7IC8vIGluIE5vZGUuanMgb3IgUmluZ29KUyB2MC44LjArXG5cdFx0XHRmcmVlTW9kdWxlLmV4cG9ydHMgPSBiYXNlNjQ7XG5cdFx0fSBlbHNlIHsgLy8gaW4gTmFyd2hhbCBvciBSaW5nb0pTIHYwLjcuMC1cblx0XHRcdGZvciAodmFyIGtleSBpbiBiYXNlNjQpIHtcblx0XHRcdFx0YmFzZTY0Lmhhc093blByb3BlcnR5KGtleSkgJiYgKGZyZWVFeHBvcnRzW2tleV0gPSBiYXNlNjRba2V5XSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2UgeyAvLyBpbiBSaGlubyBvciBhIHdlYiBicm93c2VyXG5cdFx0cm9vdC5iYXNlNjQgPSBiYXNlNjQ7XG5cdH1cblxufSh0aGlzKSk7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KShtb2R1bGUpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpKSlcblxuLyoqKi8gfSksXG4vKiA0OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuXHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdGlmKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwibG9hZGVkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJpZFwiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xuXHR9XG5cdHJldHVybiBtb2R1bGU7XG59O1xuXG5cbi8qKiovIH0pLFxuLyogNDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIHBhcnNlVG9rZW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcbnZhciB4dGVuZCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG52YXIgRXZlbnRFbWl0dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG52YXIgdXJsVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcbnZhciBjb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgcmVxdWVzdElkID0gMTtcblxuLyoqXG4gKiBBIE1hcGJveCBBUEkgcmVxdWVzdC5cbiAqXG4gKiBOb3RlIHRoYXQgY3JlYXRpbmcgYSBgTWFwaVJlcXVlc3RgIGRvZXMgKm5vdCogc2VuZCB0aGUgcmVxdWVzdCBhdXRvbWF0aWNhbGx5LlxuICogVXNlIHRoZSByZXF1ZXN0J3MgYHNlbmRgIG1ldGhvZCB0byBzZW5kIGl0IG9mZiBhbmQgZ2V0IGEgYFByb21pc2VgLlxuICpcbiAqIFRoZSBgZW1pdHRlcmAgcHJvcGVydHkgaXMgYW4gYEV2ZW50RW1pdHRlcmAgdGhhdCBlbWl0cyB0aGUgZm9sbG93aW5nIGV2ZW50czpcbiAqXG4gKiAtIGAncmVzcG9uc2UnYCAtIExpc3RlbmVycyB3aWxsIGJlIGNhbGxlZCB3aXRoIGEgYE1hcGlSZXNwb25zZWAuXG4gKiAtIGAnZXJyb3InYCAtIExpc3RlbmVycyB3aWxsIGJlIGNhbGxlZCB3aXRoIGEgYE1hcGlFcnJvcmAuXG4gKiAtIGAnZG93bmxvYWRQcm9ncmVzcydgIC0gTGlzdGVuZXJzIHdpbGwgYmUgY2FsbGVkIHdpdGggYFByb2dyZXNzRXZlbnRzYC5cbiAqIC0gYCd1cGxvYWRQcm9ncmVzcydgIC0gTGlzdGVuZXJzIHdpbGwgYmUgY2FsbGVkIHdpdGggYFByb2dyZXNzRXZlbnRzYC5cbiAqICAgVXBsb2FkIGV2ZW50cyBhcmUgb25seSBhdmFpbGFibGUgd2hlbiB0aGUgcmVxdWVzdCBpbmNsdWRlcyBhIGZpbGUuXG4gKlxuICogQGNsYXNzIE1hcGlSZXF1ZXN0XG4gKiBAcHJvcGVydHkge0V2ZW50RW1pdHRlcn0gZW1pdHRlciAtIEFuIGV2ZW50IGVtaXR0ZXIuIFNlZSBhYm92ZS5cbiAqIEBwcm9wZXJ0eSB7TWFwaUNsaWVudH0gY2xpZW50IC0gVGhpcyByZXF1ZXN0J3MgYE1hcGlDbGllbnRgLlxuICogQHByb3BlcnR5IHtNYXBpUmVzcG9uc2V8bnVsbH0gcmVzcG9uc2UgLSBJZiB0aGlzIHJlcXVlc3QgaGFzIGJlZW4gc2VudCBhbmQgcmVjZWl2ZWRcbiAqICAgYSByZXNwb25zZSwgdGhlIHJlc3BvbnNlIGlzIGF2YWlsYWJsZSBvbiB0aGlzIHByb3BlcnR5LlxuICogQHByb3BlcnR5IHtNYXBpRXJyb3J8RXJyb3J8bnVsbH0gZXJyb3IgLSBJZiB0aGlzIHJlcXVlc3QgaGFzIGJlZW4gc2VudCBhbmRcbiAqICAgcmVjZWl2ZWQgYW4gZXJyb3IgaW4gcmVzcG9uc2UsIHRoZSBlcnJvciBpcyBhdmFpbGFibGUgb24gdGhpcyBwcm9wZXJ0eS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gYWJvcnRlZCAtIElmIHRoZSByZXF1ZXN0IGhhcyBiZWVuIGFib3J0ZWRcbiAqICAgKHZpYSBbYGFib3J0YF0oI2Fib3J0KSksIHRoaXMgcHJvcGVydHkgd2lsbCBiZSBgdHJ1ZWAuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHNlbnQgLSBJZiB0aGUgcmVxdWVzdCBoYXMgYmVlbiBzZW50LCB0aGlzIHByb3BlcnR5IHdpbGxcbiAqICAgYmUgYHRydWVgLiBZb3UgY2Fubm90IHNlbmQgdGhlIHNhbWUgcmVxdWVzdCB0d2ljZSwgc28gaWYgeW91IG5lZWQgdG8gY3JlYXRlXG4gKiAgIGEgbmV3IHJlcXVlc3QgdGhhdCBpcyB0aGUgZXF1aXZhbGVudCBvZiBhbiBleGlzdGluZyBvbmUsIHVzZVxuICogICBbYGNsb25lYF0oI2Nsb25lKS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwYXRoIC0gVGhlIHJlcXVlc3QncyBwYXRoLCBpbmNsdWRpbmcgY29sb24tcHJlZml4ZWQgcm91dGVcbiAqICAgcGFyYW1ldGVycy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBvcmlnaW4gLSBUaGUgcmVxdWVzdCdzIG9yaWdpbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBtZXRob2QgLSBUaGUgcmVxdWVzdCdzIEhUVFAgbWV0aG9kLlxuICogQHByb3BlcnR5IHtPYmplY3R9IHF1ZXJ5IC0gQSBxdWVyeSBvYmplY3QsIHdoaWNoIHdpbGwgYmUgdHJhbnNmb3JtZWQgaW50b1xuICogICBhIFVSTCBxdWVyeSBzdHJpbmcuXG4gKiBAcHJvcGVydHkge09iamVjdH0gcGFyYW1zIC0gQSByb3V0ZSBwYXJhbWV0ZXJzIG9iamVjdCwgd2hvc2UgdmFsdWVzIHdpbGxcbiAqICAgYmUgaW50ZXJwb2xhdGVkIHRoZSBwYXRoLlxuICogQHByb3BlcnR5IHtPYmplY3R9IGhlYWRlcnMgLSBUaGUgcmVxdWVzdCdzIGhlYWRlcnMsXG4gKiBAcHJvcGVydHkge09iamVjdHxzdHJpbmd8bnVsbH0gYm9keSAtIERhdGEgdG8gc2VuZCB3aXRoIHRoZSByZXF1ZXN0LlxuICogICBJZiB0aGUgcmVxdWVzdCBoYXMgYSBib2R5LCBpdCB3aWxsIGFsc28gYmUgc2VudCB3aXRoIHRoZSBoZWFkZXJcbiAqICAgYCdDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb24nYC5cbiAqIEBwcm9wZXJ0eSB7QmxvYnxBcnJheUJ1ZmZlcnxzdHJpbmd8UmVhZFN0cmVhbX0gZmlsZSAtIEEgZmlsZSB0b1xuICogICBzZW5kIHdpdGggdGhlIHJlcXVlc3QuIFRoZSBicm93c2VyIGNsaWVudCBhY2NlcHRzIEJsb2JzIGFuZCBBcnJheUJ1ZmZlcnM7XG4gKiAgIHRoZSBOb2RlIGNsaWVudCBhY2NlcHRzIHN0cmluZ3MgKGZpbGVwYXRocykgYW5kIFJlYWRTdHJlYW1zLlxuICovXG5cbi8qKlxuICogQGlnbm9yZVxuICogQHBhcmFtIHtNYXBpQ2xpZW50fSBjbGllbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5tZXRob2RcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnBhdGhcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5xdWVyeT17fV1cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5wYXJhbXM9e31dXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMub3JpZ2luXVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmhlYWRlcnNdXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuYm9keT1udWxsXVxuICogQHBhcmFtIHtCbG9ifEFycmF5QnVmZmVyfHN0cmluZ3xSZWFkU3RyZWFtfSBbb3B0aW9ucy5maWxlPW51bGxdXG4gKi9cbmZ1bmN0aW9uIE1hcGlSZXF1ZXN0KGNsaWVudCwgb3B0aW9ucykge1xuICBpZiAoIWNsaWVudCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWFwaVJlcXVlc3QgcmVxdWlyZXMgYSBjbGllbnQnKTtcbiAgfVxuICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMucGF0aCB8fCAhb3B0aW9ucy5tZXRob2QpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnTWFwaVJlcXVlc3QgcmVxdWlyZXMgYW4gb3B0aW9ucyBvYmplY3Qgd2l0aCBwYXRoIGFuZCBtZXRob2QgcHJvcGVydGllcydcbiAgICApO1xuICB9XG5cbiAgdmFyIGRlZmF1bHRIZWFkZXJzID0ge307XG4gIGlmIChvcHRpb25zLmJvZHkpIHtcbiAgICBkZWZhdWx0SGVhZGVyc1snY29udGVudC10eXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gIH1cblxuICB2YXIgaGVhZGVyc1dpdGhEZWZhdWx0cyA9IHh0ZW5kKGRlZmF1bHRIZWFkZXJzLCBvcHRpb25zLmhlYWRlcnMpO1xuXG4gIC8vIERpc2FsbG93cyBkdXBsaWNhdGUgaGVhZGVyIG5hbWVzIG9mIG1peGVkIGNhc2UsXG4gIC8vIGUuZy4gQ29udGVudC1UeXBlIGFuZCBjb250ZW50LXR5cGUuXG4gIHZhciBoZWFkZXJzID0gT2JqZWN0LmtleXMoaGVhZGVyc1dpdGhEZWZhdWx0cykucmVkdWNlKGZ1bmN0aW9uKG1lbW8sIG5hbWUpIHtcbiAgICBtZW1vW25hbWUudG9Mb3dlckNhc2UoKV0gPSBoZWFkZXJzV2l0aERlZmF1bHRzW25hbWVdO1xuICAgIHJldHVybiBtZW1vO1xuICB9LCB7fSk7XG5cbiAgdGhpcy5pZCA9IHJlcXVlc3RJZCsrO1xuICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcblxuICB0aGlzLmVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIHRoaXMuY2xpZW50ID0gY2xpZW50O1xuICB0aGlzLnJlc3BvbnNlID0gbnVsbDtcbiAgdGhpcy5lcnJvciA9IG51bGw7XG4gIHRoaXMuc2VudCA9IGZhbHNlO1xuICB0aGlzLmFib3J0ZWQgPSBmYWxzZTtcbiAgdGhpcy5wYXRoID0gb3B0aW9ucy5wYXRoO1xuICB0aGlzLm1ldGhvZCA9IG9wdGlvbnMubWV0aG9kO1xuICB0aGlzLm9yaWdpbiA9IG9wdGlvbnMub3JpZ2luIHx8IGNsaWVudC5vcmlnaW47XG4gIHRoaXMucXVlcnkgPSBvcHRpb25zLnF1ZXJ5IHx8IHt9O1xuICB0aGlzLnBhcmFtcyA9IG9wdGlvbnMucGFyYW1zIHx8IHt9O1xuICB0aGlzLmJvZHkgPSBvcHRpb25zLmJvZHkgfHwgbnVsbDtcbiAgdGhpcy5maWxlID0gb3B0aW9ucy5maWxlIHx8IG51bGw7XG4gIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG59XG5cbi8qKlxuICogR2V0IHRoZSBVUkwgb2YgdGhlIHJlcXVlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IFthY2Nlc3NUb2tlbl0gLSBCeSBkZWZhdWx0LCB0aGUgYWNjZXNzIHRva2VuIG9mIHRoZSByZXF1ZXN0J3NcbiAqICAgY2xpZW50IGlzIHVzZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbk1hcGlSZXF1ZXN0LnByb3RvdHlwZS51cmwgPSBmdW5jdGlvbiB1cmwoYWNjZXNzVG9rZW4pIHtcbiAgdmFyIHVybCA9IHVybFV0aWxzLnByZXBlbmRPcmlnaW4odGhpcy5wYXRoLCB0aGlzLm9yaWdpbik7XG4gIHVybCA9IHVybFV0aWxzLmFwcGVuZFF1ZXJ5T2JqZWN0KHVybCwgdGhpcy5xdWVyeSk7XG4gIHZhciByb3V0ZVBhcmFtcyA9IHRoaXMucGFyYW1zO1xuICBpZiAoYWNjZXNzVG9rZW4pIHtcbiAgICB1cmwgPSB1cmxVdGlscy5hcHBlbmRRdWVyeVBhcmFtKHVybCwgJ2FjY2Vzc190b2tlbicsIGFjY2Vzc1Rva2VuKTtcbiAgICB2YXIgYWNjZXNzVG9rZW5Pd25lcklkID0gcGFyc2VUb2tlbihhY2Nlc3NUb2tlbikudXNlcjtcbiAgICByb3V0ZVBhcmFtcyA9IHh0ZW5kKHsgb3duZXJJZDogYWNjZXNzVG9rZW5Pd25lcklkIH0sIHJvdXRlUGFyYW1zKTtcbiAgfVxuICB1cmwgPSB1cmxVdGlscy5pbnRlcnBvbGF0ZVJvdXRlUGFyYW1zKHVybCwgcm91dGVQYXJhbXMpO1xuICByZXR1cm4gdXJsO1xufTtcblxuLyoqXG4gKiBTZW5kIHRoZSByZXF1ZXN0LiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBgTWFwaVJlc3BvbnNlYC5cbiAqIFlvdSBwcm9iYWJseSB3YW50IHRvIHVzZSBgcmVzcG9uc2UuYm9keWAuXG4gKlxuICogYHNlbmRgIG9ubHkgcmV0cmlldmVzIHRoZSBmaXJzdCBwYWdlIG9mIHBhZ2luYXRlZCByZXN1bHRzLiBZb3UgY2FuIGdldFxuICogdGhlIG5leHQgcGFnZSBieSB1c2luZyB0aGUgYE1hcGlSZXNwb25zZWAncyBbYG5leHRQYWdlYF0oI25leHRwYWdlKVxuICogZnVuY3Rpb24sIG9yIGl0ZXJhdGUgdGhyb3VnaCBhbGwgcGFnZXMgdXNpbmcgW2BlYWNoUGFnZWBdKCNlYWNocGFnZSlcbiAqIGluc3RlYWQgb2YgYHNlbmRgLlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlPE1hcGlSZXNwb25zZT59XG4gKi9cbk1hcGlSZXF1ZXN0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gc2VuZCgpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIGlmIChzZWxmLnNlbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnVGhpcyByZXF1ZXN0IGhhcyBhbHJlYWR5IGJlZW4gc2VudC4gQ2hlY2sgdGhlIHJlc3BvbnNlIGFuZCBlcnJvciBwcm9wZXJ0aWVzLiBDcmVhdGUgYSBuZXcgcmVxdWVzdCB3aXRoIGNsb25lKCkuJ1xuICAgICk7XG4gIH1cbiAgc2VsZi5zZW50ID0gdHJ1ZTtcblxuICByZXR1cm4gc2VsZi5jbGllbnQuc2VuZFJlcXVlc3Qoc2VsZikudGhlbihcbiAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgc2VsZi5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgc2VsZi5lbWl0dGVyLmVtaXQoY29uc3RhbnRzLkVWRU5UX1JFU1BPTlNFLCByZXNwb25zZSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSxcbiAgICBmdW5jdGlvbihlcnJvcikge1xuICAgICAgc2VsZi5lcnJvciA9IGVycm9yO1xuICAgICAgc2VsZi5lbWl0dGVyLmVtaXQoY29uc3RhbnRzLkVWRU5UX0VSUk9SLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICk7XG59O1xuXG4vKipcbiAqIEFib3J0IHRoZSByZXF1ZXN0LlxuICpcbiAqIEFueSBwZW5kaW5nIGBQcm9taXNlYCByZXR1cm5lZCBieSBbYHNlbmRgXSgjc2VuZCkgd2lsbCBiZSByZWplY3RlZCB3aXRoXG4gKiBhbiBlcnJvciB3aXRoIGB0eXBlOiAnUmVxdWVzdEFib3J0ZWRFcnJvcidgLiBJZiB5b3UndmUgY3JlYXRlZCBhIHJlcXVlc3RcbiAqIHRoYXQgbWlnaHQgYmUgYWJvcnRlZCwgeW91IG5lZWQgdG8gY2F0Y2ggYW5kIGhhbmRsZSBzdWNoIGVycm9ycy5cbiAqXG4gKiBUaGlzIG1ldGhvZCB3aWxsIGFsc28gYWJvcnQgYW55IHJlcXVlc3RzIGNyZWF0ZWQgd2hpbGUgZmV0Y2hpbmcgc3Vic2VxdWVudFxuICogcGFnZXMgdmlhIFtgZWFjaFBhZ2VgXSgjZWFjaHBhZ2UpLlxuICpcbiAqIElmIHRoZSByZXF1ZXN0IGhhcyBub3QgYmVlbiBzZW50IG9yIGhhcyBhbHJlYWR5IGJlZW4gYWJvcnRlZCwgbm90aGluZ1xuICogd2lsbCBoYXBwZW4uXG4gKi9cbk1hcGlSZXF1ZXN0LnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uIGFib3J0KCkge1xuICBpZiAodGhpcy5fbmV4dFBhZ2VSZXF1ZXN0KSB7XG4gICAgdGhpcy5fbmV4dFBhZ2VSZXF1ZXN0LmFib3J0KCk7XG4gICAgZGVsZXRlIHRoaXMuX25leHRQYWdlUmVxdWVzdDtcbiAgfVxuXG4gIGlmICh0aGlzLnJlc3BvbnNlIHx8IHRoaXMuZXJyb3IgfHwgdGhpcy5hYm9ydGVkKSByZXR1cm47XG5cbiAgdGhpcy5hYm9ydGVkID0gdHJ1ZTtcbiAgdGhpcy5jbGllbnQuYWJvcnRSZXF1ZXN0KHRoaXMpO1xufTtcblxuLyoqXG4gKiBJbnZva2UgYSBjYWxsYmFjayBmb3IgZWFjaCBwYWdlIG9mIGEgcGFnaW5hdGVkIEFQSSByZXNwb25zZS5cbiAqXG4gKiBUaGUgY2FsbGJhY2sgc2hvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBzaWduYXR1cmU6XG4gKlxuICogYGBganNcbiAqIChcbiAqICAgZXJyb3I6IE1hcGlFcnJvcixcbiAqICAgcmVzcG9uc2U6IE1hcGlSZXNwb25zZSxcbiAqICAgbmV4dDogKCkgPT4gdm9pZFxuICogKSA9PiB2b2lkXG4gKiBgYGBcbiAqXG4gKiAqKlRoZSBuZXh0IHBhZ2Ugd2lsbCBub3QgYmUgZmV0Y2hlZCB1bnRpbCB5b3UndmUgaW52b2tlZCB0aGVcbiAqIGBuZXh0YCBjYWxsYmFjayoqLCBpbmRpY2F0aW5nIHRoYXQgeW91J3JlIHJlYWR5IGZvciBpdC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICovXG5NYXBpUmVxdWVzdC5wcm90b3R5cGUuZWFjaFBhZ2UgPSBmdW5jdGlvbiBlYWNoUGFnZShjYWxsYmFjaykge1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICBmdW5jdGlvbiBnZXROZXh0UGFnZSgpIHtcbiAgICAgIGRlbGV0ZSBzZWxmLl9uZXh0UGFnZVJlcXVlc3Q7XG4gICAgICB2YXIgbmV4dFBhZ2VSZXF1ZXN0ID0gcmVzcG9uc2UubmV4dFBhZ2UoKTtcbiAgICAgIGlmIChuZXh0UGFnZVJlcXVlc3QpIHtcbiAgICAgICAgc2VsZi5fbmV4dFBhZ2VSZXF1ZXN0ID0gbmV4dFBhZ2VSZXF1ZXN0O1xuICAgICAgICBnZXRQYWdlKG5leHRQYWdlUmVxdWVzdCk7XG4gICAgICB9XG4gICAgfVxuICAgIGNhbGxiYWNrKG51bGwsIHJlc3BvbnNlLCBnZXROZXh0UGFnZSk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnJvcikge1xuICAgIGNhbGxiYWNrKGVycm9yLCBudWxsLCBmdW5jdGlvbigpIHt9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFBhZ2UocmVxdWVzdCkge1xuICAgIHJlcXVlc3Quc2VuZCgpLnRoZW4oaGFuZGxlUmVzcG9uc2UsIGhhbmRsZUVycm9yKTtcbiAgfVxuICBnZXRQYWdlKHRoaXMpO1xufTtcblxuLyoqXG4gKiBDbG9uZSB0aGlzIHJlcXVlc3QuXG4gKlxuICogRWFjaCByZXF1ZXN0IGNhbiBvbmx5IGJlIHNlbnQgKm9uY2UqLiBTbyBpZiB5b3UnZCBsaWtlIHRvIHNlbmQgdGhlXG4gKiBzYW1lIHJlcXVlc3QgYWdhaW4sIGNsb25lIGl0IGFuZCBzZW5kIGF3YXkuXG4gKlxuICogQHJldHVybnMge01hcGlSZXF1ZXN0fSAtIEEgbmV3IGBNYXBpUmVxdWVzdGAgY29uZmlndXJlZCBqdXN0IGxpa2UgdGhpcyBvbmUuXG4gKi9cbk1hcGlSZXF1ZXN0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uIGNsb25lKCkge1xuICByZXR1cm4gdGhpcy5fZXh0ZW5kKCk7XG59O1xuXG4vKipcbiAqIEBpZ25vcmVcbiAqL1xuTWFwaVJlcXVlc3QucHJvdG90eXBlLl9leHRlbmQgPSBmdW5jdGlvbiBfZXh0ZW5kKG9wdGlvbnMpIHtcbiAgdmFyIGV4dGVuZGVkT3B0aW9ucyA9IHh0ZW5kKHRoaXMuX29wdGlvbnMsIG9wdGlvbnMpO1xuICByZXR1cm4gbmV3IE1hcGlSZXF1ZXN0KHRoaXMuY2xpZW50LCBleHRlbmRlZE9wdGlvbnMpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBNYXBpUmVxdWVzdDtcblxuXG4vKioqLyB9KSxcbi8qIDUwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5XG4gICwgcHJlZml4ID0gJ34nO1xuXG4vKipcbiAqIENvbnN0cnVjdG9yIHRvIGNyZWF0ZSBhIHN0b3JhZ2UgZm9yIG91ciBgRUVgIG9iamVjdHMuXG4gKiBBbiBgRXZlbnRzYCBpbnN0YW5jZSBpcyBhIHBsYWluIG9iamVjdCB3aG9zZSBwcm9wZXJ0aWVzIGFyZSBldmVudCBuYW1lcy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIEV2ZW50cygpIHt9XG5cbi8vXG4vLyBXZSB0cnkgdG8gbm90IGluaGVyaXQgZnJvbSBgT2JqZWN0LnByb3RvdHlwZWAuIEluIHNvbWUgZW5naW5lcyBjcmVhdGluZyBhblxuLy8gaW5zdGFuY2UgaW4gdGhpcyB3YXkgaXMgZmFzdGVyIHRoYW4gY2FsbGluZyBgT2JqZWN0LmNyZWF0ZShudWxsKWAgZGlyZWN0bHkuXG4vLyBJZiBgT2JqZWN0LmNyZWF0ZShudWxsKWAgaXMgbm90IHN1cHBvcnRlZCB3ZSBwcmVmaXggdGhlIGV2ZW50IG5hbWVzIHdpdGggYVxuLy8gY2hhcmFjdGVyIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBidWlsdC1pbiBvYmplY3QgcHJvcGVydGllcyBhcmUgbm90XG4vLyBvdmVycmlkZGVuIG9yIHVzZWQgYXMgYW4gYXR0YWNrIHZlY3Rvci5cbi8vXG5pZiAoT2JqZWN0LmNyZWF0ZSkge1xuICBFdmVudHMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAvL1xuICAvLyBUaGlzIGhhY2sgaXMgbmVlZGVkIGJlY2F1c2UgdGhlIGBfX3Byb3RvX19gIHByb3BlcnR5IGlzIHN0aWxsIGluaGVyaXRlZCBpblxuICAvLyBzb21lIG9sZCBicm93c2VycyBsaWtlIEFuZHJvaWQgNCwgaVBob25lIDUuMSwgT3BlcmEgMTEgYW5kIFNhZmFyaSA1LlxuICAvL1xuICBpZiAoIW5ldyBFdmVudHMoKS5fX3Byb3RvX18pIHByZWZpeCA9IGZhbHNlO1xufVxuXG4vKipcbiAqIFJlcHJlc2VudGF0aW9uIG9mIGEgc2luZ2xlIGV2ZW50IGxpc3RlbmVyLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvbmNlPWZhbHNlXSBTcGVjaWZ5IGlmIHRoZSBsaXN0ZW5lciBpcyBhIG9uZS10aW1lIGxpc3RlbmVyLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBFRShmbiwgY29udGV4dCwgb25jZSkge1xuICB0aGlzLmZuID0gZm47XG4gIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gIHRoaXMub25jZSA9IG9uY2UgfHwgZmFsc2U7XG59XG5cbi8qKlxuICogQWRkIGEgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHtFdmVudEVtaXR0ZXJ9IGVtaXR0ZXIgUmVmZXJlbmNlIHRvIHRoZSBgRXZlbnRFbWl0dGVyYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG9uY2UgU3BlY2lmeSBpZiB0aGUgbGlzdGVuZXIgaXMgYSBvbmUtdGltZSBsaXN0ZW5lci5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcihlbWl0dGVyLCBldmVudCwgZm4sIGNvbnRleHQsIG9uY2UpIHtcbiAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIHZhciBsaXN0ZW5lciA9IG5ldyBFRShmbiwgY29udGV4dCB8fCBlbWl0dGVyLCBvbmNlKVxuICAgICwgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcblxuICBpZiAoIWVtaXR0ZXIuX2V2ZW50c1tldnRdKSBlbWl0dGVyLl9ldmVudHNbZXZ0XSA9IGxpc3RlbmVyLCBlbWl0dGVyLl9ldmVudHNDb3VudCsrO1xuICBlbHNlIGlmICghZW1pdHRlci5fZXZlbnRzW2V2dF0uZm4pIGVtaXR0ZXIuX2V2ZW50c1tldnRdLnB1c2gobGlzdGVuZXIpO1xuICBlbHNlIGVtaXR0ZXIuX2V2ZW50c1tldnRdID0gW2VtaXR0ZXIuX2V2ZW50c1tldnRdLCBsaXN0ZW5lcl07XG5cbiAgcmV0dXJuIGVtaXR0ZXI7XG59XG5cbi8qKlxuICogQ2xlYXIgZXZlbnQgYnkgbmFtZS5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50RW1pdHRlcn0gZW1pdHRlciBSZWZlcmVuY2UgdG8gdGhlIGBFdmVudEVtaXR0ZXJgIGluc3RhbmNlLlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2dCBUaGUgRXZlbnQgbmFtZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNsZWFyRXZlbnQoZW1pdHRlciwgZXZ0KSB7XG4gIGlmICgtLWVtaXR0ZXIuX2V2ZW50c0NvdW50ID09PSAwKSBlbWl0dGVyLl9ldmVudHMgPSBuZXcgRXZlbnRzKCk7XG4gIGVsc2UgZGVsZXRlIGVtaXR0ZXIuX2V2ZW50c1tldnRdO1xufVxuXG4vKipcbiAqIE1pbmltYWwgYEV2ZW50RW1pdHRlcmAgaW50ZXJmYWNlIHRoYXQgaXMgbW9sZGVkIGFnYWluc3QgdGhlIE5vZGUuanNcbiAqIGBFdmVudEVtaXR0ZXJgIGludGVyZmFjZS5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICB0aGlzLl9ldmVudHMgPSBuZXcgRXZlbnRzKCk7XG4gIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm4gYW4gYXJyYXkgbGlzdGluZyB0aGUgZXZlbnRzIGZvciB3aGljaCB0aGUgZW1pdHRlciBoYXMgcmVnaXN0ZXJlZFxuICogbGlzdGVuZXJzLlxuICpcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcbiAgdmFyIG5hbWVzID0gW11cbiAgICAsIGV2ZW50c1xuICAgICwgbmFtZTtcblxuICBpZiAodGhpcy5fZXZlbnRzQ291bnQgPT09IDApIHJldHVybiBuYW1lcztcblxuICBmb3IgKG5hbWUgaW4gKGV2ZW50cyA9IHRoaXMuX2V2ZW50cykpIHtcbiAgICBpZiAoaGFzLmNhbGwoZXZlbnRzLCBuYW1lKSkgbmFtZXMucHVzaChwcmVmaXggPyBuYW1lLnNsaWNlKDEpIDogbmFtZSk7XG4gIH1cblxuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHJldHVybiBuYW1lcy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhldmVudHMpKTtcbiAgfVxuXG4gIHJldHVybiBuYW1lcztcbn07XG5cbi8qKlxuICogUmV0dXJuIHRoZSBsaXN0ZW5lcnMgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFRoZSByZWdpc3RlcmVkIGxpc3RlbmVycy5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiBsaXN0ZW5lcnMoZXZlbnQpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnRcbiAgICAsIGhhbmRsZXJzID0gdGhpcy5fZXZlbnRzW2V2dF07XG5cbiAgaWYgKCFoYW5kbGVycykgcmV0dXJuIFtdO1xuICBpZiAoaGFuZGxlcnMuZm4pIHJldHVybiBbaGFuZGxlcnMuZm5dO1xuXG4gIGZvciAodmFyIGkgPSAwLCBsID0gaGFuZGxlcnMubGVuZ3RoLCBlZSA9IG5ldyBBcnJheShsKTsgaSA8IGw7IGkrKykge1xuICAgIGVlW2ldID0gaGFuZGxlcnNbaV0uZm47XG4gIH1cblxuICByZXR1cm4gZWU7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgbnVtYmVyIG9mIGxpc3RlbmVycyBsaXN0ZW5pbmcgdG8gYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgbnVtYmVyIG9mIGxpc3RlbmVycy5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24gbGlzdGVuZXJDb3VudChldmVudCkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudFxuICAgICwgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW2V2dF07XG5cbiAgaWYgKCFsaXN0ZW5lcnMpIHJldHVybiAwO1xuICBpZiAobGlzdGVuZXJzLmZuKSByZXR1cm4gMTtcbiAgcmV0dXJuIGxpc3RlbmVycy5sZW5ndGg7XG59O1xuXG4vKipcbiAqIENhbGxzIGVhY2ggb2YgdGhlIGxpc3RlbmVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGhhZCBsaXN0ZW5lcnMsIGVsc2UgYGZhbHNlYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdChldmVudCwgYTEsIGEyLCBhMywgYTQsIGE1KSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW2V2dF0pIHJldHVybiBmYWxzZTtcblxuICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW2V2dF1cbiAgICAsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGhcbiAgICAsIGFyZ3NcbiAgICAsIGk7XG5cbiAgaWYgKGxpc3RlbmVycy5mbikge1xuICAgIGlmIChsaXN0ZW5lcnMub25jZSkgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXJzLmZuLCB1bmRlZmluZWQsIHRydWUpO1xuXG4gICAgc3dpdGNoIChsZW4pIHtcbiAgICAgIGNhc2UgMTogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0KSwgdHJ1ZTtcbiAgICAgIGNhc2UgMjogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSksIHRydWU7XG4gICAgICBjYXNlIDM6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyKSwgdHJ1ZTtcbiAgICAgIGNhc2UgNDogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzKSwgdHJ1ZTtcbiAgICAgIGNhc2UgNTogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzLCBhNCksIHRydWU7XG4gICAgICBjYXNlIDY6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMywgYTQsIGE1KSwgdHJ1ZTtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSAxLCBhcmdzID0gbmV3IEFycmF5KGxlbiAtMSk7IGkgPCBsZW47IGkrKykge1xuICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuXG4gICAgbGlzdGVuZXJzLmZuLmFwcGx5KGxpc3RlbmVycy5jb250ZXh0LCBhcmdzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbGVuZ3RoID0gbGlzdGVuZXJzLmxlbmd0aFxuICAgICAgLCBqO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAobGlzdGVuZXJzW2ldLm9uY2UpIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyc1tpXS5mbiwgdW5kZWZpbmVkLCB0cnVlKTtcblxuICAgICAgc3dpdGNoIChsZW4pIHtcbiAgICAgICAgY2FzZSAxOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCk7IGJyZWFrO1xuICAgICAgICBjYXNlIDI6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSk7IGJyZWFrO1xuICAgICAgICBjYXNlIDM6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSwgYTIpOyBicmVhaztcbiAgICAgICAgY2FzZSA0OiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEsIGEyLCBhMyk7IGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmICghYXJncykgZm9yIChqID0gMSwgYXJncyA9IG5ldyBBcnJheShsZW4gLTEpOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaiAtIDFdID0gYXJndW1lbnRzW2pdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxpc3RlbmVyc1tpXS5mbi5hcHBseShsaXN0ZW5lcnNbaV0uY29udGV4dCwgYXJncyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG4vKipcbiAqIEFkZCBhIGxpc3RlbmVyIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gW2NvbnRleHQ9dGhpc10gVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gb24oZXZlbnQsIGZuLCBjb250ZXh0KSB7XG4gIHJldHVybiBhZGRMaXN0ZW5lcih0aGlzLCBldmVudCwgZm4sIGNvbnRleHQsIGZhbHNlKTtcbn07XG5cbi8qKlxuICogQWRkIGEgb25lLXRpbWUgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBbY29udGV4dD10aGlzXSBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uIG9uY2UoZXZlbnQsIGZuLCBjb250ZXh0KSB7XG4gIHJldHVybiBhZGRMaXN0ZW5lcih0aGlzLCBldmVudCwgZm4sIGNvbnRleHQsIHRydWUpO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgdGhlIGxpc3RlbmVycyBvZiBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIE9ubHkgcmVtb3ZlIHRoZSBsaXN0ZW5lcnMgdGhhdCBtYXRjaCB0aGlzIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IE9ubHkgcmVtb3ZlIHRoZSBsaXN0ZW5lcnMgdGhhdCBoYXZlIHRoaXMgY29udGV4dC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gb25jZSBPbmx5IHJlbW92ZSBvbmUtdGltZSBsaXN0ZW5lcnMuXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcihldmVudCwgZm4sIGNvbnRleHQsIG9uY2UpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbZXZ0XSkgcmV0dXJuIHRoaXM7XG4gIGlmICghZm4pIHtcbiAgICBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW2V2dF07XG5cbiAgaWYgKGxpc3RlbmVycy5mbikge1xuICAgIGlmIChcbiAgICAgIGxpc3RlbmVycy5mbiA9PT0gZm4gJiZcbiAgICAgICghb25jZSB8fCBsaXN0ZW5lcnMub25jZSkgJiZcbiAgICAgICghY29udGV4dCB8fCBsaXN0ZW5lcnMuY29udGV4dCA9PT0gY29udGV4dClcbiAgICApIHtcbiAgICAgIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGV2ZW50cyA9IFtdLCBsZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChcbiAgICAgICAgbGlzdGVuZXJzW2ldLmZuICE9PSBmbiB8fFxuICAgICAgICAob25jZSAmJiAhbGlzdGVuZXJzW2ldLm9uY2UpIHx8XG4gICAgICAgIChjb250ZXh0ICYmIGxpc3RlbmVyc1tpXS5jb250ZXh0ICE9PSBjb250ZXh0KVxuICAgICAgKSB7XG4gICAgICAgIGV2ZW50cy5wdXNoKGxpc3RlbmVyc1tpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyBSZXNldCB0aGUgYXJyYXksIG9yIHJlbW92ZSBpdCBjb21wbGV0ZWx5IGlmIHdlIGhhdmUgbm8gbW9yZSBsaXN0ZW5lcnMuXG4gICAgLy9cbiAgICBpZiAoZXZlbnRzLmxlbmd0aCkgdGhpcy5fZXZlbnRzW2V2dF0gPSBldmVudHMubGVuZ3RoID09PSAxID8gZXZlbnRzWzBdIDogZXZlbnRzO1xuICAgIGVsc2UgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhbGwgbGlzdGVuZXJzLCBvciB0aG9zZSBvZiB0aGUgc3BlY2lmaWVkIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBbZXZlbnRdIFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyhldmVudCkge1xuICB2YXIgZXZ0O1xuXG4gIGlmIChldmVudCkge1xuICAgIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG4gICAgaWYgKHRoaXMuX2V2ZW50c1tldnRdKSBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fZXZlbnRzID0gbmV3IEV2ZW50cygpO1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy9cbi8vIEFsaWFzIG1ldGhvZHMgbmFtZXMgYmVjYXVzZSBwZW9wbGUgcm9sbCBsaWtlIHRoYXQuXG4vL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUub247XG5cbi8vXG4vLyBFeHBvc2UgdGhlIHByZWZpeC5cbi8vXG5FdmVudEVtaXR0ZXIucHJlZml4ZWQgPSBwcmVmaXg7XG5cbi8vXG4vLyBBbGxvdyBgRXZlbnRFbWl0dGVyYCB0byBiZSBpbXBvcnRlZCBhcyBtb2R1bGUgbmFtZXNwYWNlLlxuLy9cbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbi8vXG4vLyBFeHBvc2UgdGhlIG1vZHVsZS5cbi8vXG5pZiAodHJ1ZSkge1xuICBtb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcbn1cblxuXG4vKioqLyB9KSxcbi8qIDUxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbi8vIEVuY29kZSBlYWNoIGl0ZW0gb2YgYW4gYXJyYXkgaW5kaXZpZHVhbGx5LiBUaGUgY29tbWFcbi8vIGRlbGltaXRlcnMgc2hvdWxkIG5vdCB0aGVtc2VsdmVzIGJlIGVuY29kZWQuXG5mdW5jdGlvbiBlbmNvZGVBcnJheShhcnJheVZhbHVlKSB7XG4gIHJldHVybiBhcnJheVZhbHVlLm1hcChlbmNvZGVVUklDb21wb25lbnQpLmpvaW4oJywnKTtcbn1cblxuZnVuY3Rpb24gZW5jb2RlVmFsdWUodmFsdWUpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIGVuY29kZUFycmF5KHZhbHVlKTtcbiAgfVxuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh2YWx1ZSkpO1xufVxuXG4vKipcbiAqIEFwcGVuZCBhIHF1ZXJ5IHBhcmFtZXRlciB0byBhIFVSTC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ8Ym9vbGVhbnxBcnJheTwqPj59IFt2YWx1ZV0gLSBQcm92aWRlIGFuIGFycmF5XG4gKiAgIGlmIHRoZSB2YWx1ZSBpcyBhIGxpc3QgYW5kIGNvbW1hcyBiZXR3ZWVuIHZhbHVlcyBuZWVkIHRvIGJlXG4gKiAgIHByZXNlcnZlZCwgdW5lbmNvZGVkLlxuICogQHJldHVybnMge3N0cmluZ30gLSBNb2RpZmllZCBVUkwuXG4gKi9cbmZ1bmN0aW9uIGFwcGVuZFF1ZXJ5UGFyYW0odXJsLCBrZXksIHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gZmFsc2UgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIHZhciBwdW5jdHVhdGlvbiA9IC9cXD8vLnRlc3QodXJsKSA/ICcmJyA6ICc/JztcbiAgdmFyIHF1ZXJ5ID0gZW5jb2RlVVJJQ29tcG9uZW50KGtleSk7XG4gIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSAnJyAmJiB2YWx1ZSAhPT0gdHJ1ZSkge1xuICAgIHF1ZXJ5ICs9ICc9JyArIGVuY29kZVZhbHVlKHZhbHVlKTtcbiAgfVxuICByZXR1cm4gJycgKyB1cmwgKyBwdW5jdHVhdGlvbiArIHF1ZXJ5O1xufVxuXG4vKipcbiAqIERlcml2ZSBhIHF1ZXJ5IHN0cmluZyBmcm9tIGFuIG9iamVjdCBhbmQgYXBwZW5kIGl0XG4gKiB0byBhIFVSTC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge09iamVjdH0gW3F1ZXJ5T2JqZWN0XSAtIFZhbHVlcyBzaG91bGQgYmUgcHJpbWl0aXZlcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gTW9kaWZpZWQgVVJMLlxuICovXG5mdW5jdGlvbiBhcHBlbmRRdWVyeU9iamVjdCh1cmwsIHF1ZXJ5T2JqZWN0KSB7XG4gIGlmICghcXVlcnlPYmplY3QpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgdmFyIHJlc3VsdCA9IHVybDtcbiAgT2JqZWN0LmtleXMocXVlcnlPYmplY3QpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgdmFyIHZhbHVlID0gcXVlcnlPYmplY3Rba2V5XTtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlID0gdmFsdWVcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbih2KSB7XG4gICAgICAgICAgcmV0dXJuICEhdjtcbiAgICAgICAgfSlcbiAgICAgICAgLmpvaW4oJywnKTtcbiAgICB9XG4gICAgcmVzdWx0ID0gYXBwZW5kUXVlcnlQYXJhbShyZXN1bHQsIGtleSwgdmFsdWUpO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBQcmVwZW5kIGFuIG9yaWdpbiB0byBhIFVSTC4gSWYgdGhlIFVSTCBhbHJlYWR5IGhhcyBhblxuICogb3JpZ2luLCBkbyBub3RoaW5nLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcmlnaW5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gTW9kaWZpZWQgVVJMLlxuICovXG5mdW5jdGlvbiBwcmVwZW5kT3JpZ2luKHVybCwgb3JpZ2luKSB7XG4gIGlmICghb3JpZ2luKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIGlmICh1cmwuc2xpY2UoMCwgNCkgPT09ICdodHRwJykge1xuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICB2YXIgZGVsaW1pdGVyID0gdXJsWzBdID09PSAnLycgPyAnJyA6ICcvJztcbiAgcmV0dXJuICcnICsgb3JpZ2luLnJlcGxhY2UoL1xcLyQvLCAnJykgKyBkZWxpbWl0ZXIgKyB1cmw7XG59XG5cbi8qKlxuICogSW50ZXJwb2xhdGUgdmFsdWVzIGludG8gYSByb3V0ZSB3aXRoIGV4cHJlc3Mtc3R5bGUsXG4gKiBjb2xvbi1wcmVmaXhlZCByb3V0ZSBwYXJhbWV0ZXJzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSByb3V0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtwYXJhbXNdIC0gVmFsdWVzIHNob3VsZCBiZSBwcmltaXRpdmVzXG4gKiAgIG9yIGFycmF5cyBvZiBwcmltaXRpdmVzLiBQcm92aWRlIGFuIGFycmF5IGlmIHRoZSB2YWx1ZVxuICogICBpcyBhIGxpc3QgYW5kIGNvbW1hcyBiZXR3ZWVuIHZhbHVlcyBuZWVkIHRvIGJlXG4gKiAgIHByZXNlcnZlZCwgdW5lbmNvZGVkLlxuICogQHJldHVybnMge3N0cmluZ30gLSBNb2RpZmllZCBVUkwuXG4gKi9cbmZ1bmN0aW9uIGludGVycG9sYXRlUm91dGVQYXJhbXMocm91dGUsIHBhcmFtcykge1xuICBpZiAoIXBhcmFtcykge1xuICAgIHJldHVybiByb3V0ZTtcbiAgfVxuICByZXR1cm4gcm91dGUucmVwbGFjZSgvXFwvOihbYS16QS1aMC05XSspL2csIGZ1bmN0aW9uKF8sIHBhcmFtSWQpIHtcbiAgICB2YXIgdmFsdWUgPSBwYXJhbXNbcGFyYW1JZF07XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5zcGVjaWZpZWQgcm91dGUgcGFyYW1ldGVyICcgKyBwYXJhbUlkKTtcbiAgICB9XG4gICAgdmFyIHByZXBwZWRWYWx1ZSA9IGVuY29kZVZhbHVlKHZhbHVlKTtcbiAgICByZXR1cm4gJy8nICsgcHJlcHBlZFZhbHVlO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFwcGVuZFF1ZXJ5T2JqZWN0OiBhcHBlbmRRdWVyeU9iamVjdCxcbiAgYXBwZW5kUXVlcnlQYXJhbTogYXBwZW5kUXVlcnlQYXJhbSxcbiAgcHJlcGVuZE9yaWdpbjogcHJlcGVuZE9yaWdpbixcbiAgaW50ZXJwb2xhdGVSb3V0ZVBhcmFtczogaW50ZXJwb2xhdGVSb3V0ZVBhcmFtc1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDUyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBicm93c2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7XG52YXIgTWFwaUNsaWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXG5mdW5jdGlvbiBCcm93c2VyQ2xpZW50KG9wdGlvbnMpIHtcbiAgTWFwaUNsaWVudC5jYWxsKHRoaXMsIG9wdGlvbnMpO1xufVxuQnJvd3NlckNsaWVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE1hcGlDbGllbnQucHJvdG90eXBlKTtcbkJyb3dzZXJDbGllbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQnJvd3NlckNsaWVudDtcblxuQnJvd3NlckNsaWVudC5wcm90b3R5cGUuc2VuZFJlcXVlc3QgPSBicm93c2VyLmJyb3dzZXJTZW5kO1xuQnJvd3NlckNsaWVudC5wcm90b3R5cGUuYWJvcnRSZXF1ZXN0ID0gYnJvd3Nlci5icm93c2VyQWJvcnQ7XG5cbi8qKlxuICogQ3JlYXRlIGEgY2xpZW50IGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMuYWNjZXNzVG9rZW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5vcmlnaW5dXG4gKiBAcmV0dXJucyB7TWFwaUNsaWVudH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQnJvd3NlckNsaWVudChvcHRpb25zKSB7XG4gIHJldHVybiBuZXcgQnJvd3NlckNsaWVudChvcHRpb25zKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVCcm93c2VyQ2xpZW50O1xuXG5cbi8qKiovIH0pLFxuLyogNTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIE1hcGlSZXNwb25zZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpO1xudmFyIE1hcGlFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpO1xudmFyIGNvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG52YXIgcGFyc2VIZWFkZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nyk7XG5cbi8vIEtleXMgYXJlIHJlcXVlc3QgSURzLCB2YWx1ZXMgYXJlIFhIUnMuXG52YXIgcmVxdWVzdHNVbmRlcndheSA9IHt9O1xuXG5mdW5jdGlvbiBicm93c2VyQWJvcnQocmVxdWVzdCkge1xuICB2YXIgeGhyID0gcmVxdWVzdHNVbmRlcndheVtyZXF1ZXN0LmlkXTtcbiAgaWYgKCF4aHIpIHJldHVybjtcbiAgeGhyLmFib3J0KCk7XG4gIGRlbGV0ZSByZXF1ZXN0c1VuZGVyd2F5W3JlcXVlc3QuaWRdO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVSZXNwb25zZShyZXF1ZXN0LCB4aHIpIHtcbiAgcmV0dXJuIG5ldyBNYXBpUmVzcG9uc2UocmVxdWVzdCwge1xuICAgIGJvZHk6IHhoci5yZXNwb25zZSxcbiAgICBoZWFkZXJzOiBwYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSxcbiAgICBzdGF0dXNDb2RlOiB4aHIuc3RhdHVzXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVCcm93c2VyUHJvZ3Jlc3NFdmVudChldmVudCkge1xuICB2YXIgdG90YWwgPSBldmVudC50b3RhbDtcbiAgdmFyIHRyYW5zZmVycmVkID0gZXZlbnQubG9hZGVkO1xuICB2YXIgcGVyY2VudCA9ICgxMDAgKiB0cmFuc2ZlcnJlZCkgLyB0b3RhbDtcbiAgcmV0dXJuIHtcbiAgICB0b3RhbDogdG90YWwsXG4gICAgdHJhbnNmZXJyZWQ6IHRyYW5zZmVycmVkLFxuICAgIHBlcmNlbnQ6IHBlcmNlbnRcbiAgfTtcbn1cblxuZnVuY3Rpb24gc2VuZFJlcXVlc3RYaHIocmVxdWVzdCwgeGhyKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICB4aHIub25wcm9ncmVzcyA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICByZXF1ZXN0LmVtaXR0ZXIuZW1pdChcbiAgICAgICAgY29uc3RhbnRzLkVWRU5UX1BST0dSRVNTX0RPV05MT0FELFxuICAgICAgICBub3JtYWxpemVCcm93c2VyUHJvZ3Jlc3NFdmVudChldmVudClcbiAgICAgICk7XG4gICAgfTtcblxuICAgIHZhciBmaWxlID0gcmVxdWVzdC5maWxlO1xuICAgIGlmIChmaWxlKSB7XG4gICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICByZXF1ZXN0LmVtaXR0ZXIuZW1pdChcbiAgICAgICAgICBjb25zdGFudHMuRVZFTlRfUFJPR1JFU1NfVVBMT0FELFxuICAgICAgICAgIG5vcm1hbGl6ZUJyb3dzZXJQcm9ncmVzc0V2ZW50KGV2ZW50KVxuICAgICAgICApO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICByZWplY3QoZXJyb3IpO1xuICAgIH07XG5cbiAgICB4aHIub25hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1hcGlFcnJvciA9IG5ldyBNYXBpRXJyb3Ioe1xuICAgICAgICByZXF1ZXN0OiByZXF1ZXN0LFxuICAgICAgICB0eXBlOiBjb25zdGFudHMuRVJST1JfUkVRVUVTVF9BQk9SVEVEXG4gICAgICB9KTtcbiAgICAgIHJlamVjdChtYXBpRXJyb3IpO1xuICAgIH07XG5cbiAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICBkZWxldGUgcmVxdWVzdHNVbmRlcndheVtyZXF1ZXN0LmlkXTtcbiAgICAgIGlmICh4aHIuc3RhdHVzIDwgMjAwIHx8IHhoci5zdGF0dXMgPj0gNDAwKSB7XG4gICAgICAgIHZhciBtYXBpRXJyb3IgPSBuZXcgTWFwaUVycm9yKHtcbiAgICAgICAgICByZXF1ZXN0OiByZXF1ZXN0LFxuICAgICAgICAgIGJvZHk6IHhoci5yZXNwb25zZSxcbiAgICAgICAgICBzdGF0dXNDb2RlOiB4aHIuc3RhdHVzXG4gICAgICAgIH0pO1xuICAgICAgICByZWplY3QobWFwaUVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZSh4aHIpO1xuICAgIH07XG5cbiAgICB2YXIgYm9keSA9IHJlcXVlc3QuYm9keTtcblxuICAgIC8vIG1hdGNoaW5nIHNlcnZpY2UgbmVlZHMgdG8gc2VuZCBhIHd3dy1mb3JtLXVybGVuY29kZWQgcmVxdWVzdFxuICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHhoci5zZW5kKGJvZHkpO1xuICAgIH0gZWxzZSBpZiAoYm9keSkge1xuICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoYm9keSkpO1xuICAgIH0gZWxzZSBpZiAoZmlsZSkge1xuICAgICAgeGhyLnNlbmQoZmlsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHhoci5zZW5kKCk7XG4gICAgfVxuXG4gICAgcmVxdWVzdHNVbmRlcndheVtyZXF1ZXN0LmlkXSA9IHhocjtcbiAgfSkudGhlbihmdW5jdGlvbih4aHIpIHtcbiAgICByZXR1cm4gY3JlYXRlUmVzcG9uc2UocmVxdWVzdCwgeGhyKTtcbiAgfSk7XG59XG5cbi8vIFRoZSBhY2Nlc3NUb2tlbiBhcmd1bWVudCBnaXZlcyB0aGlzIGZ1bmN0aW9uIGZsZXhpYmlsaXR5XG4vLyBmb3IgTWFwYm94J3MgaW50ZXJuYWwgY2xpZW50LlxuZnVuY3Rpb24gY3JlYXRlUmVxdWVzdFhocihyZXF1ZXN0LCBhY2Nlc3NUb2tlbikge1xuICB2YXIgdXJsID0gcmVxdWVzdC51cmwoYWNjZXNzVG9rZW4pO1xuICB2YXIgeGhyID0gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO1xuICB4aHIub3BlbihyZXF1ZXN0Lm1ldGhvZCwgdXJsKTtcbiAgaWYgKHJlcXVlc3QuaGVhZGVycykge1xuICAgIE9iamVjdC5rZXlzKHJlcXVlc3QuaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgcmVxdWVzdC5oZWFkZXJzW2tleV0pO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB4aHI7XG59XG5cbmZ1bmN0aW9uIGJyb3dzZXJTZW5kKHJlcXVlc3QpIHtcbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgdmFyIHhociA9IGNyZWF0ZVJlcXVlc3RYaHIocmVxdWVzdCwgcmVxdWVzdC5jbGllbnQuYWNjZXNzVG9rZW4pO1xuICAgIHJldHVybiBzZW5kUmVxdWVzdFhocihyZXF1ZXN0LCB4aHIpO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGJyb3dzZXJBYm9ydDogYnJvd3NlckFib3J0LFxuICBzZW5kUmVxdWVzdFhocjogc2VuZFJlcXVlc3RYaHIsXG4gIGJyb3dzZXJTZW5kOiBicm93c2VyU2VuZCxcbiAgY3JlYXRlUmVxdWVzdFhocjogY3JlYXRlUmVxdWVzdFhoclxufTtcblxuXG4vKioqLyB9KSxcbi8qIDU0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBwYXJzZUxpbmtIZWFkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblxuLyoqXG4gKiBBIE1hcGJveCBBUEkgcmVzcG9uc2UuXG4gKlxuICogQGNsYXNzIE1hcGlSZXNwb25zZVxuICogQHByb3BlcnR5IHtPYmplY3R9IGJvZHkgLSBUaGUgcmVzcG9uc2UgYm9keSwgcGFyc2VkIGFzIEpTT04uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gcmF3Qm9keSAtIFRoZSByYXcgcmVzcG9uc2UgYm9keS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzdGF0dXNDb2RlIC0gVGhlIHJlc3BvbnNlJ3Mgc3RhdHVzIGNvZGUuXG4gKiBAcHJvcGVydHkge09iamVjdH0gaGVhZGVycyAtIFRoZSBwYXJzZWQgcmVzcG9uc2UgaGVhZGVycy5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBsaW5rcyAtIFRoZSBwYXJzZWQgcmVzcG9uc2UgbGlua3MuXG4gKiBAcHJvcGVydHkge01hcGlSZXF1ZXN0fSByZXF1ZXN0IC0gVGhlIHJlc3BvbnNlJ3Mgb3JpZ2luYXRpbmcgYE1hcGlSZXF1ZXN0YC5cbiAqL1xuXG4vKipcbiAqIEBpZ25vcmVcbiAqIEBwYXJhbSB7TWFwaVJlcXVlc3R9IHJlcXVlc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSByZXNwb25zZURhdGFcbiAqIEBwYXJhbSB7T2JqZWN0fSByZXNwb25zZURhdGEuaGVhZGVyc1xuICogQHBhcmFtIHtzdHJpbmd9IHJlc3BvbnNlRGF0YS5ib2R5XG4gKiBAcGFyYW0ge251bWJlcn0gcmVzcG9uc2VEYXRhLnN0YXR1c0NvZGVcbiAqL1xuZnVuY3Rpb24gTWFwaVJlc3BvbnNlKHJlcXVlc3QsIHJlc3BvbnNlRGF0YSkge1xuICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0O1xuICB0aGlzLmhlYWRlcnMgPSByZXNwb25zZURhdGEuaGVhZGVycztcbiAgdGhpcy5yYXdCb2R5ID0gcmVzcG9uc2VEYXRhLmJvZHk7XG4gIHRoaXMuc3RhdHVzQ29kZSA9IHJlc3BvbnNlRGF0YS5zdGF0dXNDb2RlO1xuICB0cnkge1xuICAgIHRoaXMuYm9keSA9IEpTT04ucGFyc2UocmVzcG9uc2VEYXRhLmJvZHkgfHwgJ3t9Jyk7XG4gIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICB0aGlzLmJvZHkgPSByZXNwb25zZURhdGEuYm9keTtcbiAgfVxuICB0aGlzLmxpbmtzID0gcGFyc2VMaW5rSGVhZGVyKHRoaXMuaGVhZGVycy5saW5rKTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGVyZSBpcyBhIG5leHQgcGFnZSB0aGF0IHlvdSBjYW4gZmV0Y2guXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbk1hcGlSZXNwb25zZS5wcm90b3R5cGUuaGFzTmV4dFBhZ2UgPSBmdW5jdGlvbiBoYXNOZXh0UGFnZSgpIHtcbiAgcmV0dXJuICEhdGhpcy5saW5rcy5uZXh0O1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSByZXF1ZXN0IGZvciB0aGUgbmV4dCBwYWdlLCBpZiB0aGVyZSBpcyBvbmUuXG4gKiBJZiB0aGVyZSBpcyBubyBuZXh0IHBhZ2UsIHJldHVybnMgYG51bGxgLlxuICpcbiAqIEByZXR1cm5zIHtNYXBpUmVxdWVzdCB8IG51bGx9XG4gKi9cbk1hcGlSZXNwb25zZS5wcm90b3R5cGUubmV4dFBhZ2UgPSBmdW5jdGlvbiBuZXh0UGFnZSgpIHtcbiAgaWYgKCF0aGlzLmhhc05leHRQYWdlKCkpIHJldHVybiBudWxsO1xuICByZXR1cm4gdGhpcy5yZXF1ZXN0Ll9leHRlbmQoe1xuICAgIHBhdGg6IHRoaXMubGlua3MubmV4dC51cmxcbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1hcGlSZXNwb25zZTtcblxuXG4vKioqLyB9KSxcbi8qIDU1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbi8vIExpa2UgaHR0cHM6Ly9naXRodWIuY29tL3RobG9yZW56L2xpYi9wYXJzZS1saW5rLWhlYWRlciBidXQgd2l0aG91dCBhbnlcbi8vIGFkZGl0aW9uYWwgZGVwZW5kZW5jaWVzLlxuXG5mdW5jdGlvbiBwYXJzZVBhcmFtKHBhcmFtKSB7XG4gIHZhciBwYXJ0cyA9IHBhcmFtLm1hdGNoKC9cXHMqKC4rKVxccyo9XFxzKlwiPyhbXlwiXSspXCI/Lyk7XG4gIGlmICghcGFydHMpIHJldHVybiBudWxsO1xuXG4gIHJldHVybiB7XG4gICAga2V5OiBwYXJ0c1sxXSxcbiAgICB2YWx1ZTogcGFydHNbMl1cbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VMaW5rKGxpbmspIHtcbiAgdmFyIHBhcnRzID0gbGluay5tYXRjaCgvPD8oW14+XSopPiguKikvKTtcbiAgaWYgKCFwYXJ0cykgcmV0dXJuIG51bGw7XG5cbiAgdmFyIGxpbmtVcmwgPSBwYXJ0c1sxXTtcbiAgdmFyIGxpbmtQYXJhbXMgPSBwYXJ0c1syXS5zcGxpdCgnOycpO1xuICB2YXIgcmVsID0gbnVsbDtcbiAgdmFyIHBhcnNlZExpbmtQYXJhbXMgPSBsaW5rUGFyYW1zLnJlZHVjZShmdW5jdGlvbihyZXN1bHQsIHBhcmFtKSB7XG4gICAgdmFyIHBhcnNlZCA9IHBhcnNlUGFyYW0ocGFyYW0pO1xuICAgIGlmICghcGFyc2VkKSByZXR1cm4gcmVzdWx0O1xuICAgIGlmIChwYXJzZWQua2V5ID09PSAncmVsJykge1xuICAgICAgaWYgKCFyZWwpIHtcbiAgICAgICAgcmVsID0gcGFyc2VkLnZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmVzdWx0W3BhcnNlZC5rZXldID0gcGFyc2VkLnZhbHVlO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sIHt9KTtcbiAgaWYgKCFyZWwpIHJldHVybiBudWxsO1xuXG4gIHJldHVybiB7XG4gICAgdXJsOiBsaW5rVXJsLFxuICAgIHJlbDogcmVsLFxuICAgIHBhcmFtczogcGFyc2VkTGlua1BhcmFtc1xuICB9O1xufVxuXG4vKipcbiAqIFBhcnNlIGEgTGluayBoZWFkZXIuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGxpbmtIZWFkZXJcbiAqIEByZXR1cm5zIHt7XG4gKiAgIFtzdHJpbmddOiB7XG4gKiAgICAgdXJsOiBzdHJpbmcsXG4gKiAgICAgcGFyYW1zOiB7IFtzdHJpbmddOiBzdHJpbmcgfVxuICogICB9XG4gKiB9fVxuICovXG5mdW5jdGlvbiBwYXJzZUxpbmtIZWFkZXIobGlua0hlYWRlcikge1xuICBpZiAoIWxpbmtIZWFkZXIpIHJldHVybiB7fTtcblxuICByZXR1cm4gbGlua0hlYWRlci5zcGxpdCgvLFxccyo8LykucmVkdWNlKGZ1bmN0aW9uKHJlc3VsdCwgbGluaykge1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZUxpbmsobGluayk7XG4gICAgaWYgKCFwYXJzZWQpIHJldHVybiByZXN1bHQ7XG4gICAgLy8gcmVsIHZhbHVlIGNhbiBiZSBtdWx0aXBsZSB3aGl0ZXNwYWNlLXNlcGFyYXRlZCByZWxzLlxuICAgIHZhciBzcGxpdFJlbCA9IHBhcnNlZC5yZWwuc3BsaXQoL1xccysvKTtcbiAgICBzcGxpdFJlbC5mb3JFYWNoKGZ1bmN0aW9uKHJlbCkge1xuICAgICAgaWYgKCFyZXN1bHRbcmVsXSkge1xuICAgICAgICByZXN1bHRbcmVsXSA9IHtcbiAgICAgICAgICB1cmw6IHBhcnNlZC51cmwsXG4gICAgICAgICAgcGFyYW1zOiBwYXJzZWQucGFyYW1zXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSwge30pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBhcnNlTGlua0hlYWRlcjtcblxuXG4vKioqLyB9KSxcbi8qIDU2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBjb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG4vKipcbiAqIEEgTWFwYm94IEFQSSBlcnJvci5cbiAqXG4gKiBJZiB0aGVyZSdzIGFuIGVycm9yIGR1cmluZyB0aGUgQVBJIHRyYW5zYWN0aW9uLFxuICogdGhlIFByb21pc2UgcmV0dXJuZWQgYnkgYE1hcGlSZXF1ZXN0YCdzIFtgc2VuZGBdKCNzZW5kKVxuICogbWV0aG9kIHNob3VsZCByZWplY3Qgd2l0aCBhIGBNYXBpRXJyb3JgLlxuICpcbiAqIEBjbGFzcyBNYXBpRXJyb3JcbiAqIEBoaWRlY29uc3RydWN0b3JcbiAqIEBwcm9wZXJ0eSB7TWFwaVJlcXVlc3R9IHJlcXVlc3QgLSBUaGUgZXJyb3JlZCByZXF1ZXN0LlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgLSBUaGUgdHlwZSBvZiBlcnJvci4gVXN1YWxseSB0aGlzIGlzIGAnSHR0cEVycm9yJ2AuXG4gKiAgIElmIHRoZSByZXF1ZXN0IHdhcyBhYm9ydGVkLCBzbyB0aGUgZXJyb3Igd2FzXG4gKiAgIG5vdCBzZW50IGZyb20gdGhlIHNlcnZlciwgdGhlIHR5cGUgd2lsbCBiZVxuICogICBgJ1JlcXVlc3RBYm9ydGVkRXJyb3InYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc3RhdHVzQ29kZV0gLSBUaGUgbnVtZXJpYyBzdGF0dXMgY29kZSBvZlxuICogICB0aGUgSFRUUCByZXNwb25zZS5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0IHwgc3RyaW5nfSBbYm9keV0gLSBJZiB0aGUgc2VydmVyIHNlbnQgYSByZXNwb25zZSBib2R5LFxuICogICB0aGlzIHByb3BlcnR5IGV4cG9zZXMgdGhhdCByZXNwb25zZSwgcGFyc2VkIGFzIEpTT04gaWYgcG9zc2libGUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW21lc3NhZ2VdIC0gV2hhdGV2ZXIgbWVzc2FnZSBjb3VsZCBiZSBkZXJpdmVkIGZyb20gdGhlXG4gKiAgIGNhbGwgc2l0ZSBhbmQgSFRUUCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge01hcGlSZXF1ZXN0fSBvcHRpb25zLnJlcXVlc3RcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5zdGF0dXNDb2RlXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmJvZHldXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubWVzc2FnZV1cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy50eXBlXVxuICovXG5mdW5jdGlvbiBNYXBpRXJyb3Iob3B0aW9ucykge1xuICB2YXIgZXJyb3JUeXBlID0gb3B0aW9ucy50eXBlIHx8IGNvbnN0YW50cy5FUlJPUl9IVFRQO1xuXG4gIHZhciBib2R5O1xuICBpZiAob3B0aW9ucy5ib2R5KSB7XG4gICAgdHJ5IHtcbiAgICAgIGJvZHkgPSBKU09OLnBhcnNlKG9wdGlvbnMuYm9keSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgYm9keSA9IG9wdGlvbnMuYm9keTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgYm9keSA9IG51bGw7XG4gIH1cblxuICB2YXIgbWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZSB8fCBudWxsO1xuICBpZiAoIW1lc3NhZ2UpIHtcbiAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBtZXNzYWdlID0gYm9keTtcbiAgICB9IGVsc2UgaWYgKGJvZHkgJiYgdHlwZW9mIGJvZHkubWVzc2FnZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG1lc3NhZ2UgPSBib2R5Lm1lc3NhZ2U7XG4gICAgfSBlbHNlIGlmIChlcnJvclR5cGUgPT09IGNvbnN0YW50cy5FUlJPUl9SRVFVRVNUX0FCT1JURUQpIHtcbiAgICAgIG1lc3NhZ2UgPSAnUmVxdWVzdCBhYm9ydGVkJztcbiAgICB9XG4gIH1cblxuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICB0aGlzLnR5cGUgPSBlcnJvclR5cGU7XG4gIHRoaXMuc3RhdHVzQ29kZSA9IG9wdGlvbnMuc3RhdHVzQ29kZSB8fCBudWxsO1xuICB0aGlzLnJlcXVlc3QgPSBvcHRpb25zLnJlcXVlc3Q7XG4gIHRoaXMuYm9keSA9IGJvZHk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTWFwaUVycm9yO1xuXG5cbi8qKiovIH0pLFxuLyogNTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZnVuY3Rpb24gcGFyc2VTaW5nbGVIZWFkZXIocmF3KSB7XG4gIHZhciBib3VuZGFyeSA9IHJhdy5pbmRleE9mKCc6Jyk7XG4gIHZhciBuYW1lID0gcmF3XG4gICAgLnN1YnN0cmluZygwLCBib3VuZGFyeSlcbiAgICAudHJpbSgpXG4gICAgLnRvTG93ZXJDYXNlKCk7XG4gIHZhciB2YWx1ZSA9IHJhdy5zdWJzdHJpbmcoYm91bmRhcnkgKyAxKS50cmltKCk7XG4gIHJldHVybiB7XG4gICAgbmFtZTogbmFtZSxcbiAgICB2YWx1ZTogdmFsdWVcbiAgfTtcbn1cblxuLyoqXG4gKiBQYXJzZSByYXcgaGVhZGVycyBpbnRvIGFuIG9iamVjdCB3aXRoIGxvd2VyY2FzZSBwcm9wZXJ0aWVzLlxuICogRG9lcyBub3QgZnVsbHkgcGFyc2UgaGVhZGluZ3MgaW50byBtb3JlIGNvbXBsZXRlIGRhdGEgc3RydWN0dXJlLFxuICogYXMgbGFyZ2VyIGxpYnJhcmllcyBtaWdodCBkby4gQWxzbyBkb2VzIG5vdCBkZWFsIHdpdGggZHVwbGljYXRlXG4gKiBoZWFkZXJzIGJlY2F1c2UgTm9kZSBkb2Vzbid0IHNlZW0gdG8gZGVhbCB3aXRoIHRob3NlIHdlbGwsIHNvXG4gKiB3ZSBzaG91bGRuJ3QgbGV0IHRoZSBicm93c2VyIGVpdGhlciwgZm9yIGNvbnNpc3RlbmN5LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSByYXdcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIHBhcnNlSGVhZGVycyhyYXcpIHtcbiAgdmFyIGhlYWRlcnMgPSB7fTtcbiAgaWYgKCFyYXcpIHtcbiAgICByZXR1cm4gaGVhZGVycztcbiAgfVxuXG4gIHJhd1xuICAgIC50cmltKClcbiAgICAuc3BsaXQoL1tcXHJ8XFxuXSsvKVxuICAgIC5mb3JFYWNoKGZ1bmN0aW9uKHJhd0hlYWRlcikge1xuICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlU2luZ2xlSGVhZGVyKHJhd0hlYWRlcik7XG4gICAgICBoZWFkZXJzW3BhcnNlZC5uYW1lXSA9IHBhcnNlZC52YWx1ZTtcbiAgICB9KTtcblxuICByZXR1cm4gaGVhZGVycztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZUhlYWRlcnM7XG5cblxuLyoqKi8gfSksXG4vKiA1OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgcGljayA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXG5mdW5jdGlvbiBvYmplY3RDbGVhbihvYmopIHtcbiAgcmV0dXJuIHBpY2sob2JqLCBmdW5jdGlvbihfLCB2YWwpIHtcbiAgICByZXR1cm4gdmFsICE9IG51bGw7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG9iamVjdENsZWFuO1xuXG5cbi8qKiovIH0pLFxuLyogNTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZnVuY3Rpb24gb2JqZWN0TWFwKG9iaiwgY2IpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikucmVkdWNlKGZ1bmN0aW9uKHJlc3VsdCwga2V5KSB7XG4gICAgcmVzdWx0W2tleV0gPSBjYihrZXksIG9ialtrZXldKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LCB7fSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gb2JqZWN0TWFwO1xuXG5cbi8qKiovIH0pLFxuLyogNjAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuLyoqXG4gKiBCYXNlZCBvZmYgb2YgW3RoZSBvZmZpY2FsIEdvb2dsZSBkb2N1bWVudF0oaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbWFwcy9kb2N1bWVudGF0aW9uL3V0aWxpdGllcy9wb2x5bGluZWFsZ29yaXRobSlcbiAqXG4gKiBTb21lIHBhcnRzIGZyb20gW3RoaXMgaW1wbGVtZW50YXRpb25dKGh0dHA6Ly9mYWNzdGFmZi51bmNhLmVkdS9tY21jY2x1ci9Hb29nbGVNYXBzL0VuY29kZVBvbHlsaW5lL1BvbHlsaW5lRW5jb2Rlci5qcylcbiAqIGJ5IFtNYXJrIE1jQ2x1cmVdKGh0dHA6Ly9mYWNzdGFmZi51bmNhLmVkdS9tY21jY2x1ci8pXG4gKlxuICogQG1vZHVsZSBwb2x5bGluZVxuICovXG5cbnZhciBwb2x5bGluZSA9IHt9O1xuXG5mdW5jdGlvbiBweTJfcm91bmQodmFsdWUpIHtcbiAgICAvLyBHb29nbGUncyBwb2x5bGluZSBhbGdvcml0aG0gdXNlcyB0aGUgc2FtZSByb3VuZGluZyBzdHJhdGVneSBhcyBQeXRob24gMiwgd2hpY2ggaXMgZGlmZmVyZW50IGZyb20gSlMgZm9yIG5lZ2F0aXZlIHZhbHVlc1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGguYWJzKHZhbHVlKSArIDAuNSkgKiAodmFsdWUgPj0gMCA/IDEgOiAtMSk7XG59XG5cbmZ1bmN0aW9uIGVuY29kZShjdXJyZW50LCBwcmV2aW91cywgZmFjdG9yKSB7XG4gICAgY3VycmVudCA9IHB5Ml9yb3VuZChjdXJyZW50ICogZmFjdG9yKTtcbiAgICBwcmV2aW91cyA9IHB5Ml9yb3VuZChwcmV2aW91cyAqIGZhY3Rvcik7XG4gICAgdmFyIGNvb3JkaW5hdGUgPSBjdXJyZW50IC0gcHJldmlvdXM7XG4gICAgY29vcmRpbmF0ZSA8PD0gMTtcbiAgICBpZiAoY3VycmVudCAtIHByZXZpb3VzIDwgMCkge1xuICAgICAgICBjb29yZGluYXRlID0gfmNvb3JkaW5hdGU7XG4gICAgfVxuICAgIHZhciBvdXRwdXQgPSAnJztcbiAgICB3aGlsZSAoY29vcmRpbmF0ZSA+PSAweDIwKSB7XG4gICAgICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgweDIwIHwgKGNvb3JkaW5hdGUgJiAweDFmKSkgKyA2Myk7XG4gICAgICAgIGNvb3JkaW5hdGUgPj49IDU7XG4gICAgfVxuICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvb3JkaW5hdGUgKyA2Myk7XG4gICAgcmV0dXJuIG91dHB1dDtcbn1cblxuLyoqXG4gKiBEZWNvZGVzIHRvIGEgW2xhdGl0dWRlLCBsb25naXR1ZGVdIGNvb3JkaW5hdGVzIGFycmF5LlxuICpcbiAqIFRoaXMgaXMgYWRhcHRlZCBmcm9tIHRoZSBpbXBsZW1lbnRhdGlvbiBpbiBQcm9qZWN0LU9TUk0uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtOdW1iZXJ9IHByZWNpc2lvblxuICogQHJldHVybnMge0FycmF5fVxuICpcbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL1Byb2plY3QtT1NSTS9vc3JtLWZyb250ZW5kL2Jsb2IvbWFzdGVyL1dlYkNvbnRlbnQvcm91dGluZy9PU1JNLlJvdXRpbmdHZW9tZXRyeS5qc1xuICovXG5wb2x5bGluZS5kZWNvZGUgPSBmdW5jdGlvbihzdHIsIHByZWNpc2lvbikge1xuICAgIHZhciBpbmRleCA9IDAsXG4gICAgICAgIGxhdCA9IDAsXG4gICAgICAgIGxuZyA9IDAsXG4gICAgICAgIGNvb3JkaW5hdGVzID0gW10sXG4gICAgICAgIHNoaWZ0ID0gMCxcbiAgICAgICAgcmVzdWx0ID0gMCxcbiAgICAgICAgYnl0ZSA9IG51bGwsXG4gICAgICAgIGxhdGl0dWRlX2NoYW5nZSxcbiAgICAgICAgbG9uZ2l0dWRlX2NoYW5nZSxcbiAgICAgICAgZmFjdG9yID0gTWF0aC5wb3coMTAsIHByZWNpc2lvbiB8fCA1KTtcblxuICAgIC8vIENvb3JkaW5hdGVzIGhhdmUgdmFyaWFibGUgbGVuZ3RoIHdoZW4gZW5jb2RlZCwgc28ganVzdCBrZWVwXG4gICAgLy8gdHJhY2sgb2Ygd2hldGhlciB3ZSd2ZSBoaXQgdGhlIGVuZCBvZiB0aGUgc3RyaW5nLiBJbiBlYWNoXG4gICAgLy8gbG9vcCBpdGVyYXRpb24sIGEgc2luZ2xlIGNvb3JkaW5hdGUgaXMgZGVjb2RlZC5cbiAgICB3aGlsZSAoaW5kZXggPCBzdHIubGVuZ3RoKSB7XG5cbiAgICAgICAgLy8gUmVzZXQgc2hpZnQsIHJlc3VsdCwgYW5kIGJ5dGVcbiAgICAgICAgYnl0ZSA9IG51bGw7XG4gICAgICAgIHNoaWZ0ID0gMDtcbiAgICAgICAgcmVzdWx0ID0gMDtcblxuICAgICAgICBkbyB7XG4gICAgICAgICAgICBieXRlID0gc3RyLmNoYXJDb2RlQXQoaW5kZXgrKykgLSA2MztcbiAgICAgICAgICAgIHJlc3VsdCB8PSAoYnl0ZSAmIDB4MWYpIDw8IHNoaWZ0O1xuICAgICAgICAgICAgc2hpZnQgKz0gNTtcbiAgICAgICAgfSB3aGlsZSAoYnl0ZSA+PSAweDIwKTtcblxuICAgICAgICBsYXRpdHVkZV9jaGFuZ2UgPSAoKHJlc3VsdCAmIDEpID8gfihyZXN1bHQgPj4gMSkgOiAocmVzdWx0ID4+IDEpKTtcblxuICAgICAgICBzaGlmdCA9IHJlc3VsdCA9IDA7XG5cbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgYnl0ZSA9IHN0ci5jaGFyQ29kZUF0KGluZGV4KyspIC0gNjM7XG4gICAgICAgICAgICByZXN1bHQgfD0gKGJ5dGUgJiAweDFmKSA8PCBzaGlmdDtcbiAgICAgICAgICAgIHNoaWZ0ICs9IDU7XG4gICAgICAgIH0gd2hpbGUgKGJ5dGUgPj0gMHgyMCk7XG5cbiAgICAgICAgbG9uZ2l0dWRlX2NoYW5nZSA9ICgocmVzdWx0ICYgMSkgPyB+KHJlc3VsdCA+PiAxKSA6IChyZXN1bHQgPj4gMSkpO1xuXG4gICAgICAgIGxhdCArPSBsYXRpdHVkZV9jaGFuZ2U7XG4gICAgICAgIGxuZyArPSBsb25naXR1ZGVfY2hhbmdlO1xuXG4gICAgICAgIGNvb3JkaW5hdGVzLnB1c2goW2xhdCAvIGZhY3RvciwgbG5nIC8gZmFjdG9yXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvb3JkaW5hdGVzO1xufTtcblxuLyoqXG4gKiBFbmNvZGVzIHRoZSBnaXZlbiBbbGF0aXR1ZGUsIGxvbmdpdHVkZV0gY29vcmRpbmF0ZXMgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheS48QXJyYXkuPE51bWJlcj4+fSBjb29yZGluYXRlc1xuICogQHBhcmFtIHtOdW1iZXJ9IHByZWNpc2lvblxuICogQHJldHVybnMge1N0cmluZ31cbiAqL1xucG9seWxpbmUuZW5jb2RlID0gZnVuY3Rpb24oY29vcmRpbmF0ZXMsIHByZWNpc2lvbikge1xuICAgIGlmICghY29vcmRpbmF0ZXMubGVuZ3RoKSB7IHJldHVybiAnJzsgfVxuXG4gICAgdmFyIGZhY3RvciA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24gfHwgNSksXG4gICAgICAgIG91dHB1dCA9IGVuY29kZShjb29yZGluYXRlc1swXVswXSwgMCwgZmFjdG9yKSArIGVuY29kZShjb29yZGluYXRlc1swXVsxXSwgMCwgZmFjdG9yKTtcblxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgY29vcmRpbmF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGEgPSBjb29yZGluYXRlc1tpXSwgYiA9IGNvb3JkaW5hdGVzW2kgLSAxXTtcbiAgICAgICAgb3V0cHV0ICs9IGVuY29kZShhWzBdLCBiWzBdLCBmYWN0b3IpO1xuICAgICAgICBvdXRwdXQgKz0gZW5jb2RlKGFbMV0sIGJbMV0sIGZhY3Rvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dDtcbn07XG5cbmZ1bmN0aW9uIGZsaXBwZWQoY29vcmRzKSB7XG4gICAgdmFyIGZsaXBwZWQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmbGlwcGVkLnB1c2goY29vcmRzW2ldLnNsaWNlKCkucmV2ZXJzZSgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZsaXBwZWQ7XG59XG5cbi8qKlxuICogRW5jb2RlcyBhIEdlb0pTT04gTGluZVN0cmluZyBmZWF0dXJlL2dlb21ldHJ5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBnZW9qc29uXG4gKiBAcGFyYW0ge051bWJlcn0gcHJlY2lzaW9uXG4gKiBAcmV0dXJucyB7U3RyaW5nfVxuICovXG5wb2x5bGluZS5mcm9tR2VvSlNPTiA9IGZ1bmN0aW9uKGdlb2pzb24sIHByZWNpc2lvbikge1xuICAgIGlmIChnZW9qc29uICYmIGdlb2pzb24udHlwZSA9PT0gJ0ZlYXR1cmUnKSB7XG4gICAgICAgIGdlb2pzb24gPSBnZW9qc29uLmdlb21ldHJ5O1xuICAgIH1cbiAgICBpZiAoIWdlb2pzb24gfHwgZ2VvanNvbi50eXBlICE9PSAnTGluZVN0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnB1dCBtdXN0IGJlIGEgR2VvSlNPTiBMaW5lU3RyaW5nJyk7XG4gICAgfVxuICAgIHJldHVybiBwb2x5bGluZS5lbmNvZGUoZmxpcHBlZChnZW9qc29uLmNvb3JkaW5hdGVzKSwgcHJlY2lzaW9uKTtcbn07XG5cbi8qKlxuICogRGVjb2RlcyB0byBhIEdlb0pTT04gTGluZVN0cmluZyBnZW9tZXRyeS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge051bWJlcn0gcHJlY2lzaW9uXG4gKiBAcmV0dXJucyB7T2JqZWN0fVxuICovXG5wb2x5bGluZS50b0dlb0pTT04gPSBmdW5jdGlvbihzdHIsIHByZWNpc2lvbikge1xuICAgIHZhciBjb29yZHMgPSBwb2x5bGluZS5kZWNvZGUoc3RyLCBwcmVjaXNpb24pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdMaW5lU3RyaW5nJyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGZsaXBwZWQoY29vcmRzKVxuICAgIH07XG59O1xuXG5pZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHBvbHlsaW5lO1xufVxuXG5cbi8qKiovIH0pLFxuLyogNjEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gaW5pdE9yaWdpbkxvY2F0b3JCdG47XG5cbnZhciBfc3RhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3N0YXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0YXRlKTtcblxudmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3VzZXJSZXZlcnNlR2VvY29kZSA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpO1xuXG52YXIgX3VzZXJSZXZlcnNlR2VvY29kZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2VyUmV2ZXJzZUdlb2NvZGUpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIFRoZSBvcmlnaW4gbG9jYXRvciBidXR0b24gdXBkYXRlcyB0aGUgb3JpZ2luIGlucHV0IGJhc2VkXG4gKiBvbiB0aGUgdXNlcidzIGxvY2F0aW9uLlxuICovXG5mdW5jdGlvbiBpbml0T3JpZ2luTG9jYXRvckJ0bigpIHtcbiAgdmFyIGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2RpcmVjdGlvbnMtLWxvY2F0ZS1vcmlnaW4nKVswXTtcbiAgLy8gY29uc29sZS5sb2coJ2luIGJ0biBpbml0Jyk7XG4gIGJ0bi5vbmNsaWNrID0gZnVuY3Rpb24gb25PcmlnaW5Mb2NhdG9yQnRuSGFuZGxlcigpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnaW4gYnRuIGNsaWNrIGhhbmRsZXInKTtcbiAgICB2YXIgb3JpZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcmlnaW5JbnB1dCcpO1xuICAgIG9yaWcudmFsdWUgPSAnU2VhcmNoaW5nLi4uJztcbiAgICBpZiAoX3N0YXRlMi5kZWZhdWx0LnVzZXIuYWRkcmVzcykge1xuICAgICAgb3JpZy52YWx1ZSA9IF9zdGF0ZTIuZGVmYXVsdC51c2VyLmFkZHJlc3M7XG4gICAgICBfc3RhdGUyLmRlZmF1bHQub3JpZ2luID0gX2V4dGVuZHMoe30sIF9zdGF0ZTIuZGVmYXVsdC51c2VyKTtcbiAgICAgICgwLCBfbWFwLm1hcFVwZGF0ZURpcmVjdGlvbnNFbmRwb2ludCkoJ29yaWdpbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnZmV0Y2hpbmcgeW91ciBhZGRyZXNzLi4uJyk7XG4gICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICBjb25zb2xlLmxvZyhwb3NpdGlvbik7XG4gICAgICAgIHZhciBfcG9zaXRpb24kY29vcmRzID0gcG9zaXRpb24uY29vcmRzLFxuICAgICAgICAgICAgbGF0aXR1ZGUgPSBfcG9zaXRpb24kY29vcmRzLmxhdGl0dWRlLFxuICAgICAgICAgICAgbG9uZ2l0dWRlID0gX3Bvc2l0aW9uJGNvb3Jkcy5sb25naXR1ZGU7XG5cbiAgICAgICAgX3N0YXRlMi5kZWZhdWx0LnVzZXIubGF0aXR1ZGUgPSBsYXRpdHVkZTtcbiAgICAgICAgX3N0YXRlMi5kZWZhdWx0LnVzZXIubG9uZ2l0dWRlID0gbG9uZ2l0dWRlO1xuICAgICAgICBfc3RhdGUyLmRlZmF1bHQub3JpZ2luID0gX2V4dGVuZHMoe30sIF9zdGF0ZTIuZGVmYXVsdC51c2VyKTtcbiAgICAgICAgKDAsIF9tYXAubWFwVXBkYXRlRGlyZWN0aW9uc0VuZHBvaW50KSgnb3JpZ2luJyk7XG4gICAgICAgICgwLCBfdXNlclJldmVyc2VHZW9jb2RlMi5kZWZhdWx0KShmdW5jdGlvbiAoZXJyLCBkYXRhLCBhZGRyZXNzKSB7XG4gICAgICAgICAgb3JpZy52YWx1ZSA9IGFkZHJlc3M7XG4gICAgICAgICAgX3N0YXRlMi5kZWZhdWx0LnVzZXIuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgICAgX3N0YXRlMi5kZWZhdWx0Lm9yaWdpbi5hZGRyZXNzID0gYWRkcmVzcztcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbi8qKiovIH0pLFxuLyogNjIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHVzZXJSZXZlcnNlR2VvY29kZTtcblxudmFyIF9zdGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfc3RhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RhdGUpO1xuXG52YXIgX2dlb2NvZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqXG4gKiBGZXRjaCB0aGUgdXNlcidzIGFkZHJlc3MgYmFzZWQgb24gdGhlIGxhdC9sbmdcbiAqIEBwYXJhbSBjYWxsYmFjazogKGVyciwgZ2VvRGF0YSwgYWRkclN0cmluZylcbiAqL1xuZnVuY3Rpb24gdXNlclJldmVyc2VHZW9jb2RlKCkge1xuICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZ1bmN0aW9uICgpIHt9O1xuXG4gIGlmICghX3N0YXRlMi5kZWZhdWx0LnVzZXIubGF0aXR1ZGUgfHwgIV9zdGF0ZTIuZGVmYXVsdC51c2VyLmxvbmdpdHVkZSkgcmV0dXJuOyAvLyBub3RoaW5nIHRvIGRvXG5cbiAgKDAsIF9nZW9jb2Rlci5yZXZlcnNlR2VvY29kZSkoX3N0YXRlMi5kZWZhdWx0LnVzZXIubGF0aXR1ZGUsIF9zdGF0ZTIuZGVmYXVsdC51c2VyLmxvbmdpdHVkZSwgZnVuY3Rpb24gKGVyciwgZ2VvRGF0YSkge1xuICAgIHZhciBkID0gZ2VvRGF0YTtcbiAgICBpZiAoZC50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nICYmIGQuZmVhdHVyZXMgJiYgZC5mZWF0dXJlcy5sZW5ndGggPiAwICYmIGQuZmVhdHVyZXNbMF0ucGxhY2VfbmFtZSkge1xuICAgICAgX3N0YXRlMi5kZWZhdWx0LnVzZXIuYWRkcmVzcyA9IGQuZmVhdHVyZXNbMF0ucGxhY2VfbmFtZTtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coJ2ZldGNoZWQgcmV2ZXJzZSBnZW9jb2RlciByZXNwb25zZSBmb3IgY29vcmRzOicsIGdlb0RhdGEpO1xuICAgIGNhbGxiYWNrKGVyciwgZ2VvRGF0YSwgX3N0YXRlMi5kZWZhdWx0LnVzZXIuYWRkcmVzcyk7XG4gIH0pO1xufVxuXG4vKioqLyB9KSxcbi8qIDYzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciB4dGVuZCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG52YXIgdiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG52YXIgcGljayA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xudmFyIHN0cmluZ2lmeUJvb2xlYW5zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG52YXIgY3JlYXRlU2VydmljZUZhY3RvcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblxuLyoqXG4gKiBHZW9jb2RpbmcgQVBJIHNlcnZpY2UuXG4gKlxuICogTGVhcm4gbW9yZSBhYm91dCB0aGlzIHNlcnZpY2UgYW5kIGl0cyByZXNwb25zZXMgaW5cbiAqIFt0aGUgSFRUUCBzZXJ2aWNlIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vYXBpLWRvY3VtZW50YXRpb24vI2dlb2NvZGluZykuXG4gKi9cbnZhciBHZW9jb2RpbmcgPSB7fTtcblxudmFyIGZlYXR1cmVUeXBlcyA9IFtcbiAgJ2NvdW50cnknLFxuICAncmVnaW9uJyxcbiAgJ3Bvc3Rjb2RlJyxcbiAgJ2Rpc3RyaWN0JyxcbiAgJ3BsYWNlJyxcbiAgJ2xvY2FsaXR5JyxcbiAgJ25laWdoYm9yaG9vZCcsXG4gICdhZGRyZXNzJyxcbiAgJ3BvaScsXG4gICdwb2kubGFuZG1hcmsnXG5dO1xuXG4vKipcbiAqIFNlYXJjaCBmb3IgYSBwbGFjZS5cbiAqXG4gKiBTZWUgdGhlIFtwdWJsaWMgZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly93d3cubWFwYm94LmNvbS9hcGktZG9jdW1lbnRhdGlvbi8jc2VhcmNoLWZvci1wbGFjZXMpLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb25maWcucXVlcnkgLSBBIHBsYWNlIG5hbWUuXG4gKiBAcGFyYW0geydtYXBib3gucGxhY2VzJ3wnbWFwYm94LnBsYWNlcy1wZXJtYW5lbnQnfSBbY29uZmlnLm1vZGU9XCJtYXBib3gucGxhY2VzXCJdIC0gRWl0aGVyIGBtYXBib3gucGxhY2VzYCBmb3IgZXBoZW1lcmFsIGdlb2NvZGluZywgb3IgYG1hcGJveC5wbGFjZXMtcGVybWFuZW50YCBmb3Igc3RvcmluZyByZXN1bHRzIGFuZCBiYXRjaCBnZW9jb2RpbmcuXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IFtjb25maWcuY291bnRyaWVzXSAtIExpbWl0cyByZXN1bHRzIHRvIHRoZSBzcGVjaWZpZWQgY291bnRyaWVzLlxuICogICBFYWNoIGl0ZW0gaW4gdGhlIGFycmF5IHNob3VsZCBiZSBhbiBbSVNPIDMxNjYgYWxwaGEgMiBjb3VudHJ5IGNvZGVdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT18zMTY2LTFfYWxwaGEtMikuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGVzfSBbY29uZmlnLnByb3hpbWl0eV0gLSBCaWFzIGxvY2FsIHJlc3VsdHMgYmFzZWQgb24gYSBwcm92aWRlZCBsb2NhdGlvbi5cbiAqIEBwYXJhbSB7QXJyYXk8J2NvdW50cnknfCdyZWdpb24nfCdwb3N0Y29kZSd8J2Rpc3RyaWN0J3wncGxhY2UnfCdsb2NhbGl0eSd8J25laWdoYm9yaG9vZCd8J2FkZHJlc3MnfCdwb2knfCdwb2kubGFuZG1hcmsnPn0gW2NvbmZpZy50eXBlc10gLSBGaWx0ZXIgcmVzdWx0cyBieSBmZWF0dXJlIHR5cGVzLlxuICogQHBhcmFtIHtib29sZWFufSBbY29uZmlnLmF1dG9jb21wbGV0ZT10cnVlXSAtIFJldHVybiBhdXRvY29tcGxldGUgcmVzdWx0cyBvciBub3QuXG4gKiBAcGFyYW0ge0JvdW5kaW5nQm94fSBbY29uZmlnLmJib3hdIC0gTGltaXQgcmVzdWx0cyB0byBhIGJvdW5kaW5nIGJveC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbY29uZmlnLmxpbWl0PTVdIC0gTGltaXQgdGhlIG51bWJlciBvZiByZXN1bHRzIHJldHVybmVkLlxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBbY29uZmlnLmxhbmd1YWdlXSAtIFNwZWNpZnkgdGhlIGxhbmd1YWdlIHRvIHVzZSBmb3IgcmVzcG9uc2UgdGV4dCBhbmQsIGZvciBmb3J3YXJkIGdlb2NvZGluZywgcXVlcnkgcmVzdWx0IHdlaWdodGluZy5cbiAqICBPcHRpb25zIGFyZSBbSUVURiBsYW5ndWFnZSB0YWdzXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JRVRGX2xhbmd1YWdlX3RhZykgY29tcHJpc2VkIG9mIGEgbWFuZGF0b3J5XG4gKiAgW0lTTyA2MzktMSBsYW5ndWFnZSBjb2RlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX0lTT182MzktMV9jb2RlcykgYW5kIG9wdGlvbmFsbHkgb25lIG9yIG1vcmUgSUVURiBzdWJ0YWdzIGZvciBjb3VudHJ5IG9yIHNjcmlwdC5cbiAqIEByZXR1cm4ge01hcGlSZXF1ZXN0fVxuICovXG5HZW9jb2RpbmcuZm9yd2FyZEdlb2NvZGUgPSBmdW5jdGlvbihjb25maWcpIHtcbiAgdi5hc3NlcnRTaGFwZSh7XG4gICAgcXVlcnk6IHYucmVxdWlyZWQodi5zdHJpbmcpLFxuICAgIG1vZGU6IHYub25lT2YoJ21hcGJveC5wbGFjZXMnLCAnbWFwYm94LnBsYWNlcy1wZXJtYW5lbnQnKSxcbiAgICBjb3VudHJpZXM6IHYuYXJyYXlPZih2LnN0cmluZyksXG4gICAgcHJveGltaXR5OiB2LmNvb3JkaW5hdGVzLFxuICAgIHR5cGVzOiB2LmFycmF5T2Yodi5vbmVPZihmZWF0dXJlVHlwZXMpKSxcbiAgICBhdXRvY29tcGxldGU6IHYuYm9vbGVhbixcbiAgICBiYm94OiB2LmFycmF5T2Yodi5udW1iZXIpLFxuICAgIGxpbWl0OiB2Lm51bWJlcixcbiAgICBsYW5ndWFnZTogdi5hcnJheU9mKHYuc3RyaW5nKVxuICB9KShjb25maWcpO1xuXG4gIGNvbmZpZy5tb2RlID0gY29uZmlnLm1vZGUgfHwgJ21hcGJveC5wbGFjZXMnO1xuXG4gIHZhciBxdWVyeSA9IHN0cmluZ2lmeUJvb2xlYW5zKFxuICAgIHh0ZW5kKFxuICAgICAgeyBjb3VudHJ5OiBjb25maWcuY291bnRyaWVzIH0sXG4gICAgICBwaWNrKGNvbmZpZywgW1xuICAgICAgICAncHJveGltaXR5JyxcbiAgICAgICAgJ3R5cGVzJyxcbiAgICAgICAgJ2F1dG9jb21wbGV0ZScsXG4gICAgICAgICdiYm94JyxcbiAgICAgICAgJ2xpbWl0JyxcbiAgICAgICAgJ2xhbmd1YWdlJ1xuICAgICAgXSlcbiAgICApXG4gICk7XG5cbiAgcmV0dXJuIHRoaXMuY2xpZW50LmNyZWF0ZVJlcXVlc3Qoe1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgcGF0aDogJy9nZW9jb2RpbmcvdjUvOm1vZGUvOnF1ZXJ5Lmpzb24nLFxuICAgIHBhcmFtczogcGljayhjb25maWcsIFsnbW9kZScsICdxdWVyeSddKSxcbiAgICBxdWVyeTogcXVlcnlcbiAgfSk7XG59O1xuXG4vKipcbiAqIFNlYXJjaCBmb3IgcGxhY2VzIG5lYXIgY29vcmRpbmF0ZXMuXG4gKlxuICogU2VlIHRoZSBbcHVibGljIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vYXBpLWRvY3VtZW50YXRpb24vI3JldHJpZXZlLXBsYWNlcy1uZWFyLWEtbG9jYXRpb24pLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZXN9IGNvbmZpZy5xdWVyeSAtIENvb3JkaW5hdGVzIGF0IHdoaWNoIGZlYXR1cmVzIHdpbGwgYmUgc2VhcmNoZWQuXG4gKiBAcGFyYW0geydtYXBib3gucGxhY2VzJ3wnbWFwYm94LnBsYWNlcy1wZXJtYW5lbnQnfSBbY29uZmlnLm1vZGU9XCJtYXBib3gucGxhY2VzXCJdIC0gRWl0aGVyIGBtYXBib3gucGxhY2VzYCBmb3IgZXBoZW1lcmFsIGdlb2NvZGluZywgb3IgYG1hcGJveC5wbGFjZXMtcGVybWFuZW50YCBmb3Igc3RvcmluZyByZXN1bHRzIGFuZCBiYXRjaCBnZW9jb2RpbmcuXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IFtjb25maWcuY291bnRyaWVzXSAtIExpbWl0cyByZXN1bHRzIHRvIHRoZSBzcGVjaWZpZWQgY291bnRyaWVzLlxuICogICBFYWNoIGl0ZW0gaW4gdGhlIGFycmF5IHNob3VsZCBiZSBhbiBbSVNPIDMxNjYgYWxwaGEgMiBjb3VudHJ5IGNvZGVdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT18zMTY2LTFfYWxwaGEtMikuXG4gKiBAcGFyYW0ge0FycmF5PCdjb3VudHJ5J3wncmVnaW9uJ3wncG9zdGNvZGUnfCdkaXN0cmljdCd8J3BsYWNlJ3wnbG9jYWxpdHknfCduZWlnaGJvcmhvb2QnfCdhZGRyZXNzJ3wncG9pJ3wncG9pLmxhbmRtYXJrJz59IFtjb25maWcudHlwZXNdIC0gRmlsdGVyIHJlc3VsdHMgYnkgZmVhdHVyZSB0eXBlcy5cbiAqIEBwYXJhbSB7Qm91bmRpbmdCb3h9IFtjb25maWcuYmJveF0gLSBMaW1pdCByZXN1bHRzIHRvIGEgYm91bmRpbmcgYm94LlxuICogQHBhcmFtIHtudW1iZXJ9IFtjb25maWcubGltaXQ9MV0gLSBMaW1pdCB0aGUgbnVtYmVyIG9mIHJlc3VsdHMgcmV0dXJuZWQuIElmIHVzaW5nIHRoaXMgb3B0aW9uLCB5b3UgbXVzdCBwcm92aWRlIGEgc2luZ2xlIGl0ZW0gZm9yIGB0eXBlc2AuXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IFtjb25maWcubGFuZ3VhZ2VdIC0gU3BlY2lmeSB0aGUgbGFuZ3VhZ2UgdG8gdXNlIGZvciByZXNwb25zZSB0ZXh0IGFuZCwgZm9yIGZvcndhcmQgZ2VvY29kaW5nLCBxdWVyeSByZXN1bHQgd2VpZ2h0aW5nLlxuICogIE9wdGlvbnMgYXJlIFtJRVRGIGxhbmd1YWdlIHRhZ3NdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lFVEZfbGFuZ3VhZ2VfdGFnKSBjb21wcmlzZWQgb2YgYSBtYW5kYXRvcnlcbiAqICBbSVNPIDYzOS0xIGxhbmd1YWdlIGNvZGVdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfSVNPXzYzOS0xX2NvZGVzKSBhbmQgb3B0aW9uYWxseSBvbmUgb3IgbW9yZSBJRVRGIHN1YnRhZ3MgZm9yIGNvdW50cnkgb3Igc2NyaXB0LlxuICogQHBhcmFtIHsnZGlzdGFuY2UnfCdzY29yZSd9IFtjb25maWcucmV2ZXJzZU1vZGU9J2Rpc3RhbmNlJ10gLSBTZXQgdGhlIGZhY3RvcnMgdGhhdCBhcmUgdXNlZCB0byBzb3J0IG5lYXJieSByZXN1bHRzLlxuICogQHJldHVybiB7TWFwaVJlcXVlc3R9XG4gKi9cbkdlb2NvZGluZy5yZXZlcnNlR2VvY29kZSA9IGZ1bmN0aW9uKGNvbmZpZykge1xuICB2LmFzc2VydFNoYXBlKHtcbiAgICBxdWVyeTogdi5yZXF1aXJlZCh2LmNvb3JkaW5hdGVzKSxcbiAgICBtb2RlOiB2Lm9uZU9mKCdtYXBib3gucGxhY2VzJywgJ21hcGJveC5wbGFjZXMtcGVybWFuZW50JyksXG4gICAgY291bnRyaWVzOiB2LmFycmF5T2Yodi5zdHJpbmcpLFxuICAgIHR5cGVzOiB2LmFycmF5T2Yodi5vbmVPZihmZWF0dXJlVHlwZXMpKSxcbiAgICBiYm94OiB2LmFycmF5T2Yodi5udW1iZXIpLFxuICAgIGxpbWl0OiB2Lm51bWJlcixcbiAgICBsYW5ndWFnZTogdi5hcnJheU9mKHYuc3RyaW5nKSxcbiAgICByZXZlcnNlTW9kZTogdi5vbmVPZignZGlzdGFuY2UnLCAnc2NvcmUnKVxuICB9KShjb25maWcpO1xuXG4gIGNvbmZpZy5tb2RlID0gY29uZmlnLm1vZGUgfHwgJ21hcGJveC5wbGFjZXMnO1xuXG4gIHZhciBxdWVyeSA9IHN0cmluZ2lmeUJvb2xlYW5zKFxuICAgIHh0ZW5kKFxuICAgICAgeyBjb3VudHJ5OiBjb25maWcuY291bnRyaWVzIH0sXG4gICAgICBwaWNrKGNvbmZpZywgW1xuICAgICAgICAnY291bnRyeScsXG4gICAgICAgICd0eXBlcycsXG4gICAgICAgICdiYm94JyxcbiAgICAgICAgJ2xpbWl0JyxcbiAgICAgICAgJ2xhbmd1YWdlJyxcbiAgICAgICAgJ3JldmVyc2VNb2RlJ1xuICAgICAgXSlcbiAgICApXG4gICk7XG5cbiAgcmV0dXJuIHRoaXMuY2xpZW50LmNyZWF0ZVJlcXVlc3Qoe1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgcGF0aDogJy9nZW9jb2RpbmcvdjUvOm1vZGUvOnF1ZXJ5Lmpzb24nLFxuICAgIHBhcmFtczogcGljayhjb25maWcsIFsnbW9kZScsICdxdWVyeSddKSxcbiAgICBxdWVyeTogcXVlcnlcbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVNlcnZpY2VGYWN0b3J5KEdlb2NvZGluZyk7XG5cblxuLyoqKi8gfSksXG4vKiA2NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9OyB9KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGluaXREaXJlY3Rpb25JbnB1dDtcblxudmFyIF9hdXRvY29tcGxldGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NSk7XG5cbnZhciBfYXV0b2NvbXBsZXRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hdXRvY29tcGxldGVyKTtcblxudmFyIF9nZW9jb2RlciA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cbnZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9zdGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfc3RhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RhdGUpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgbGFzdEF1dG9jb21wbGV0ZVNlbGVjdGlvbiA9IG51bGw7XG5cbi8qKlxuICogSG9va3MgYW4gaW5wdXQgdXAgdG8gYW4gYXV0b2NvbXBsZXRlIHNlcnZpY2VcbiAqIEBwYXJhbSB7U3RyaW5nfSBlbElkIGVsZW1lbnQgaWQgb2YgdGhlIGlucHV0IHdoaWNoIHNob3VsZCBiZSBhdXRvY29tcGxldGVkXG4gKi9cbmZ1bmN0aW9uIGluaXRBdXRvY29tcGxldGUoZWxJZCwgbG9jYXRpb24pIHtcbiAgdmFyIGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxJZCk7XG5cbiAgKDAsIF9hdXRvY29tcGxldGVyMi5kZWZhdWx0KSh7XG4gICAgaW5wdXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsSWQpLFxuICAgIGZldGNoOiBmdW5jdGlvbiBmZXRjaCh0ZXh0LCB1cGRhdGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdvbiBmZXRjaCBmb3IgaW5wdXQnKTtcbiAgICAgICgwLCBfZ2VvY29kZXIuZ2VvY29kZSkodGV4dCwgZnVuY3Rpb24gKGVyciwgZ2VvRGF0YSkge1xuICAgICAgICBpZiAoIWVycikge1xuICAgICAgICAgIHZhciBkID0gZ2VvRGF0YTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgcmVzdWx0IGZyb20gZ2VvY29kaW5nICR7dGV4dH06IGAsIGQpO1xuICAgICAgICAgIC8vIGVuc3VyZSByZXN1bHQgbG9va3MgYXMgd2UgZXhwZWN0IGZyb20gdGhlIEFQSVxuICAgICAgICAgIGlmIChkLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicgJiYgZC5mZWF0dXJlcyAmJiBkLmZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIG1hcCBkLmZlYXR1cmVzIGludG8gdXNlZnVsIGZvcm1hdC5cbiAgICAgICAgICAgIC8vIHJldHVybiB7bGFiZWw6Li4uLCBpdGVtOi4ufSBvYmogLSB0aGUgZm9ybWF0XG4gICAgICAgICAgICAvLyBzcGVjaWZpZWQgaGVyZTogaHR0cHM6Ly9naXRodWIuY29tL2tyYWFkZW4vYXV0b2NvbXBsZXRlXG4gICAgICAgICAgICB2YXIgZmVhdHVyZVRvU3VnZ2VzdGlvbiA9IGZ1bmN0aW9uIGZlYXR1cmVUb1N1Z2dlc3Rpb24oZmVhdHVyZSkge1xuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxhYmVsOiBmZWF0dXJlLnBsYWNlX25hbWUsXG4gICAgICAgICAgICAgICAgaXRlbToge1xuICAgICAgICAgICAgICAgICAgZmVhdHVyZTogZmVhdHVyZSxcbiAgICAgICAgICAgICAgICAgIC8vIG1ha2UgdGV4dCBhbmQgbGFiZWwgYXZhaWxhYmxlIHRvIG9uU2VsZWN0KCk6XG4gICAgICAgICAgICAgICAgICBsYWJlbDogZmVhdHVyZS5wbGFjZV9uYW1lLFxuICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgc3VnZ2VzdGlvbnMgPSBkLmZlYXR1cmVzLm1hcChmZWF0dXJlVG9TdWdnZXN0aW9uKTtcbiAgICAgICAgICAgIHVwZGF0ZShzdWdnZXN0aW9ucyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBnZW9jb2RpbmcgJyArIHRleHQgKyAnOiAnICsgZXJyKTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgb25TZWxlY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0KGl0ZW0pIHtcbiAgICAgIGxhc3RBdXRvY29tcGxldGVTZWxlY3Rpb24gPSBpdGVtO1xuICAgICAgY29uc29sZS5sb2coJ1NFTEVDVEVEIGl0ZW06JywgaXRlbSk7XG4gICAgICBpbnB1dC52YWx1ZSA9IGl0ZW0uZmVhdHVyZS5wbGFjZV9uYW1lO1xuICAgICAgX3N0YXRlMi5kZWZhdWx0W2xvY2F0aW9uXS5hZGRyZXNzID0gaXRlbS5mZWF0dXJlLnByb3BlcnRpZXMuYWRkcmVzcyB8fCBpdGVtLmZlYXR1cmUucGxhY2VfbmFtZTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFVwZGF0ZSBzdGF0ZSBmcm9tIGZlYXR1cmUgcmV0dXJuZWQgYnkgZ2VvY29kZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9jYXRpb24gb3JpZ2luIG9yIGRlc3RpbmF0aW9uLlxuICogQHBhcmFtIHtHZW9KU09OIEZlYXR1cmV9IGZlYXR1cmUgQSB2YWxpZCBnZW9qc29uIGZlYXR1cmUuXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZUxvY2F0aW9uRnJvbUZlYXR1cmUobG9jYXRpb24sIGZlYXR1cmUpIHtcbiAgaWYgKGZlYXR1cmUucGxhY2VfbmFtZSkge1xuICAgIF9zdGF0ZTIuZGVmYXVsdFtsb2NhdGlvbl0uYWRkcmVzcyA9IGZlYXR1cmUucGxhY2VfbmFtZTtcbiAgfVxuICBpZiAoZmVhdHVyZS5jZW50ZXIpIHtcbiAgICB2YXIgX2ZlYXR1cmUkY2VudGVyID0gX3NsaWNlZFRvQXJyYXkoZmVhdHVyZS5jZW50ZXIsIDIpO1xuXG4gICAgX3N0YXRlMi5kZWZhdWx0W2xvY2F0aW9uXS5sb25naXR1ZGUgPSBfZmVhdHVyZSRjZW50ZXJbMF07XG4gICAgX3N0YXRlMi5kZWZhdWx0W2xvY2F0aW9uXS5sYXRpdHVkZSA9IF9mZWF0dXJlJGNlbnRlclsxXTtcbiAgfVxufVxuXG4vKipcbiAqIHJldHVybnMgYSBjaGFuZ2UgaGFuZGxlciB3aGljaCB1cGRhdGVzIGdsb2JhbCBzdGF0ZSBsb2NhdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IGxvY2F0aW9uIC0gJ29yaWdpbicgb3IgJ2Rlc3RpbmF0aW9uJzsgcmVxdWlyZXMgc3RhdGVbZGVzdGluYXRpb25dIHRvIGV4aXN0LlxuICovXG5mdW5jdGlvbiBnZW9jb2RpbmdDaGFuZ2VIYW5kbGVyKGxvY2F0aW9uKSB7XG4gIHJldHVybiBmdW5jdGlvbiBjaGFuZ2VFdmVudEhhbmRsZXIoZXZlbnQpIHtcbiAgICB2YXIgYWRkciA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICBpZiAoYWRkciA9PT0gJycpIHtcbiAgICAgIC8vIHVzZXIgY2xlYXJlZCBpbnB1dCAtIGVyYXNlIGtub3duIHBvaW50IGZvciBsb2NhdGlvblxuICAgICAgX3N0YXRlMi5kZWZhdWx0W2xvY2F0aW9uXS5sb25naXR1ZGUgPSBudWxsO1xuICAgICAgX3N0YXRlMi5kZWZhdWx0W2xvY2F0aW9uXS5sYXRpdHVkZSA9IG51bGw7XG4gICAgICBfc3RhdGUyLmRlZmF1bHRbbG9jYXRpb25dLmFkZHJlc3MgPSBudWxsO1xuICAgICAgKDAsIF9tYXAubWFwVXBkYXRlRGlyZWN0aW9uc0VuZHBvaW50KShsb2NhdGlvbik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGNvbnNvbGUubG9nKCdnZW9jb2RpbmcgYWRkcmVzczogJywgYWRkcik7XG4gICAgKDAsIF9nZW9jb2Rlci5nZW9jb2RlKShhZGRyLCBmdW5jdGlvbiAoZXJyLCBnZW9EYXRhKSB7XG4gICAgICBpZiAoIWVycikge1xuICAgICAgICBpZiAobGFzdEF1dG9jb21wbGV0ZVNlbGVjdGlvbikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCd3ZSBzaG91bGQgbm90IGhhdmUgcnVuIGdlb2NvZGVyJyk7XG4gICAgICAgICAgLy8gaG9sZCBvbiAtIHVzZXIgc2VsZWN0ZWQgYW4gYXV0b2NvbXBsZXRlIHN1Z2dlc3Rpb24sXG4gICAgICAgICAgLy8gd2Ugc2hvdWxkIHVzZSB0aGF0IGluc3RlYWQgb2YgdGhpcyByZXN1bHQgYmFzZWQgb24gYSBwYXJ0aWFsIHRleHQuXG4gICAgICAgICAgdXBkYXRlTG9jYXRpb25Gcm9tRmVhdHVyZShsb2NhdGlvbiwgbGFzdEF1dG9jb21wbGV0ZVNlbGVjdGlvbi5mZWF0dXJlKTtcbiAgICAgICAgICAvLyBoYW5kbGVkLCBjYW4gcmVzZXQ6XG4gICAgICAgICAgbGFzdEF1dG9jb21wbGV0ZVNlbGVjdGlvbiA9IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGQgPSBnZW9EYXRhO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGByZXN1bHQgZnJvbSBnZW9jb2RpbmcgJHthZGRyfTogYCwgZCk7XG4gICAgICAgICAgLy8gZW5zdXJlIHJlc3VsdCBsb29rcyBhcyB3ZSBleHBlY3QgZnJvbSB0aGUgQVBJXG4gICAgICAgICAgaWYgKGQudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJyAmJiBkLmZlYXR1cmVzICYmIGQuZmVhdHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdXBkYXRlTG9jYXRpb25Gcm9tRmVhdHVyZShsb2NhdGlvbiwgZC5mZWF0dXJlc1swXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdhcHAgc3RhdGU6Jywgc3RhdGUpO1xuICAgICAgICAoMCwgX21hcC5tYXBVcGRhdGVEaXJlY3Rpb25zRW5kcG9pbnQpKGxvY2F0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBnZW9jb2RpbmcgJyArIGFkZHIgKyAnOiAnICsgZXJyKTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB0aGUgaW5wdXQgaGFuZGxlciBmb3Igb25lIG9mIHRoZSBkaXJlY3Rpb24gaW5wdXRzXG4gKiBAcGFyYW0ge1N0cmluZ30gZWxJZCAtIElEIG9mIHRoZSBpbnB1dCBlbGVtZW50IHRvIGluaXRpYWxpemVcbiAqIEBwYXJhbSB7U3RyaW5nfSBsb2NhdGlvbiAtICdvcmlnaW4nIG9yICdkZXN0aW5hdGlvbidcbiAqL1xuZnVuY3Rpb24gaW5pdERpcmVjdGlvbklucHV0KGVsSWQsIGxvY2F0aW9uKSB7XG4gIC8vIHJ1biBnZW9jb2RlIG9uIGFkZHJlc3Mgd2hlbiBpbnB1dCBjaGFuZ2VzXG4gIHZhciBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsSWQpO1xuICBpbnB1dC5vbmNoYW5nZSA9IGdlb2NvZGluZ0NoYW5nZUhhbmRsZXIobG9jYXRpb24pO1xuXG4gIC8vIGVuYWJsZSBhdXRvY29tcGxldGVcbiAgaW5pdEF1dG9jb21wbGV0ZShlbElkLCBsb2NhdGlvbik7XG59XG5cbi8qKiovIH0pLFxuLyogNjUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187IWZ1bmN0aW9uKGUpe2lmKHRydWUpIShfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPSAoZSksXG5cdFx0XHRcdF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gKHR5cGVvZiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPT09ICdmdW5jdGlvbicgP1xuXHRcdFx0XHQoX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXywgZXhwb3J0cywgbW9kdWxlKSkgOlxuXHRcdFx0XHRfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18pLFxuXHRcdFx0XHRfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7ZWxzZSBpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiZ2b2lkIDAhPT1tb2R1bGUuZXhwb3J0cyl7dmFyIHQ9ZSgpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuYXV0b2NvbXBsZXRlPXQsZXhwb3J0cy5kZWZhdWx0PXR9ZWxzZSB3aW5kb3cuYXV0b2NvbXBsZXRlPWUoKX0oZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm5cIm5vbmVcIiE9PWguZGlzcGxheX1mdW5jdGlvbiBuKCl7eSsrLG09W10scD12b2lkIDAsaC5kaXNwbGF5PVwibm9uZVwifWZ1bmN0aW9uIG8oKXtmb3IoO3YuZmlyc3RDaGlsZDspdi5yZW1vdmVDaGlsZCh2LmZpcnN0Q2hpbGQpO3ZhciB0PSExLG89XCIjOT8kXCI7bS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZ3JvdXAmJih0PSEwKX0pO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciB0PWMuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gdC50ZXh0Q29udGVudD1lLmxhYmVsLHR9O2UucmVuZGVyJiYoaT1lLnJlbmRlcik7dmFyIGw9ZnVuY3Rpb24oZSl7dmFyIHQ9Yy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiB0LnRleHRDb250ZW50PWUsdH07aWYoZS5yZW5kZXJHcm91cCYmKGw9ZS5yZW5kZXJHcm91cCksbS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKHQuZ3JvdXAmJnQuZ3JvdXAhPT1vKXtvPXQuZ3JvdXA7dmFyIHI9bCh0Lmdyb3VwKTtyJiYoci5jbGFzc05hbWUrPVwiIGdyb3VwXCIsdi5hcHBlbmRDaGlsZChyKSl9dmFyIGE9aSh0KTthJiYoYS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbihvKXtlLm9uU2VsZWN0KHQuaXRlbSx1KSxuKCksby5wcmV2ZW50RGVmYXVsdCgpLG8uc3RvcFByb3BhZ2F0aW9uKCl9KSx0PT09cCYmKGEuY2xhc3NOYW1lKz1cIiBzZWxlY3RlZFwiKSx2LmFwcGVuZENoaWxkKGEpKX0pLG0ubGVuZ3RoPDEpe2lmKCFlLmVtcHR5TXNnKXJldHVybiB2b2lkIG4oKTt2YXIgYT1jLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7YS5jbGFzc05hbWU9XCJlbXB0eVwiLGEudGV4dENvbnRlbnQ9ZS5lbXB0eU1zZyx2LmFwcGVuZENoaWxkKGEpfXZhciBmPXUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZD1mLnRvcCt1Lm9mZnNldEhlaWdodCtjLmJvZHkuc2Nyb2xsVG9wO2gudG9wPWQrXCJweFwiLGgubGVmdD1mLmxlZnQrXCJweFwiLGgud2lkdGg9dS5vZmZzZXRXaWR0aCtcInB4XCIsaC5tYXhIZWlnaHQ9d2luZG93LmlubmVySGVpZ2h0LShmLnRvcCt1Lm9mZnNldEhlaWdodCkrXCJweFwiLGguaGVpZ2h0PVwiYXV0b1wiLGguZGlzcGxheT1cImJsb2NrXCIscigpfWZ1bmN0aW9uIGkoaSl7dmFyIHI9aS53aGljaHx8aS5rZXlDb2RlfHwwLGw9Kyt5OzM4IT09ciYmMTMhPT1yJiYyNyE9PXImJjM5IT09ciYmMzchPT1yJiYoNDA9PT1yJiZ0KCl8fCh1LnZhbHVlLmxlbmd0aD49Zz9lLmZldGNoKHUudmFsdWUsZnVuY3Rpb24oZSl7eT09PWwmJmUmJihtPWUscD1tLmxlbmd0aD4wP21bMF06dm9pZCAwLG8oKSl9KTpuKCkpKX1mdW5jdGlvbiByKCl7dmFyIGU9di5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2VsZWN0ZWRcIik7aWYoZS5sZW5ndGg+MCl7dmFyIHQ9ZVswXSxuPXQucHJldmlvdXNFbGVtZW50U2libGluZztpZihuJiYtMSE9PW4uY2xhc3NOYW1lLmluZGV4T2YoXCJncm91cFwiKSYmIW4ucHJldmlvdXNFbGVtZW50U2libGluZyYmKHQ9biksdC5vZmZzZXRUb3A8di5zY3JvbGxUb3Apdi5zY3JvbGxUb3A9dC5vZmZzZXRUb3A7ZWxzZXt2YXIgbz10Lm9mZnNldFRvcCt0Lm9mZnNldEhlaWdodCxpPXYuc2Nyb2xsVG9wK3Yub2Zmc2V0SGVpZ2h0O28+aSYmKHYuc2Nyb2xsVG9wKz1vLWkpfX19ZnVuY3Rpb24gbCgpe2lmKG0ubGVuZ3RoPDEpcD12b2lkIDA7ZWxzZSBpZihwPT09bVswXSlwPW1bbS5sZW5ndGgtMV07ZWxzZSBmb3IodmFyIGU9bS5sZW5ndGgtMTtlPjA7ZS0tKWlmKHA9PT1tW2VdfHwxPT09ZSl7cD1tW2UtMV07YnJlYWt9fWZ1bmN0aW9uIGEoKXtpZihtLmxlbmd0aDwxJiYocD12b2lkIDApLCFwfHxwPT09bVttLmxlbmd0aC0xXSlyZXR1cm4gdm9pZChwPW1bMF0pO2Zvcih2YXIgZT0wO2U8bS5sZW5ndGgtMTtlKyspaWYocD09PW1bZV0pe3A9bVtlKzFdO2JyZWFrfX1mdW5jdGlvbiBmKGkpe3ZhciByPWkud2hpY2h8fGkua2V5Q29kZXx8MDtpZigzOD09PXJ8fDQwPT09cnx8Mjc9PT1yKXt2YXIgZj10KCk7aWYoMjc9PT1yKW4oKTtlbHNle2lmKCF0fHxtLmxlbmd0aDwxKXJldHVybjszOD09PXI/bCgpOmEoKSxvKCl9cmV0dXJuIGkucHJldmVudERlZmF1bHQoKSx2b2lkKGYmJmkuc3RvcFByb3BhZ2F0aW9uKCkpfTEzPT09ciYmcCYmKGUub25TZWxlY3QocC5pdGVtLHUpLG4oKSl9ZnVuY3Rpb24gZCgpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmFjdGl2ZUVsZW1lbnQhPT11JiZuKCl9LDIwMCl9ZnVuY3Rpb24gcygpe3UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIixmKSx1LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLGkpLHUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJsdXJcIixkKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLG8pLG4oKTt2YXIgZT12LnBhcmVudE5vZGU7ZSYmZS5yZW1vdmVDaGlsZCh2KX12YXIgdSxwLGM9ZG9jdW1lbnQsdj1jLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksaD12LnN0eWxlLG09W10sZz1lLm1pbkxlbmd0aHx8Mix5PTA7aWYoIWUuaW5wdXQpdGhyb3cgbmV3IEVycm9yKFwiaW5wdXQgdW5kZWZpbmVkXCIpO3JldHVybiB1PWUuaW5wdXQsYy5ib2R5LmFwcGVuZENoaWxkKHYpLHYuY2xhc3NOYW1lPVwiYXV0b2NvbXBsZXRlIFwiKyhlLmNsYXNzTmFtZXx8XCJcIiksaC5wb3NpdGlvbj1cImFic29sdXRlXCIsaC5kaXNwbGF5PVwibm9uZVwiLHUuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIixmKSx1LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLGkpLHUuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIixkKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLG8pLHtkZXN0cm95OnN9fXJldHVybiBlfSk7XG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYnVuZGxlLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTUpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDY3YWJkZTVjZWU3YjVkZTlkMTNjIiwiXG4vLyBBcHBsaWNhdGlvbiBzdGF0ZS5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbWF4V2Fsa0Rpc3RhbmNlOiAwLjI1LFxuICB1c2VyOiB7XG4gICAgbG9uZ2l0dWRlOiBudWxsLFxuICAgIGxhdGl0dWRlOiBudWxsLFxuICAgIGFkZHJlc3M6IG51bGwsXG4gIH0sXG4gIG9yaWdpbjoge1xuICAgIGxvbmdpdHVkZTogbnVsbCxcbiAgICBsYXRpdHVkZTogbnVsbCxcbiAgICBhZGRyZXNzOiBudWxsLFxuICB9LFxuICBkZXN0aW5hdGlvbjoge1xuICAgIGxvbmdpdHVkZTogbnVsbCxcbiAgICBsYXRpdHVkZTogbnVsbCxcbiAgICBhZGRyZXNzOiBudWxsLFxuICB9LFxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zdGF0ZS5qcyIsImltcG9ydCB0dXJmQ2lyY2xlIGZyb20gJ0B0dXJmL2NpcmNsZSc7XG5pbXBvcnQgeyBmZWF0dXJlQ29sbGVjdGlvbiBhcyB0dXJmRmVhdHVyZUNvbGxlY3Rpb24sIHBvaW50IGFzIHR1cmZQb2ludCB9IGZyb20gJ0B0dXJmL2hlbHBlcnMnO1xuaW1wb3J0IHR1cmZXaXRoaW4gZnJvbSAnQHR1cmYvd2l0aGluJztcblxuaW1wb3J0IFN0YXRpb25GZWVkIGZyb20gJy4vU3RhdGlvbkZlZWQnO1xuaW1wb3J0IGdldFBvcHVwQ29udGVudCBmcm9tICcuL3BvcHVwcyc7XG4vLyBpbXBvcnQgdXNlckdlb2xvY2F0ZSBmcm9tICcuL3VzZXJHZW9sb2NhdGUnO1xuaW1wb3J0IGZldGNoUm91dGUgZnJvbSAnLi9yb3V0ZXInO1xuXG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJztcbmltcG9ydCBzdGF0ZSBmcm9tICcuL3N0YXRlJztcblxuY29uc3Qgc3RhdGlvbnNVUkwgPSBjb25maWcuc3RhdGlvbnNVcmw7XG5cbmxldCBtYXA7XG5cbmZ1bmN0aW9uIGFkZFN0YXRpb25zKCkge1xuICBtYXAub24oJ2xvYWQnLCAoKSA9PiB7XG4gICAgd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgIG1hcC5nZXRTb3VyY2UoJ3N0YXRpb25zLXNvdXJjZScpLnNldERhdGEoU3RhdGlvbkZlZWQuZ2V0U3RhdGlvbnMoKSk7XG4gICAgICAvLyBtYXAuZ2V0U291cmNlKCdzdGF0aW9ucy1zb3VyY2UnKS5zZXREYXRhKHN0YXRpb25zVVJMKTtcbiAgICAgIGNvbnNvbGUubG9nKCdyZWZldGNoaW5nIGxpdmUgc3RhdGlvbiBkYXRhJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICB9LCAzMCAqIDEwMDApOyAvLyBldmVyeSBOIHNlY29uZHMgKGluIG1pbGxpc2Vjb25kcylcblxuICAgIG1hcC5hZGRTb3VyY2UoJ3N0YXRpb25zLXNvdXJjZScsIHsgdHlwZTogJ2dlb2pzb24nLCBkYXRhOiBzdGF0aW9uc1VSTCB9KTtcbiAgICBtYXAuYWRkTGF5ZXIoe1xuICAgICAgaWQ6ICdzdGF0aW9ucy1sYXllcicsXG4gICAgICB0eXBlOiAnY2lyY2xlJyxcbiAgICAgIHNvdXJjZTogJ3N0YXRpb25zLXNvdXJjZScsXG4gICAgICBwYWludDoge1xuICAgICAgICAnY2lyY2xlLXJhZGl1cyc6IDEyLFxuICAgICAgICAnY2lyY2xlLWNvbG9yJzogJyNCNDIyMjInLFxuICAgICAgICAnY2lyY2xlLW9wYWNpdHknOiAwLCAvLyB0cmFuc3BhcmVudCBkb3RzIHNpemVkIGZvciBpbnRlcmFjdGlvbiAtIGFsbG93cyBwb3B1cFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIENoYW5nZSB0aGUgY3Vyc29yIHRvIGEgcG9pbnRlciB3aGVuIHRoZSBtb3VzZSBpcyBvdmVyIHRoZSBsYXllci5cbiAgICBtYXAub24oJ21vdXNlZW50ZXInLCAnc3RhdGlvbnMtbGF5ZXInLCAoKSA9PiB7XG4gICAgICBtYXAuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgIH0pO1xuXG4gICAgLy8gQ2hhbmdlIGl0IGJhY2sgdG8gYSBwb2ludGVyIHdoZW4gaXQgbGVhdmVzLlxuICAgIG1hcC5vbignbW91c2VsZWF2ZScsICdzdGF0aW9ucy1sYXllcicsICgpID0+IHtcbiAgICAgIG1hcC5nZXRDYW52YXMoKS5zdHlsZS5jdXJzb3IgPSAnJztcbiAgICB9KTtcbiAgfSk7XG59XG5cblxuZnVuY3Rpb24gZ2V0TGF5ZXJJZEZvclN0YXRpb25zTmVhcihsb2NhdGlvbikge1xuICByZXR1cm4gYHN0YXRpb25zLW5lYXItJHtsb2NhdGlvbn1gO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0geyp9IGUgLSBldmVudCBmcm9tIG1hcC5vbignY2xpY2snKVxuICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uIC0gb3JpZ2luIG9yIGRlc3RpbmF0aW9uXG4gKi9cbmZ1bmN0aW9uIHF1ZXJ5RmVhdHVyZXNOZWFyKGUsIGxvY2F0aW9uKSB7XG4gIGNvbnN0IGxheWVySWQgPSBnZXRMYXllcklkRm9yU3RhdGlvbnNOZWFyKGxvY2F0aW9uKTtcbiAgaWYgKG1hcC5nZXRMYXllcihsYXllcklkKSkge1xuICAgIHJldHVybiBtYXAucXVlcnlSZW5kZXJlZEZlYXR1cmVzKGUucG9pbnQsIHtcbiAgICAgIGxheWVyczogW2xheWVySWRdLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiBbXTsgLy8gbm8gZmVhdHVyZXMgYmVjYXVzZSBubyBsYXllclxufVxuXG5mdW5jdGlvbiBhZGRQb3B1cHMoKSB7XG4gIG1hcC5vbignY2xpY2snLCAoZSkgPT4ge1xuICAgIGNvbnN0IGZlYXR1cmVzID0gbWFwLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhlLnBvaW50LCB7XG4gICAgICBsYXllcnM6IFsnc3RhdGlvbnMtbGF5ZXInXSxcbiAgICB9KTtcblxuICAgIGNvbnN0IGZlYXR1cmVzTmVhck9yaWdpbiA9IHF1ZXJ5RmVhdHVyZXNOZWFyKGUsICdvcmlnaW4nKTtcbiAgICBjb25zdCBmZWF0dXJlc05lYXJEZXN0aW5hdGlvbiA9IHF1ZXJ5RmVhdHVyZXNOZWFyKGUsICdkZXN0aW5hdGlvbicpO1xuXG4gICAgaWYgKCFmZWF0dXJlc05lYXJPcmlnaW4ubGVuZ3RoICYmICFmZWF0dXJlc05lYXJEZXN0aW5hdGlvbi5sZW5ndGggJiYgIWZlYXR1cmVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBmZWF0dXJlO1xuICAgIGxldCBsb2NhdGlvbiA9IG51bGw7XG5cbiAgICBpZiAoZmVhdHVyZXNOZWFyT3JpZ2luLmxlbmd0aCkge1xuICAgICAgbG9jYXRpb24gPSAnb3JpZ2luJztcbiAgICAgIFtmZWF0dXJlXSA9IGZlYXR1cmVzTmVhck9yaWdpbjtcbiAgICB9IGVsc2UgaWYgKGZlYXR1cmVzTmVhckRlc3RpbmF0aW9uLmxlbmd0aCkge1xuICAgICAgbG9jYXRpb24gPSAnZGVzdGluYXRpb24nO1xuICAgICAgW2ZlYXR1cmVdID0gZmVhdHVyZXNOZWFyRGVzdGluYXRpb247XG4gICAgfSBlbHNlIHtcbiAgICAgIFtmZWF0dXJlXSA9IGZlYXR1cmVzO1xuICAgIH1cbiAgICBjb25zdCBwb3B1cENvbnRlbnQgPSBnZXRQb3B1cENvbnRlbnQoZmVhdHVyZSwgbG9jYXRpb24pO1xuXG4gICAgY29uc3QgcG9wdXAgPSBuZXcgbWFwYm94Z2wuUG9wdXAoeyBvZmZzZXQ6IFswLCAtMTVdIH0pXG4gICAgICAuc2V0TG5nTGF0KGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpXG4gICAgICAuc2V0SFRNTChwb3B1cENvbnRlbnQpXG4gICAgICAuc2V0TG5nTGF0KGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpXG4gICAgICAuYWRkVG8obWFwKTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZXJzY29yZS1kYW5nbGVcbiAgICBwb3B1cC5fY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3N0YXRpb24tcG9wdXAtLWNvbnRhaW5lcicpOyAvLyBmb3Igc3R5bGluZ1xuICB9KTtcbn1cblxuZnVuY3Rpb24gYWRkRW1wdHlTdGF0aW9uc05lYXJieVNvdXJjZXMoKSB7XG4gIG1hcC5vbignbG9hZCcsICgpID0+IHtcbiAgICBjb25zdCBlbXB0eUZlYXR1cmVTZXQgPSB7XG4gICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgZmVhdHVyZXM6IFtdLFxuICAgIH07XG4gICAgbWFwLmFkZFNvdXJjZSgnc3RhdGlvbnMtbmVhci1vcmlnaW4nLCB7XG4gICAgICB0eXBlOiAnZ2VvanNvbicsXG4gICAgICBkYXRhOiBlbXB0eUZlYXR1cmVTZXQsXG4gICAgICBtYXh6b29tOiAyMiwgLy8gb3RoZXJ3aXNlIHdlIGdldCBwcmVjaXNpb24gLyBtaXNhbGlnbm1lbnQgZXJyb3JzXG4gICAgICAvLyBtaWdodCByZWxhdGUgdG86XG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L21hcGJveC1nbC1qcy9pc3N1ZXMvMjI3OVxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9tYXBib3gtZ2wtanMvaXNzdWVzLzE3MzNcbiAgICB9KTtcbiAgICBtYXAuYWRkU291cmNlKCdzdGF0aW9ucy1uZWFyLWRlc3RpbmF0aW9uJywge1xuICAgICAgdHlwZTogJ2dlb2pzb24nLFxuICAgICAgZGF0YTogZW1wdHlGZWF0dXJlU2V0LFxuICAgICAgbWF4em9vbTogMjIsXG4gICAgfSk7XG4gIH0pO1xufVxuXG5cbi8qKlxuICogSW5zdGFudGlhdGUgbWFwIHdpdGggc3RhdGlvbnMuXG4gKiBAcGFyYW0ge1tsb24sbGF0XX0gY2VudGVyOiBsb24sbGF0IGNvb3JkcyBvbiB3aGljaCB0byBjZW50ZXIgdGhlIHZpZXdcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdE1hcChjZW50ZXIsIHpvb20gPSA4KSB7XG4gIG1hcGJveGdsLmFjY2Vzc1Rva2VuID0gY29uZmlnLm1hcGJveFRva2VuO1xuICBtYXAgPSBuZXcgbWFwYm94Z2wuTWFwKHtcbiAgICBjb250YWluZXI6ICdtYXAnLFxuICAgIHN0eWxlOiBjb25maWcubWFwU3R5bGUsXG4gICAgem9vbSxcbiAgICBjZW50ZXIsXG4gIH0pO1xuXG4gIC8vIEFkZCBnZW9sb2NhdGUgY29udHJvbCB0byB0aGUgbWFwLlxuICAvLyBjb25zdCBnZW9sb2NhdGVDb250cm9sID0gbmV3IG1hcGJveGdsLkdlb2xvY2F0ZUNvbnRyb2woe1xuICAvLyAgIHBvc2l0aW9uT3B0aW9uczoge1xuICAvLyAgICAgZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlLFxuICAvLyAgIH0sXG4gIC8vICAgdHJhY2tVc2VyTG9jYXRpb246IHRydWUsXG4gIC8vIH0pO1xuICAvLyBtYXAuYWRkQ29udHJvbChnZW9sb2NhdGVDb250cm9sKTtcbiAgLy8gZ2VvbG9jYXRlQ29udHJvbC5vbignZ2VvbG9jYXRlJywgdXNlckdlb2xvY2F0ZSk7XG5cbiAgYWRkRW1wdHlTdGF0aW9uc05lYXJieVNvdXJjZXMoKTtcbiAgLy8gZmV0Y2hTdGF0aW9ucygpO1xuICBhZGRTdGF0aW9ucygpO1xuICBhZGRQb3B1cHMoKTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGxvY2F0aW9uIC0gb3JpZ2luIG9yIGRlc3RpbmF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmbHlUbyhsb2NhdGlvbikge1xuICAvLyBjb25zb2xlLmxvZyhgZmx5aW5nIHRvOlxuICAvLyAke1tzdGF0ZVtsb2NhdGlvbl0ubG9uZ2l0dWRlLCBzdGF0ZVtsb2NhdGlvbl0ubGF0aXR1ZGVdfSAoJHtzdGF0ZVtsb2NhdGlvbl0uYWRkcmVzc30pYCk7XG4gIG1hcC5mbHlUbyh7XG4gICAgY2VudGVyOiBbc3RhdGVbbG9jYXRpb25dLmxvbmdpdHVkZSwgc3RhdGVbbG9jYXRpb25dLmxhdGl0dWRlXSxcbiAgICB6b29tOiAxNCxcbiAgfSk7XG59XG5cblxuY29uc3QgZW5kcG9pbnRNYXJrZXJzID0ge307XG5cbi8qKlxuICogQWRkIG9yIHVwZGF0ZSB0aGUgb3JpZ2luIG9yIGRlc3RpbmF0aW9uIG1hcmtlclxuICogQHBhcmFtIHtTdHJpbmd9IGxvY2F0aW9uIC0gb3JpZ2luIG9yIGRlc3RpbmF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJEaXJlY3Rpb25zTWFya2VyKGxvY2F0aW9uKSB7XG4gIGlmIChlbmRwb2ludE1hcmtlcnNbbG9jYXRpb25dKSB7XG4gICAgLy8gY29uc29sZS5sb2coYHNldHRpbmcgZW5kcG9pbnQgZm9yICR7bG9jYXRpb259IHRvXG4gICAgLy8gJHtbc3RhdGVbbG9jYXRpb25dLmxvbmdpdHVkZSwgc3RhdGVbbG9jYXRpb25dLmxhdGl0dWRlXX1gKTtcbiAgICBlbmRwb2ludE1hcmtlcnNbbG9jYXRpb25dLnNldExuZ0xhdChbc3RhdGVbbG9jYXRpb25dLmxvbmdpdHVkZSwgc3RhdGVbbG9jYXRpb25dLmxhdGl0dWRlXSk7XG4gICAgLy8gZW5kcG9pbnRNYXJrZXJzW2xvY2F0aW9uXS5hZGRUbyhtYXApO1xuICB9IGVsc2Uge1xuICAgIC8vIGNvbnNvbGUubG9nKGBjcmVhdGluZyAke2xvY2F0aW9ufSBtYXJrZXJgKTtcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGVsLmNsYXNzTmFtZSA9IGBtYXJrZXIgbWFwLW1hcmtlci1kaXJlY3Rpb25zIGlzLSR7bG9jYXRpb259YDtcbiAgICBlbmRwb2ludE1hcmtlcnNbbG9jYXRpb25dID0gbmV3IG1hcGJveGdsLk1hcmtlcihlbClcbiAgICAgIC5zZXRMbmdMYXQoW3N0YXRlW2xvY2F0aW9uXS5sb25naXR1ZGUsIHN0YXRlW2xvY2F0aW9uXS5sYXRpdHVkZV0pXG4gICAgICAuYWRkVG8obWFwKTtcbiAgfVxufVxuXG5cbi8qKlxuICogUmV0dXJuIGEgRmVhdHVyZUNvbGxlY3Rpb24gb2Ygc3RhdGlvbnMgd2l0aGluIHN0YXRlLm1heFdhbGtpbmdEaXN0YW5jZSBvZiBsb2NhdGlvbi5cbiAqIEBwYXJhbSB7U3RyaW5nfSBsb2NhdGlvbiAtIG9yaWdpbiBvciBkZXN0aW5hdGlvblxuICovXG5mdW5jdGlvbiBnZXRTdGF0aW9uc05lYXIobG9jYXRpb24pIHtcbiAgaWYgKHN0YXRlLm1heFdhbGtEaXN0YW5jZSA9PT0gMCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgZmVhdHVyZXM6IFtdLFxuICAgIH07XG4gIH1cblxuICAvLyBnZXQgYWxsIHN0YXRpb25zXG4gIGNvbnN0IHN0YXRpb25zID0gU3RhdGlvbkZlZWQuZ2V0U3RhdGlvbnNBcnJheSgpO1xuICAvLyBjb25zdCBzdGF0aW9ucyA9IG1hcC5xdWVyeVNvdXJjZUZlYXR1cmVzKCdzdGF0aW9ucy1zb3VyY2UnKTtcbiAgLy8gY2FuJ3QgdXNlIHF1ZXJ5U291cmNlRmVhdHVyZXM6IG9ubHkgbG9va3MgaW4gdmlzaWJsZSBhcmVhXG4gIC8vIGlmIG5lZWRlZCwgdXNlIGZpbHRlciB0byBsaW1pdCByZXN1bHQgc2V0IChvbmx5IHRob3NlIHcvIGF2YWlsYWJsZSBiaWtlcywgZXRjKS5cbiAgLy8gaHR0cHM6Ly93d3cubWFwYm94LmNvbS9tYXBib3gtZ2wtanMvYXBpLyNtYXAjcXVlcnlzb3VyY2VmZWF0dXJlc1xuXG4gIGNvbnNvbGUubG9nKGBnb3QgYWxsIHN0YXRpb25zOyBzZWFyY2hpbmcgd2l0aGluICR7c3RhdGUubWF4V2Fsa0Rpc3RhbmNlfWAsIHN0YXRpb25zKTtcblxuICAvLyB1c2UgVHVyZiB0byBkbyBhIHByb3hpbWl0eSBzZWFyY2guXG4gIC8vIFRPRE86IG9yIGJldHRlciwgdXNlIE1hcHplbiB0byBkbyBhbiBpc29jaHJvbmUgc2VhcmNoXG4gIGNvbnN0IGNlbnRlciA9IHR1cmZQb2ludChbc3RhdGVbbG9jYXRpb25dLmxvbmdpdHVkZSwgc3RhdGVbbG9jYXRpb25dLmxhdGl0dWRlXSk7XG4gIGNvbnN0IHNlYXJjaFdpdGhpbkZlYXR1cmVzID0gdHVyZkZlYXR1cmVDb2xsZWN0aW9uKFt0dXJmQ2lyY2xlKGNlbnRlciwgc3RhdGUubWF4V2Fsa0Rpc3RhbmNlLCB7IHVuaXRzOiAnbWlsZXMnIH0pXSk7XG4gIGNvbnN0IHN0YXRpb25Db2xsZWN0aW9uID0gdHVyZkZlYXR1cmVDb2xsZWN0aW9uKHN0YXRpb25zKTtcblxuICBjb25zdCBuZWFyYnlTdGF0aW9ucyA9IHR1cmZXaXRoaW4oc3RhdGlvbkNvbGxlY3Rpb24sIHNlYXJjaFdpdGhpbkZlYXR1cmVzKTtcbiAgcmV0dXJuIG5lYXJieVN0YXRpb25zO1xufVxuXG4vKipcbiAqIFNwbGl0cyB0aGUgZ2l2ZW4gZ3JvdXAgb2Ygc3RhdGlvbnMgYmFzZWQgb24gYXZhaWxhYmlsaXR5IHN0YXR1cy5cbiAqIElmIGxvY2F0aW9uIGlzIG9yaWdpbiwgY3JpdGVyaWEgaXMgYmlrZXM7IG90aGVyd2lzZSBpdCdzIGRvY2tzLlxuICogUmV0dXJucyBbZW1wdHksIGF2YWlsYWJsZV0gd2hlcmUgZWFjaCBpcyBhIEYuQy5cbiAqIEBwYXJhbSB7U3RyaW5nfSBsb2NhdGlvbiAtIG9yaWdpbiBvciBkZXN0aW5hdGlvblxuICogQHBhcmFtIHt9IHN0YXRpb25zQ29sbGVjdGlvbiAtIEZlYXR1cmVDb2xsZWN0aW9uIG9mIHN0YXRpb25zIGFscmVhZHkgbmVhciBsb2NhdGlvblxuICovXG4vLyBmdW5jdGlvbiBzcGxpdEVtcHR5T3JBdmFpbGFibGUobG9jYXRpb24sIHN0YXRpb25zQ29sbGVjdGlvbikge1xuLy8gICAvKlxuLy8gICBCaWtlc2hhcmUgc3RhdGlvbnMgd2l0aGluIHRoZSBzcGVjaWZpZWQgZGlzdGFuY2Ugb2YgdGhlIG9yaWdpblxuLy8gICAgICB0aGF0IGhhdmUgYmlrZXMgYXZhaWxhYmxlIHNob3VsZCBiZSBtYXJrZWQgZ3JlZW5cbi8vICAgICAgd2l0aCBubyBhdmFpbGFibGUgYmlrZXMgc2hvdWxkIGJlIG1hcmtlZCByZWRcblxuLy8gICBCaWtlc2hhcmUgc3RhdGlvbnMgd2l0aGluIHRoZSBzcGVjaWZpZWQgZGlzdGFuY2Ugb2YgdGhlIGRlc3RpbmF0aW9uXG4vLyAgICAgdGhhdCBoYXZlIGRvY2tzIGF2YWlsYWJsZSBzaG91bGQgYmUgbWFya2VkIGdyZWVuXG4vLyAgICAgdGhhdCBoYXZlIG5vIGRvY2tzIGF2YWlsYWJsZSBzaG91bGQgYmUgbWFya2VkIHJlZFxuLy8gICAqL1xuXG4vLyAgIGNvbnN0IHN0YXRpb25zID0gc3RhdGlvbnNDb2xsZWN0aW9uLmZlYXR1cmVzO1xuLy8gICBjb25zdCBhdmFpbGFibGVDcml0ZXJhID0gbG9jYXRpb24gPT09ICdvcmlnaW4nID8gJ2F2YWlsYWJsZUJpa2VzJyA6ICdhdmFpbGFibGVEb2Nrcyc7XG5cbi8vICAgY29uc3QgZW1wdHkgPSBbXTtcbi8vICAgY29uc3QgYXZhaWxhYmxlID0gW107XG5cbi8vICAgc3RhdGlvbnMuZm9yRWFjaCgoc3RhdGlvbikgPT4ge1xuLy8gICAgIGlmIChzdGF0aW9uLnByb3BlcnRpZXNbYXZhaWxhYmxlQ3JpdGVyYV0gPiAwKSB7XG4vLyAgICAgICBhdmFpbGFibGUucHVzaChzdGF0aW9uKTtcbi8vICAgICB9IGVsc2Uge1xuLy8gICAgICAgZW1wdHkucHVzaChzdGF0aW9uKTtcbi8vICAgICB9XG4vLyAgIH0pO1xuXG4vLyAgIHJldHVybiBbZW1wdHksIGF2YWlsYWJsZV07XG4vLyB9XG5cblxuLyoqXG4gKiBIaWdobGlnaHQgdGhlIGdpdmVuIHN0YXRpb25zIG5lYXIgdGhlIGdpdmVuIGxvY2F0aW9uXG4gKiBAcGFyYW0ge1N0cmluZ30gbG9jYXRpb24gLSBvcmlnaW4gb3IgZGVzdGluYXRpb25cbiAqIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb259IHN0YXRpb25zIG5lYXJieSB0aGUgb3JpZ2luIG9yIGRlc3RpbmF0aW9uIHRvIGhpZ2hsaWdodFxuICovXG5mdW5jdGlvbiBzaG93U3RhdGlvbnNOZWFyKGxvY2F0aW9uLCBzdGF0aW9ucykge1xuICAvLyBkcmF3IHN0YXRpb25zIGFzIG1hcmtlcnMgb24gdGhlIG1hcFxuICBjb25zb2xlLmxvZyhgc2hvd2luZyBzdGF0aW9ucyBuZWFyYnkgJHtsb2NhdGlvbn06IGAsIHN0YXRpb25zKTtcblxuICBjb25zdCBsYXllckFuZFNvdXJjZUlkID0gZ2V0TGF5ZXJJZEZvclN0YXRpb25zTmVhcihsb2NhdGlvbik7XG4gIGNvbnN0IGF2YWlsYWJsZUNyaXRlcmEgPSBsb2NhdGlvbiA9PT0gJ29yaWdpbicgPyAnYXZhaWxhYmxlQmlrZXMnIDogJ2F2YWlsYWJsZURvY2tzJztcblxuICBjb25zb2xlLmxvZygnYWRkaW5nIG1hdGNoaW5nIG5lYXJieSBzdGF0aW9ucycpO1xuICBtYXAuZ2V0U291cmNlKGxheWVyQW5kU291cmNlSWQpLnNldERhdGEoc3RhdGlvbnMpO1xuXG4gIGNvbnN0IGxheWVyID0gbWFwLmdldExheWVyKGxheWVyQW5kU291cmNlSWQpO1xuICBpZiAoIWxheWVyKSB7IC8vIHNob3VsZCBvbmx5IG5lZWQgdG8gZG8gdGhpcyBvbmNlLlxuICAgIC8vIENyZWF0ZSBhIG5ldyBjaXJjbGUgbGF5ZXIgZnJvbSB0aGUgZGF0YSBzb3VyY2VcbiAgICBtYXAuYWRkTGF5ZXIoe1xuICAgICAgaWQ6IGxheWVyQW5kU291cmNlSWQsXG4gICAgICB0eXBlOiAnY2lyY2xlJyxcbiAgICAgIHNvdXJjZTogbGF5ZXJBbmRTb3VyY2VJZCxcbiAgICAgIHBhaW50OiB7XG4gICAgICAgICdjaXJjbGUtcmFkaXVzJzogMTIsIC8vIGJpa2VzaGFyZSBpY29uIGlzIDI0cHggKHNjYWxlZCBieSAxLzIgc28gMTIpXG4gICAgICAgICdjaXJjbGUtY29sb3InOiB7XG4gICAgICAgICAgcHJvcGVydHk6IGF2YWlsYWJsZUNyaXRlcmEsXG4gICAgICAgICAgc3RvcHM6IFtcbiAgICAgICAgICAgIC8vIFwiYXZhaWxhYmxlXCI6IDAgICAtPiBjaXJjbGUgY29sb3Igd2lsbCBiZSByZWRcbiAgICAgICAgICAgIFswLCAncmVkJ10sXG4gICAgICAgICAgICAvLyBcImF2YWlsYWJsZVwiOiAxIG9yIG1vcmUgLT4gY2lyY2xlIGNvbG9yIHdpbGwgYmUgZ3JlZW5cbiAgICAgICAgICAgIFsxLCAnbGlnaHRzZWFncmVlbiddLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sICdiaWtlc2hhcmUtc3RhdGlvbnMnKTsgLy8gcGxhY2UgY29sb3IgYmVuZWF0aCBiaWtlc2hhcmUgaWNvbnNcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGNsZWFyU3RhdGlvbnNOZWFyKGxvY2F0aW9uKSB7XG4gIGNvbnN0IGxheWVySUQgPSBnZXRMYXllcklkRm9yU3RhdGlvbnNOZWFyKGxvY2F0aW9uKTtcbiAgY29uc3QgbGF5ZXIgPSBtYXAuZ2V0TGF5ZXIobGF5ZXJJRCk7XG4gIGlmIChsYXllcikge1xuICAgIG1hcC5yZW1vdmVMYXllcihsYXllcklEKTtcbiAgfVxufVxuXG5cbi8qKlxuICogVXBkYXRlIHN0YXRpb24gcmVzdWx0cyBuZWFyYnkuXG4gKiBXaGVuIHRoZSBvcmlnaW4gb3IgZGVzdGluYXRpb24gaXMgc2V0LFxuICogb3Igd2hlbiB0aGUgdXNlcidzIG1heCB3YWxraW5nIGRpc3RhbmNlIHByZWZlcmVuY2UgY2hhbmdlcyxcbiAqIHVwZGF0ZSBuZWFyYnkgcmVzdWx0cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcFVwZGF0ZU5lYXJieSgpIHtcbiAgLy8gY29uc29sZS5sb2coJ21hcHVwZGF0ZW5lYXJieSgpJyk7XG5cbiAgWydvcmlnaW4nLCAnZGVzdGluYXRpb24nXS5mb3JFYWNoKChsb2NhdGlvbikgPT4ge1xuICAgIGlmIChzdGF0ZVtsb2NhdGlvbl0ubGF0aXR1ZGUgJiYgc3RhdGVbbG9jYXRpb25dLmxvbmdpdHVkZSkge1xuICAgICAgY29uc3QgbmVhcmJ5U3RhdGlvbnMgPSBnZXRTdGF0aW9uc05lYXIobG9jYXRpb24pO1xuICAgICAgY29uc29sZS5sb2coYGdvdCBzdGF0aW9ucyBuZWFyICR7bG9jYXRpb259YCwgbmVhcmJ5U3RhdGlvbnMpO1xuICAgICAgc2hvd1N0YXRpb25zTmVhcihsb2NhdGlvbiwgbmVhcmJ5U3RhdGlvbnMpO1xuICAgIH0gZWxzZSB7IC8vIGlmIHdlICpkb24ndCogaGF2ZSBhIHBhcnRpY3VsYXIgbG9jYXRpb24gZW5kcG9pbnQsXG4gICAgICAvLyB0aGVuIHdlIG5lZWQgdG8gY2xlYXIgdGhlIG1hcmtlcnNcbiAgICAgIGNsZWFyU3RhdGlvbnNOZWFyKGxvY2F0aW9uKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFJlbW92ZSB0aGUgcm91dGUgbGF5ZXIsIGlmIGl0IGV4aXN0ZWQuXG4gKiBAcmV0dXJuIHVuZGVmaW5lZFxuICovXG5mdW5jdGlvbiBtYXBDbGVhclJvdXRlKCkge1xuICBjb25zdCByb3V0ZUxheWVyID0gbWFwLmdldExheWVyKCdyb3V0ZScpO1xuICBpZiAocm91dGVMYXllcikge1xuICAgIG1hcC5yZW1vdmVMYXllcigncm91dGUnKTtcbiAgfVxufVxuXG4vKipcbiAqIFVwZGF0ZXMgbWFwJ3Mgcm91dGUuXG4gKiBJZiB0aGUgc3RhcnQgYW5kIGVuZHBvaW50IGFyZSBrbm93biwgdGhlIHJvdXRlIGlzIHVwZGF0ZWQuXG4gKiBJZiBlaXRoZXIgaXMgdW5rb3duLCB3ZSBjbGVhciB0aGUgcm91dGUuXG4gKiBAcmV0dXJuIHVuZGVmaW5lZFxuICovXG5mdW5jdGlvbiBtYXBVcGRhdGVSb3V0ZSgpIHtcbiAgaWYgKHN0YXRlLm9yaWdpbi5sYXRpdHVkZSAmJiBzdGF0ZS5kZXN0aW5hdGlvbi5sYXRpdHVkZSkge1xuICAgIGZldGNoUm91dGUoc3RhdGUub3JpZ2luLCBzdGF0ZS5kZXN0aW5hdGlvbiwgKHJvdXRlTGluZVN0cmluZykgPT4ge1xuICAgICAgbGV0IHNvdXJjZSA9IG1hcC5nZXRTb3VyY2UoJ3JvdXRlJyk7XG4gICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgIHNvdXJjZS5zZXREYXRhKHJvdXRlTGluZVN0cmluZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VyY2UgPSBtYXAuYWRkU291cmNlKFxuICAgICAgICAgICdyb3V0ZScsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogJ2dlb2pzb24nLFxuICAgICAgICAgICAgZGF0YTogcm91dGVMaW5lU3RyaW5nLFxuICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIHBsYWNlIHJvdXRlIGJlbmVhdGggbmVhcmJ5IG1hcmtlcnMgKHRoZW1zZWx2ZXMgYmVuZWF0aCBzdGF0aW9ucylcbiAgICAgIGNvbnN0IGxheWVyQWJvdmUgPSBnZXRMYXllcklkRm9yU3RhdGlvbnNOZWFyKCdvcmlnaW4nKTtcblxuICAgICAgLy8gY3JlYXRpbmcgc291cmNlIGZvciB0aGUgZmlyc3QgdGltZTsgYWRkIGEgbGF5ZXIgZm9yIGl0LlxuICAgICAgLy8gaGF2ZSB0byBkbyB0aGlzIGV2ZXJ5IHRpbWU/XG4gICAgICBtYXAuYWRkTGF5ZXIoe1xuICAgICAgICBpZDogJ3JvdXRlJyxcbiAgICAgICAgdHlwZTogJ2xpbmUnLFxuICAgICAgICBzb3VyY2U6ICdyb3V0ZScsXG4gICAgICAgIGxheW91dDoge1xuICAgICAgICAgICdsaW5lLWpvaW4nOiAncm91bmQnLFxuICAgICAgICAgICdsaW5lLWNhcCc6ICdyb3VuZCcsXG4gICAgICAgIH0sXG4gICAgICAgIHBhaW50OiB7XG4gICAgICAgICAgJ2xpbmUtY29sb3InOiAnIzRBQjJGNycsIC8vIGdvb2dsZSBtYXBzIGJsdWUgIzg4OFxuICAgICAgICAgICdsaW5lLXdpZHRoJzogOCxcbiAgICAgICAgfSxcbiAgICAgIH0sIGxheWVyQWJvdmUpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIHdlIGRvbid0IGhhdmUgYm90aCBlbmQgcG9pbnRzIC0gZW5zdXJlIG5vIHJvdXRlIHNob3duXG4gICAgbWFwQ2xlYXJSb3V0ZSgpO1xuICB9XG59XG5cblxuLyoqXG4gKiBBZGQgb3IgcmVtb3ZlIGVuZHBvaW50IG1hcmtlciBhbmQgdXBkYXRlIG5lYXJieSBzdGF0aW9ucy5cbiAqIEBwYXJhbSB7U3RyaW5nfSBsb2NhdGlvbiBvcmlnaW4gb3IgZGVzdGluYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcFVwZGF0ZURpcmVjdGlvbnNFbmRwb2ludChsb2NhdGlvbikge1xuICAvLyBjb25zb2xlLmxvZygnbWFwVXBkYXRlRGlyZWN0aW9uc0VuZHBvaW50KCknKTtcbiAgbWFwVXBkYXRlUm91dGUoKTtcbiAgaWYgKHN0YXRlW2xvY2F0aW9uXS5sYXRpdHVkZSA9PT0gbnVsbCAmJiBlbmRwb2ludE1hcmtlcnNbbG9jYXRpb25dKSB7XG4gICAgLy8gY2xlYXIgbWFya2VyXG4gICAgY29uc29sZS5sb2coYGNsZWFyaW5nICR7bG9jYXRpb259IG1hcmtlciAobm8gbGF0aXR1ZGUpYCk7XG4gICAgZW5kcG9pbnRNYXJrZXJzW2xvY2F0aW9uXS5yZW1vdmUoKTtcbiAgICBlbmRwb2ludE1hcmtlcnNbbG9jYXRpb25dID0gbnVsbDtcbiAgfSBlbHNlIGlmIChzdGF0ZVtsb2NhdGlvbl0ubGF0aXR1ZGUgIT09IG51bGwpIHtcbiAgICByZW5kZXJEaXJlY3Rpb25zTWFya2VyKGxvY2F0aW9uKTtcbiAgICBmbHlUbyhsb2NhdGlvbik7XG4gIH1cbiAgbWFwVXBkYXRlTmVhcmJ5KCk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvbWFwLmpzIiwiZXhwb3J0IGRlZmF1bHQge1xuICBtYXBib3hUb2tlbjogJ3BrLmV5SjFJam9pZEdWamFHbGxjMmhoY21zaUxDSmhJam9pWTJvNU5tVnBPVEkxTUROeE1qSjJjR0p1Wkc0NGVURXhPU0o5LksybEkzRFV6TnZBRDNMQUF0ZndsQkEnLFxuICBtYXBTdHlsZTogJ21hcGJveDovL3N0eWxlcy90ZWNoaWVzaGFyay9jajk3NjkwcjAwYmNjMnN0aGtxeG44ZjJ2JyxcbiAgc3RhdGlvbnNVcmw6ICdodHRwczovL2xpdC1iZWFjaC0yMTU4Ni5oZXJva3VhcHAuY29tLycsIC8vIGdlb2pzb24gbWlycm9yIG9mIHN0YXRpb25zIGFwaVxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb25maWcuanMiLCJtb2R1bGUuZXhwb3J0cyA9IGV4dGVuZFxuXG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5mdW5jdGlvbiBleHRlbmQoKSB7XG4gICAgdmFyIHRhcmdldCA9IHt9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldXG5cbiAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldFxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMveHRlbmQvaW1tdXRhYmxlLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEFQSV9PUklHSU46ICdodHRwczovL2FwaS5tYXBib3guY29tJyxcbiAgRVZFTlRfUFJPR1JFU1NfRE9XTkxPQUQ6ICdkb3dubG9hZFByb2dyZXNzJyxcbiAgRVZFTlRfUFJPR1JFU1NfVVBMT0FEOiAndXBsb2FkUHJvZ3Jlc3MnLFxuICBFVkVOVF9FUlJPUjogJ2Vycm9yJyxcbiAgRVZFTlRfUkVTUE9OU0U6ICdyZXNwb25zZScsXG4gIEVSUk9SX0hUVFA6ICdIdHRwRXJyb3InLFxuICBFUlJPUl9SRVFVRVNUX0FCT1JURUQ6ICdSZXF1ZXN0QWJvcnRlZEVycm9yJ1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL0BtYXBib3gvbWFwYm94LXNkay9saWIvY29uc3RhbnRzLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBtYnhHZW9jb2RpbmcgZnJvbSAnQG1hcGJveC9tYXBib3gtc2RrL3NlcnZpY2VzL2dlb2NvZGluZyc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJztcblxuY29uc3QgZ2VvY29kaW5nQ2xpZW50ID0gbWJ4R2VvY29kaW5nKHsgYWNjZXNzVG9rZW46IGNvbmZpZy5tYXBib3hUb2tlbiB9KTtcblxuLy8gRnJvbSBNYXBib3g6XG4vLyBcIiBCaWFzIHRoZSByZXNwb25zZSB0byBmYXZvciByZXN1bHRzIHRoYXQgYXJlIGNsb3NlciB0byB0aGlzIGxvY2F0aW9uLFxuLy8gcHJvdmlkZWQgYXMgdHdvIGNvbW1hLXNlcGFyYXRlZCBjb29yZGluYXRlcyBpbiBsb25naXR1ZGUsbGF0aXR1ZGUgb3JkZXIuXCJcbmxldCBwcm94aW1pdHkgPSBudWxsO1xuXG4vLyBMaW1pdCByZXN1bHRzIHRvIG9ubHkgdGhvc2UgY29udGFpbmVkIHdpdGhpbiB0aGUgc3VwcGxpZWQgYm91bmRpbmcgYm94LlxuLy8gQm91bmRpbmcgYm94ZXMgc2hvdWxkIGJlIHN1cHBsaWVkIGFzIGZvdXIgbnVtYmVycyBzZXBhcmF0ZWQgYnkgY29tbWFzLFxuLy8gaW4gbWluTG9uLG1pbkxhdCxtYXhMb24sbWF4TGF0IG9yZGVyLiBUaGUgYm91bmRpbmcgYm94IGNhbm5vdCBjcm9zc1xuLy8gdGhlIDE4MHRoIG1lcmlkaWFuLlxubGV0IGJib3ggPSBudWxsO1xuXG5cbi8qKlxuICogUmV2ZXJzZSBHZW9jb2RlIGxhdC9sbmcgLS0gdXNpbmcgTWFwYm94IHVuZGVyIHRoZSBob29kLlxuICogQHBhcmFtIHsqfSBsYXRcbiAqIEBwYXJhbSB7Kn0gbG5nXG4gKiBAcGFyYW0geyp9IGNhbGxiYWNrOiAoZXJyLCBnZW9EYXRhKSA9PiBhbnlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJldmVyc2VHZW9jb2RlKGxhdCwgbG5nLCBjYWxsYmFjaykge1xuICAvLyBSZXZlcnNlIGdlb2NvZGUgY29vcmRpbmF0ZXMgdG8gYWRkcmVzcy5cbiAgLy8gZ2VvLnJldmVyc2VHZW9jb2RlKCdtYXBib3gucGxhY2VzJywgbG5nLCBsYXQsIChlcnIsIGdlb0RhdGEpID0+IHtcbiAgLy8gICBjYWxsYmFjayhlcnIsIGdlb0RhdGEpO1xuICAvLyB9KTtcblxuICBnZW9jb2RpbmdDbGllbnRcbiAgICAucmV2ZXJzZUdlb2NvZGUoe1xuICAgICAgcXVlcnk6IFtsbmcsIGxhdF0sXG4gICAgICBsaW1pdDogMixcbiAgICB9KVxuICAgIC5zZW5kKClcbiAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgIC8vIG1hdGNoIGlzIGEgR2VvSlNPTiBkb2N1bWVudCB3aXRoIGdlb2NvZGluZyBtYXRjaGVzXG4gICAgICBjb25zdCBtYXRjaCA9IHJlc3BvbnNlLmJvZHk7XG4gICAgICAvLyBjb25zb2xlLmxvZygncmV2ZXJzZSBnZW9jb2RlIHJlc3VsdDogJywgbWF0Y2gpO1xuICAgICAgY2FsbGJhY2sobnVsbCwgbWF0Y2gpO1xuICAgIH0pO1xufVxuXG5cbi8qKlxuICogR2VvY29kZSBhZGRyZXNzIC0gdXNpbmcgTWFwYm94IHVuZGVyIHRoZSBob29kLlxuICogQHBhcmFtIHtzdHJpbmd9IGFkZHJlc3NcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrOiAoZXJyLCBnZW9EYXRhKSA9PiBhbnlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlb2NvZGUoYWRkcmVzcywgY2FsbGJhY2spIHtcbiAgLy8gR2VvY29kZSBhbiBhZGRyZXNzIHRvIGNvb3JkaW5hdGVzXG4gIC8vIGdlby5nZW9jb2RlKCdtYXBib3gucGxhY2VzJywgYWRkcmVzcywgKGVyciwgZ2VvRGF0YSkgPT4ge1xuICAvLyAgIGNhbGxiYWNrKGVyciwgZ2VvRGF0YSk7XG4gIC8vIH0pO1xuICBnZW9jb2RpbmdDbGllbnRcbiAgICAuZm9yd2FyZEdlb2NvZGUoe1xuICAgICAgcXVlcnk6IGFkZHJlc3MsXG4gICAgICBsaW1pdDogNSxcbiAgICAgIGJib3gsXG4gICAgICBwcm94aW1pdHksXG4gICAgfSlcbiAgICAuc2VuZCgpXG4gICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zdCBtYXRjaCA9IHJlc3BvbnNlLmJvZHk7XG4gICAgICAvLyBjb25zb2xlLmxvZygnZ2VvY29kZSByZXN1bHQ6ICcsIG1hdGNoKTtcbiAgICAgIGNhbGxiYWNrKG51bGwsIG1hdGNoKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBCaWFzIGdlb2NvZGluZyByZXN1bHRzIG5lYXIgdGhlIGNlbnRlci5cbiAqIEBwYXJhbSB7W2xvbmdpdHVkZSxsYXRpdHVkZV19IGNlbnRlciBmb3IgcHJveGltaXR5IGJpYXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEdlb2NkZXJDZW50ZXIoY2VudGVyKSB7XG4gIHByb3hpbWl0eSA9IGNlbnRlci5zbGljZSgpO1xufVxuXG5cbi8qKlxuICogU2VhcmNoIHdpdGhpbiB0aGUgZ2l2ZW4gYm91bmRpbmcgYm94XG4gKiBAcGFyYW0ge3N0cmluZ30gYm94IGJvdW5kaW5nIGJveCBzdHJpbmcgaW4gZm9ybWF0IG1pblgsbWluWSxtYXhYLG1heFlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEdlb2NvZGVyQm91bmRzKGJveCkge1xuICBiYm94ID0gYm94LnNwbGl0KCcsJykubWFwKHBhcnNlRmxvYXQpO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2dlb2NvZGVyLmpzIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHVzZVNvdXJjZU1hcCkge1xuXHR2YXIgbGlzdCA9IFtdO1xuXG5cdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuXHRcdHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHRcdFx0dmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cdFx0XHRpZihpdGVtWzJdKSB7XG5cdFx0XHRcdHJldHVybiBcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGNvbnRlbnQgKyBcIn1cIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBjb250ZW50O1xuXHRcdFx0fVxuXHRcdH0pLmpvaW4oXCJcIik7XG5cdH07XG5cblx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3Rcblx0bGlzdC5pID0gZnVuY3Rpb24obW9kdWxlcywgbWVkaWFRdWVyeSkge1xuXHRcdGlmKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKVxuXHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xuXHRcdHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XG5cdFx0XHRpZih0eXBlb2YgaWQgPT09IFwibnVtYmVyXCIpXG5cdFx0XHRcdGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcblx0XHR9XG5cdFx0Zm9yKGkgPSAwOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBtb2R1bGVzW2ldO1xuXHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxuXHRcdFx0Ly8gdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBub3QgMTAwJSBwZXJmZWN0IGZvciB3ZWlyZCBtZWRpYSBxdWVyeSBjb21iaW5hdGlvbnNcblx0XHRcdC8vICB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXG5cdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxuXHRcdFx0aWYodHlwZW9mIGl0ZW1bMF0gIT09IFwibnVtYmVyXCIgfHwgIWFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcblx0XHRcdFx0aWYobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xuXHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuXHRcdFx0XHR9IGVsc2UgaWYobWVkaWFRdWVyeSkge1xuXHRcdFx0XHRcdGl0ZW1bMl0gPSBcIihcIiArIGl0ZW1bMl0gKyBcIikgYW5kIChcIiArIG1lZGlhUXVlcnkgKyBcIilcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRsaXN0LnB1c2goaXRlbSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRyZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG5cdHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJztcblx0dmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXHRpZiAoIWNzc01hcHBpbmcpIHtcblx0XHRyZXR1cm4gY29udGVudDtcblx0fVxuXG5cdGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcblx0XHR2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcblx0XHR2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuXHRcdFx0cmV0dXJuICcvKiMgc291cmNlVVJMPScgKyBjc3NNYXBwaW5nLnNvdXJjZVJvb3QgKyBzb3VyY2UgKyAnICovJ1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG5cdH1cblxuXHRyZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufVxuXG4vLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuXHR2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcblx0dmFyIGRhdGEgPSAnc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsJyArIGJhc2U2NDtcblxuXHRyZXR1cm4gJy8qIyAnICsgZGF0YSArICcgKi8nO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cblxudmFyIHN0eWxlc0luRG9tID0ge307XG5cbnZhclx0bWVtb2l6ZSA9IGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbztcblxuXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0cmV0dXJuIG1lbW87XG5cdH07XG59O1xuXG52YXIgaXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuXHQvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuXHQvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG5cdC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcblx0Ly8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG5cdC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuXHRyZXR1cm4gd2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2I7XG59KTtcblxudmFyIGdldEVsZW1lbnQgPSAoZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vID0ge307XG5cblx0cmV0dXJuIGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG5cdFx0aWYgKHR5cGVvZiBtZW1vW3NlbGVjdG9yXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0dmFyIHN0eWxlVGFyZ2V0ID0gZm4uY2FsbCh0aGlzLCBzZWxlY3Rvcik7XG5cdFx0XHQvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXHRcdFx0aWYgKHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcblx0XHRcdFx0XHQvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG5cdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bWVtb1tzZWxlY3Rvcl0gPSBzdHlsZVRhcmdldDtcblx0XHR9XG5cdFx0cmV0dXJuIG1lbW9bc2VsZWN0b3JdXG5cdH07XG59KShmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldClcbn0pO1xuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhclx0c2luZ2xldG9uQ291bnRlciA9IDA7XG52YXJcdHN0eWxlc0luc2VydGVkQXRUb3AgPSBbXTtcblxudmFyXHRmaXhVcmxzID0gcmVxdWlyZShcIi4vdXJsc1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XG5cdGlmICh0eXBlb2YgREVCVUcgIT09IFwidW5kZWZpbmVkXCIgJiYgREVCVUcpIHtcblx0XHRpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG5cdH1cblxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRvcHRpb25zLmF0dHJzID0gdHlwZW9mIG9wdGlvbnMuYXR0cnMgPT09IFwib2JqZWN0XCIgPyBvcHRpb25zLmF0dHJzIDoge307XG5cblx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0aWYgKCFvcHRpb25zLnNpbmdsZXRvbikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgPGhlYWQ+IGVsZW1lbnRcblx0aWYgKCFvcHRpb25zLmluc2VydEludG8pIG9wdGlvbnMuaW5zZXJ0SW50byA9IFwiaGVhZFwiO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiB0aGUgdGFyZ2V0XG5cdGlmICghb3B0aW9ucy5pbnNlcnRBdCkgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcblxuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGUgKG5ld0xpc3QpIHtcblx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdH1cblxuXHRcdGlmKG5ld0xpc3QpIHtcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCwgb3B0aW9ucyk7XG5cdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cblx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykgZG9tU3R5bGUucGFydHNbal0oKTtcblxuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn07XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tIChzdHlsZXMsIG9wdGlvbnMpIHtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdGlmKGRvbVN0eWxlKSB7XG5cdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyAobGlzdCwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGVzID0gW107XG5cdHZhciBuZXdTdHlsZXMgPSB7fTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0dmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG5cdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcblx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cblx0XHRpZighbmV3U3R5bGVzW2lkXSkgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRlbHNlIG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0fVxuXG5cdHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudCAob3B0aW9ucywgc3R5bGUpIHtcblx0dmFyIHRhcmdldCA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvKVxuXG5cdGlmICghdGFyZ2V0KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnRJbnRvJyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG5cdH1cblxuXHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZXNJbnNlcnRlZEF0VG9wW3N0eWxlc0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XG5cblx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcblx0XHRpZiAoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG5cdFx0fSBlbHNlIGlmIChsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHRcdH1cblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGUpO1xuXHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKSB7XG5cdFx0dmFyIG5leHRTaWJsaW5nID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8gKyBcIiBcIiArIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKTtcblx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBuZXh0U2libGluZyk7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiW1N0eWxlIExvYWRlcl1cXG5cXG4gSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcgKCdvcHRpb25zLmluc2VydEF0JykgZm91bmQuXFxuIE11c3QgYmUgJ3RvcCcsICdib3R0b20nLCBvciBPYmplY3QuXFxuIChodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlciNpbnNlcnRhdClcXG5cIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50IChzdHlsZSkge1xuXHRpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXHRzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcblxuXHR2YXIgaWR4ID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlKTtcblx0aWYoaWR4ID49IDApIHtcblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cblx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXG5cdGFkZEF0dHJzKHN0eWxlLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlKTtcblxuXHRyZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxpbmtFbGVtZW50IChvcHRpb25zKSB7XG5cdHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG5cblx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHRvcHRpb25zLmF0dHJzLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuXG5cdGFkZEF0dHJzKGxpbmssIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGluayk7XG5cblx0cmV0dXJuIGxpbms7XG59XG5cbmZ1bmN0aW9uIGFkZEF0dHJzIChlbCwgYXR0cnMpIHtcblx0T2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGUgKG9iaiwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGUsIHVwZGF0ZSwgcmVtb3ZlLCByZXN1bHQ7XG5cblx0Ly8gSWYgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gd2FzIGRlZmluZWQsIHJ1biBpdCBvbiB0aGUgY3NzXG5cdGlmIChvcHRpb25zLnRyYW5zZm9ybSAmJiBvYmouY3NzKSB7XG5cdCAgICByZXN1bHQgPSBvcHRpb25zLnRyYW5zZm9ybShvYmouY3NzKTtcblxuXHQgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgXHQvLyBJZiB0cmFuc2Zvcm0gcmV0dXJucyBhIHZhbHVlLCB1c2UgdGhhdCBpbnN0ZWFkIG9mIHRoZSBvcmlnaW5hbCBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIHJ1bm5pbmcgcnVudGltZSB0cmFuc2Zvcm1hdGlvbnMgb24gdGhlIGNzcy5cblx0ICAgIFx0b2JqLmNzcyA9IHJlc3VsdDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICBcdC8vIElmIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBkb24ndCBhZGQgdGhpcyBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIGNvbmRpdGlvbmFsIGxvYWRpbmcgb2YgY3NzXG5cdCAgICBcdHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIFx0XHQvLyBub29wXG5cdCAgICBcdH07XG5cdCAgICB9XG5cdH1cblxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblxuXHRcdHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuXG5cdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcblxuXHR9IGVsc2UgaWYgKFxuXHRcdG9iai5zb3VyY2VNYXAgJiZcblx0XHR0eXBlb2YgVVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiXG5cdCkge1xuXHRcdHN0eWxlID0gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXG5cdFx0XHRpZihzdHlsZS5ocmVmKSBVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlLmhyZWYpO1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXHRcdH07XG5cdH1cblxuXHR1cGRhdGUob2JqKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUgKG5ld09iaikge1xuXHRcdGlmIChuZXdPYmopIHtcblx0XHRcdGlmIChcblx0XHRcdFx0bmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJlxuXHRcdFx0XHRuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJlxuXHRcdFx0XHRuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cblx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblx0fTtcbn0pKCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcgKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcblx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xuXG5cdGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG5cdFx0XHRzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyAoc3R5bGUsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXG5cdGlmKG1lZGlhKSB7XG5cdFx0c3R5bGUuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXG5cdH1cblxuXHRpZihzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlLmZpcnN0Q2hpbGQpIHtcblx0XHRcdHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblxuXHRcdHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpbmsgKGxpbmssIG9wdGlvbnMsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cblx0Lypcblx0XHRJZiBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgaXNuJ3QgZGVmaW5lZCwgYnV0IHNvdXJjZW1hcHMgYXJlIGVuYWJsZWRcblx0XHRhbmQgdGhlcmUgaXMgbm8gcHVibGljUGF0aCBkZWZpbmVkIHRoZW4gbGV0cyB0dXJuIGNvbnZlcnRUb0Fic29sdXRlVXJsc1xuXHRcdG9uIGJ5IGRlZmF1bHQuICBPdGhlcndpc2UgZGVmYXVsdCB0byB0aGUgY29udmVydFRvQWJzb2x1dGVVcmxzIG9wdGlvblxuXHRcdGRpcmVjdGx5XG5cdCovXG5cdHZhciBhdXRvRml4VXJscyA9IG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzID09PSB1bmRlZmluZWQgJiYgc291cmNlTWFwO1xuXG5cdGlmIChvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyB8fCBhdXRvRml4VXJscykge1xuXHRcdGNzcyA9IGZpeFVybHMoY3NzKTtcblx0fVxuXG5cdGlmIChzb3VyY2VNYXApIHtcblx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxuXHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcblx0fVxuXG5cdHZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogXCJ0ZXh0L2Nzc1wiIH0pO1xuXG5cdHZhciBvbGRTcmMgPSBsaW5rLmhyZWY7XG5cblx0bGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuXHRpZihvbGRTcmMpIFVSTC5yZXZva2VPYmplY3RVUkwob2xkU3JjKTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHh0ZW5kID0gcmVxdWlyZSgneHRlbmQnKTtcbnZhciB2ID0gcmVxdWlyZSgnQG1hcGJveC9mdXNzcG90Jyk7XG5cbmZ1bmN0aW9uIGZpbGUodmFsdWUpIHtcbiAgLy8gSWYgd2UncmUgaW4gYSBicm93c2VyIHNvIEJsb2IgaXMgYXZhaWxhYmxlLCB0aGUgZmlsZSBtdXN0IGJlIHRoYXQuXG4gIC8vIEluIE5vZGUsIGhvd2V2ZXIsIGl0IGNvdWxkIGJlIGEgZmlsZXBhdGggb3IgYSBwaXBlYWJsZSAoUmVhZGFibGUpIHN0cmVhbS5cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgZ2xvYmFsLkJsb2IgfHwgdmFsdWUgaW5zdGFuY2VvZiBnbG9iYWwuQXJyYXlCdWZmZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuICdCbG9iIG9yIEFycmF5QnVmZmVyJztcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCB2YWx1ZS5waXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcmV0dXJuICdGaWxlbmFtZSBvciBSZWFkYWJsZSBzdHJlYW0nO1xufVxuXG5mdW5jdGlvbiBhc3NlcnRTaGFwZSh2YWxpZGF0b3JPYmosIGFwaU5hbWUpIHtcbiAgcmV0dXJuIHYuYXNzZXJ0KHYuc3RyaWN0U2hhcGUodmFsaWRhdG9yT2JqKSwgYXBpTmFtZSk7XG59XG5cbmZ1bmN0aW9uIGRhdGUodmFsdWUpIHtcbiAgdmFyIG1zZyA9ICdkYXRlJztcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIG1zZztcbiAgfVxuICB0cnkge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUodmFsdWUpO1xuICAgIGlmIChkYXRlLmdldFRpbWUgJiYgaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgICByZXR1cm4gbXNnO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBtc2c7XG4gIH1cbn1cblxuZnVuY3Rpb24gY29vcmRpbmF0ZXModmFsdWUpIHtcbiAgcmV0dXJuIHYudHVwbGUodi5udW1iZXIsIHYubnVtYmVyKSh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0geHRlbmQodiwge1xuICBmaWxlOiBmaWxlLFxuICBkYXRlOiBkYXRlLFxuICBjb29yZGluYXRlczogY29vcmRpbmF0ZXMsXG4gIGFzc2VydFNoYXBlOiBhc3NlcnRTaGFwZVxufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9AbWFwYm94L21hcGJveC1zZGsvc2VydmljZXMvc2VydmljZS1oZWxwZXJzL3ZhbGlkYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSxldmFsKShcInRoaXNcIik7XG59IGNhdGNoKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIilcblx0XHRnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanNcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgTWFwaUNsaWVudCA9IHJlcXVpcmUoJy4uLy4uL2xpYi9jbGFzc2VzL21hcGktY2xpZW50Jyk7XG4vLyBUaGlzIHdpbGwgY3JlYXRlIHRoZSBlbnZpcm9ubWVudC1hcHByb3ByaWF0ZSBjbGllbnQuXG52YXIgY3JlYXRlQ2xpZW50ID0gcmVxdWlyZSgnLi4vLi4vbGliL2NsaWVudCcpO1xuXG5mdW5jdGlvbiBjcmVhdGVTZXJ2aWNlRmFjdG9yeShTZXJ2aWNlUHJvdG90eXBlKSB7XG4gIHJldHVybiBmdW5jdGlvbihjbGllbnRPckNvbmZpZykge1xuICAgIHZhciBjbGllbnQ7XG4gICAgaWYgKE1hcGlDbGllbnQucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoY2xpZW50T3JDb25maWcpKSB7XG4gICAgICBjbGllbnQgPSBjbGllbnRPckNvbmZpZztcbiAgICB9IGVsc2Uge1xuICAgICAgY2xpZW50ID0gY3JlYXRlQ2xpZW50KGNsaWVudE9yQ29uZmlnKTtcbiAgICB9XG4gICAgdmFyIHNlcnZpY2UgPSBPYmplY3QuY3JlYXRlKFNlcnZpY2VQcm90b3R5cGUpO1xuICAgIHNlcnZpY2UuY2xpZW50ID0gY2xpZW50O1xuICAgIHJldHVybiBzZXJ2aWNlO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVNlcnZpY2VGYWN0b3J5O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvQG1hcGJveC9tYXBib3gtc2RrL3NlcnZpY2VzL3NlcnZpY2UtaGVscGVycy9jcmVhdGUtc2VydmljZS1mYWN0b3J5LmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBwYXJzZVRva2VuID0gcmVxdWlyZSgnQG1hcGJveC9wYXJzZS1tYXBib3gtdG9rZW4nKTtcbnZhciBNYXBpUmVxdWVzdCA9IHJlcXVpcmUoJy4vbWFwaS1yZXF1ZXN0Jyk7XG52YXIgY29uc3RhbnRzID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzJyk7XG5cbi8qKlxuICogQSBsb3ctbGV2ZWwgTWFwYm94IEFQSSBjbGllbnQuIFVzZSBpdCB0byBjcmVhdGUgc2VydmljZSBjbGllbnRzXG4gKiB0aGF0IHNoYXJlIHRoZSBzYW1lIGNvbmZpZ3VyYXRpb24uXG4gKlxuICogU2VydmljZXMgYW5kIGBNYXBpUmVxdWVzdGBzIHVzZSB0aGUgdW5kZXJseWluZyBgTWFwaUNsaWVudGAgdG9cbiAqIGRldGVybWluZSBob3cgdG8gY3JlYXRlLCBzZW5kLCBhbmQgYWJvcnQgcmVxdWVzdHMgaW4gYSB3YXlcbiAqIHRoYXQgaXMgYXBwcm9wcmlhdGUgdG8gdGhlIGNvbmZpZ3VyYXRpb24gYW5kIGVudmlyb25tZW50XG4gKiAoTm9kZSBvciB0aGUgYnJvd3NlcikuXG4gKlxuICogQGNsYXNzIE1hcGlDbGllbnRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIFRoZSBNYXBib3ggYWNjZXNzIHRva2VuIGFzc2lnbmVkXG4gKiAgIHRvIHRoaXMgY2xpZW50LlxuICovXG5cbmZ1bmN0aW9uIE1hcGlDbGllbnQob3B0aW9ucykge1xuICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMuYWNjZXNzVG9rZW4pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBjcmVhdGUgYSBjbGllbnQgd2l0aG91dCBhbiBhY2Nlc3MgdG9rZW4nKTtcbiAgfVxuICAvLyBUcnkgcGFyc2luZyB0aGUgYWNjZXNzIHRva2VuIHRvIGRldGVybWluZSByaWdodCBhd2F5IGlmIGl0J3MgdmFsaWQuXG4gIHBhcnNlVG9rZW4ob3B0aW9ucy5hY2Nlc3NUb2tlbik7XG5cbiAgdGhpcy5hY2Nlc3NUb2tlbiA9IG9wdGlvbnMuYWNjZXNzVG9rZW47XG4gIHRoaXMub3JpZ2luID0gb3B0aW9ucy5vcmlnaW4gfHwgY29uc3RhbnRzLkFQSV9PUklHSU47XG59XG5cbk1hcGlDbGllbnQucHJvdG90eXBlLmNyZWF0ZVJlcXVlc3QgPSBmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0KHJlcXVlc3RPcHRpb25zKSB7XG4gIHJldHVybiBuZXcgTWFwaVJlcXVlc3QodGhpcywgcmVxdWVzdE9wdGlvbnMpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBNYXBpQ2xpZW50O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvQG1hcGJveC9tYXBib3gtc2RrL2xpYi9jbGFzc2VzL21hcGktY2xpZW50LmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBiYXNlNjQgPSByZXF1aXJlKCdiYXNlLTY0Jyk7XG5cbnZhciB0b2tlbkNhY2hlID0ge307XG5cbmZ1bmN0aW9uIHBhcnNlVG9rZW4odG9rZW4pIHtcbiAgaWYgKHRva2VuQ2FjaGVbdG9rZW5dKSB7XG4gICAgcmV0dXJuIHRva2VuQ2FjaGVbdG9rZW5dO1xuICB9XG5cbiAgdmFyIHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcbiAgdmFyIHVzYWdlID0gcGFydHNbMF07XG4gIHZhciByYXdQYXlsb2FkID0gcGFydHNbMV07XG4gIGlmICghcmF3UGF5bG9hZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0b2tlbicpO1xuICB9XG5cbiAgdmFyIHBhcnNlZFBheWxvYWQgPSBwYXJzZVBheWxvZChyYXdQYXlsb2FkKTtcblxuICB2YXIgcmVzdWx0ID0ge1xuICAgIHVzYWdlOiB1c2FnZSxcbiAgICB1c2VyOiBwYXJzZWRQYXlsb2FkLnVcbiAgfTtcbiAgaWYgKGhhcyhwYXJzZWRQYXlsb2FkLCAnYScpKSByZXN1bHQuYXV0aG9yaXphdGlvbiA9IHBhcnNlZFBheWxvYWQuYTtcbiAgaWYgKGhhcyhwYXJzZWRQYXlsb2FkLCAnZXhwJykpIHJlc3VsdC5leHBpcmVzID0gcGFyc2VkUGF5bG9hZC5leHAgKiAxMDAwO1xuICBpZiAoaGFzKHBhcnNlZFBheWxvYWQsICdpYXQnKSkgcmVzdWx0LmNyZWF0ZWQgPSBwYXJzZWRQYXlsb2FkLmlhdCAqIDEwMDA7XG4gIGlmIChoYXMocGFyc2VkUGF5bG9hZCwgJ3Njb3BlcycpKSByZXN1bHQuc2NvcGVzID0gcGFyc2VkUGF5bG9hZC5zY29wZXM7XG4gIGlmIChoYXMocGFyc2VkUGF5bG9hZCwgJ2NsaWVudCcpKSByZXN1bHQuY2xpZW50ID0gcGFyc2VkUGF5bG9hZC5jbGllbnQ7XG4gIGlmIChoYXMocGFyc2VkUGF5bG9hZCwgJ2xsJykpIHJlc3VsdC5sYXN0TG9naW4gPSBwYXJzZWRQYXlsb2FkLmxsO1xuICBpZiAoaGFzKHBhcnNlZFBheWxvYWQsICdpdScpKSByZXN1bHQuaW1wZXJzb25hdG9yID0gcGFyc2VkUGF5bG9hZC5pdTtcblxuICB0b2tlbkNhY2hlW3Rva2VuXSA9IHJlc3VsdDtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gcGFyc2VQYXlsb2QocmF3UGF5bG9hZCkge1xuICB0cnkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKGJhc2U2NC5kZWNvZGUocmF3UGF5bG9hZCkpO1xuICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHRva2VuJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFzKG9iaiwga2V5KSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBhcnNlVG9rZW47XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9AbWFwYm94L3BhcnNlLW1hcGJveC10b2tlbi9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBvYmplY3QgYnkgcGlja2luZyBwcm9wZXJ0aWVzIG9mZiBhbiBleGlzdGluZyBvYmplY3QuXG4gKiBUaGUgc2Vjb25kIHBhcmFtIGNhbiBiZSBvdmVybG9hZGVkIGFzIGEgY2FsbGJhY2sgZm9yXG4gKiBtb3JlIGZpbmUgZ3JhaW5lZCBwaWNraW5nIG9mIHByb3BlcnRpZXMuXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz58ZnVuY3Rpb24oc3RyaW5nLCBPYmplY3QpOmJvb2xlYW59IGtleXNcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIHBpY2soc291cmNlLCBrZXlzKSB7XG4gIHZhciBmaWx0ZXIgPSBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgIHJldHVybiBrZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEgJiYgdmFsICE9PSB1bmRlZmluZWQ7XG4gIH07XG5cbiAgaWYgKHR5cGVvZiBrZXlzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgZmlsdGVyID0ga2V5cztcbiAgfVxuXG4gIHJldHVybiBPYmplY3Qua2V5cyhzb3VyY2UpXG4gICAgLmZpbHRlcihmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiBmaWx0ZXIoa2V5LCBzb3VyY2Vba2V5XSk7XG4gICAgfSlcbiAgICAucmVkdWNlKGZ1bmN0aW9uKHJlc3VsdCwga2V5KSB7XG4gICAgICByZXN1bHRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LCB7fSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcGljaztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL0BtYXBib3gvbWFwYm94LXNkay9zZXJ2aWNlcy9zZXJ2aWNlLWhlbHBlcnMvcGljay5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgb2JqZWN0TWFwID0gcmVxdWlyZSgnLi9vYmplY3QtbWFwJyk7XG5cbi8qKlxuICogU3RyaW5naWZ5IGFsbCB0aGUgYm9vbGVhbiB2YWx1ZXMgaW4gYW4gb2JqZWN0LCBzbyB0cnVlIGJlY29tZXMgXCJ0cnVlXCIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybnMge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5Qm9vbGVhbihvYmopIHtcbiAgcmV0dXJuIG9iamVjdE1hcChvYmosIGZ1bmN0aW9uKF8sIHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nID8gSlNPTi5zdHJpbmdpZnkodmFsdWUpIDogdmFsdWU7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0cmluZ2lmeUJvb2xlYW47XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9AbWFwYm94L21hcGJveC1zZGsvc2VydmljZXMvc2VydmljZS1oZWxwZXJzL3N0cmluZ2lmeS1ib29sZWFucy5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0ICcuL3N0eWxlLmNzcyc7XG5pbXBvcnQgJy4vdmVuZG9yL25vdWlzbGlkZXIubWluLmNzcyc7XG5pbXBvcnQgJy4vZmF2aWNvbi5pY28nO1xuXG5pbXBvcnQgaW5pdERpcmVjdGlvbnNDb250cm9scyBmcm9tICcuL2RpcmVjdGlvbnNDb250cm9scyc7XG5pbXBvcnQgaW5pdE1hcCBmcm9tICcuL21hcCc7XG5pbXBvcnQgeyBzZXRHZW9jb2RlckJvdW5kcywgc2V0R2VvY2RlckNlbnRlciB9IGZyb20gJy4vZ2VvY29kZXInO1xuaW1wb3J0IHN0YXRlIGZyb20gJy4vc3RhdGUnO1xuXG53aW5kb3cuYXBwU3RhdGUgPSBzdGF0ZTsgLy8gWFhYIGZvciBjb25zb2xlIGRlYnVnZ2luZy5cblxuLyogSW5pdGlhbGl6YXRpb24gKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cbmZ1bmN0aW9uIHJlYWR5KGZuKSB7XG4gIGlmIChkb2N1bWVudC5hdHRhY2hFdmVudCA/IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScgOiBkb2N1bWVudC5yZWFkeVN0YXRlICE9PSAnbG9hZGluZycpIHtcbiAgICBmbigpO1xuICB9IGVsc2Uge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmbik7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBpbml0UGFnZShsbmdMYXQsIHpvb20pIHtcbiAgY29uc3QgZG9Jbml0ID0gKCkgPT4ge1xuICAgIGluaXRNYXAobG5nTGF0LCB6b29tKTtcbiAgICBpbml0RGlyZWN0aW9uc0NvbnRyb2xzKCk7XG4gIH07XG5cbiAgcmVhZHkoZG9Jbml0KTtcbn1cblxuKGZ1bmN0aW9uIGluaXQoKSB7XG4gIGNvbnNvbGUubG9nKCdpbml0aWFsaXppbmcgYXBwJyk7XG4gIC8vIEZhbGxiYWNrIGxvY2F0aW9uOiBjZW50ZXIgb2YgYmF5IGFyZWFcbiAgbGV0IGxhdCA9IDM3LjYxMTtcbiAgbGV0IGxvbiA9IC0xMjEuNzUzO1xuICBsZXQgem9vbSA9IDg7XG4gIHNldEdlb2NkZXJDZW50ZXIoW2xvbiwgbGF0XSk7XG4gIHNldEdlb2NvZGVyQm91bmRzKCctMTIzLjUzMzcsMzYuODkzMSwtMTIxLjIwODIsMzguODY0MycpO1xuXG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWV4dGVuZC1uYXRpdmVcbiAgTnVtYmVyLnByb3RvdHlwZS5iZXR3ZWVuID0gKG1pbiwgbWF4KSA9PiB0aGlzID4gbWluICYmIHRoaXMgPCBtYXg7XG5cbiAgLy8gR3JhYiBJUCBsb2NhdGlvbiBmcm9tIGZyZWVnZW9pcCBBUElcbiAgY29uc3QgZ2VvTG9jYXRpb25Qcm92aWRlclVSTCA9ICdodHRwczovL2lwaW5mby5pby9qc29uJztcbiAgZmV0Y2goZ2VvTG9jYXRpb25Qcm92aWRlclVSTClcbiAgICAudGhlbihyZXNwID0+IHJlc3AuanNvbigpKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjb25zdCBbbGF0aXR1ZGUsIGxvbmdpdHVkZV0gPSBkYXRhLmxvYy5zcGxpdCgnLCcpLm1hcChwYXJzZUZsb2F0KTtcbiAgICAgIC8vIEJlY2F1c2UgdGhpcyBiaWtlIHNoYXJlIG9ubHkgb3BlcmF0ZXMgaW4gdGhlIFNGIGJheSBhcmVhLCB3ZVxuICAgICAgLy8ganVtcCB0byB0aGUgdXNlcidzIHNwZWNpZmljIGxvY2F0aW9uIG9ubHkgaWYgdGhleSdyZSBpbnNpZGUgYVxuICAgICAgLy8gYmF5LWNlbnRlcmVkIGJvdW5kaW5nIGFyZWEuXG4gICAgICBpZiAoKGxvbmdpdHVkZSkuYmV0d2VlbigtMTI0LCAtMTIxKSAmJiAobGF0aXR1ZGUpLmJldHdlZW4oMzYuNSwgMzguNCkpIHtcbiAgICAgICAgbGF0ID0gbGF0aXR1ZGU7XG4gICAgICAgIGxvbiA9IGxvbmdpdHVkZTtcbiAgICAgICAgem9vbSA9IDExOyAvLyB6b29tIG1vcmUgdGhhbiBkZWZhdWx0IHNpbmNlIHdlIGtub3cgZXhhY3QgbG9jYXRpb25cbiAgICAgIH1cbiAgICAgIGluaXRQYWdlKFtsb24sIGxhdF0sIHpvb20pO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5sb2coYEVycm9yIGZldGNoaW5nIGxvY2F0aW9uIGRhdGE6ICR7ZXJyb3J9YCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgIGlmIChlcnJvciA9PT0gJ0Vycm9yOiBDb29yZGluYXRlcyBtdXN0IGNvbnRhaW4gbnVtYmVycycpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbml0UGFnZShbbG9uLCBsYXRdKTsgLy8gZ28gZm9yIGl0IGFueXdheSwgdXNpbmcgZGVmYXVsdHNcbiAgICAgIH1cbiAgICB9KTtcbn0oKSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXguanMiLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9zdHlsZS5jc3NcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIFByZXBhcmUgY3NzVHJhbnNmb3JtYXRpb25cbnZhciB0cmFuc2Zvcm07XG5cbnZhciBvcHRpb25zID0ge1wiaG1yXCI6dHJ1ZX1cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vc3R5bGUuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL3N0eWxlLmNzc1wiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvc3R5bGUuY3NzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKHVuZGVmaW5lZCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJjYW52YXMubWFwYm94Z2wtY2FudmFze2JhY2tncm91bmQ6I2QzZDNkM30ubWFya2Vye2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiICsgcmVxdWlyZShcIi4vbm91bl84MDA2MDAucG5nXCIpICsgXCIpO2JhY2tncm91bmQtc2l6ZTpjb3Zlcjt3aWR0aDo1MHB4O2hlaWdodDo1MHB4O2JvcmRlci1yYWRpdXM6NTAlO2N1cnNvcjpwb2ludGVyfS5tYXAtbWFya2VyLWRpcmVjdGlvbnN7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246NTAlO2JhY2tncm91bmQtc2l6ZToxMnB4O3dpZHRoOjIwcHh9Lm1hcC1tYXJrZXItZGlyZWN0aW9ucy5pcy1vcmlnaW57YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyByZXF1aXJlKFwiLi9tYXAtZG90LW9yaWdpbi5zdmdcIikgKyBcIil9Lm1hcC1tYXJrZXItZGlyZWN0aW9ucy5pcy1kZXN0aW5hdGlvbntiYWNrZ3JvdW5kLWltYWdlOnVybChcIiArIHJlcXVpcmUoXCIuL21hcC1kb3QtZGVzdGluYXRpb24uc3ZnXCIpICsgXCIpfS5kaXJlY3Rpb25ze3Bvc2l0aW9uOmFic29sdXRlO21hcmdpbjoxZW07YmFja2dyb3VuZDpoc2xhKDAsMCUsMTAwJSwuODUpfS5kaXJlY3Rpb25zLS1jb250ZW50e3BhZGRpbmc6MWVtfS5kaXJlY3Rpb25zLS10b2dnbGUtYnV0dG9ue2JhY2tncm91bmQ6IzRhYjJmNztiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjo1MCU7YmFja2dyb3VuZC1zaXplOjYwcHg7Y3Vyc29yOnBvaW50ZXJ9LmRpcmVjdGlvbnMtLXRvZ2dsZS1idXR0b24uc2hvd257YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyByZXF1aXJlKFwiLi9kaXJlY3Rpb25zLXVwLnN2Z1wiKSArIFwiKX0uZGlyZWN0aW9ucy0tdG9nZ2xlLWJ1dHRvbi5oaWRkZW57YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyByZXF1aXJlKFwiLi9kaXJlY3Rpb25zLWRvd24uc3ZnXCIpICsgXCIpfS5kaXJlY3Rpb25zLS10b2dnbGUtYnV0dG9ue2hlaWdodDoyZW19I2RpcmVjdGlvbnMtLWRpc3RhbmNlLXJhbmdle3dpZHRoOjEwMCV9LmRpcmVjdGlvbnMtLWRpc3RhbmNlLXBpY2tlcnttYXJnaW4tYm90dG9tOjJlbTtwYWRkaW5nOi41ZW19I2RpcmVjdGlvbnMtLWRpc3RhbmNlLXJhbmdlIC5ub1VpLWNvbm5lY3R7YmFja2dyb3VuZC1jb2xvcjojZGVlMGUwO2JveC1zaGFkb3c6aW5zZXQgMCAwIDFweCByZ2JhKDUxLDUxLDUxLC4yKX0ubm9VaS1waXBzLm5vVWktcGlwcy1ob3Jpem9udGFse2hlaWdodDo1MHB4fS5kaXJlY3Rpb25zLS1sb2NhdGUtb3JpZ2luLmNvbHVtbntwYWRkaW5nLWxlZnQ6MH0uZGlyZWN0aW9ucy0tbG9jYXRlLW9yaWdpbiBidXR0b257YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyByZXF1aXJlKFwiLi9sb2NhdGUtcGVyc29uLnN2Z1wiKSArIFwiKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjo1MCU7YmFja2dyb3VuZC1zaXplOjIwcHg7d2lkdGg6MzhweH1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjc4MHB4KXsuZGlyZWN0aW9uc3ttYXJnaW46MH19LmF1dG9jb21wbGV0ZXtiYWNrZ3JvdW5kOiNmZmY7ei1pbmRleDoxMDA7Ym9yZGVyOjFweCBzb2xpZCAjZTRlMmUyfS5hdXRvY29tcGxldGUgZGl2e2JvcmRlci10b3A6MXB4IHNvbGlkICNhZGFkYWQ7cGFkZGluZzoxZW07Y3Vyc29yOnBvaW50ZXJ9LmF1dG9jb21wbGV0ZSBkaXY6Zm9jdXMsLmF1dG9jb21wbGV0ZSBkaXY6aG92ZXJ7YmFja2dyb3VuZDojY2FjZWUzfS5zdGF0aW9uLXBvcHVwLS1jb250YWluZXIgLm1hcGJveGdsLXBvcHVwLWNvbnRlbnR7cGFkZGluZy1ib3R0b206NnB4fS5zdGF0aW9uLXBvcHVwe3RleHQtYWxpZ246Y2VudGVyfS5zdGF0aW9uLXBvcHVwIGgze21hcmdpbi1ib3R0b206MWVtfWRpdi5zdGF0aW9uLXBvcHVwLS1kaXJlY3Rpb25zIGF7dGV4dC1kZWNvcmF0aW9uOm5vbmV9LnN0YXRpb24tcG9wdXAtLWNvb3JkaW5hdGVze2JvcmRlci10b3A6MXB4IHNvbGlkICNkM2QzZDM7dGV4dC1hbGlnbjpyaWdodDtwYWRkaW5nLXRvcDouNWVtO21hcmdpbi10b3A6LjVlbTtmb250LXNpemU6c21hbGxlcjtjb2xvcjojZDNkM2QzfS5zdGF0aW9uLXBvcHVwLS1iaWtlcy1udW1iZXIsLnN0YXRpb24tcG9wdXAtLWRvY2tzLW51bWJlcntmb250LXNpemU6bGFyZ2V9ZGl2LnN0YXRpb24tcG9wdXAtLXN0YXRze21hcmdpbi1ib3R0b206MCFpbXBvcnRhbnQ7Zm9udC13ZWlnaHQ6NzAwfS5zdGF0aW9uLXBvcHVwLS1hbGVydHtmb250LXdlaWdodDo3MDA7Zm9udC1zaXplOmxhcmdlO21hcmdpbi1ib3R0b206MWVtfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIhLi9zcmMvc3R5bGUuY3NzXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJkMDQ5MjAzYmM3NDY5NmQ1ODdhM2NkYjFkMGE2NjFkMi5wbmdcIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ub3VuXzgwMDYwMC5wbmdcbi8vIG1vZHVsZSBpZCA9IDE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIjJmNjdiZDE0Zjk4NzJkYWY3NzEzYTUyY2UyZTQ1ZjlhLnN2Z1wiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL21hcC1kb3Qtb3JpZ2luLnN2Z1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiOTlkYTlhMTExOGI4ZTQzMjI1ZDNkYTZmZWU2NDVhZDAuc3ZnXCI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbWFwLWRvdC1kZXN0aW5hdGlvbi5zdmdcbi8vIG1vZHVsZSBpZCA9IDIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIjlmOGQ4MDEzYjk1YjQ3ZmYxNmEwYmVmNjE1ODI5MzgzLnN2Z1wiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2RpcmVjdGlvbnMtdXAuc3ZnXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCIxZjdjMjk5NTBhZTFkNzMzZjJjZmQ0MTcwMmY0MDliOS5zdmdcIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9kaXJlY3Rpb25zLWRvd24uc3ZnXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCI5OWM2ODc5YjAxZmU3ZmIyN2ZiMjZjZjJhZmM3MzYwZC5zdmdcIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9sb2NhdGUtcGVyc29uLnN2Z1xuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG4vKipcbiAqIFdoZW4gc291cmNlIG1hcHMgYXJlIGVuYWJsZWQsIGBzdHlsZS1sb2FkZXJgIHVzZXMgYSBsaW5rIGVsZW1lbnQgd2l0aCBhIGRhdGEtdXJpIHRvXG4gKiBlbWJlZCB0aGUgY3NzIG9uIHRoZSBwYWdlLiBUaGlzIGJyZWFrcyBhbGwgcmVsYXRpdmUgdXJscyBiZWNhdXNlIG5vdyB0aGV5IGFyZSByZWxhdGl2ZSB0byBhXG4gKiBidW5kbGUgaW5zdGVhZCBvZiB0aGUgY3VycmVudCBwYWdlLlxuICpcbiAqIE9uZSBzb2x1dGlvbiBpcyB0byBvbmx5IHVzZSBmdWxsIHVybHMsIGJ1dCB0aGF0IG1heSBiZSBpbXBvc3NpYmxlLlxuICpcbiAqIEluc3RlYWQsIHRoaXMgZnVuY3Rpb24gXCJmaXhlc1wiIHRoZSByZWxhdGl2ZSB1cmxzIHRvIGJlIGFic29sdXRlIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBwYWdlIGxvY2F0aW9uLlxuICpcbiAqIEEgcnVkaW1lbnRhcnkgdGVzdCBzdWl0ZSBpcyBsb2NhdGVkIGF0IGB0ZXN0L2ZpeFVybHMuanNgIGFuZCBjYW4gYmUgcnVuIHZpYSB0aGUgYG5wbSB0ZXN0YCBjb21tYW5kLlxuICpcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3MpIHtcbiAgLy8gZ2V0IGN1cnJlbnQgbG9jYXRpb25cbiAgdmFyIGxvY2F0aW9uID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb247XG5cbiAgaWYgKCFsb2NhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihcImZpeFVybHMgcmVxdWlyZXMgd2luZG93LmxvY2F0aW9uXCIpO1xuICB9XG5cblx0Ly8gYmxhbmsgb3IgbnVsbD9cblx0aWYgKCFjc3MgfHwgdHlwZW9mIGNzcyAhPT0gXCJzdHJpbmdcIikge1xuXHQgIHJldHVybiBjc3M7XG4gIH1cblxuICB2YXIgYmFzZVVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgbG9jYXRpb24uaG9zdDtcbiAgdmFyIGN1cnJlbnREaXIgPSBiYXNlVXJsICsgbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXFwvW15cXC9dKiQvLCBcIi9cIik7XG5cblx0Ly8gY29udmVydCBlYWNoIHVybCguLi4pXG5cdC8qXG5cdFRoaXMgcmVndWxhciBleHByZXNzaW9uIGlzIGp1c3QgYSB3YXkgdG8gcmVjdXJzaXZlbHkgbWF0Y2ggYnJhY2tldHMgd2l0aGluXG5cdGEgc3RyaW5nLlxuXG5cdCAvdXJsXFxzKlxcKCAgPSBNYXRjaCBvbiB0aGUgd29yZCBcInVybFwiIHdpdGggYW55IHdoaXRlc3BhY2UgYWZ0ZXIgaXQgYW5kIHRoZW4gYSBwYXJlbnNcblx0ICAgKCAgPSBTdGFydCBhIGNhcHR1cmluZyBncm91cFxuXHQgICAgICg/OiAgPSBTdGFydCBhIG5vbi1jYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAgICAgW14pKF0gID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICg/OiAgPSBTdGFydCBhbm90aGVyIG5vbi1jYXB0dXJpbmcgZ3JvdXBzXG5cdCAgICAgICAgICAgICAgICAgW14pKF0rICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgICAgICBbXikoXSogID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgXFwpICA9IE1hdGNoIGEgZW5kIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICApICA9IEVuZCBHcm91cFxuICAgICAgICAgICAgICAqXFwpID0gTWF0Y2ggYW55dGhpbmcgYW5kIHRoZW4gYSBjbG9zZSBwYXJlbnNcbiAgICAgICAgICApICA9IENsb3NlIG5vbi1jYXB0dXJpbmcgZ3JvdXBcbiAgICAgICAgICAqICA9IE1hdGNoIGFueXRoaW5nXG4gICAgICAgKSAgPSBDbG9zZSBjYXB0dXJpbmcgZ3JvdXBcblx0IFxcKSAgPSBNYXRjaCBhIGNsb3NlIHBhcmVuc1xuXG5cdCAvZ2kgID0gR2V0IGFsbCBtYXRjaGVzLCBub3QgdGhlIGZpcnN0LiAgQmUgY2FzZSBpbnNlbnNpdGl2ZS5cblx0ICovXG5cdHZhciBmaXhlZENzcyA9IGNzcy5yZXBsYWNlKC91cmxcXHMqXFwoKCg/OlteKShdfFxcKCg/OlteKShdK3xcXChbXikoXSpcXCkpKlxcKSkqKVxcKS9naSwgZnVuY3Rpb24oZnVsbE1hdGNoLCBvcmlnVXJsKSB7XG5cdFx0Ly8gc3RyaXAgcXVvdGVzIChpZiB0aGV5IGV4aXN0KVxuXHRcdHZhciB1bnF1b3RlZE9yaWdVcmwgPSBvcmlnVXJsXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXlwiKC4qKVwiJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KVxuXHRcdFx0LnJlcGxhY2UoL14nKC4qKSckLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pO1xuXG5cdFx0Ly8gYWxyZWFkeSBhIGZ1bGwgdXJsPyBubyBjaGFuZ2Vcblx0XHRpZiAoL14oI3xkYXRhOnxodHRwOlxcL1xcL3xodHRwczpcXC9cXC98ZmlsZTpcXC9cXC9cXC8pL2kudGVzdCh1bnF1b3RlZE9yaWdVcmwpKSB7XG5cdFx0ICByZXR1cm4gZnVsbE1hdGNoO1xuXHRcdH1cblxuXHRcdC8vIGNvbnZlcnQgdGhlIHVybCB0byBhIGZ1bGwgdXJsXG5cdFx0dmFyIG5ld1VybDtcblxuXHRcdGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi8vXCIpID09PSAwKSB7XG5cdFx0ICBcdC8vVE9ETzogc2hvdWxkIHdlIGFkZCBwcm90b2NvbD9cblx0XHRcdG5ld1VybCA9IHVucXVvdGVkT3JpZ1VybDtcblx0XHR9IGVsc2UgaWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiL1wiKSA9PT0gMCkge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJhc2UgdXJsXG5cdFx0XHRuZXdVcmwgPSBiYXNlVXJsICsgdW5xdW90ZWRPcmlnVXJsOyAvLyBhbHJlYWR5IHN0YXJ0cyB3aXRoICcvJ1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byBjdXJyZW50IGRpcmVjdG9yeVxuXHRcdFx0bmV3VXJsID0gY3VycmVudERpciArIHVucXVvdGVkT3JpZ1VybC5yZXBsYWNlKC9eXFwuXFwvLywgXCJcIik7IC8vIFN0cmlwIGxlYWRpbmcgJy4vJ1xuXHRcdH1cblxuXHRcdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgdXJsKC4uLilcblx0XHRyZXR1cm4gXCJ1cmwoXCIgKyBKU09OLnN0cmluZ2lmeShuZXdVcmwpICsgXCIpXCI7XG5cdH0pO1xuXG5cdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgY3NzXG5cdHJldHVybiBmaXhlZENzcztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL3VybHMuanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL25vdWlzbGlkZXIubWluLmNzc1wiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gUHJlcGFyZSBjc3NUcmFuc2Zvcm1hdGlvblxudmFyIHRyYW5zZm9ybTtcblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxub3B0aW9ucy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9ub3Vpc2xpZGVyLm1pbi5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vbm91aXNsaWRlci5taW4uY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy92ZW5kb3Ivbm91aXNsaWRlci5taW4uY3NzXG4vLyBtb2R1bGUgaWQgPSAyNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKHVuZGVmaW5lZCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIvKiEgbm91aXNsaWRlciAtIDEwLjAuMCAtIDIwMTctMDUtMjggMTQ6NTI6NDggKi8ubm9VaS10YXJnZXQsLm5vVWktdGFyZ2V0ICp7LXdlYmtpdC10b3VjaC1jYWxsb3V0Om5vbmU7LXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOnRyYW5zcGFyZW50Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbXMtdG91Y2gtYWN0aW9uOm5vbmU7dG91Y2gtYWN0aW9uOm5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94fS5ub1VpLXRhcmdldHtwb3NpdGlvbjpyZWxhdGl2ZTtkaXJlY3Rpb246bHRyfS5ub1VpLWJhc2V7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjF9Lm5vVWktY29ubmVjdHtwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDowO3RvcDowO2xlZnQ6MDtib3R0b206MH0ubm9VaS1vcmlnaW57cG9zaXRpb246YWJzb2x1dGU7aGVpZ2h0OjA7d2lkdGg6MH0ubm9VaS1oYW5kbGV7cG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDoxfS5ub1VpLXN0YXRlLXRhcCAubm9VaS1jb25uZWN0LC5ub1VpLXN0YXRlLXRhcCAubm9VaS1vcmlnaW57LXdlYmtpdC10cmFuc2l0aW9uOnRvcCAuM3MscmlnaHQgLjNzLGJvdHRvbSAuM3MsbGVmdCAuM3M7dHJhbnNpdGlvbjp0b3AgLjNzLHJpZ2h0IC4zcyxib3R0b20gLjNzLGxlZnQgLjNzfS5ub1VpLXN0YXRlLWRyYWcgKntjdXJzb3I6aW5oZXJpdCFpbXBvcnRhbnR9Lm5vVWktYmFzZSwubm9VaS1oYW5kbGV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWigwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWigwKX0ubm9VaS1ob3Jpem9udGFse2hlaWdodDoxOHB4fS5ub1VpLWhvcml6b250YWwgLm5vVWktaGFuZGxle3dpZHRoOjM0cHg7aGVpZ2h0OjI4cHg7bGVmdDotMTdweDt0b3A6LTZweH0ubm9VaS12ZXJ0aWNhbHt3aWR0aDoxOHB4fS5ub1VpLXZlcnRpY2FsIC5ub1VpLWhhbmRsZXt3aWR0aDoyOHB4O2hlaWdodDozNHB4O2xlZnQ6LTZweDt0b3A6LTE3cHh9Lm5vVWktdGFyZ2V0e2JhY2tncm91bmQ6I2ZhZmFmYTtib3JkZXItcmFkaXVzOjRweDtib3JkZXI6MXB4IHNvbGlkICNkM2QzZDM7Ym94LXNoYWRvdzppbnNldCAwIDFweCAxcHggI2YwZjBmMCwwIDNweCA2cHggLTVweCAjYmJifS5ub1VpLWNvbm5lY3R7YmFja2dyb3VuZDojM2ZiOGFmO2JvcmRlci1yYWRpdXM6NHB4O2JveC1zaGFkb3c6aW5zZXQgMCAwIDNweCByZ2JhKDUxLDUxLDUxLC40NSk7LXdlYmtpdC10cmFuc2l0aW9uOmJhY2tncm91bmQgLjQ1czt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjQ1c30ubm9VaS1kcmFnZ2FibGV7Y3Vyc29yOmV3LXJlc2l6ZX0ubm9VaS12ZXJ0aWNhbCAubm9VaS1kcmFnZ2FibGV7Y3Vyc29yOm5zLXJlc2l6ZX0ubm9VaS1oYW5kbGV7Ym9yZGVyOjFweCBzb2xpZCAjZDlkOWQ5O2JvcmRlci1yYWRpdXM6M3B4O2JhY2tncm91bmQ6I2ZmZjtjdXJzb3I6ZGVmYXVsdDtib3gtc2hhZG93Omluc2V0IDAgMCAxcHggI2ZmZixpbnNldCAwIDFweCA3cHggI2ViZWJlYiwwIDNweCA2cHggLTNweCAjYmJifS5ub1VpLWFjdGl2ZXtib3gtc2hhZG93Omluc2V0IDAgMCAxcHggI2ZmZixpbnNldCAwIDFweCA3cHggI2RkZCwwIDNweCA2cHggLTNweCAjYmJifS5ub1VpLWhhbmRsZTphZnRlciwubm9VaS1oYW5kbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXCI7ZGlzcGxheTpibG9jaztwb3NpdGlvbjphYnNvbHV0ZTtoZWlnaHQ6MTRweDt3aWR0aDoxcHg7YmFja2dyb3VuZDojZThlN2U2O2xlZnQ6MTRweDt0b3A6NnB4fS5ub1VpLWhhbmRsZTphZnRlcntsZWZ0OjE3cHh9Lm5vVWktdmVydGljYWwgLm5vVWktaGFuZGxlOmFmdGVyLC5ub1VpLXZlcnRpY2FsIC5ub1VpLWhhbmRsZTpiZWZvcmV7d2lkdGg6MTRweDtoZWlnaHQ6MXB4O2xlZnQ6NnB4O3RvcDoxNHB4fS5ub1VpLXZlcnRpY2FsIC5ub1VpLWhhbmRsZTphZnRlcnt0b3A6MTdweH1bZGlzYWJsZWRdIC5ub1VpLWNvbm5lY3R7YmFja2dyb3VuZDojYjhiOGI4fVtkaXNhYmxlZF0ubm9VaS1oYW5kbGUsW2Rpc2FibGVkXSAubm9VaS1oYW5kbGUsW2Rpc2FibGVkXS5ub1VpLXRhcmdldHtjdXJzb3I6bm90LWFsbG93ZWR9Lm5vVWktcGlwcywubm9VaS1waXBzICp7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94fS5ub1VpLXBpcHN7cG9zaXRpb246YWJzb2x1dGU7Y29sb3I6Izk5OX0ubm9VaS12YWx1ZXtwb3NpdGlvbjphYnNvbHV0ZTt3aGl0ZS1zcGFjZTpub3dyYXA7dGV4dC1hbGlnbjpjZW50ZXJ9Lm5vVWktdmFsdWUtc3Vie2NvbG9yOiNjY2M7Zm9udC1zaXplOjEwcHh9Lm5vVWktbWFya2Vye3Bvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQ6I2NjY30ubm9VaS1tYXJrZXItbGFyZ2UsLm5vVWktbWFya2VyLXN1YntiYWNrZ3JvdW5kOiNhYWF9Lm5vVWktcGlwcy1ob3Jpem9udGFse3BhZGRpbmc6MTBweCAwO2hlaWdodDo4MHB4O3RvcDoxMDAlO2xlZnQ6MDt3aWR0aDoxMDAlfS5ub1VpLXZhbHVlLWhvcml6b250YWx7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTUwJSw1MCUsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKC01MCUsNTAlLDApfS5ub1VpLW1hcmtlci1ob3Jpem9udGFsLm5vVWktbWFya2Vye21hcmdpbi1sZWZ0Oi0xcHg7d2lkdGg6MnB4O2hlaWdodDo1cHh9Lm5vVWktbWFya2VyLWhvcml6b250YWwubm9VaS1tYXJrZXItc3Vie2hlaWdodDoxMHB4fS5ub1VpLW1hcmtlci1ob3Jpem9udGFsLm5vVWktbWFya2VyLWxhcmdle2hlaWdodDoxNXB4fS5ub1VpLXBpcHMtdmVydGljYWx7cGFkZGluZzowIDEwcHg7aGVpZ2h0OjEwMCU7dG9wOjA7bGVmdDoxMDAlfS5ub1VpLXZhbHVlLXZlcnRpY2Fsey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsNTAlLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDUwJSwwKTtwYWRkaW5nLWxlZnQ6MjVweH0ubm9VaS1tYXJrZXItdmVydGljYWwubm9VaS1tYXJrZXJ7d2lkdGg6NXB4O2hlaWdodDoycHg7bWFyZ2luLXRvcDotMXB4fS5ub1VpLW1hcmtlci12ZXJ0aWNhbC5ub1VpLW1hcmtlci1zdWJ7d2lkdGg6MTBweH0ubm9VaS1tYXJrZXItdmVydGljYWwubm9VaS1tYXJrZXItbGFyZ2V7d2lkdGg6MTVweH0ubm9VaS10b29sdGlwe2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjFweCBzb2xpZCAjZDlkOWQ5O2JvcmRlci1yYWRpdXM6M3B4O2JhY2tncm91bmQ6I2ZmZjtjb2xvcjojMDAwO3BhZGRpbmc6NXB4O3RleHQtYWxpZ246Y2VudGVyO3doaXRlLXNwYWNlOm5vd3JhcH0ubm9VaS1ob3Jpem9udGFsIC5ub1VpLXRvb2x0aXB7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUpO3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSk7bGVmdDo1MCU7Ym90dG9tOjEyMCV9Lm5vVWktdmVydGljYWwgLm5vVWktdG9vbHRpcHstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpO3RvcDo1MCU7cmlnaHQ6MTIwJX1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyIS4vc3JjL3ZlbmRvci9ub3Vpc2xpZGVyLm1pbi5jc3Ncbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImZhdmljb24uaWNvXCI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZmF2aWNvbi5pY29cbi8vIG1vZHVsZSBpZCA9IDI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIERpcmVjdGlvbnMgY29udHJvbHMgKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG5pbXBvcnQgaW5pdERpc3RhbmNlU2xpZGVyIGZyb20gJy4vZGlzdGFuY2VTbGlkZXInO1xuaW1wb3J0IGluaXRPcmlnaW5Mb2NhdG9yQnRuIGZyb20gJy4vb3JpZ2luTG9jYXRvckJ1dHRvbic7XG5pbXBvcnQgaW5pdERpcmVjdGlvbklucHV0IGZyb20gJy4vZGlyZWN0aW9uSW5wdXQnO1xuXG5mdW5jdGlvbiBpbml0RGlyZWN0aW9uc1RvZ2dsZSgpIHtcbiAgY29uc3QgdG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpcmVjdGlvbnMtdG9nZ2xlJyk7XG4gIGxldCBzaG93biA9IHRydWU7XG4gIHRvZ2dsZS5vbmNsaWNrID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdkaXJlY3Rpb25zLS1jb250ZW50JylbMF07XG4gICAgaWYgKHNob3duKSB7XG4gICAgICAvLyBmaXJzdCBlbnN1cmUgdGhlIHRvZ2dsZSBidXR0b24gZG9lc24ndCBkaXNhcHBlYXJcbiAgICAgIHRvZ2dsZS5zdHlsZS53aWR0aCA9IGAke2NvbnRlbnQuY2xpZW50V2lkdGh9cHhgO1xuICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b2dnbGUuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH1cbiAgICBzaG93biA9ICFzaG93bjtcbiAgICB0b2dnbGUuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvd24nKTtcbiAgICB0b2dnbGUuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluaXREaXJlY3Rpb25zQ29udHJvbHMoKSB7XG4gIGluaXREaXN0YW5jZVNsaWRlcigpO1xuICBpbml0T3JpZ2luTG9jYXRvckJ0bigpO1xuICBpbml0RGlyZWN0aW9uSW5wdXQoJ29yaWdpbklucHV0JywgJ29yaWdpbicpO1xuICBpbml0RGlyZWN0aW9uSW5wdXQoJ2Rlc3RpbmF0aW9uSW5wdXQnLCAnZGVzdGluYXRpb24nKTtcbiAgaW5pdERpcmVjdGlvbnNUb2dnbGUoKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9kaXJlY3Rpb25zQ29udHJvbHMuanMiLCJpbXBvcnQgbm9VaVNsaWRlciBmcm9tICcuL3ZlbmRvci9ub3Vpc2xpZGVyJztcbmltcG9ydCBzdGF0ZSBmcm9tICcuL3N0YXRlJztcbmltcG9ydCB7IG1hcFVwZGF0ZU5lYXJieSB9IGZyb20gJy4vbWFwJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdERpc3RhbmNlU2xpZGVyKCkge1xuICBjb25zdCByYW5nZSA9IHtcbiAgICBtaW46IFswXSxcbiAgICAnMTAwJSc6IFsyLCAyXSxcbiAgICBtYXg6IFsyXSxcbiAgfTtcblxuICBjb25zdCBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyZWN0aW9ucy0tZGlzdGFuY2UtcmFuZ2UnKTtcblxuICBjb25zdCBkaXN0Rm9ybWF0dGVyID0ge1xuICAgIC8vIEludGVnZXJzIHN0YXkgaW50ZWdlcnMsIG90aGVyIHZhbHVlcyBnZXQgdHdvIGRlY2ltYWxzLlxuICAgIC8vIGV4OiAxIC0+IFwiMVwiIGFuZCAxLjUgLT4gXCIxLjUwXCJcbiAgICAvLyB0bzogKG4pID0+IE51bWJlci5pc0ludGVnZXIobikgPyBuIDogKG4pLnRvRml4ZWQoMilcbiAgICAvLyB3ZSBwcm92aWRlIHRoZSAndG8nIGZ1bmN0aW9uIGJlY2F1c2Ugbm9VaVNsaWRlciBleHBlY3RzIHRoYXRcbiAgICAvLyAocHJvdG90eXBlIGNvbXBhdGlibGUgdy8gd051bWIgZm9ybWF0dGluZyBsaWJyYXJ5J3Mgb2JqZWN0cykuXG4gICAgdG86IChuKSA9PiB7XG4gICAgICBpZiAobiA9PT0gMSkgeyAvLyBkb24ndCBuZWVkIHRpY2sgb24gJzEnLCB1c2VyIGNhbiBmaWd1cmUgaXQgb3V0LlxuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9IGVsc2UgaWYgKE51bWJlci5pc0ludGVnZXIobikpIHtcbiAgICAgICAgcmV0dXJuIG4gPyBgJHtufSBtaWAgOiBuOyAvLyAwIGRvZXNuJ3QgbmVlZCB1bml0cy5cbiAgICAgIH0gZWxzZSBpZiAobiAlIDAuNSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gKG4pLnRvRml4ZWQoMik7XG4gICAgICB9XG4gICAgICByZXR1cm4gJyc7IC8vIGRvbid0IG5lZWQgbGFiZWxzIG9uIGV2ZXJ5IHRpY2sgbWFya1xuICAgIH0sXG4gIH07XG5cbiAgbm9VaVNsaWRlci5jcmVhdGUoc2xpZGVyLCB7XG4gICAgcmFuZ2UsXG4gICAgc3RhcnQ6IHN0YXRlLm1heFdhbGtEaXN0YW5jZSxcbiAgICBzdGVwOiAwLjI1LFxuICAgIGNvbm5lY3Q6IFt0cnVlLCBmYWxzZV0sXG4gICAgcGlwczoge1xuICAgICAgbW9kZTogJ2NvdW50JyxcbiAgICAgIHZhbHVlczogMywgLy8gMyBtYWpvciB0aWNrc1xuICAgICAgZGVuc2l0eTogMTIuNSwgLy8gMSBzbWFsbCB0aWNrIGV2ZXJ5IDEyLjUlIChldmVyeSAwLjI1IGJ0d24gMCBhbmQgMilcbiAgICAgIGZvcm1hdDogZGlzdEZvcm1hdHRlcixcbiAgICB9LFxuICB9KTtcblxuICBzbGlkZXIubm9VaVNsaWRlci5vbigndXBkYXRlJywgKHZhbHVlcywgaGFuZGxlKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSB2YWx1ZXNbaGFuZGxlXTtcbiAgICAvLyBjb25zb2xlLmxvZyhgU2VhcmNoaW5nIHdpdGhpbiAke3ZhbHVlfSBtaWxlcy5gKTtcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXJlY3Rpb25zLS1kaXN0YW5jZS12YWx1ZScpO1xuICAgIGVsLmlubmVyVGV4dCA9IGAke051bWJlcih2YWx1ZSkudG9GaXhlZCgyKX0gbWkuYDtcbiAgICBzdGF0ZS5tYXhXYWxrRGlzdGFuY2UgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICBtYXBVcGRhdGVOZWFyYnkoKTtcbiAgfSk7XG59XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9kaXN0YW5jZVNsaWRlci5qcyIsIi8qISBub3Vpc2xpZGVyIC0gMTAuMC4wIC0gMjAxNy0wNS0yOCAxNDo1Mjo0OCAqL1xyXG5cclxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XHJcblxyXG4gICAgaWYgKCB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKSB7XHJcblxyXG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cclxuICAgICAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyApIHtcclxuXHJcbiAgICAgICAgLy8gTm9kZS9Db21tb25KU1xyXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFsc1xyXG4gICAgICAgIHdpbmRvdy5ub1VpU2xpZGVyID0gZmFjdG9yeSgpO1xyXG4gICAgfVxyXG5cclxufShmdW5jdGlvbiggKXtcclxuXHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHR2YXIgVkVSU0lPTiA9ICcxMC4wLjAnO1xyXG5cclxuXHJcblx0ZnVuY3Rpb24gaXNWYWxpZEZvcm1hdHRlciAoIGVudHJ5ICkge1xyXG5cdFx0cmV0dXJuIHR5cGVvZiBlbnRyeSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGVudHJ5LnRvID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBlbnRyeS5mcm9tID09PSAnZnVuY3Rpb24nO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gcmVtb3ZlRWxlbWVudCAoIGVsICkge1xyXG5cdFx0ZWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbCk7XHJcblx0fVxyXG5cclxuXHQvLyBCaW5kYWJsZSB2ZXJzaW9uXHJcblx0ZnVuY3Rpb24gcHJldmVudERlZmF1bHQgKCBlICkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdH1cclxuXHJcblx0Ly8gUmVtb3ZlcyBkdXBsaWNhdGVzIGZyb20gYW4gYXJyYXkuXHJcblx0ZnVuY3Rpb24gdW5pcXVlICggYXJyYXkgKSB7XHJcblx0XHRyZXR1cm4gYXJyYXkuZmlsdGVyKGZ1bmN0aW9uKGEpe1xyXG5cdFx0XHRyZXR1cm4gIXRoaXNbYV0gPyB0aGlzW2FdID0gdHJ1ZSA6IGZhbHNlO1xyXG5cdFx0fSwge30pO1xyXG5cdH1cclxuXHJcblx0Ly8gUm91bmQgYSB2YWx1ZSB0byB0aGUgY2xvc2VzdCAndG8nLlxyXG5cdGZ1bmN0aW9uIGNsb3Nlc3QgKCB2YWx1ZSwgdG8gKSB7XHJcblx0XHRyZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAvIHRvKSAqIHRvO1xyXG5cdH1cclxuXHJcblx0Ly8gQ3VycmVudCBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IHJlbGF0aXZlIHRvIHRoZSBkb2N1bWVudC5cclxuXHRmdW5jdGlvbiBvZmZzZXQgKCBlbGVtLCBvcmllbnRhdGlvbiApIHtcclxuXHJcblx0XHR2YXIgcmVjdCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHR2YXIgZG9jID0gZWxlbS5vd25lckRvY3VtZW50O1xyXG5cdFx0dmFyIGRvY0VsZW0gPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xyXG5cdFx0dmFyIHBhZ2VPZmZzZXQgPSBnZXRQYWdlT2Zmc2V0KGRvYyk7XHJcblxyXG5cdFx0Ly8gZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGNvbnRhaW5zIGxlZnQgc2Nyb2xsIGluIENocm9tZSBvbiBBbmRyb2lkLlxyXG5cdFx0Ly8gSSBoYXZlbid0IGZvdW5kIGEgZmVhdHVyZSBkZXRlY3Rpb24gdGhhdCBwcm92ZXMgdGhpcy4gV29yc3QgY2FzZVxyXG5cdFx0Ly8gc2NlbmFyaW8gb24gbWlzLW1hdGNoOiB0aGUgJ3RhcCcgZmVhdHVyZSBvbiBob3Jpem9udGFsIHNsaWRlcnMgYnJlYWtzLlxyXG5cdFx0aWYgKCAvd2Via2l0LipDaHJvbWUuKk1vYmlsZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgKSB7XHJcblx0XHRcdHBhZ2VPZmZzZXQueCA9IDA7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG9yaWVudGF0aW9uID8gKHJlY3QudG9wICsgcGFnZU9mZnNldC55IC0gZG9jRWxlbS5jbGllbnRUb3ApIDogKHJlY3QubGVmdCArIHBhZ2VPZmZzZXQueCAtIGRvY0VsZW0uY2xpZW50TGVmdCk7XHJcblx0fVxyXG5cclxuXHQvLyBDaGVja3Mgd2hldGhlciBhIHZhbHVlIGlzIG51bWVyaWNhbC5cclxuXHRmdW5jdGlvbiBpc051bWVyaWMgKCBhICkge1xyXG5cdFx0cmV0dXJuIHR5cGVvZiBhID09PSAnbnVtYmVyJyAmJiAhaXNOYU4oIGEgKSAmJiBpc0Zpbml0ZSggYSApO1xyXG5cdH1cclxuXHJcblx0Ly8gU2V0cyBhIGNsYXNzIGFuZCByZW1vdmVzIGl0IGFmdGVyIFtkdXJhdGlvbl0gbXMuXHJcblx0ZnVuY3Rpb24gYWRkQ2xhc3NGb3IgKCBlbGVtZW50LCBjbGFzc05hbWUsIGR1cmF0aW9uICkge1xyXG5cdFx0aWYgKGR1cmF0aW9uID4gMCkge1xyXG5cdFx0YWRkQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKTtcclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdHJlbW92ZUNsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcblx0XHRcdH0sIGR1cmF0aW9uKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIExpbWl0cyBhIHZhbHVlIHRvIDAgLSAxMDBcclxuXHRmdW5jdGlvbiBsaW1pdCAoIGEgKSB7XHJcblx0XHRyZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4oYSwgMTAwKSwgMCk7XHJcblx0fVxyXG5cclxuXHQvLyBXcmFwcyBhIHZhcmlhYmxlIGFzIGFuIGFycmF5LCBpZiBpdCBpc24ndCBvbmUgeWV0LlxyXG5cdC8vIE5vdGUgdGhhdCBhbiBpbnB1dCBhcnJheSBpcyByZXR1cm5lZCBieSByZWZlcmVuY2UhXHJcblx0ZnVuY3Rpb24gYXNBcnJheSAoIGEgKSB7XHJcblx0XHRyZXR1cm4gQXJyYXkuaXNBcnJheShhKSA/IGEgOiBbYV07XHJcblx0fVxyXG5cclxuXHQvLyBDb3VudHMgZGVjaW1hbHNcclxuXHRmdW5jdGlvbiBjb3VudERlY2ltYWxzICggbnVtU3RyICkge1xyXG5cdFx0bnVtU3RyID0gU3RyaW5nKG51bVN0cik7XHJcblx0XHR2YXIgcGllY2VzID0gbnVtU3RyLnNwbGl0KFwiLlwiKTtcclxuXHRcdHJldHVybiBwaWVjZXMubGVuZ3RoID4gMSA/IHBpZWNlc1sxXS5sZW5ndGggOiAwO1xyXG5cdH1cclxuXHJcblx0Ly8gaHR0cDovL3lvdW1pZ2h0bm90bmVlZGpxdWVyeS5jb20vI2FkZF9jbGFzc1xyXG5cdGZ1bmN0aW9uIGFkZENsYXNzICggZWwsIGNsYXNzTmFtZSApIHtcclxuXHRcdGlmICggZWwuY2xhc3NMaXN0ICkge1xyXG5cdFx0XHRlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRlbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gaHR0cDovL3lvdW1pZ2h0bm90bmVlZGpxdWVyeS5jb20vI3JlbW92ZV9jbGFzc1xyXG5cdGZ1bmN0aW9uIHJlbW92ZUNsYXNzICggZWwsIGNsYXNzTmFtZSApIHtcclxuXHRcdGlmICggZWwuY2xhc3NMaXN0ICkge1xyXG5cdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKCcoXnxcXFxcYiknICsgY2xhc3NOYW1lLnNwbGl0KCcgJykuam9pbignfCcpICsgJyhcXFxcYnwkKScsICdnaScpLCAnICcpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gaHR0cHM6Ly9wbGFpbmpzLmNvbS9qYXZhc2NyaXB0L2F0dHJpYnV0ZXMvYWRkaW5nLXJlbW92aW5nLWFuZC10ZXN0aW5nLWZvci1jbGFzc2VzLTkvXHJcblx0ZnVuY3Rpb24gaGFzQ2xhc3MgKCBlbCwgY2xhc3NOYW1lICkge1xyXG5cdFx0cmV0dXJuIGVsLmNsYXNzTGlzdCA/IGVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpIDogbmV3IFJlZ0V4cCgnXFxcXGInICsgY2xhc3NOYW1lICsgJ1xcXFxiJykudGVzdChlbC5jbGFzc05hbWUpO1xyXG5cdH1cclxuXHJcblx0Ly8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvdy9zY3JvbGxZI05vdGVzXHJcblx0ZnVuY3Rpb24gZ2V0UGFnZU9mZnNldCAoIGRvYyApIHtcclxuXHJcblx0XHR2YXIgc3VwcG9ydFBhZ2VPZmZzZXQgPSB3aW5kb3cucGFnZVhPZmZzZXQgIT09IHVuZGVmaW5lZDtcclxuXHRcdHZhciBpc0NTUzFDb21wYXQgPSAoKGRvYy5jb21wYXRNb2RlIHx8IFwiXCIpID09PSBcIkNTUzFDb21wYXRcIik7XHJcblx0XHR2YXIgeCA9IHN1cHBvcnRQYWdlT2Zmc2V0ID8gd2luZG93LnBhZ2VYT2Zmc2V0IDogaXNDU1MxQ29tcGF0ID8gZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IDogZG9jLmJvZHkuc2Nyb2xsTGVmdDtcclxuXHRcdHZhciB5ID0gc3VwcG9ydFBhZ2VPZmZzZXQgPyB3aW5kb3cucGFnZVlPZmZzZXQgOiBpc0NTUzFDb21wYXQgPyBkb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA6IGRvYy5ib2R5LnNjcm9sbFRvcDtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHR4OiB4LFxyXG5cdFx0XHR5OiB5XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0Ly8gd2UgcHJvdmlkZSBhIGZ1bmN0aW9uIHRvIGNvbXB1dGUgY29uc3RhbnRzIGluc3RlYWRcclxuXHQvLyBvZiBhY2Nlc3Npbmcgd2luZG93LiogYXMgc29vbiBhcyB0aGUgbW9kdWxlIG5lZWRzIGl0XHJcblx0Ly8gc28gdGhhdCB3ZSBkbyBub3QgY29tcHV0ZSBhbnl0aGluZyBpZiBub3QgbmVlZGVkXHJcblx0ZnVuY3Rpb24gZ2V0QWN0aW9ucyAoICkge1xyXG5cclxuXHRcdC8vIERldGVybWluZSB0aGUgZXZlbnRzIHRvIGJpbmQuIElFMTEgaW1wbGVtZW50cyBwb2ludGVyRXZlbnRzIHdpdGhvdXRcclxuXHRcdC8vIGEgcHJlZml4LCB3aGljaCBicmVha3MgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBJRTEwIGltcGxlbWVudGF0aW9uLlxyXG5cdFx0cmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQgPyB7XHJcblx0XHRcdHN0YXJ0OiAncG9pbnRlcmRvd24nLFxyXG5cdFx0XHRtb3ZlOiAncG9pbnRlcm1vdmUnLFxyXG5cdFx0XHRlbmQ6ICdwb2ludGVydXAnXHJcblx0XHR9IDogd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkID8ge1xyXG5cdFx0XHRzdGFydDogJ01TUG9pbnRlckRvd24nLFxyXG5cdFx0XHRtb3ZlOiAnTVNQb2ludGVyTW92ZScsXHJcblx0XHRcdGVuZDogJ01TUG9pbnRlclVwJ1xyXG5cdFx0fSA6IHtcclxuXHRcdFx0c3RhcnQ6ICdtb3VzZWRvd24gdG91Y2hzdGFydCcsXHJcblx0XHRcdG1vdmU6ICdtb3VzZW1vdmUgdG91Y2htb3ZlJyxcclxuXHRcdFx0ZW5kOiAnbW91c2V1cCB0b3VjaGVuZCdcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9FdmVudExpc3RlbmVyT3B0aW9ucy9ibG9iL2doLXBhZ2VzL2V4cGxhaW5lci5tZFxyXG5cdC8vIElzc3VlICM3ODVcclxuXHRmdW5jdGlvbiBnZXRTdXBwb3J0c1Bhc3NpdmUgKCApIHtcclxuXHJcblx0XHR2YXIgc3VwcG9ydHNQYXNzaXZlID0gZmFsc2U7XHJcblxyXG5cdFx0dHJ5IHtcclxuXHJcblx0XHRcdHZhciBvcHRzID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHtcclxuXHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0c3VwcG9ydHNQYXNzaXZlID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBudWxsLCBvcHRzKTtcclxuXHJcblx0XHR9IGNhdGNoIChlKSB7fVxyXG5cclxuXHRcdHJldHVybiBzdXBwb3J0c1Bhc3NpdmU7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBnZXRTdXBwb3J0c1RvdWNoQWN0aW9uTm9uZSAoICkge1xyXG5cdFx0cmV0dXJuIHdpbmRvdy5DU1MgJiYgQ1NTLnN1cHBvcnRzICYmIENTUy5zdXBwb3J0cygndG91Y2gtYWN0aW9uJywgJ25vbmUnKTtcclxuXHR9XHJcblxyXG5cclxuLy8gVmFsdWUgY2FsY3VsYXRpb25cclxuXHJcblx0Ly8gRGV0ZXJtaW5lIHRoZSBzaXplIG9mIGEgc3ViLXJhbmdlIGluIHJlbGF0aW9uIHRvIGEgZnVsbCByYW5nZS5cclxuXHRmdW5jdGlvbiBzdWJSYW5nZVJhdGlvICggcGEsIHBiICkge1xyXG5cdFx0cmV0dXJuICgxMDAgLyAocGIgLSBwYSkpO1xyXG5cdH1cclxuXHJcblx0Ly8gKHBlcmNlbnRhZ2UpIEhvdyBtYW55IHBlcmNlbnQgaXMgdGhpcyB2YWx1ZSBvZiB0aGlzIHJhbmdlP1xyXG5cdGZ1bmN0aW9uIGZyb21QZXJjZW50YWdlICggcmFuZ2UsIHZhbHVlICkge1xyXG5cdFx0cmV0dXJuICh2YWx1ZSAqIDEwMCkgLyAoIHJhbmdlWzFdIC0gcmFuZ2VbMF0gKTtcclxuXHR9XHJcblxyXG5cdC8vIChwZXJjZW50YWdlKSBXaGVyZSBpcyB0aGlzIHZhbHVlIG9uIHRoaXMgcmFuZ2U/XHJcblx0ZnVuY3Rpb24gdG9QZXJjZW50YWdlICggcmFuZ2UsIHZhbHVlICkge1xyXG5cdFx0cmV0dXJuIGZyb21QZXJjZW50YWdlKCByYW5nZSwgcmFuZ2VbMF0gPCAwID9cclxuXHRcdFx0dmFsdWUgKyBNYXRoLmFicyhyYW5nZVswXSkgOlxyXG5cdFx0XHRcdHZhbHVlIC0gcmFuZ2VbMF0gKTtcclxuXHR9XHJcblxyXG5cdC8vICh2YWx1ZSkgSG93IG11Y2ggaXMgdGhpcyBwZXJjZW50YWdlIG9uIHRoaXMgcmFuZ2U/XHJcblx0ZnVuY3Rpb24gaXNQZXJjZW50YWdlICggcmFuZ2UsIHZhbHVlICkge1xyXG5cdFx0cmV0dXJuICgodmFsdWUgKiAoIHJhbmdlWzFdIC0gcmFuZ2VbMF0gKSkgLyAxMDApICsgcmFuZ2VbMF07XHJcblx0fVxyXG5cclxuXHJcbi8vIFJhbmdlIGNvbnZlcnNpb25cclxuXHJcblx0ZnVuY3Rpb24gZ2V0SiAoIHZhbHVlLCBhcnIgKSB7XHJcblxyXG5cdFx0dmFyIGogPSAxO1xyXG5cclxuXHRcdHdoaWxlICggdmFsdWUgPj0gYXJyW2pdICl7XHJcblx0XHRcdGogKz0gMTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gajtcclxuXHR9XHJcblxyXG5cdC8vIChwZXJjZW50YWdlKSBJbnB1dCBhIHZhbHVlLCBmaW5kIHdoZXJlLCBvbiBhIHNjYWxlIG9mIDAtMTAwLCBpdCBhcHBsaWVzLlxyXG5cdGZ1bmN0aW9uIHRvU3RlcHBpbmcgKCB4VmFsLCB4UGN0LCB2YWx1ZSApIHtcclxuXHJcblx0XHRpZiAoIHZhbHVlID49IHhWYWwuc2xpY2UoLTEpWzBdICl7XHJcblx0XHRcdHJldHVybiAxMDA7XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIGogPSBnZXRKKCB2YWx1ZSwgeFZhbCApLCB2YSwgdmIsIHBhLCBwYjtcclxuXHJcblx0XHR2YSA9IHhWYWxbai0xXTtcclxuXHRcdHZiID0geFZhbFtqXTtcclxuXHRcdHBhID0geFBjdFtqLTFdO1xyXG5cdFx0cGIgPSB4UGN0W2pdO1xyXG5cclxuXHRcdHJldHVybiBwYSArICh0b1BlcmNlbnRhZ2UoW3ZhLCB2Yl0sIHZhbHVlKSAvIHN1YlJhbmdlUmF0aW8gKHBhLCBwYikpO1xyXG5cdH1cclxuXHJcblx0Ly8gKHZhbHVlKSBJbnB1dCBhIHBlcmNlbnRhZ2UsIGZpbmQgd2hlcmUgaXQgaXMgb24gdGhlIHNwZWNpZmllZCByYW5nZS5cclxuXHRmdW5jdGlvbiBmcm9tU3RlcHBpbmcgKCB4VmFsLCB4UGN0LCB2YWx1ZSApIHtcclxuXHJcblx0XHQvLyBUaGVyZSBpcyBubyByYW5nZSBncm91cCB0aGF0IGZpdHMgMTAwXHJcblx0XHRpZiAoIHZhbHVlID49IDEwMCApe1xyXG5cdFx0XHRyZXR1cm4geFZhbC5zbGljZSgtMSlbMF07XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIGogPSBnZXRKKCB2YWx1ZSwgeFBjdCApLCB2YSwgdmIsIHBhLCBwYjtcclxuXHJcblx0XHR2YSA9IHhWYWxbai0xXTtcclxuXHRcdHZiID0geFZhbFtqXTtcclxuXHRcdHBhID0geFBjdFtqLTFdO1xyXG5cdFx0cGIgPSB4UGN0W2pdO1xyXG5cclxuXHRcdHJldHVybiBpc1BlcmNlbnRhZ2UoW3ZhLCB2Yl0sICh2YWx1ZSAtIHBhKSAqIHN1YlJhbmdlUmF0aW8gKHBhLCBwYikpO1xyXG5cdH1cclxuXHJcblx0Ly8gKHBlcmNlbnRhZ2UpIEdldCB0aGUgc3RlcCB0aGF0IGFwcGxpZXMgYXQgYSBjZXJ0YWluIHZhbHVlLlxyXG5cdGZ1bmN0aW9uIGdldFN0ZXAgKCB4UGN0LCB4U3RlcHMsIHNuYXAsIHZhbHVlICkge1xyXG5cclxuXHRcdGlmICggdmFsdWUgPT09IDEwMCApIHtcclxuXHRcdFx0cmV0dXJuIHZhbHVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHZhciBqID0gZ2V0SiggdmFsdWUsIHhQY3QgKSwgYSwgYjtcclxuXHJcblx0XHQvLyBJZiAnc25hcCcgaXMgc2V0LCBzdGVwcyBhcmUgdXNlZCBhcyBmaXhlZCBwb2ludHMgb24gdGhlIHNsaWRlci5cclxuXHRcdGlmICggc25hcCApIHtcclxuXHJcblx0XHRcdGEgPSB4UGN0W2otMV07XHJcblx0XHRcdGIgPSB4UGN0W2pdO1xyXG5cclxuXHRcdFx0Ly8gRmluZCB0aGUgY2xvc2VzdCBwb3NpdGlvbiwgYSBvciBiLlxyXG5cdFx0XHRpZiAoKHZhbHVlIC0gYSkgPiAoKGItYSkvMikpe1xyXG5cdFx0XHRcdHJldHVybiBiO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gYTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICF4U3RlcHNbai0xXSApe1xyXG5cdFx0XHRyZXR1cm4gdmFsdWU7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHhQY3Rbai0xXSArIGNsb3Nlc3QoXHJcblx0XHRcdHZhbHVlIC0geFBjdFtqLTFdLFxyXG5cdFx0XHR4U3RlcHNbai0xXVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cclxuLy8gRW50cnkgcGFyc2luZ1xyXG5cclxuXHRmdW5jdGlvbiBoYW5kbGVFbnRyeVBvaW50ICggaW5kZXgsIHZhbHVlLCB0aGF0ICkge1xyXG5cclxuXHRcdHZhciBwZXJjZW50YWdlO1xyXG5cclxuXHRcdC8vIFdyYXAgbnVtZXJpY2FsIGlucHV0IGluIGFuIGFycmF5LlxyXG5cdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgKSB7XHJcblx0XHRcdHZhbHVlID0gW3ZhbHVlXTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZWplY3QgYW55IGludmFsaWQgaW5wdXQsIGJ5IHRlc3Rpbmcgd2hldGhlciB2YWx1ZSBpcyBhbiBhcnJheS5cclxuXHRcdGlmICggT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKCB2YWx1ZSApICE9PSAnW29iamVjdCBBcnJheV0nICl7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3JhbmdlJyBjb250YWlucyBpbnZhbGlkIHZhbHVlLlwiKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDb3ZlcnQgbWluL21heCBzeW50YXggdG8gMCBhbmQgMTAwLlxyXG5cdFx0aWYgKCBpbmRleCA9PT0gJ21pbicgKSB7XHJcblx0XHRcdHBlcmNlbnRhZ2UgPSAwO1xyXG5cdFx0fSBlbHNlIGlmICggaW5kZXggPT09ICdtYXgnICkge1xyXG5cdFx0XHRwZXJjZW50YWdlID0gMTAwO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cGVyY2VudGFnZSA9IHBhcnNlRmxvYXQoIGluZGV4ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZm9yIGNvcnJlY3QgaW5wdXQuXHJcblx0XHRpZiAoICFpc051bWVyaWMoIHBlcmNlbnRhZ2UgKSB8fCAhaXNOdW1lcmljKCB2YWx1ZVswXSApICkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdyYW5nZScgdmFsdWUgaXNuJ3QgbnVtZXJpYy5cIik7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU3RvcmUgdmFsdWVzLlxyXG5cdFx0dGhhdC54UGN0LnB1c2goIHBlcmNlbnRhZ2UgKTtcclxuXHRcdHRoYXQueFZhbC5wdXNoKCB2YWx1ZVswXSApO1xyXG5cclxuXHRcdC8vIE5hTiB3aWxsIGV2YWx1YXRlIHRvIGZhbHNlIHRvbywgYnV0IHRvIGtlZXBcclxuXHRcdC8vIGxvZ2dpbmcgY2xlYXIsIHNldCBzdGVwIGV4cGxpY2l0bHkuIE1ha2Ugc3VyZVxyXG5cdFx0Ly8gbm90IHRvIG92ZXJyaWRlIHRoZSAnc3RlcCcgc2V0dGluZyB3aXRoIGZhbHNlLlxyXG5cdFx0aWYgKCAhcGVyY2VudGFnZSApIHtcclxuXHRcdFx0aWYgKCAhaXNOYU4oIHZhbHVlWzFdICkgKSB7XHJcblx0XHRcdFx0dGhhdC54U3RlcHNbMF0gPSB2YWx1ZVsxXTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhhdC54U3RlcHMucHVzaCggaXNOYU4odmFsdWVbMV0pID8gZmFsc2UgOiB2YWx1ZVsxXSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoYXQueEhpZ2hlc3RDb21wbGV0ZVN0ZXAucHVzaCgwKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGhhbmRsZVN0ZXBQb2ludCAoIGksIG4sIHRoYXQgKSB7XHJcblxyXG5cdFx0Ly8gSWdub3JlICdmYWxzZScgc3RlcHBpbmcuXHJcblx0XHRpZiAoICFuICkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBGYWN0b3IgdG8gcmFuZ2UgcmF0aW9cclxuXHRcdHRoYXQueFN0ZXBzW2ldID0gZnJvbVBlcmNlbnRhZ2UoW1xyXG5cdFx0XHQgdGhhdC54VmFsW2ldXHJcblx0XHRcdCx0aGF0LnhWYWxbaSsxXVxyXG5cdFx0XSwgbikgLyBzdWJSYW5nZVJhdGlvIChcclxuXHRcdFx0dGhhdC54UGN0W2ldLFxyXG5cdFx0XHR0aGF0LnhQY3RbaSsxXSApO1xyXG5cclxuXHRcdHZhciB0b3RhbFN0ZXBzID0gKHRoYXQueFZhbFtpKzFdIC0gdGhhdC54VmFsW2ldKSAvIHRoYXQueE51bVN0ZXBzW2ldO1xyXG5cdFx0dmFyIGhpZ2hlc3RTdGVwID0gTWF0aC5jZWlsKE51bWJlcih0b3RhbFN0ZXBzLnRvRml4ZWQoMykpIC0gMSk7XHJcblx0XHR2YXIgc3RlcCA9IHRoYXQueFZhbFtpXSArICh0aGF0LnhOdW1TdGVwc1tpXSAqIGhpZ2hlc3RTdGVwKTtcclxuXHJcblx0XHR0aGF0LnhIaWdoZXN0Q29tcGxldGVTdGVwW2ldID0gc3RlcDtcclxuXHR9XHJcblxyXG5cclxuLy8gSW50ZXJmYWNlXHJcblxyXG5cdGZ1bmN0aW9uIFNwZWN0cnVtICggZW50cnksIHNuYXAsIHNpbmdsZVN0ZXAgKSB7XHJcblxyXG5cdFx0dGhpcy54UGN0ID0gW107XHJcblx0XHR0aGlzLnhWYWwgPSBbXTtcclxuXHRcdHRoaXMueFN0ZXBzID0gWyBzaW5nbGVTdGVwIHx8IGZhbHNlIF07XHJcblx0XHR0aGlzLnhOdW1TdGVwcyA9IFsgZmFsc2UgXTtcclxuXHRcdHRoaXMueEhpZ2hlc3RDb21wbGV0ZVN0ZXAgPSBbXTtcclxuXHJcblx0XHR0aGlzLnNuYXAgPSBzbmFwO1xyXG5cclxuXHRcdHZhciBpbmRleCwgb3JkZXJlZCA9IFsgLyogWzAsICdtaW4nXSwgWzEsICc1MCUnXSwgWzIsICdtYXgnXSAqLyBdO1xyXG5cclxuXHRcdC8vIE1hcCB0aGUgb2JqZWN0IGtleXMgdG8gYW4gYXJyYXkuXHJcblx0XHRmb3IgKCBpbmRleCBpbiBlbnRyeSApIHtcclxuXHRcdFx0aWYgKCBlbnRyeS5oYXNPd25Qcm9wZXJ0eShpbmRleCkgKSB7XHJcblx0XHRcdFx0b3JkZXJlZC5wdXNoKFtlbnRyeVtpbmRleF0sIGluZGV4XSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBTb3J0IGFsbCBlbnRyaWVzIGJ5IHZhbHVlIChudW1lcmljIHNvcnQpLlxyXG5cdFx0aWYgKCBvcmRlcmVkLmxlbmd0aCAmJiB0eXBlb2Ygb3JkZXJlZFswXVswXSA9PT0gXCJvYmplY3RcIiApIHtcclxuXHRcdFx0b3JkZXJlZC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGFbMF1bMF0gLSBiWzBdWzBdOyB9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdG9yZGVyZWQuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhWzBdIC0gYlswXTsgfSk7XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdC8vIENvbnZlcnQgYWxsIGVudHJpZXMgdG8gc3VicmFuZ2VzLlxyXG5cdFx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IG9yZGVyZWQubGVuZ3RoOyBpbmRleCsrICkge1xyXG5cdFx0XHRoYW5kbGVFbnRyeVBvaW50KG9yZGVyZWRbaW5kZXhdWzFdLCBvcmRlcmVkW2luZGV4XVswXSwgdGhpcyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU3RvcmUgdGhlIGFjdHVhbCBzdGVwIHZhbHVlcy5cclxuXHRcdC8vIHhTdGVwcyBpcyBzb3J0ZWQgaW4gdGhlIHNhbWUgb3JkZXIgYXMgeFBjdCBhbmQgeFZhbC5cclxuXHRcdHRoaXMueE51bVN0ZXBzID0gdGhpcy54U3RlcHMuc2xpY2UoMCk7XHJcblxyXG5cdFx0Ly8gQ29udmVydCBhbGwgbnVtZXJpYyBzdGVwcyB0byB0aGUgcGVyY2VudGFnZSBvZiB0aGUgc3VicmFuZ2UgdGhleSByZXByZXNlbnQuXHJcblx0XHRmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy54TnVtU3RlcHMubGVuZ3RoOyBpbmRleCsrICkge1xyXG5cdFx0XHRoYW5kbGVTdGVwUG9pbnQoaW5kZXgsIHRoaXMueE51bVN0ZXBzW2luZGV4XSwgdGhpcyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRTcGVjdHJ1bS5wcm90b3R5cGUuZ2V0TWFyZ2luID0gZnVuY3Rpb24gKCB2YWx1ZSApIHtcclxuXHJcblx0XHR2YXIgc3RlcCA9IHRoaXMueE51bVN0ZXBzWzBdO1xyXG5cclxuXHRcdGlmICggc3RlcCAmJiAoKHZhbHVlIC8gc3RlcCkgJSAxKSAhPT0gMCApIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnbGltaXQnLCAnbWFyZ2luJyBhbmQgJ3BhZGRpbmcnIG11c3QgYmUgZGl2aXNpYmxlIGJ5IHN0ZXAuXCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLnhQY3QubGVuZ3RoID09PSAyID8gZnJvbVBlcmNlbnRhZ2UodGhpcy54VmFsLCB2YWx1ZSkgOiBmYWxzZTtcclxuXHR9O1xyXG5cclxuXHRTcGVjdHJ1bS5wcm90b3R5cGUudG9TdGVwcGluZyA9IGZ1bmN0aW9uICggdmFsdWUgKSB7XHJcblxyXG5cdFx0dmFsdWUgPSB0b1N0ZXBwaW5nKCB0aGlzLnhWYWwsIHRoaXMueFBjdCwgdmFsdWUgKTtcclxuXHJcblx0XHRyZXR1cm4gdmFsdWU7XHJcblx0fTtcclxuXHJcblx0U3BlY3RydW0ucHJvdG90eXBlLmZyb21TdGVwcGluZyA9IGZ1bmN0aW9uICggdmFsdWUgKSB7XHJcblxyXG5cdFx0cmV0dXJuIGZyb21TdGVwcGluZyggdGhpcy54VmFsLCB0aGlzLnhQY3QsIHZhbHVlICk7XHJcblx0fTtcclxuXHJcblx0U3BlY3RydW0ucHJvdG90eXBlLmdldFN0ZXAgPSBmdW5jdGlvbiAoIHZhbHVlICkge1xyXG5cclxuXHRcdHZhbHVlID0gZ2V0U3RlcCh0aGlzLnhQY3QsIHRoaXMueFN0ZXBzLCB0aGlzLnNuYXAsIHZhbHVlICk7XHJcblxyXG5cdFx0cmV0dXJuIHZhbHVlO1xyXG5cdH07XHJcblxyXG5cdFNwZWN0cnVtLnByb3RvdHlwZS5nZXROZWFyYnlTdGVwcyA9IGZ1bmN0aW9uICggdmFsdWUgKSB7XHJcblxyXG5cdFx0dmFyIGogPSBnZXRKKHZhbHVlLCB0aGlzLnhQY3QpO1xyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHN0ZXBCZWZvcmU6IHsgc3RhcnRWYWx1ZTogdGhpcy54VmFsW2otMl0sIHN0ZXA6IHRoaXMueE51bVN0ZXBzW2otMl0sIGhpZ2hlc3RTdGVwOiB0aGlzLnhIaWdoZXN0Q29tcGxldGVTdGVwW2otMl0gfSxcclxuXHRcdFx0dGhpc1N0ZXA6IHsgc3RhcnRWYWx1ZTogdGhpcy54VmFsW2otMV0sIHN0ZXA6IHRoaXMueE51bVN0ZXBzW2otMV0sIGhpZ2hlc3RTdGVwOiB0aGlzLnhIaWdoZXN0Q29tcGxldGVTdGVwW2otMV0gfSxcclxuXHRcdFx0c3RlcEFmdGVyOiB7IHN0YXJ0VmFsdWU6IHRoaXMueFZhbFtqLTBdLCBzdGVwOiB0aGlzLnhOdW1TdGVwc1tqLTBdLCBoaWdoZXN0U3RlcDogdGhpcy54SGlnaGVzdENvbXBsZXRlU3RlcFtqLTBdIH1cclxuXHRcdH07XHJcblx0fTtcclxuXHJcblx0U3BlY3RydW0ucHJvdG90eXBlLmNvdW50U3RlcERlY2ltYWxzID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0dmFyIHN0ZXBEZWNpbWFscyA9IHRoaXMueE51bVN0ZXBzLm1hcChjb3VudERlY2ltYWxzKTtcclxuXHRcdHJldHVybiBNYXRoLm1heC5hcHBseShudWxsLCBzdGVwRGVjaW1hbHMpO1xyXG4gXHR9O1xyXG5cclxuXHQvLyBPdXRzaWRlIHRlc3RpbmdcclxuXHRTcGVjdHJ1bS5wcm90b3R5cGUuY29udmVydCA9IGZ1bmN0aW9uICggdmFsdWUgKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5nZXRTdGVwKHRoaXMudG9TdGVwcGluZyh2YWx1ZSkpO1xyXG5cdH07XHJcblxyXG4vKlx0RXZlcnkgaW5wdXQgb3B0aW9uIGlzIHRlc3RlZCBhbmQgcGFyc2VkLiBUaGlzJ2xsIHByZXZlbnRcclxuXHRlbmRsZXNzIHZhbGlkYXRpb24gaW4gaW50ZXJuYWwgbWV0aG9kcy4gVGhlc2UgdGVzdHMgYXJlXHJcblx0c3RydWN0dXJlZCB3aXRoIGFuIGl0ZW0gZm9yIGV2ZXJ5IG9wdGlvbiBhdmFpbGFibGUuIEFuXHJcblx0b3B0aW9uIGNhbiBiZSBtYXJrZWQgYXMgcmVxdWlyZWQgYnkgc2V0dGluZyB0aGUgJ3InIGZsYWcuXHJcblx0VGhlIHRlc3RpbmcgZnVuY3Rpb24gaXMgcHJvdmlkZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XHJcblx0XHQtIFRoZSBwcm92aWRlZCB2YWx1ZSBmb3IgdGhlIG9wdGlvbjtcclxuXHRcdC0gQSByZWZlcmVuY2UgdG8gdGhlIG9wdGlvbnMgb2JqZWN0O1xyXG5cdFx0LSBUaGUgbmFtZSBmb3IgdGhlIG9wdGlvbjtcclxuXHJcblx0VGhlIHRlc3RpbmcgZnVuY3Rpb24gcmV0dXJucyBmYWxzZSB3aGVuIGFuIGVycm9yIGlzIGRldGVjdGVkLFxyXG5cdG9yIHRydWUgd2hlbiBldmVyeXRoaW5nIGlzIE9LLiBJdCBjYW4gYWxzbyBtb2RpZnkgdGhlIG9wdGlvblxyXG5cdG9iamVjdCwgdG8gbWFrZSBzdXJlIGFsbCB2YWx1ZXMgY2FuIGJlIGNvcnJlY3RseSBsb29wZWQgZWxzZXdoZXJlLiAqL1xyXG5cclxuXHR2YXIgZGVmYXVsdEZvcm1hdHRlciA9IHsgJ3RvJzogZnVuY3Rpb24oIHZhbHVlICl7XHJcblx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZS50b0ZpeGVkKDIpO1xyXG5cdH0sICdmcm9tJzogTnVtYmVyIH07XHJcblxyXG5cdGZ1bmN0aW9uIHZhbGlkYXRlRm9ybWF0ICggZW50cnkgKSB7XHJcblxyXG5cdFx0Ly8gQW55IG9iamVjdCB3aXRoIGEgdG8gYW5kIGZyb20gbWV0aG9kIGlzIHN1cHBvcnRlZC5cclxuXHRcdGlmICggaXNWYWxpZEZvcm1hdHRlcihlbnRyeSkgKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2Zvcm1hdCcgcmVxdWlyZXMgJ3RvJyBhbmQgJ2Zyb20nIG1ldGhvZHMuXCIpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gdGVzdFN0ZXAgKCBwYXJzZWQsIGVudHJ5ICkge1xyXG5cclxuXHRcdGlmICggIWlzTnVtZXJpYyggZW50cnkgKSApIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnc3RlcCcgaXMgbm90IG51bWVyaWMuXCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFRoZSBzdGVwIG9wdGlvbiBjYW4gc3RpbGwgYmUgdXNlZCB0byBzZXQgc3RlcHBpbmdcclxuXHRcdC8vIGZvciBsaW5lYXIgc2xpZGVycy4gT3ZlcndyaXR0ZW4gaWYgc2V0IGluICdyYW5nZScuXHJcblx0XHRwYXJzZWQuc2luZ2xlU3RlcCA9IGVudHJ5O1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gdGVzdFJhbmdlICggcGFyc2VkLCBlbnRyeSApIHtcclxuXHJcblx0XHQvLyBGaWx0ZXIgaW5jb3JyZWN0IGlucHV0LlxyXG5cdFx0aWYgKCB0eXBlb2YgZW50cnkgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkoZW50cnkpICkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdyYW5nZScgaXMgbm90IGFuIG9iamVjdC5cIik7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2F0Y2ggbWlzc2luZyBzdGFydCBvciBlbmQuXHJcblx0XHRpZiAoIGVudHJ5Lm1pbiA9PT0gdW5kZWZpbmVkIHx8IGVudHJ5Lm1heCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6IE1pc3NpbmcgJ21pbicgb3IgJ21heCcgaW4gJ3JhbmdlJy5cIik7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2F0Y2ggZXF1YWwgc3RhcnQgb3IgZW5kLlxyXG5cdFx0aWYgKCBlbnRyeS5taW4gPT09IGVudHJ5Lm1heCApIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncmFuZ2UnICdtaW4nIGFuZCAnbWF4JyBjYW5ub3QgYmUgZXF1YWwuXCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHBhcnNlZC5zcGVjdHJ1bSA9IG5ldyBTcGVjdHJ1bShlbnRyeSwgcGFyc2VkLnNuYXAsIHBhcnNlZC5zaW5nbGVTdGVwKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHRlc3RTdGFydCAoIHBhcnNlZCwgZW50cnkgKSB7XHJcblxyXG5cdFx0ZW50cnkgPSBhc0FycmF5KGVudHJ5KTtcclxuXHJcblx0XHQvLyBWYWxpZGF0ZSBpbnB1dC4gVmFsdWVzIGFyZW4ndCB0ZXN0ZWQsIGFzIHRoZSBwdWJsaWMgLnZhbCBtZXRob2RcclxuXHRcdC8vIHdpbGwgYWx3YXlzIHByb3ZpZGUgYSB2YWxpZCBsb2NhdGlvbi5cclxuXHRcdGlmICggIUFycmF5LmlzQXJyYXkoIGVudHJ5ICkgfHwgIWVudHJ5Lmxlbmd0aCApIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnc3RhcnQnIG9wdGlvbiBpcyBpbmNvcnJlY3QuXCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFN0b3JlIHRoZSBudW1iZXIgb2YgaGFuZGxlcy5cclxuXHRcdHBhcnNlZC5oYW5kbGVzID0gZW50cnkubGVuZ3RoO1xyXG5cclxuXHRcdC8vIFdoZW4gdGhlIHNsaWRlciBpcyBpbml0aWFsaXplZCwgdGhlIC52YWwgbWV0aG9kIHdpbGxcclxuXHRcdC8vIGJlIGNhbGxlZCB3aXRoIHRoZSBzdGFydCBvcHRpb25zLlxyXG5cdFx0cGFyc2VkLnN0YXJ0ID0gZW50cnk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiB0ZXN0U25hcCAoIHBhcnNlZCwgZW50cnkgKSB7XHJcblxyXG5cdFx0Ly8gRW5mb3JjZSAxMDAlIHN0ZXBwaW5nIHdpdGhpbiBzdWJyYW5nZXMuXHJcblx0XHRwYXJzZWQuc25hcCA9IGVudHJ5O1xyXG5cclxuXHRcdGlmICggdHlwZW9mIGVudHJ5ICE9PSAnYm9vbGVhbicgKXtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnc25hcCcgb3B0aW9uIG11c3QgYmUgYSBib29sZWFuLlwiKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHRlc3RBbmltYXRlICggcGFyc2VkLCBlbnRyeSApIHtcclxuXHJcblx0XHQvLyBFbmZvcmNlIDEwMCUgc3RlcHBpbmcgd2l0aGluIHN1YnJhbmdlcy5cclxuXHRcdHBhcnNlZC5hbmltYXRlID0gZW50cnk7XHJcblxyXG5cdFx0aWYgKCB0eXBlb2YgZW50cnkgIT09ICdib29sZWFuJyApe1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdhbmltYXRlJyBvcHRpb24gbXVzdCBiZSBhIGJvb2xlYW4uXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gdGVzdEFuaW1hdGlvbkR1cmF0aW9uICggcGFyc2VkLCBlbnRyeSApIHtcclxuXHJcblx0XHRwYXJzZWQuYW5pbWF0aW9uRHVyYXRpb24gPSBlbnRyeTtcclxuXHJcblx0XHRpZiAoIHR5cGVvZiBlbnRyeSAhPT0gJ251bWJlcicgKXtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnYW5pbWF0aW9uRHVyYXRpb24nIG9wdGlvbiBtdXN0IGJlIGEgbnVtYmVyLlwiKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHRlc3RDb25uZWN0ICggcGFyc2VkLCBlbnRyeSApIHtcclxuXHJcblx0XHR2YXIgY29ubmVjdCA9IFtmYWxzZV07XHJcblx0XHR2YXIgaTtcclxuXHJcblx0XHQvLyBNYXAgbGVnYWN5IG9wdGlvbnNcclxuXHRcdGlmICggZW50cnkgPT09ICdsb3dlcicgKSB7XHJcblx0XHRcdGVudHJ5ID0gW3RydWUsIGZhbHNlXTtcclxuXHRcdH1cclxuXHJcblx0XHRlbHNlIGlmICggZW50cnkgPT09ICd1cHBlcicgKSB7XHJcblx0XHRcdGVudHJ5ID0gW2ZhbHNlLCB0cnVlXTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBIYW5kbGUgYm9vbGVhbiBvcHRpb25zXHJcblx0XHRpZiAoIGVudHJ5ID09PSB0cnVlIHx8IGVudHJ5ID09PSBmYWxzZSApIHtcclxuXHJcblx0XHRcdGZvciAoIGkgPSAxOyBpIDwgcGFyc2VkLmhhbmRsZXM7IGkrKyApIHtcclxuXHRcdFx0XHRjb25uZWN0LnB1c2goZW50cnkpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25uZWN0LnB1c2goZmFsc2UpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJlamVjdCBpbnZhbGlkIGlucHV0XHJcblx0XHRlbHNlIGlmICggIUFycmF5LmlzQXJyYXkoIGVudHJ5ICkgfHwgIWVudHJ5Lmxlbmd0aCB8fCBlbnRyeS5sZW5ndGggIT09IHBhcnNlZC5oYW5kbGVzICsgMSApIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnY29ubmVjdCcgb3B0aW9uIGRvZXNuJ3QgbWF0Y2ggaGFuZGxlIGNvdW50LlwiKTtcclxuXHRcdH1cclxuXHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Y29ubmVjdCA9IGVudHJ5O1xyXG5cdFx0fVxyXG5cclxuXHRcdHBhcnNlZC5jb25uZWN0ID0gY29ubmVjdDtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHRlc3RPcmllbnRhdGlvbiAoIHBhcnNlZCwgZW50cnkgKSB7XHJcblxyXG5cdFx0Ly8gU2V0IG9yaWVudGF0aW9uIHRvIGFuIGEgbnVtZXJpY2FsIHZhbHVlIGZvciBlYXN5XHJcblx0XHQvLyBhcnJheSBzZWxlY3Rpb24uXHJcblx0XHRzd2l0Y2ggKCBlbnRyeSApe1xyXG5cdFx0ICBjYXNlICdob3Jpem9udGFsJzpcclxuXHRcdFx0cGFyc2VkLm9ydCA9IDA7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0ICBjYXNlICd2ZXJ0aWNhbCc6XHJcblx0XHRcdHBhcnNlZC5vcnQgPSAxO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdCAgZGVmYXVsdDpcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnb3JpZW50YXRpb24nIG9wdGlvbiBpcyBpbnZhbGlkLlwiKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHRlc3RNYXJnaW4gKCBwYXJzZWQsIGVudHJ5ICkge1xyXG5cclxuXHRcdGlmICggIWlzTnVtZXJpYyhlbnRyeSkgKXtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnbWFyZ2luJyBvcHRpb24gbXVzdCBiZSBudW1lcmljLlwiKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJc3N1ZSAjNTgyXHJcblx0XHRpZiAoIGVudHJ5ID09PSAwICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0cGFyc2VkLm1hcmdpbiA9IHBhcnNlZC5zcGVjdHJ1bS5nZXRNYXJnaW4oZW50cnkpO1xyXG5cclxuXHRcdGlmICggIXBhcnNlZC5tYXJnaW4gKSB7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ21hcmdpbicgb3B0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIG9uIGxpbmVhciBzbGlkZXJzLlwiKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHRlc3RMaW1pdCAoIHBhcnNlZCwgZW50cnkgKSB7XHJcblxyXG5cdFx0aWYgKCAhaXNOdW1lcmljKGVudHJ5KSApe1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdsaW1pdCcgb3B0aW9uIG11c3QgYmUgbnVtZXJpYy5cIik7XHJcblx0XHR9XHJcblxyXG5cdFx0cGFyc2VkLmxpbWl0ID0gcGFyc2VkLnNwZWN0cnVtLmdldE1hcmdpbihlbnRyeSk7XHJcblxyXG5cdFx0aWYgKCAhcGFyc2VkLmxpbWl0IHx8IHBhcnNlZC5oYW5kbGVzIDwgMiApIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnbGltaXQnIG9wdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBvbiBsaW5lYXIgc2xpZGVycyB3aXRoIDIgb3IgbW9yZSBoYW5kbGVzLlwiKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHRlc3RQYWRkaW5nICggcGFyc2VkLCBlbnRyeSApIHtcclxuXHJcblx0XHRpZiAoICFpc051bWVyaWMoZW50cnkpICl7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3BhZGRpbmcnIG9wdGlvbiBtdXN0IGJlIG51bWVyaWMuXCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggZW50cnkgPT09IDAgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRwYXJzZWQucGFkZGluZyA9IHBhcnNlZC5zcGVjdHJ1bS5nZXRNYXJnaW4oZW50cnkpO1xyXG5cclxuXHRcdGlmICggIXBhcnNlZC5wYWRkaW5nICkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdwYWRkaW5nJyBvcHRpb24gaXMgb25seSBzdXBwb3J0ZWQgb24gbGluZWFyIHNsaWRlcnMuXCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggcGFyc2VkLnBhZGRpbmcgPCAwICkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdwYWRkaW5nJyBvcHRpb24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlci5cIik7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBwYXJzZWQucGFkZGluZyA+PSA1MCApIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncGFkZGluZycgb3B0aW9uIG11c3QgYmUgbGVzcyB0aGFuIGhhbGYgdGhlIHJhbmdlLlwiKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHRlc3REaXJlY3Rpb24gKCBwYXJzZWQsIGVudHJ5ICkge1xyXG5cclxuXHRcdC8vIFNldCBkaXJlY3Rpb24gYXMgYSBudW1lcmljYWwgdmFsdWUgZm9yIGVhc3kgcGFyc2luZy5cclxuXHRcdC8vIEludmVydCBjb25uZWN0aW9uIGZvciBSVEwgc2xpZGVycywgc28gdGhhdCB0aGUgcHJvcGVyXHJcblx0XHQvLyBoYW5kbGVzIGdldCB0aGUgY29ubmVjdC9iYWNrZ3JvdW5kIGNsYXNzZXMuXHJcblx0XHRzd2l0Y2ggKCBlbnRyeSApIHtcclxuXHRcdCAgY2FzZSAnbHRyJzpcclxuXHRcdFx0cGFyc2VkLmRpciA9IDA7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0ICBjYXNlICdydGwnOlxyXG5cdFx0XHRwYXJzZWQuZGlyID0gMTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHQgIGRlZmF1bHQ6XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2RpcmVjdGlvbicgb3B0aW9uIHdhcyBub3QgcmVjb2duaXplZC5cIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiB0ZXN0QmVoYXZpb3VyICggcGFyc2VkLCBlbnRyeSApIHtcclxuXHJcblx0XHQvLyBNYWtlIHN1cmUgdGhlIGlucHV0IGlzIGEgc3RyaW5nLlxyXG5cdFx0aWYgKCB0eXBlb2YgZW50cnkgIT09ICdzdHJpbmcnICkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdiZWhhdmlvdXInIG11c3QgYmUgYSBzdHJpbmcgY29udGFpbmluZyBvcHRpb25zLlwiKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBpZiB0aGUgc3RyaW5nIGNvbnRhaW5zIGFueSBrZXl3b3Jkcy5cclxuXHRcdC8vIE5vbmUgYXJlIHJlcXVpcmVkLlxyXG5cdFx0dmFyIHRhcCA9IGVudHJ5LmluZGV4T2YoJ3RhcCcpID49IDA7XHJcblx0XHR2YXIgZHJhZyA9IGVudHJ5LmluZGV4T2YoJ2RyYWcnKSA+PSAwO1xyXG5cdFx0dmFyIGZpeGVkID0gZW50cnkuaW5kZXhPZignZml4ZWQnKSA+PSAwO1xyXG5cdFx0dmFyIHNuYXAgPSBlbnRyeS5pbmRleE9mKCdzbmFwJykgPj0gMDtcclxuXHRcdHZhciBob3ZlciA9IGVudHJ5LmluZGV4T2YoJ2hvdmVyJykgPj0gMDtcclxuXHJcblx0XHRpZiAoIGZpeGVkICkge1xyXG5cclxuXHRcdFx0aWYgKCBwYXJzZWQuaGFuZGxlcyAhPT0gMiApIHtcclxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdmaXhlZCcgYmVoYXZpb3VyIG11c3QgYmUgdXNlZCB3aXRoIDIgaGFuZGxlc1wiKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVXNlIG1hcmdpbiB0byBlbmZvcmNlIGZpeGVkIHN0YXRlXHJcblx0XHRcdHRlc3RNYXJnaW4ocGFyc2VkLCBwYXJzZWQuc3RhcnRbMV0gLSBwYXJzZWQuc3RhcnRbMF0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHBhcnNlZC5ldmVudHMgPSB7XHJcblx0XHRcdHRhcDogdGFwIHx8IHNuYXAsXHJcblx0XHRcdGRyYWc6IGRyYWcsXHJcblx0XHRcdGZpeGVkOiBmaXhlZCxcclxuXHRcdFx0c25hcDogc25hcCxcclxuXHRcdFx0aG92ZXI6IGhvdmVyXHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gdGVzdFRvb2x0aXBzICggcGFyc2VkLCBlbnRyeSApIHtcclxuXHJcblx0XHRpZiAoIGVudHJ5ID09PSBmYWxzZSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGVsc2UgaWYgKCBlbnRyeSA9PT0gdHJ1ZSApIHtcclxuXHJcblx0XHRcdHBhcnNlZC50b29sdGlwcyA9IFtdO1xyXG5cclxuXHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgcGFyc2VkLmhhbmRsZXM7IGkrKyApIHtcclxuXHRcdFx0XHRwYXJzZWQudG9vbHRpcHMucHVzaCh0cnVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGVsc2Uge1xyXG5cclxuXHRcdFx0cGFyc2VkLnRvb2x0aXBzID0gYXNBcnJheShlbnRyeSk7XHJcblxyXG5cdFx0XHRpZiAoIHBhcnNlZC50b29sdGlwcy5sZW5ndGggIT09IHBhcnNlZC5oYW5kbGVzICkge1xyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogbXVzdCBwYXNzIGEgZm9ybWF0dGVyIGZvciBhbGwgaGFuZGxlcy5cIik7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHBhcnNlZC50b29sdGlwcy5mb3JFYWNoKGZ1bmN0aW9uKGZvcm1hdHRlcil7XHJcblx0XHRcdFx0aWYgKCB0eXBlb2YgZm9ybWF0dGVyICE9PSAnYm9vbGVhbicgJiYgKHR5cGVvZiBmb3JtYXR0ZXIgIT09ICdvYmplY3QnIHx8IHR5cGVvZiBmb3JtYXR0ZXIudG8gIT09ICdmdW5jdGlvbicpICkge1xyXG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAndG9vbHRpcHMnIG11c3QgYmUgcGFzc2VkIGEgZm9ybWF0dGVyIG9yICdmYWxzZScuXCIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiB0ZXN0QXJpYUZvcm1hdCAoIHBhcnNlZCwgZW50cnkgKSB7XHJcblx0XHRwYXJzZWQuYXJpYUZvcm1hdCA9IGVudHJ5O1xyXG5cdFx0dmFsaWRhdGVGb3JtYXQoZW50cnkpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gdGVzdEZvcm1hdCAoIHBhcnNlZCwgZW50cnkgKSB7XHJcblx0XHRwYXJzZWQuZm9ybWF0ID0gZW50cnk7XHJcblx0XHR2YWxpZGF0ZUZvcm1hdChlbnRyeSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiB0ZXN0Q3NzUHJlZml4ICggcGFyc2VkLCBlbnRyeSApIHtcclxuXHJcblx0XHRpZiAoIGVudHJ5ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVudHJ5ICE9PSAnc3RyaW5nJyAmJiBlbnRyeSAhPT0gZmFsc2UgKSB7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2Nzc1ByZWZpeCcgbXVzdCBiZSBhIHN0cmluZyBvciBgZmFsc2VgLlwiKTtcclxuXHRcdH1cclxuXHJcblx0XHRwYXJzZWQuY3NzUHJlZml4ID0gZW50cnk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiB0ZXN0Q3NzQ2xhc3NlcyAoIHBhcnNlZCwgZW50cnkgKSB7XHJcblxyXG5cdFx0aWYgKCBlbnRyeSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbnRyeSAhPT0gJ29iamVjdCcgKSB7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2Nzc0NsYXNzZXMnIG11c3QgYmUgYW4gb2JqZWN0LlwiKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHR5cGVvZiBwYXJzZWQuY3NzUHJlZml4ID09PSAnc3RyaW5nJyApIHtcclxuXHRcdFx0cGFyc2VkLmNzc0NsYXNzZXMgPSB7fTtcclxuXHJcblx0XHRcdGZvciAoIHZhciBrZXkgaW4gZW50cnkgKSB7XHJcblx0XHRcdFx0aWYgKCAhZW50cnkuaGFzT3duUHJvcGVydHkoa2V5KSApIHsgY29udGludWU7IH1cclxuXHJcblx0XHRcdFx0cGFyc2VkLmNzc0NsYXNzZXNba2V5XSA9IHBhcnNlZC5jc3NQcmVmaXggKyBlbnRyeVtrZXldO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRwYXJzZWQuY3NzQ2xhc3NlcyA9IGVudHJ5O1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gdGVzdFVzZVJhZiAoIHBhcnNlZCwgZW50cnkgKSB7XHJcblx0XHRpZiAoIGVudHJ5ID09PSB0cnVlIHx8IGVudHJ5ID09PSBmYWxzZSApIHtcclxuXHRcdFx0cGFyc2VkLnVzZVJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGVudHJ5O1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAndXNlUmVxdWVzdEFuaW1hdGlvbkZyYW1lJyBvcHRpb24gc2hvdWxkIGJlIHRydWUgKGRlZmF1bHQpIG9yIGZhbHNlLlwiKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIFRlc3QgYWxsIGRldmVsb3BlciBzZXR0aW5ncyBhbmQgcGFyc2UgdG8gYXNzdW1wdGlvbi1zYWZlIHZhbHVlcy5cclxuXHRmdW5jdGlvbiB0ZXN0T3B0aW9ucyAoIG9wdGlvbnMgKSB7XHJcblxyXG5cdFx0Ly8gVG8gcHJvdmUgYSBmaXggZm9yICM1MzcsIGZyZWV6ZSBvcHRpb25zIGhlcmUuXHJcblx0XHQvLyBJZiB0aGUgb2JqZWN0IGlzIG1vZGlmaWVkLCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cclxuXHRcdC8vIE9iamVjdC5mcmVlemUob3B0aW9ucyk7XHJcblxyXG5cdFx0dmFyIHBhcnNlZCA9IHtcclxuXHRcdFx0bWFyZ2luOiAwLFxyXG5cdFx0XHRsaW1pdDogMCxcclxuXHRcdFx0cGFkZGluZzogMCxcclxuXHRcdFx0YW5pbWF0ZTogdHJ1ZSxcclxuXHRcdFx0YW5pbWF0aW9uRHVyYXRpb246IDMwMCxcclxuXHRcdFx0YXJpYUZvcm1hdDogZGVmYXVsdEZvcm1hdHRlcixcclxuXHRcdFx0Zm9ybWF0OiBkZWZhdWx0Rm9ybWF0dGVyXHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFRlc3RzIGFyZSBleGVjdXRlZCBpbiB0aGUgb3JkZXIgdGhleSBhcmUgcHJlc2VudGVkIGhlcmUuXHJcblx0XHR2YXIgdGVzdHMgPSB7XHJcblx0XHRcdCdzdGVwJzogeyByOiBmYWxzZSwgdDogdGVzdFN0ZXAgfSxcclxuXHRcdFx0J3N0YXJ0JzogeyByOiB0cnVlLCB0OiB0ZXN0U3RhcnQgfSxcclxuXHRcdFx0J2Nvbm5lY3QnOiB7IHI6IHRydWUsIHQ6IHRlc3RDb25uZWN0IH0sXHJcblx0XHRcdCdkaXJlY3Rpb24nOiB7IHI6IHRydWUsIHQ6IHRlc3REaXJlY3Rpb24gfSxcclxuXHRcdFx0J3NuYXAnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0U25hcCB9LFxyXG5cdFx0XHQnYW5pbWF0ZSc6IHsgcjogZmFsc2UsIHQ6IHRlc3RBbmltYXRlIH0sXHJcblx0XHRcdCdhbmltYXRpb25EdXJhdGlvbic6IHsgcjogZmFsc2UsIHQ6IHRlc3RBbmltYXRpb25EdXJhdGlvbiB9LFxyXG5cdFx0XHQncmFuZ2UnOiB7IHI6IHRydWUsIHQ6IHRlc3RSYW5nZSB9LFxyXG5cdFx0XHQnb3JpZW50YXRpb24nOiB7IHI6IGZhbHNlLCB0OiB0ZXN0T3JpZW50YXRpb24gfSxcclxuXHRcdFx0J21hcmdpbic6IHsgcjogZmFsc2UsIHQ6IHRlc3RNYXJnaW4gfSxcclxuXHRcdFx0J2xpbWl0JzogeyByOiBmYWxzZSwgdDogdGVzdExpbWl0IH0sXHJcblx0XHRcdCdwYWRkaW5nJzogeyByOiBmYWxzZSwgdDogdGVzdFBhZGRpbmcgfSxcclxuXHRcdFx0J2JlaGF2aW91cic6IHsgcjogdHJ1ZSwgdDogdGVzdEJlaGF2aW91ciB9LFxyXG5cdFx0XHQnYXJpYUZvcm1hdCc6IHsgcjogZmFsc2UsIHQ6IHRlc3RBcmlhRm9ybWF0IH0sXHJcblx0XHRcdCdmb3JtYXQnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0Rm9ybWF0IH0sXHJcblx0XHRcdCd0b29sdGlwcyc6IHsgcjogZmFsc2UsIHQ6IHRlc3RUb29sdGlwcyB9LFxyXG5cdFx0XHQnY3NzUHJlZml4JzogeyByOiBmYWxzZSwgdDogdGVzdENzc1ByZWZpeCB9LFxyXG5cdFx0XHQnY3NzQ2xhc3Nlcyc6IHsgcjogZmFsc2UsIHQ6IHRlc3RDc3NDbGFzc2VzIH0sXHJcblx0XHRcdCd1c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0VXNlUmFmIH1cclxuXHRcdH07XHJcblxyXG5cdFx0dmFyIGRlZmF1bHRzID0ge1xyXG5cdFx0XHQnY29ubmVjdCc6IGZhbHNlLFxyXG5cdFx0XHQnZGlyZWN0aW9uJzogJ2x0cicsXHJcblx0XHRcdCdiZWhhdmlvdXInOiAndGFwJyxcclxuXHRcdFx0J29yaWVudGF0aW9uJzogJ2hvcml6b250YWwnLFxyXG5cdFx0XHQnY3NzUHJlZml4JyA6ICdub1VpLScsXHJcblx0XHRcdCdjc3NDbGFzc2VzJzoge1xyXG5cdFx0XHRcdHRhcmdldDogJ3RhcmdldCcsXHJcblx0XHRcdFx0YmFzZTogJ2Jhc2UnLFxyXG5cdFx0XHRcdG9yaWdpbjogJ29yaWdpbicsXHJcblx0XHRcdFx0aGFuZGxlOiAnaGFuZGxlJyxcclxuXHRcdFx0XHRoYW5kbGVMb3dlcjogJ2hhbmRsZS1sb3dlcicsXHJcblx0XHRcdFx0aGFuZGxlVXBwZXI6ICdoYW5kbGUtdXBwZXInLFxyXG5cdFx0XHRcdGhvcml6b250YWw6ICdob3Jpem9udGFsJyxcclxuXHRcdFx0XHR2ZXJ0aWNhbDogJ3ZlcnRpY2FsJyxcclxuXHRcdFx0XHRiYWNrZ3JvdW5kOiAnYmFja2dyb3VuZCcsXHJcblx0XHRcdFx0Y29ubmVjdDogJ2Nvbm5lY3QnLFxyXG5cdFx0XHRcdGx0cjogJ2x0cicsXHJcblx0XHRcdFx0cnRsOiAncnRsJyxcclxuXHRcdFx0XHRkcmFnZ2FibGU6ICdkcmFnZ2FibGUnLFxyXG5cdFx0XHRcdGRyYWc6ICdzdGF0ZS1kcmFnJyxcclxuXHRcdFx0XHR0YXA6ICdzdGF0ZS10YXAnLFxyXG5cdFx0XHRcdGFjdGl2ZTogJ2FjdGl2ZScsXHJcblx0XHRcdFx0dG9vbHRpcDogJ3Rvb2x0aXAnLFxyXG5cdFx0XHRcdHBpcHM6ICdwaXBzJyxcclxuXHRcdFx0XHRwaXBzSG9yaXpvbnRhbDogJ3BpcHMtaG9yaXpvbnRhbCcsXHJcblx0XHRcdFx0cGlwc1ZlcnRpY2FsOiAncGlwcy12ZXJ0aWNhbCcsXHJcblx0XHRcdFx0bWFya2VyOiAnbWFya2VyJyxcclxuXHRcdFx0XHRtYXJrZXJIb3Jpem9udGFsOiAnbWFya2VyLWhvcml6b250YWwnLFxyXG5cdFx0XHRcdG1hcmtlclZlcnRpY2FsOiAnbWFya2VyLXZlcnRpY2FsJyxcclxuXHRcdFx0XHRtYXJrZXJOb3JtYWw6ICdtYXJrZXItbm9ybWFsJyxcclxuXHRcdFx0XHRtYXJrZXJMYXJnZTogJ21hcmtlci1sYXJnZScsXHJcblx0XHRcdFx0bWFya2VyU3ViOiAnbWFya2VyLXN1YicsXHJcblx0XHRcdFx0dmFsdWU6ICd2YWx1ZScsXHJcblx0XHRcdFx0dmFsdWVIb3Jpem9udGFsOiAndmFsdWUtaG9yaXpvbnRhbCcsXHJcblx0XHRcdFx0dmFsdWVWZXJ0aWNhbDogJ3ZhbHVlLXZlcnRpY2FsJyxcclxuXHRcdFx0XHR2YWx1ZU5vcm1hbDogJ3ZhbHVlLW5vcm1hbCcsXHJcblx0XHRcdFx0dmFsdWVMYXJnZTogJ3ZhbHVlLWxhcmdlJyxcclxuXHRcdFx0XHR2YWx1ZVN1YjogJ3ZhbHVlLXN1YidcclxuXHRcdFx0fSxcclxuXHRcdFx0J3VzZVJlcXVlc3RBbmltYXRpb25GcmFtZSc6IHRydWVcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gQXJpYUZvcm1hdCBkZWZhdWx0cyB0byByZWd1bGFyIGZvcm1hdCwgaWYgYW55LlxyXG5cdFx0aWYgKCBvcHRpb25zLmZvcm1hdCAmJiAhb3B0aW9ucy5hcmlhRm9ybWF0ICkge1xyXG5cdFx0XHRvcHRpb25zLmFyaWFGb3JtYXQgPSBvcHRpb25zLmZvcm1hdDtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBSdW4gYWxsIG9wdGlvbnMgdGhyb3VnaCBhIHRlc3RpbmcgbWVjaGFuaXNtIHRvIGVuc3VyZSBjb3JyZWN0XHJcblx0XHQvLyBpbnB1dC4gSXQgc2hvdWxkIGJlIG5vdGVkIHRoYXQgb3B0aW9ucyBtaWdodCBnZXQgbW9kaWZpZWQgdG9cclxuXHRcdC8vIGJlIGhhbmRsZWQgcHJvcGVybHkuIEUuZy4gd3JhcHBpbmcgaW50ZWdlcnMgaW4gYXJyYXlzLlxyXG5cdFx0T2JqZWN0LmtleXModGVzdHMpLmZvckVhY2goZnVuY3Rpb24oIG5hbWUgKXtcclxuXHJcblx0XHRcdC8vIElmIHRoZSBvcHRpb24gaXNuJ3Qgc2V0LCBidXQgaXQgaXMgcmVxdWlyZWQsIHRocm93IGFuIGVycm9yLlxyXG5cdFx0XHRpZiAoIG9wdGlvbnNbbmFtZV0gPT09IHVuZGVmaW5lZCAmJiBkZWZhdWx0c1tuYW1lXSA9PT0gdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdFx0XHRpZiAoIHRlc3RzW25hbWVdLnIgKSB7XHJcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdcIiArIG5hbWUgKyBcIicgaXMgcmVxdWlyZWQuXCIpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRlc3RzW25hbWVdLnQoIHBhcnNlZCwgb3B0aW9uc1tuYW1lXSA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdHNbbmFtZV0gOiBvcHRpb25zW25hbWVdICk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBGb3J3YXJkIHBpcHMgb3B0aW9uc1xyXG5cdFx0cGFyc2VkLnBpcHMgPSBvcHRpb25zLnBpcHM7XHJcblxyXG5cdFx0dmFyIHN0eWxlcyA9IFtbJ2xlZnQnLCAndG9wJ10sIFsncmlnaHQnLCAnYm90dG9tJ11dO1xyXG5cclxuXHRcdC8vIFByZS1kZWZpbmUgdGhlIHN0eWxlcy5cclxuXHRcdHBhcnNlZC5zdHlsZSA9IHN0eWxlc1twYXJzZWQuZGlyXVtwYXJzZWQub3J0XTtcclxuXHRcdHBhcnNlZC5zdHlsZU9wb3NpdGUgPSBzdHlsZXNbcGFyc2VkLmRpcj8wOjFdW3BhcnNlZC5vcnRdO1xyXG5cclxuXHRcdHJldHVybiBwYXJzZWQ7XHJcblx0fVxyXG5cclxuXHJcbmZ1bmN0aW9uIGNsb3N1cmUgKCB0YXJnZXQsIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucyApe1xyXG5cclxuXHR2YXIgYWN0aW9ucyA9IGdldEFjdGlvbnMoKTtcclxuXHR2YXIgc3VwcG9ydHNUb3VjaEFjdGlvbk5vbmUgPSBnZXRTdXBwb3J0c1RvdWNoQWN0aW9uTm9uZSgpO1xyXG5cdHZhciBzdXBwb3J0c1Bhc3NpdmUgPSBzdXBwb3J0c1RvdWNoQWN0aW9uTm9uZSAmJiBnZXRTdXBwb3J0c1Bhc3NpdmUoKTtcclxuXHJcblx0Ly8gQWxsIHZhcmlhYmxlcyBsb2NhbCB0byAnY2xvc3VyZScgYXJlIHByZWZpeGVkIHdpdGggJ3Njb3BlXydcclxuXHR2YXIgc2NvcGVfVGFyZ2V0ID0gdGFyZ2V0O1xyXG5cdHZhciBzY29wZV9Mb2NhdGlvbnMgPSBbXTtcclxuXHR2YXIgc2NvcGVfQmFzZTtcclxuXHR2YXIgc2NvcGVfSGFuZGxlcztcclxuXHR2YXIgc2NvcGVfSGFuZGxlTnVtYmVycyA9IFtdO1xyXG5cdHZhciBzY29wZV9BY3RpdmVIYW5kbGUgPSBmYWxzZTtcclxuXHR2YXIgc2NvcGVfQ29ubmVjdHM7XHJcblx0dmFyIHNjb3BlX1NwZWN0cnVtID0gb3B0aW9ucy5zcGVjdHJ1bTtcclxuXHR2YXIgc2NvcGVfVmFsdWVzID0gW107XHJcblx0dmFyIHNjb3BlX0V2ZW50cyA9IHt9O1xyXG5cdHZhciBzY29wZV9TZWxmO1xyXG5cdHZhciBzY29wZV9QaXBzO1xyXG5cdHZhciBzY29wZV9MaXN0ZW5lcnMgPSBudWxsO1xyXG5cdHZhciBzY29wZV9Eb2N1bWVudCA9IHRhcmdldC5vd25lckRvY3VtZW50O1xyXG5cdHZhciBzY29wZV9Eb2N1bWVudEVsZW1lbnQgPSBzY29wZV9Eb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcblx0dmFyIHNjb3BlX0JvZHkgPSBzY29wZV9Eb2N1bWVudC5ib2R5O1xyXG5cclxuXHJcblx0Ly8gQ3JlYXRlcyBhIG5vZGUsIGFkZHMgaXQgdG8gdGFyZ2V0LCByZXR1cm5zIHRoZSBuZXcgbm9kZS5cclxuXHRmdW5jdGlvbiBhZGROb2RlVG8gKCB0YXJnZXQsIGNsYXNzTmFtZSApIHtcclxuXHJcblx0XHR2YXIgZGl2ID0gc2NvcGVfRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG5cdFx0aWYgKCBjbGFzc05hbWUgKSB7XHJcblx0XHRcdGFkZENsYXNzKGRpdiwgY2xhc3NOYW1lKTtcclxuXHRcdH1cclxuXHJcblx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoZGl2KTtcclxuXHJcblx0XHRyZXR1cm4gZGl2O1xyXG5cdH1cclxuXHJcblx0Ly8gQXBwZW5kIGEgb3JpZ2luIHRvIHRoZSBiYXNlXHJcblx0ZnVuY3Rpb24gYWRkT3JpZ2luICggYmFzZSwgaGFuZGxlTnVtYmVyICkge1xyXG5cclxuXHRcdHZhciBvcmlnaW4gPSBhZGROb2RlVG8oYmFzZSwgb3B0aW9ucy5jc3NDbGFzc2VzLm9yaWdpbik7XHJcblx0XHR2YXIgaGFuZGxlID0gYWRkTm9kZVRvKG9yaWdpbiwgb3B0aW9ucy5jc3NDbGFzc2VzLmhhbmRsZSk7XHJcblxyXG5cdFx0aGFuZGxlLnNldEF0dHJpYnV0ZSgnZGF0YS1oYW5kbGUnLCBoYW5kbGVOdW1iZXIpO1xyXG5cclxuXHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvR2xvYmFsX2F0dHJpYnV0ZXMvdGFiaW5kZXhcclxuXHRcdC8vIDAgPSBmb2N1c2FibGUgYW5kIHJlYWNoYWJsZVxyXG5cdFx0aGFuZGxlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xyXG5cdFx0aGFuZGxlLnNldEF0dHJpYnV0ZSgncm9sZScsICdzbGlkZXInKTtcclxuXHRcdGhhbmRsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtb3JpZW50YXRpb24nLCBvcHRpb25zLm9ydCA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCcpO1xyXG5cclxuXHRcdGlmICggaGFuZGxlTnVtYmVyID09PSAwICkge1xyXG5cdFx0XHRhZGRDbGFzcyhoYW5kbGUsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5oYW5kbGVMb3dlcik7XHJcblx0XHR9XHJcblxyXG5cdFx0ZWxzZSBpZiAoIGhhbmRsZU51bWJlciA9PT0gb3B0aW9ucy5oYW5kbGVzIC0gMSApIHtcclxuXHRcdFx0YWRkQ2xhc3MoaGFuZGxlLCBvcHRpb25zLmNzc0NsYXNzZXMuaGFuZGxlVXBwZXIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBvcmlnaW47XHJcblx0fVxyXG5cclxuXHQvLyBJbnNlcnQgbm9kZXMgZm9yIGNvbm5lY3QgZWxlbWVudHNcclxuXHRmdW5jdGlvbiBhZGRDb25uZWN0ICggYmFzZSwgYWRkICkge1xyXG5cclxuXHRcdGlmICggIWFkZCApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBhZGROb2RlVG8oYmFzZSwgb3B0aW9ucy5jc3NDbGFzc2VzLmNvbm5lY3QpO1xyXG5cdH1cclxuXHJcblx0Ly8gQWRkIGhhbmRsZXMgdG8gdGhlIHNsaWRlciBiYXNlLlxyXG5cdGZ1bmN0aW9uIGFkZEVsZW1lbnRzICggY29ubmVjdE9wdGlvbnMsIGJhc2UgKSB7XHJcblxyXG5cdFx0c2NvcGVfSGFuZGxlcyA9IFtdO1xyXG5cdFx0c2NvcGVfQ29ubmVjdHMgPSBbXTtcclxuXHJcblx0XHRzY29wZV9Db25uZWN0cy5wdXNoKGFkZENvbm5lY3QoYmFzZSwgY29ubmVjdE9wdGlvbnNbMF0pKTtcclxuXHJcblx0XHQvLyBbOjo6Ok89PT09Tz09PT1PPT09PV1cclxuXHRcdC8vIGNvbm5lY3RPcHRpb25zID0gWzAsIDEsIDEsIDFdXHJcblxyXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5oYW5kbGVzOyBpKysgKSB7XHJcblx0XHRcdC8vIEtlZXAgYSBsaXN0IG9mIGFsbCBhZGRlZCBoYW5kbGVzLlxyXG5cdFx0XHRzY29wZV9IYW5kbGVzLnB1c2goYWRkT3JpZ2luKGJhc2UsIGkpKTtcclxuXHRcdFx0c2NvcGVfSGFuZGxlTnVtYmVyc1tpXSA9IGk7XHJcblx0XHRcdHNjb3BlX0Nvbm5lY3RzLnB1c2goYWRkQ29ubmVjdChiYXNlLCBjb25uZWN0T3B0aW9uc1tpICsgMV0pKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIEluaXRpYWxpemUgYSBzaW5nbGUgc2xpZGVyLlxyXG5cdGZ1bmN0aW9uIGFkZFNsaWRlciAoIHRhcmdldCApIHtcclxuXHJcblx0XHQvLyBBcHBseSBjbGFzc2VzIGFuZCBkYXRhIHRvIHRoZSB0YXJnZXQuXHJcblx0XHRhZGRDbGFzcyh0YXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy50YXJnZXQpO1xyXG5cclxuXHRcdGlmICggb3B0aW9ucy5kaXIgPT09IDAgKSB7XHJcblx0XHRcdGFkZENsYXNzKHRhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLmx0cik7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRhZGRDbGFzcyh0YXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5ydGwpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5vcnQgPT09IDAgKSB7XHJcblx0XHRcdGFkZENsYXNzKHRhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLmhvcml6b250YWwpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0YWRkQ2xhc3ModGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMudmVydGljYWwpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHNjb3BlX0Jhc2UgPSBhZGROb2RlVG8odGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMuYmFzZSk7XHJcblx0fVxyXG5cclxuXHJcblx0ZnVuY3Rpb24gYWRkVG9vbHRpcCAoIGhhbmRsZSwgaGFuZGxlTnVtYmVyICkge1xyXG5cclxuXHRcdGlmICggIW9wdGlvbnMudG9vbHRpcHNbaGFuZGxlTnVtYmVyXSApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBhZGROb2RlVG8oaGFuZGxlLmZpcnN0Q2hpbGQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy50b29sdGlwKTtcclxuXHR9XHJcblxyXG5cdC8vIFRoZSB0b29sdGlwcyBvcHRpb24gaXMgYSBzaG9ydGhhbmQgZm9yIHVzaW5nIHRoZSAndXBkYXRlJyBldmVudC5cclxuXHRmdW5jdGlvbiB0b29sdGlwcyAoICkge1xyXG5cclxuXHRcdC8vIFRvb2x0aXBzIGFyZSBhZGRlZCB3aXRoIG9wdGlvbnMudG9vbHRpcHMgaW4gb3JpZ2luYWwgb3JkZXIuXHJcblx0XHR2YXIgdGlwcyA9IHNjb3BlX0hhbmRsZXMubWFwKGFkZFRvb2x0aXApO1xyXG5cclxuXHRcdGJpbmRFdmVudCgndXBkYXRlJywgZnVuY3Rpb24odmFsdWVzLCBoYW5kbGVOdW1iZXIsIHVuZW5jb2RlZCkge1xyXG5cclxuXHRcdFx0aWYgKCAhdGlwc1toYW5kbGVOdW1iZXJdICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIGZvcm1hdHRlZFZhbHVlID0gdmFsdWVzW2hhbmRsZU51bWJlcl07XHJcblxyXG5cdFx0XHRpZiAoIG9wdGlvbnMudG9vbHRpcHNbaGFuZGxlTnVtYmVyXSAhPT0gdHJ1ZSApIHtcclxuXHRcdFx0XHRmb3JtYXR0ZWRWYWx1ZSA9IG9wdGlvbnMudG9vbHRpcHNbaGFuZGxlTnVtYmVyXS50byh1bmVuY29kZWRbaGFuZGxlTnVtYmVyXSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRpcHNbaGFuZGxlTnVtYmVyXS5pbm5lckhUTUwgPSBmb3JtYXR0ZWRWYWx1ZTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblxyXG5cdGZ1bmN0aW9uIGFyaWEgKCApIHtcclxuXHJcblx0XHRiaW5kRXZlbnQoJ3VwZGF0ZScsIGZ1bmN0aW9uICggdmFsdWVzLCBoYW5kbGVOdW1iZXIsIHVuZW5jb2RlZCwgdGFwLCBwb3NpdGlvbnMgKSB7XHJcblxyXG5cdFx0XHQvLyBVcGRhdGUgQXJpYSBWYWx1ZXMgZm9yIGFsbCBoYW5kbGVzLCBhcyBhIGNoYW5nZSBpbiBvbmUgY2hhbmdlcyBtaW4gYW5kIG1heCB2YWx1ZXMgZm9yIHRoZSBuZXh0LlxyXG5cdFx0XHRzY29wZV9IYW5kbGVOdW1iZXJzLmZvckVhY2goZnVuY3Rpb24oIGhhbmRsZU51bWJlciApe1xyXG5cclxuXHRcdFx0XHR2YXIgaGFuZGxlID0gc2NvcGVfSGFuZGxlc1toYW5kbGVOdW1iZXJdO1xyXG5cclxuXHRcdFx0XHR2YXIgbWluID0gY2hlY2tIYW5kbGVQb3NpdGlvbihzY29wZV9Mb2NhdGlvbnMsIGhhbmRsZU51bWJlciwgMCwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XHJcblx0XHRcdFx0dmFyIG1heCA9IGNoZWNrSGFuZGxlUG9zaXRpb24oc2NvcGVfTG9jYXRpb25zLCBoYW5kbGVOdW1iZXIsIDEwMCwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XHJcblxyXG5cdFx0XHRcdHZhciBub3cgPSBwb3NpdGlvbnNbaGFuZGxlTnVtYmVyXTtcclxuXHRcdFx0XHR2YXIgdGV4dCA9IG9wdGlvbnMuYXJpYUZvcm1hdC50byh1bmVuY29kZWRbaGFuZGxlTnVtYmVyXSk7XHJcblxyXG5cdFx0XHRcdGhhbmRsZS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVtaW4nLCBtaW4udG9GaXhlZCgxKSk7XHJcblx0XHRcdFx0aGFuZGxlLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW1heCcsIG1heC50b0ZpeGVkKDEpKTtcclxuXHRcdFx0XHRoYW5kbGUuY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbm93Jywgbm93LnRvRml4ZWQoMSkpO1xyXG5cdFx0XHRcdGhhbmRsZS5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWV0ZXh0JywgdGV4dCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHJcblx0ZnVuY3Rpb24gZ2V0R3JvdXAgKCBtb2RlLCB2YWx1ZXMsIHN0ZXBwZWQgKSB7XHJcblxyXG5cdFx0Ly8gVXNlIHRoZSByYW5nZS5cclxuXHRcdGlmICggbW9kZSA9PT0gJ3JhbmdlJyB8fCBtb2RlID09PSAnc3RlcHMnICkge1xyXG5cdFx0XHRyZXR1cm4gc2NvcGVfU3BlY3RydW0ueFZhbDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG1vZGUgPT09ICdjb3VudCcgKSB7XHJcblxyXG5cdFx0XHRpZiAoICF2YWx1ZXMgKSB7XHJcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAndmFsdWVzJyByZXF1aXJlZCBmb3IgbW9kZSAnY291bnQnLlwiKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gRGl2aWRlIDAgLSAxMDAgaW4gJ2NvdW50JyBwYXJ0cy5cclxuXHRcdFx0dmFyIHNwcmVhZCA9ICggMTAwIC8gKHZhbHVlcyAtIDEpICk7XHJcblx0XHRcdHZhciB2O1xyXG5cdFx0XHR2YXIgaSA9IDA7XHJcblxyXG5cdFx0XHR2YWx1ZXMgPSBbXTtcclxuXHJcblx0XHRcdC8vIExpc3QgdGhlc2UgcGFydHMgYW5kIGhhdmUgdGhlbSBoYW5kbGVkIGFzICdwb3NpdGlvbnMnLlxyXG5cdFx0XHR3aGlsZSAoICh2ID0gaSsrICogc3ByZWFkKSA8PSAxMDAgKSB7XHJcblx0XHRcdFx0dmFsdWVzLnB1c2godik7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdG1vZGUgPSAncG9zaXRpb25zJztcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG1vZGUgPT09ICdwb3NpdGlvbnMnICkge1xyXG5cclxuXHRcdFx0Ly8gTWFwIGFsbCBwZXJjZW50YWdlcyB0byBvbi1yYW5nZSB2YWx1ZXMuXHJcblx0XHRcdHJldHVybiB2YWx1ZXMubWFwKGZ1bmN0aW9uKCB2YWx1ZSApe1xyXG5cdFx0XHRcdHJldHVybiBzY29wZV9TcGVjdHJ1bS5mcm9tU3RlcHBpbmcoIHN0ZXBwZWQgPyBzY29wZV9TcGVjdHJ1bS5nZXRTdGVwKCB2YWx1ZSApIDogdmFsdWUgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBtb2RlID09PSAndmFsdWVzJyApIHtcclxuXHJcblx0XHRcdC8vIElmIHRoZSB2YWx1ZSBtdXN0IGJlIHN0ZXBwZWQsIGl0IG5lZWRzIHRvIGJlIGNvbnZlcnRlZCB0byBhIHBlcmNlbnRhZ2UgZmlyc3QuXHJcblx0XHRcdGlmICggc3RlcHBlZCApIHtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHZhbHVlcy5tYXAoZnVuY3Rpb24oIHZhbHVlICl7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ29udmVydCB0byBwZXJjZW50YWdlLCBhcHBseSBzdGVwLCByZXR1cm4gdG8gdmFsdWUuXHJcblx0XHRcdFx0XHRyZXR1cm4gc2NvcGVfU3BlY3RydW0uZnJvbVN0ZXBwaW5nKCBzY29wZV9TcGVjdHJ1bS5nZXRTdGVwKCBzY29wZV9TcGVjdHJ1bS50b1N0ZXBwaW5nKCB2YWx1ZSApICkgKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIE90aGVyd2lzZSwgd2UgY2FuIHNpbXBseSB1c2UgdGhlIHZhbHVlcy5cclxuXHRcdFx0cmV0dXJuIHZhbHVlcztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGdlbmVyYXRlU3ByZWFkICggZGVuc2l0eSwgbW9kZSwgZ3JvdXAgKSB7XHJcblxyXG5cdFx0ZnVuY3Rpb24gc2FmZUluY3JlbWVudCh2YWx1ZSwgaW5jcmVtZW50KSB7XHJcblx0XHRcdC8vIEF2b2lkIGZsb2F0aW5nIHBvaW50IHZhcmlhbmNlIGJ5IGRyb3BwaW5nIHRoZSBzbWFsbGVzdCBkZWNpbWFsIHBsYWNlcy5cclxuXHRcdFx0cmV0dXJuICh2YWx1ZSArIGluY3JlbWVudCkudG9GaXhlZCg3KSAvIDE7XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIGluZGV4ZXMgPSB7fTtcclxuXHRcdHZhciBmaXJzdEluUmFuZ2UgPSBzY29wZV9TcGVjdHJ1bS54VmFsWzBdO1xyXG5cdFx0dmFyIGxhc3RJblJhbmdlID0gc2NvcGVfU3BlY3RydW0ueFZhbFtzY29wZV9TcGVjdHJ1bS54VmFsLmxlbmd0aC0xXTtcclxuXHRcdHZhciBpZ25vcmVGaXJzdCA9IGZhbHNlO1xyXG5cdFx0dmFyIGlnbm9yZUxhc3QgPSBmYWxzZTtcclxuXHRcdHZhciBwcmV2UGN0ID0gMDtcclxuXHJcblx0XHQvLyBDcmVhdGUgYSBjb3B5IG9mIHRoZSBncm91cCwgc29ydCBpdCBhbmQgZmlsdGVyIGF3YXkgYWxsIGR1cGxpY2F0ZXMuXHJcblx0XHRncm91cCA9IHVuaXF1ZShncm91cC5zbGljZSgpLnNvcnQoZnVuY3Rpb24oYSwgYil7IHJldHVybiBhIC0gYjsgfSkpO1xyXG5cclxuXHRcdC8vIE1ha2Ugc3VyZSB0aGUgcmFuZ2Ugc3RhcnRzIHdpdGggdGhlIGZpcnN0IGVsZW1lbnQuXHJcblx0XHRpZiAoIGdyb3VwWzBdICE9PSBmaXJzdEluUmFuZ2UgKSB7XHJcblx0XHRcdGdyb3VwLnVuc2hpZnQoZmlyc3RJblJhbmdlKTtcclxuXHRcdFx0aWdub3JlRmlyc3QgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIExpa2V3aXNlIGZvciB0aGUgbGFzdCBvbmUuXHJcblx0XHRpZiAoIGdyb3VwW2dyb3VwLmxlbmd0aCAtIDFdICE9PSBsYXN0SW5SYW5nZSApIHtcclxuXHRcdFx0Z3JvdXAucHVzaChsYXN0SW5SYW5nZSk7XHJcblx0XHRcdGlnbm9yZUxhc3QgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGdyb3VwLmZvckVhY2goZnVuY3Rpb24gKCBjdXJyZW50LCBpbmRleCApIHtcclxuXHJcblx0XHRcdC8vIEdldCB0aGUgY3VycmVudCBzdGVwIGFuZCB0aGUgbG93ZXIgKyB1cHBlciBwb3NpdGlvbnMuXHJcblx0XHRcdHZhciBzdGVwO1xyXG5cdFx0XHR2YXIgaTtcclxuXHRcdFx0dmFyIHE7XHJcblx0XHRcdHZhciBsb3cgPSBjdXJyZW50O1xyXG5cdFx0XHR2YXIgaGlnaCA9IGdyb3VwW2luZGV4KzFdO1xyXG5cdFx0XHR2YXIgbmV3UGN0O1xyXG5cdFx0XHR2YXIgcGN0RGlmZmVyZW5jZTtcclxuXHRcdFx0dmFyIHBjdFBvcztcclxuXHRcdFx0dmFyIHR5cGU7XHJcblx0XHRcdHZhciBzdGVwcztcclxuXHRcdFx0dmFyIHJlYWxTdGVwcztcclxuXHRcdFx0dmFyIHN0ZXBzaXplO1xyXG5cclxuXHRcdFx0Ly8gV2hlbiB1c2luZyAnc3RlcHMnIG1vZGUsIHVzZSB0aGUgcHJvdmlkZWQgc3RlcHMuXHJcblx0XHRcdC8vIE90aGVyd2lzZSwgd2UnbGwgc3RlcCBvbiB0byB0aGUgbmV4dCBzdWJyYW5nZS5cclxuXHRcdFx0aWYgKCBtb2RlID09PSAnc3RlcHMnICkge1xyXG5cdFx0XHRcdHN0ZXAgPSBzY29wZV9TcGVjdHJ1bS54TnVtU3RlcHNbIGluZGV4IF07XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIERlZmF1bHQgdG8gYSAnZnVsbCcgc3RlcC5cclxuXHRcdFx0aWYgKCAhc3RlcCApIHtcclxuXHRcdFx0XHRzdGVwID0gaGlnaC1sb3c7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIExvdyBjYW4gYmUgMCwgc28gdGVzdCBmb3IgZmFsc2UuIElmIGhpZ2ggaXMgdW5kZWZpbmVkLFxyXG5cdFx0XHQvLyB3ZSBhcmUgYXQgdGhlIGxhc3Qgc3VicmFuZ2UuIEluZGV4IDAgaXMgYWxyZWFkeSBoYW5kbGVkLlxyXG5cdFx0XHRpZiAoIGxvdyA9PT0gZmFsc2UgfHwgaGlnaCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTWFrZSBzdXJlIHN0ZXAgaXNuJ3QgMCwgd2hpY2ggd291bGQgY2F1c2UgYW4gaW5maW5pdGUgbG9vcCAoIzY1NClcclxuXHRcdFx0c3RlcCA9IE1hdGgubWF4KHN0ZXAsIDAuMDAwMDAwMSk7XHJcblxyXG5cdFx0XHQvLyBGaW5kIGFsbCBzdGVwcyBpbiB0aGUgc3VicmFuZ2UuXHJcblx0XHRcdGZvciAoIGkgPSBsb3c7IGkgPD0gaGlnaDsgaSA9IHNhZmVJbmNyZW1lbnQoaSwgc3RlcCkgKSB7XHJcblxyXG5cdFx0XHRcdC8vIEdldCB0aGUgcGVyY2VudGFnZSB2YWx1ZSBmb3IgdGhlIGN1cnJlbnQgc3RlcCxcclxuXHRcdFx0XHQvLyBjYWxjdWxhdGUgdGhlIHNpemUgZm9yIHRoZSBzdWJyYW5nZS5cclxuXHRcdFx0XHRuZXdQY3QgPSBzY29wZV9TcGVjdHJ1bS50b1N0ZXBwaW5nKCBpICk7XHJcblx0XHRcdFx0cGN0RGlmZmVyZW5jZSA9IG5ld1BjdCAtIHByZXZQY3Q7XHJcblxyXG5cdFx0XHRcdHN0ZXBzID0gcGN0RGlmZmVyZW5jZSAvIGRlbnNpdHk7XHJcblx0XHRcdFx0cmVhbFN0ZXBzID0gTWF0aC5yb3VuZChzdGVwcyk7XHJcblxyXG5cdFx0XHRcdC8vIFRoaXMgcmF0aW8gcmVwcmVzZW50cyB0aGUgYW1tb3VudCBvZiBwZXJjZW50YWdlLXNwYWNlIGEgcG9pbnQgaW5kaWNhdGVzLlxyXG5cdFx0XHRcdC8vIEZvciBhIGRlbnNpdHkgMSB0aGUgcG9pbnRzL3BlcmNlbnRhZ2UgPSAxLiBGb3IgZGVuc2l0eSAyLCB0aGF0IHBlcmNlbnRhZ2UgbmVlZHMgdG8gYmUgcmUtZGV2aWRlZC5cclxuXHRcdFx0XHQvLyBSb3VuZCB0aGUgcGVyY2VudGFnZSBvZmZzZXQgdG8gYW4gZXZlbiBudW1iZXIsIHRoZW4gZGl2aWRlIGJ5IHR3b1xyXG5cdFx0XHRcdC8vIHRvIHNwcmVhZCB0aGUgb2Zmc2V0IG9uIGJvdGggc2lkZXMgb2YgdGhlIHJhbmdlLlxyXG5cdFx0XHRcdHN0ZXBzaXplID0gcGN0RGlmZmVyZW5jZS9yZWFsU3RlcHM7XHJcblxyXG5cdFx0XHRcdC8vIERpdmlkZSBhbGwgcG9pbnRzIGV2ZW5seSwgYWRkaW5nIHRoZSBjb3JyZWN0IG51bWJlciB0byB0aGlzIHN1YnJhbmdlLlxyXG5cdFx0XHRcdC8vIFJ1biB1cCB0byA8PSBzbyB0aGF0IDEwMCUgZ2V0cyBhIHBvaW50LCBldmVudCBpZiBpZ25vcmVMYXN0IGlzIHNldC5cclxuXHRcdFx0XHRmb3IgKCBxID0gMTsgcSA8PSByZWFsU3RlcHM7IHEgKz0gMSApIHtcclxuXHJcblx0XHRcdFx0XHQvLyBUaGUgcmF0aW8gYmV0d2VlbiB0aGUgcm91bmRlZCB2YWx1ZSBhbmQgdGhlIGFjdHVhbCBzaXplIG1pZ2h0IGJlIH4xJSBvZmYuXHJcblx0XHRcdFx0XHQvLyBDb3JyZWN0IHRoZSBwZXJjZW50YWdlIG9mZnNldCBieSB0aGUgbnVtYmVyIG9mIHBvaW50c1xyXG5cdFx0XHRcdFx0Ly8gcGVyIHN1YnJhbmdlLiBkZW5zaXR5ID0gMSB3aWxsIHJlc3VsdCBpbiAxMDAgcG9pbnRzIG9uIHRoZVxyXG5cdFx0XHRcdFx0Ly8gZnVsbCByYW5nZSwgMiBmb3IgNTAsIDQgZm9yIDI1LCBldGMuXHJcblx0XHRcdFx0XHRwY3RQb3MgPSBwcmV2UGN0ICsgKCBxICogc3RlcHNpemUgKTtcclxuXHRcdFx0XHRcdGluZGV4ZXNbcGN0UG9zLnRvRml4ZWQoNSldID0gWyd4JywgMF07XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBEZXRlcm1pbmUgdGhlIHBvaW50IHR5cGUuXHJcblx0XHRcdFx0dHlwZSA9IChncm91cC5pbmRleE9mKGkpID4gLTEpID8gMSA6ICggbW9kZSA9PT0gJ3N0ZXBzJyA/IDIgOiAwICk7XHJcblxyXG5cdFx0XHRcdC8vIEVuZm9yY2UgdGhlICdpZ25vcmVGaXJzdCcgb3B0aW9uIGJ5IG92ZXJ3cml0aW5nIHRoZSB0eXBlIGZvciAwLlxyXG5cdFx0XHRcdGlmICggIWluZGV4ICYmIGlnbm9yZUZpcnN0ICkge1xyXG5cdFx0XHRcdFx0dHlwZSA9IDA7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoICEoaSA9PT0gaGlnaCAmJiBpZ25vcmVMYXN0KSkge1xyXG5cdFx0XHRcdFx0Ly8gTWFyayB0aGUgJ3R5cGUnIG9mIHRoaXMgcG9pbnQuIDAgPSBwbGFpbiwgMSA9IHJlYWwgdmFsdWUsIDIgPSBzdGVwIHZhbHVlLlxyXG5cdFx0XHRcdFx0aW5kZXhlc1tuZXdQY3QudG9GaXhlZCg1KV0gPSBbaSwgdHlwZV07XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBVcGRhdGUgdGhlIHBlcmNlbnRhZ2UgY291bnQuXHJcblx0XHRcdFx0cHJldlBjdCA9IG5ld1BjdDtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIGluZGV4ZXM7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBhZGRNYXJraW5nICggc3ByZWFkLCBmaWx0ZXJGdW5jLCBmb3JtYXR0ZXIgKSB7XHJcblxyXG5cdFx0dmFyIGVsZW1lbnQgPSBzY29wZV9Eb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcblx0XHR2YXIgdmFsdWVTaXplQ2xhc3NlcyA9IFtcclxuXHRcdFx0b3B0aW9ucy5jc3NDbGFzc2VzLnZhbHVlTm9ybWFsLFxyXG5cdFx0XHRvcHRpb25zLmNzc0NsYXNzZXMudmFsdWVMYXJnZSxcclxuXHRcdFx0b3B0aW9ucy5jc3NDbGFzc2VzLnZhbHVlU3ViXHJcblx0XHRdO1xyXG5cdFx0dmFyIG1hcmtlclNpemVDbGFzc2VzID0gW1xyXG5cdFx0XHRvcHRpb25zLmNzc0NsYXNzZXMubWFya2VyTm9ybWFsLFxyXG5cdFx0XHRvcHRpb25zLmNzc0NsYXNzZXMubWFya2VyTGFyZ2UsXHJcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXJTdWJcclxuXHRcdF07XHJcblx0XHR2YXIgdmFsdWVPcmllbnRhdGlvbkNsYXNzZXMgPSBbXHJcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy52YWx1ZUhvcml6b250YWwsXHJcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy52YWx1ZVZlcnRpY2FsXHJcblx0XHRdO1xyXG5cdFx0dmFyIG1hcmtlck9yaWVudGF0aW9uQ2xhc3NlcyA9IFtcclxuXHRcdFx0b3B0aW9ucy5jc3NDbGFzc2VzLm1hcmtlckhvcml6b250YWwsXHJcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXJWZXJ0aWNhbFxyXG5cdFx0XTtcclxuXHJcblx0XHRhZGRDbGFzcyhlbGVtZW50LCBvcHRpb25zLmNzc0NsYXNzZXMucGlwcyk7XHJcblx0XHRhZGRDbGFzcyhlbGVtZW50LCBvcHRpb25zLm9ydCA9PT0gMCA/IG9wdGlvbnMuY3NzQ2xhc3Nlcy5waXBzSG9yaXpvbnRhbCA6IG9wdGlvbnMuY3NzQ2xhc3Nlcy5waXBzVmVydGljYWwpO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGdldENsYXNzZXMoIHR5cGUsIHNvdXJjZSApe1xyXG5cdFx0XHR2YXIgYSA9IHNvdXJjZSA9PT0gb3B0aW9ucy5jc3NDbGFzc2VzLnZhbHVlO1xyXG5cdFx0XHR2YXIgb3JpZW50YXRpb25DbGFzc2VzID0gYSA/IHZhbHVlT3JpZW50YXRpb25DbGFzc2VzIDogbWFya2VyT3JpZW50YXRpb25DbGFzc2VzO1xyXG5cdFx0XHR2YXIgc2l6ZUNsYXNzZXMgPSBhID8gdmFsdWVTaXplQ2xhc3NlcyA6IG1hcmtlclNpemVDbGFzc2VzO1xyXG5cclxuXHRcdFx0cmV0dXJuIHNvdXJjZSArICcgJyArIG9yaWVudGF0aW9uQ2xhc3Nlc1tvcHRpb25zLm9ydF0gKyAnICcgKyBzaXplQ2xhc3Nlc1t0eXBlXTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBhZGRTcHJlYWQgKCBvZmZzZXQsIHZhbHVlcyApe1xyXG5cclxuXHRcdFx0Ly8gQXBwbHkgdGhlIGZpbHRlciBmdW5jdGlvbiwgaWYgaXQgaXMgc2V0LlxyXG5cdFx0XHR2YWx1ZXNbMV0gPSAodmFsdWVzWzFdICYmIGZpbHRlckZ1bmMpID8gZmlsdGVyRnVuYyh2YWx1ZXNbMF0sIHZhbHVlc1sxXSkgOiB2YWx1ZXNbMV07XHJcblxyXG5cdFx0XHQvLyBBZGQgYSBtYXJrZXIgZm9yIGV2ZXJ5IHBvaW50XHJcblx0XHRcdHZhciBub2RlID0gYWRkTm9kZVRvKGVsZW1lbnQsIGZhbHNlKTtcclxuXHRcdFx0XHRub2RlLmNsYXNzTmFtZSA9IGdldENsYXNzZXModmFsdWVzWzFdLCBvcHRpb25zLmNzc0NsYXNzZXMubWFya2VyKTtcclxuXHRcdFx0XHRub2RlLnN0eWxlW29wdGlvbnMuc3R5bGVdID0gb2Zmc2V0ICsgJyUnO1xyXG5cclxuXHRcdFx0Ly8gVmFsdWVzIGFyZSBvbmx5IGFwcGVuZGVkIGZvciBwb2ludHMgbWFya2VkICcxJyBvciAnMicuXHJcblx0XHRcdGlmICggdmFsdWVzWzFdICkge1xyXG5cdFx0XHRcdG5vZGUgPSBhZGROb2RlVG8oZWxlbWVudCwgZmFsc2UpO1xyXG5cdFx0XHRcdG5vZGUuY2xhc3NOYW1lID0gZ2V0Q2xhc3Nlcyh2YWx1ZXNbMV0sIG9wdGlvbnMuY3NzQ2xhc3Nlcy52YWx1ZSk7XHJcblx0XHRcdFx0bm9kZS5zdHlsZVtvcHRpb25zLnN0eWxlXSA9IG9mZnNldCArICclJztcclxuXHRcdFx0XHRub2RlLmlubmVyVGV4dCA9IGZvcm1hdHRlci50byh2YWx1ZXNbMF0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQXBwZW5kIGFsbCBwb2ludHMuXHJcblx0XHRPYmplY3Qua2V5cyhzcHJlYWQpLmZvckVhY2goZnVuY3Rpb24oYSl7XHJcblx0XHRcdGFkZFNwcmVhZChhLCBzcHJlYWRbYV0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIGVsZW1lbnQ7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiByZW1vdmVQaXBzICggKSB7XHJcblx0XHRpZiAoIHNjb3BlX1BpcHMgKSB7XHJcblx0XHRcdHJlbW92ZUVsZW1lbnQoc2NvcGVfUGlwcyk7XHJcblx0XHRcdHNjb3BlX1BpcHMgPSBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gcGlwcyAoIGdyaWQgKSB7XHJcblxyXG5cdFx0Ly8gRml4ICM2NjlcclxuXHRcdHJlbW92ZVBpcHMoKTtcclxuXHJcblx0XHR2YXIgbW9kZSA9IGdyaWQubW9kZTtcclxuXHRcdHZhciBkZW5zaXR5ID0gZ3JpZC5kZW5zaXR5IHx8IDE7XHJcblx0XHR2YXIgZmlsdGVyID0gZ3JpZC5maWx0ZXIgfHwgZmFsc2U7XHJcblx0XHR2YXIgdmFsdWVzID0gZ3JpZC52YWx1ZXMgfHwgZmFsc2U7XHJcblx0XHR2YXIgc3RlcHBlZCA9IGdyaWQuc3RlcHBlZCB8fCBmYWxzZTtcclxuXHRcdHZhciBncm91cCA9IGdldEdyb3VwKCBtb2RlLCB2YWx1ZXMsIHN0ZXBwZWQgKTtcclxuXHRcdHZhciBzcHJlYWQgPSBnZW5lcmF0ZVNwcmVhZCggZGVuc2l0eSwgbW9kZSwgZ3JvdXAgKTtcclxuXHRcdHZhciBmb3JtYXQgPSBncmlkLmZvcm1hdCB8fCB7XHJcblx0XHRcdHRvOiBNYXRoLnJvdW5kXHJcblx0XHR9O1xyXG5cclxuXHRcdHNjb3BlX1BpcHMgPSBzY29wZV9UYXJnZXQuYXBwZW5kQ2hpbGQoYWRkTWFya2luZyhcclxuXHRcdFx0c3ByZWFkLFxyXG5cdFx0XHRmaWx0ZXIsXHJcblx0XHRcdGZvcm1hdFxyXG5cdFx0KSk7XHJcblxyXG5cdFx0cmV0dXJuIHNjb3BlX1BpcHM7XHJcblx0fVxyXG5cclxuXHJcblx0Ly8gU2hvcnRoYW5kIGZvciBiYXNlIGRpbWVuc2lvbnMuXHJcblx0ZnVuY3Rpb24gYmFzZVNpemUgKCApIHtcclxuXHRcdHZhciByZWN0ID0gc2NvcGVfQmFzZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgYWx0ID0gJ29mZnNldCcgKyBbJ1dpZHRoJywgJ0hlaWdodCddW29wdGlvbnMub3J0XTtcclxuXHRcdHJldHVybiBvcHRpb25zLm9ydCA9PT0gMCA/IChyZWN0LndpZHRofHxzY29wZV9CYXNlW2FsdF0pIDogKHJlY3QuaGVpZ2h0fHxzY29wZV9CYXNlW2FsdF0pO1xyXG5cdH1cclxuXHJcblx0Ly8gSGFuZGxlciBmb3IgYXR0YWNoaW5nIGV2ZW50cyB0cm91Z2ggYSBwcm94eS5cclxuXHRmdW5jdGlvbiBhdHRhY2hFdmVudCAoIGV2ZW50cywgZWxlbWVudCwgY2FsbGJhY2ssIGRhdGEgKSB7XHJcblxyXG5cdFx0Ly8gVGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byAnZmlsdGVyJyBldmVudHMgdG8gdGhlIHNsaWRlci5cclxuXHRcdC8vIGVsZW1lbnQgaXMgYSBub2RlLCBub3QgYSBub2RlTGlzdFxyXG5cclxuXHRcdHZhciBtZXRob2QgPSBmdW5jdGlvbiAoIGUgKXtcclxuXHJcblx0XHRcdGlmICggc2NvcGVfVGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSApIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFN0b3AgaWYgYW4gYWN0aXZlICd0YXAnIHRyYW5zaXRpb24gaXMgdGFraW5nIHBsYWNlLlxyXG5cdFx0XHRpZiAoIGhhc0NsYXNzKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLnRhcCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRlID0gZml4RXZlbnQoZSwgZGF0YS5wYWdlT2Zmc2V0KTtcclxuXHJcblx0XHRcdC8vIEhhbmRsZSByZWplY3Qgb2YgbXVsdGl0b3VjaFxyXG5cdFx0XHRpZiAoICFlICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWdub3JlIHJpZ2h0IG9yIG1pZGRsZSBjbGlja3Mgb24gc3RhcnQgIzQ1NFxyXG5cdFx0XHRpZiAoIGV2ZW50cyA9PT0gYWN0aW9ucy5zdGFydCAmJiBlLmJ1dHRvbnMgIT09IHVuZGVmaW5lZCAmJiBlLmJ1dHRvbnMgPiAxICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWdub3JlIHJpZ2h0IG9yIG1pZGRsZSBjbGlja3Mgb24gc3RhcnQgIzQ1NFxyXG5cdFx0XHRpZiAoIGRhdGEuaG92ZXIgJiYgZS5idXR0b25zICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gJ3N1cHBvcnRzUGFzc2l2ZScgaXMgb25seSB0cnVlIGlmIGEgYnJvd3NlciBhbHNvIHN1cHBvcnRzIHRvdWNoLWFjdGlvbjogbm9uZSBpbiBDU1MuXHJcblx0XHRcdC8vIGlPUyBzYWZhcmkgZG9lcyBub3QsIHNvIGl0IGRvZXNuJ3QgZ2V0IHRvIGJlbmVmaXQgZnJvbSBwYXNzaXZlIHNjcm9sbGluZy4gaU9TIGRvZXMgc3VwcG9ydFxyXG5cdFx0XHQvLyB0b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbiwgYnV0IHRoYXQgYWxsb3dzIHBhbm5pbmcsIHdoaWNoIGJyZWFrc1xyXG5cdFx0XHQvLyBzbGlkZXJzIGFmdGVyIHpvb21pbmcvb24gbm9uLXJlc3BvbnNpdmUgcGFnZXMuXHJcblx0XHRcdC8vIFNlZTogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzMzExMlxyXG5cdFx0XHRpZiAoICFzdXBwb3J0c1Bhc3NpdmUgKSB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRlLmNhbGNQb2ludCA9IGUucG9pbnRzWyBvcHRpb25zLm9ydCBdO1xyXG5cclxuXHRcdFx0Ly8gQ2FsbCB0aGUgZXZlbnQgaGFuZGxlciB3aXRoIHRoZSBldmVudCBbIGFuZCBhZGRpdGlvbmFsIGRhdGEgXS5cclxuXHRcdFx0Y2FsbGJhY2sgKCBlLCBkYXRhICk7XHJcblx0XHR9O1xyXG5cclxuXHRcdHZhciBtZXRob2RzID0gW107XHJcblxyXG5cdFx0Ly8gQmluZCBhIGNsb3N1cmUgb24gdGhlIHRhcmdldCBmb3IgZXZlcnkgZXZlbnQgdHlwZS5cclxuXHRcdGV2ZW50cy5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24oIGV2ZW50TmFtZSApe1xyXG5cdFx0XHRlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBtZXRob2QsIHN1cHBvcnRzUGFzc2l2ZSA/IHsgcGFzc2l2ZTogdHJ1ZSB9IDogZmFsc2UpO1xyXG5cdFx0XHRtZXRob2RzLnB1c2goW2V2ZW50TmFtZSwgbWV0aG9kXSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRyZXR1cm4gbWV0aG9kcztcclxuXHR9XHJcblxyXG5cdC8vIFByb3ZpZGUgYSBjbGVhbiBldmVudCB3aXRoIHN0YW5kYXJkaXplZCBvZmZzZXQgdmFsdWVzLlxyXG5cdGZ1bmN0aW9uIGZpeEV2ZW50ICggZSwgcGFnZU9mZnNldCApIHtcclxuXHJcblx0XHQvLyBGaWx0ZXIgdGhlIGV2ZW50IHRvIHJlZ2lzdGVyIHRoZSB0eXBlLCB3aGljaCBjYW4gYmVcclxuXHRcdC8vIHRvdWNoLCBtb3VzZSBvciBwb2ludGVyLiBPZmZzZXQgY2hhbmdlcyBuZWVkIHRvIGJlXHJcblx0XHQvLyBtYWRlIG9uIGFuIGV2ZW50IHNwZWNpZmljIGJhc2lzLlxyXG5cdFx0dmFyIHRvdWNoID0gZS50eXBlLmluZGV4T2YoJ3RvdWNoJykgPT09IDA7XHJcblx0XHR2YXIgbW91c2UgPSBlLnR5cGUuaW5kZXhPZignbW91c2UnKSA9PT0gMDtcclxuXHRcdHZhciBwb2ludGVyID0gZS50eXBlLmluZGV4T2YoJ3BvaW50ZXInKSA9PT0gMDtcclxuXHJcblx0XHR2YXIgeDtcclxuXHRcdHZhciB5O1xyXG5cclxuXHRcdC8vIElFMTAgaW1wbGVtZW50ZWQgcG9pbnRlciBldmVudHMgd2l0aCBhIHByZWZpeDtcclxuXHRcdGlmICggZS50eXBlLmluZGV4T2YoJ01TUG9pbnRlcicpID09PSAwICkge1xyXG5cdFx0XHRwb2ludGVyID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHRvdWNoICkge1xyXG5cclxuXHRcdFx0Ly8gRml4IGJ1ZyB3aGVuIHVzZXIgdG91Y2hlcyB3aXRoIHR3byBvciBtb3JlIGZpbmdlcnMgb24gbW9iaWxlIGRldmljZXMuXHJcblx0XHRcdC8vIEl0J3MgdXNlZnVsIHdoZW4geW91IGhhdmUgdHdvIG9yIG1vcmUgc2xpZGVycyBvbiBvbmUgcGFnZSxcclxuXHRcdFx0Ly8gdGhhdCBjYW4gYmUgdG91Y2hlZCBzaW11bHRhbmVvdXNseS5cclxuXHRcdFx0Ly8gIzY0OSwgIzY2MywgIzY2OFxyXG5cdFx0XHRpZiAoIGUudG91Y2hlcy5sZW5ndGggPiAxICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gbm9VaVNsaWRlciBzdXBwb3J0cyBvbmUgbW92ZW1lbnQgYXQgYSB0aW1lLFxyXG5cdFx0XHQvLyBzbyB3ZSBjYW4gc2VsZWN0IHRoZSBmaXJzdCAnY2hhbmdlZFRvdWNoJy5cclxuXHRcdFx0eCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVg7XHJcblx0XHRcdHkgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZO1xyXG5cdFx0fVxyXG5cclxuXHRcdHBhZ2VPZmZzZXQgPSBwYWdlT2Zmc2V0IHx8IGdldFBhZ2VPZmZzZXQoc2NvcGVfRG9jdW1lbnQpO1xyXG5cclxuXHRcdGlmICggbW91c2UgfHwgcG9pbnRlciApIHtcclxuXHRcdFx0eCA9IGUuY2xpZW50WCArIHBhZ2VPZmZzZXQueDtcclxuXHRcdFx0eSA9IGUuY2xpZW50WSArIHBhZ2VPZmZzZXQueTtcclxuXHRcdH1cclxuXHJcblx0XHRlLnBhZ2VPZmZzZXQgPSBwYWdlT2Zmc2V0O1xyXG5cdFx0ZS5wb2ludHMgPSBbeCwgeV07XHJcblx0XHRlLmN1cnNvciA9IG1vdXNlIHx8IHBvaW50ZXI7IC8vIEZpeCAjNDM1XHJcblxyXG5cdFx0cmV0dXJuIGU7XHJcblx0fVxyXG5cclxuXHQvLyBUcmFuc2xhdGUgYSBjb29yZGluYXRlIGluIHRoZSBkb2N1bWVudCB0byBhIHBlcmNlbnRhZ2Ugb24gdGhlIHNsaWRlclxyXG5cdGZ1bmN0aW9uIGNhbGNQb2ludFRvUGVyY2VudGFnZSAoIGNhbGNQb2ludCApIHtcclxuXHRcdHZhciBsb2NhdGlvbiA9IGNhbGNQb2ludCAtIG9mZnNldChzY29wZV9CYXNlLCBvcHRpb25zLm9ydCk7XHJcblx0XHR2YXIgcHJvcG9zYWwgPSAoIGxvY2F0aW9uICogMTAwICkgLyBiYXNlU2l6ZSgpO1xyXG5cdFx0cmV0dXJuIG9wdGlvbnMuZGlyID8gMTAwIC0gcHJvcG9zYWwgOiBwcm9wb3NhbDtcclxuXHR9XHJcblxyXG5cdC8vIEZpbmQgaGFuZGxlIGNsb3Nlc3QgdG8gYSBjZXJ0YWluIHBlcmNlbnRhZ2Ugb24gdGhlIHNsaWRlclxyXG5cdGZ1bmN0aW9uIGdldENsb3Nlc3RIYW5kbGUgKCBwcm9wb3NhbCApIHtcclxuXHJcblx0XHR2YXIgY2xvc2VzdCA9IDEwMDtcclxuXHRcdHZhciBoYW5kbGVOdW1iZXIgPSBmYWxzZTtcclxuXHJcblx0XHRzY29wZV9IYW5kbGVzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlLCBpbmRleCl7XHJcblxyXG5cdFx0XHQvLyBEaXNhYmxlZCBoYW5kbGVzIGFyZSBpZ25vcmVkXHJcblx0XHRcdGlmICggaGFuZGxlLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBwb3MgPSBNYXRoLmFicyhzY29wZV9Mb2NhdGlvbnNbaW5kZXhdIC0gcHJvcG9zYWwpO1xyXG5cclxuXHRcdFx0aWYgKCBwb3MgPCBjbG9zZXN0ICkge1xyXG5cdFx0XHRcdGhhbmRsZU51bWJlciA9IGluZGV4O1xyXG5cdFx0XHRcdGNsb3Nlc3QgPSBwb3M7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiBoYW5kbGVOdW1iZXI7XHJcblx0fVxyXG5cclxuXHQvLyBNb3ZlcyBoYW5kbGUocykgYnkgYSBwZXJjZW50YWdlXHJcblx0Ly8gKGJvb2wsICUgdG8gbW92ZSwgWyUgd2hlcmUgaGFuZGxlIHN0YXJ0ZWQsIC4uLl0sIFtpbmRleCBpbiBzY29wZV9IYW5kbGVzLCAuLi5dKVxyXG5cdGZ1bmN0aW9uIG1vdmVIYW5kbGVzICggdXB3YXJkLCBwcm9wb3NhbCwgbG9jYXRpb25zLCBoYW5kbGVOdW1iZXJzICkge1xyXG5cclxuXHRcdHZhciBwcm9wb3NhbHMgPSBsb2NhdGlvbnMuc2xpY2UoKTtcclxuXHJcblx0XHR2YXIgYiA9IFshdXB3YXJkLCB1cHdhcmRdO1xyXG5cdFx0dmFyIGYgPSBbdXB3YXJkLCAhdXB3YXJkXTtcclxuXHJcblx0XHQvLyBDb3B5IGhhbmRsZU51bWJlcnMgc28gd2UgZG9uJ3QgY2hhbmdlIHRoZSBkYXRhc2V0XHJcblx0XHRoYW5kbGVOdW1iZXJzID0gaGFuZGxlTnVtYmVycy5zbGljZSgpO1xyXG5cclxuXHRcdC8vIENoZWNrIHRvIHNlZSB3aGljaCBoYW5kbGUgaXMgJ2xlYWRpbmcnLlxyXG5cdFx0Ly8gSWYgdGhhdCBvbmUgY2FuJ3QgbW92ZSB0aGUgc2Vjb25kIGNhbid0IGVpdGhlci5cclxuXHRcdGlmICggdXB3YXJkICkge1xyXG5cdFx0XHRoYW5kbGVOdW1iZXJzLnJldmVyc2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBTdGVwIDE6IGdldCB0aGUgbWF4aW11bSBwZXJjZW50YWdlIHRoYXQgYW55IG9mIHRoZSBoYW5kbGVzIGNhbiBtb3ZlXHJcblx0XHRpZiAoIGhhbmRsZU51bWJlcnMubGVuZ3RoID4gMSApIHtcclxuXHJcblx0XHRcdGhhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIsIG8pIHtcclxuXHJcblx0XHRcdFx0dmFyIHRvID0gY2hlY2tIYW5kbGVQb3NpdGlvbihwcm9wb3NhbHMsIGhhbmRsZU51bWJlciwgcHJvcG9zYWxzW2hhbmRsZU51bWJlcl0gKyBwcm9wb3NhbCwgYltvXSwgZltvXSwgZmFsc2UpO1xyXG5cclxuXHRcdFx0XHQvLyBTdG9wIGlmIG9uZSBvZiB0aGUgaGFuZGxlcyBjYW4ndCBtb3ZlLlxyXG5cdFx0XHRcdGlmICggdG8gPT09IGZhbHNlICkge1xyXG5cdFx0XHRcdFx0cHJvcG9zYWwgPSAwO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRwcm9wb3NhbCA9IHRvIC0gcHJvcG9zYWxzW2hhbmRsZU51bWJlcl07XHJcblx0XHRcdFx0XHRwcm9wb3NhbHNbaGFuZGxlTnVtYmVyXSA9IHRvO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgdXNpbmcgb25lIGhhbmRsZSwgY2hlY2sgYmFja3dhcmQgQU5EIGZvcndhcmRcclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRiID0gZiA9IFt0cnVlXTtcclxuXHRcdH1cclxuXHJcblx0XHR2YXIgc3RhdGUgPSBmYWxzZTtcclxuXHJcblx0XHQvLyBTdGVwIDI6IFRyeSB0byBzZXQgdGhlIGhhbmRsZXMgd2l0aCB0aGUgZm91bmQgcGVyY2VudGFnZVxyXG5cdFx0aGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZU51bWJlciwgbykge1xyXG5cdFx0XHRzdGF0ZSA9IHNldEhhbmRsZShoYW5kbGVOdW1iZXIsIGxvY2F0aW9uc1toYW5kbGVOdW1iZXJdICsgcHJvcG9zYWwsIGJbb10sIGZbb10pIHx8IHN0YXRlO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU3RlcCAzOiBJZiBhIGhhbmRsZSBtb3ZlZCwgZmlyZSBldmVudHNcclxuXHRcdGlmICggc3RhdGUgKSB7XHJcblx0XHRcdGhhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIpe1xyXG5cdFx0XHRcdGZpcmVFdmVudCgndXBkYXRlJywgaGFuZGxlTnVtYmVyKTtcclxuXHRcdFx0XHRmaXJlRXZlbnQoJ3NsaWRlJywgaGFuZGxlTnVtYmVyKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBFeHRlcm5hbCBldmVudCBoYW5kbGluZ1xyXG5cdGZ1bmN0aW9uIGZpcmVFdmVudCAoIGV2ZW50TmFtZSwgaGFuZGxlTnVtYmVyLCB0YXAgKSB7XHJcblxyXG5cdFx0T2JqZWN0LmtleXMoc2NvcGVfRXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKCB0YXJnZXRFdmVudCApIHtcclxuXHJcblx0XHRcdHZhciBldmVudFR5cGUgPSB0YXJnZXRFdmVudC5zcGxpdCgnLicpWzBdO1xyXG5cclxuXHRcdFx0aWYgKCBldmVudE5hbWUgPT09IGV2ZW50VHlwZSApIHtcclxuXHRcdFx0XHRzY29wZV9FdmVudHNbdGFyZ2V0RXZlbnRdLmZvckVhY2goZnVuY3Rpb24oIGNhbGxiYWNrICkge1xyXG5cclxuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwoXHJcblx0XHRcdFx0XHRcdC8vIFVzZSB0aGUgc2xpZGVyIHB1YmxpYyBBUEkgYXMgdGhlIHNjb3BlICgndGhpcycpXHJcblx0XHRcdFx0XHRcdHNjb3BlX1NlbGYsXHJcblx0XHRcdFx0XHRcdC8vIFJldHVybiB2YWx1ZXMgYXMgYXJyYXksIHNvIGFyZ18xW2FyZ18yXSBpcyBhbHdheXMgdmFsaWQuXHJcblx0XHRcdFx0XHRcdHNjb3BlX1ZhbHVlcy5tYXAob3B0aW9ucy5mb3JtYXQudG8pLFxyXG5cdFx0XHRcdFx0XHQvLyBIYW5kbGUgaW5kZXgsIDAgb3IgMVxyXG5cdFx0XHRcdFx0XHRoYW5kbGVOdW1iZXIsXHJcblx0XHRcdFx0XHRcdC8vIFVuZm9ybWF0dGVkIHNsaWRlciB2YWx1ZXNcclxuXHRcdFx0XHRcdFx0c2NvcGVfVmFsdWVzLnNsaWNlKCksXHJcblx0XHRcdFx0XHRcdC8vIEV2ZW50IGlzIGZpcmVkIGJ5IHRhcCwgdHJ1ZSBvciBmYWxzZVxyXG5cdFx0XHRcdFx0XHR0YXAgfHwgZmFsc2UsXHJcblx0XHRcdFx0XHRcdC8vIExlZnQgb2Zmc2V0IG9mIHRoZSBoYW5kbGUsIGluIHJlbGF0aW9uIHRvIHRoZSBzbGlkZXJcclxuXHRcdFx0XHRcdFx0c2NvcGVfTG9jYXRpb25zLnNsaWNlKClcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblxyXG5cdC8vIEZpcmUgJ2VuZCcgd2hlbiBhIG1vdXNlIG9yIHBlbiBsZWF2ZXMgdGhlIGRvY3VtZW50LlxyXG5cdGZ1bmN0aW9uIGRvY3VtZW50TGVhdmUgKCBldmVudCwgZGF0YSApIHtcclxuXHRcdGlmICggZXZlbnQudHlwZSA9PT0gXCJtb3VzZW91dFwiICYmIGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gXCJIVE1MXCIgJiYgZXZlbnQucmVsYXRlZFRhcmdldCA9PT0gbnVsbCApe1xyXG5cdFx0XHRldmVudEVuZCAoZXZlbnQsIGRhdGEpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gSGFuZGxlIG1vdmVtZW50IG9uIGRvY3VtZW50IGZvciBoYW5kbGUgYW5kIHJhbmdlIGRyYWcuXHJcblx0ZnVuY3Rpb24gZXZlbnRNb3ZlICggZXZlbnQsIGRhdGEgKSB7XHJcblxyXG5cdFx0Ly8gRml4ICM0OThcclxuXHRcdC8vIENoZWNrIHZhbHVlIG9mIC5idXR0b25zIGluICdzdGFydCcgdG8gd29yayBhcm91bmQgYSBidWcgaW4gSUUxMCBtb2JpbGUgKGRhdGEuYnV0dG9uc1Byb3BlcnR5KS5cclxuXHRcdC8vIGh0dHBzOi8vY29ubmVjdC5taWNyb3NvZnQuY29tL0lFL2ZlZWRiYWNrL2RldGFpbHMvOTI3MDA1L21vYmlsZS1pZTEwLXdpbmRvd3MtcGhvbmUtYnV0dG9ucy1wcm9wZXJ0eS1vZi1wb2ludGVybW92ZS1ldmVudC1hbHdheXMtemVyb1xyXG5cdFx0Ly8gSUU5IGhhcyAuYnV0dG9ucyBhbmQgLndoaWNoIHplcm8gb24gbW91c2Vtb3ZlLlxyXG5cdFx0Ly8gRmlyZWZveCBicmVha3MgdGhlIHNwZWMgTUROIGRlZmluZXMuXHJcblx0XHRpZiAoIG5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoXCJNU0lFIDlcIikgPT09IC0xICYmIGV2ZW50LmJ1dHRvbnMgPT09IDAgJiYgZGF0YS5idXR0b25zUHJvcGVydHkgIT09IDAgKSB7XHJcblx0XHRcdHJldHVybiBldmVudEVuZChldmVudCwgZGF0YSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgd2UgYXJlIG1vdmluZyB1cCBvciBkb3duXHJcblx0XHR2YXIgbW92ZW1lbnQgPSAob3B0aW9ucy5kaXIgPyAtMSA6IDEpICogKGV2ZW50LmNhbGNQb2ludCAtIGRhdGEuc3RhcnRDYWxjUG9pbnQpO1xyXG5cclxuXHRcdC8vIENvbnZlcnQgdGhlIG1vdmVtZW50IGludG8gYSBwZXJjZW50YWdlIG9mIHRoZSBzbGlkZXIgd2lkdGgvaGVpZ2h0XHJcblx0XHR2YXIgcHJvcG9zYWwgPSAobW92ZW1lbnQgKiAxMDApIC8gZGF0YS5iYXNlU2l6ZTtcclxuXHJcblx0XHRtb3ZlSGFuZGxlcyhtb3ZlbWVudCA+IDAsIHByb3Bvc2FsLCBkYXRhLmxvY2F0aW9ucywgZGF0YS5oYW5kbGVOdW1iZXJzKTtcclxuXHR9XHJcblxyXG5cdC8vIFVuYmluZCBtb3ZlIGV2ZW50cyBvbiBkb2N1bWVudCwgY2FsbCBjYWxsYmFja3MuXHJcblx0ZnVuY3Rpb24gZXZlbnRFbmQgKCBldmVudCwgZGF0YSApIHtcclxuXHJcblx0XHQvLyBUaGUgaGFuZGxlIGlzIG5vIGxvbmdlciBhY3RpdmUsIHNvIHJlbW92ZSB0aGUgY2xhc3MuXHJcblx0XHRpZiAoIHNjb3BlX0FjdGl2ZUhhbmRsZSApIHtcclxuXHRcdFx0cmVtb3ZlQ2xhc3Moc2NvcGVfQWN0aXZlSGFuZGxlLCBvcHRpb25zLmNzc0NsYXNzZXMuYWN0aXZlKTtcclxuXHRcdFx0c2NvcGVfQWN0aXZlSGFuZGxlID0gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVtb3ZlIGN1cnNvciBzdHlsZXMgYW5kIHRleHQtc2VsZWN0aW9uIGV2ZW50cyBib3VuZCB0byB0aGUgYm9keS5cclxuXHRcdGlmICggZXZlbnQuY3Vyc29yICkge1xyXG5cdFx0XHRzY29wZV9Cb2R5LnN0eWxlLmN1cnNvciA9ICcnO1xyXG5cdFx0XHRzY29wZV9Cb2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3NlbGVjdHN0YXJ0JywgcHJldmVudERlZmF1bHQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFVuYmluZCB0aGUgbW92ZSBhbmQgZW5kIGV2ZW50cywgd2hpY2ggYXJlIGFkZGVkIG9uICdzdGFydCcuXHJcblx0XHRzY29wZV9MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiggYyApIHtcclxuXHRcdFx0c2NvcGVfRG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoY1swXSwgY1sxXSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBSZW1vdmUgZHJhZ2dpbmcgY2xhc3MuXHJcblx0XHRyZW1vdmVDbGFzcyhzY29wZV9UYXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5kcmFnKTtcclxuXHJcblx0XHRzZXRaaW5kZXgoKTtcclxuXHJcblx0XHRkYXRhLmhhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIpe1xyXG5cdFx0XHRmaXJlRXZlbnQoJ2NoYW5nZScsIGhhbmRsZU51bWJlcik7XHJcblx0XHRcdGZpcmVFdmVudCgnc2V0JywgaGFuZGxlTnVtYmVyKTtcclxuXHRcdFx0ZmlyZUV2ZW50KCdlbmQnLCBoYW5kbGVOdW1iZXIpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvLyBCaW5kIG1vdmUgZXZlbnRzIG9uIGRvY3VtZW50LlxyXG5cdGZ1bmN0aW9uIGV2ZW50U3RhcnQgKCBldmVudCwgZGF0YSApIHtcclxuXHJcblx0XHRpZiAoIGRhdGEuaGFuZGxlTnVtYmVycy5sZW5ndGggPT09IDEgKSB7XHJcblxyXG5cdFx0XHR2YXIgaGFuZGxlID0gc2NvcGVfSGFuZGxlc1tkYXRhLmhhbmRsZU51bWJlcnNbMF1dO1xyXG5cclxuXHRcdFx0Ly8gSWdub3JlICdkaXNhYmxlZCcgaGFuZGxlc1xyXG5cdFx0XHRpZiAoIGhhbmRsZS5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBNYXJrIHRoZSBoYW5kbGUgYXMgJ2FjdGl2ZScgc28gaXQgY2FuIGJlIHN0eWxlZC5cclxuXHRcdFx0c2NvcGVfQWN0aXZlSGFuZGxlID0gaGFuZGxlLmNoaWxkcmVuWzBdO1xyXG5cdFx0XHRhZGRDbGFzcyhzY29wZV9BY3RpdmVIYW5kbGUsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5hY3RpdmUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEEgZHJhZyBzaG91bGQgbmV2ZXIgcHJvcGFnYXRlIHVwIHRvIHRoZSAndGFwJyBldmVudC5cclxuXHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuXHRcdC8vIEF0dGFjaCB0aGUgbW92ZSBhbmQgZW5kIGV2ZW50cy5cclxuXHRcdHZhciBtb3ZlRXZlbnQgPSBhdHRhY2hFdmVudChhY3Rpb25zLm1vdmUsIHNjb3BlX0RvY3VtZW50RWxlbWVudCwgZXZlbnRNb3ZlLCB7XHJcblx0XHRcdHN0YXJ0Q2FsY1BvaW50OiBldmVudC5jYWxjUG9pbnQsXHJcblx0XHRcdGJhc2VTaXplOiBiYXNlU2l6ZSgpLFxyXG5cdFx0XHRwYWdlT2Zmc2V0OiBldmVudC5wYWdlT2Zmc2V0LFxyXG5cdFx0XHRoYW5kbGVOdW1iZXJzOiBkYXRhLmhhbmRsZU51bWJlcnMsXHJcblx0XHRcdGJ1dHRvbnNQcm9wZXJ0eTogZXZlbnQuYnV0dG9ucyxcclxuXHRcdFx0bG9jYXRpb25zOiBzY29wZV9Mb2NhdGlvbnMuc2xpY2UoKVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dmFyIGVuZEV2ZW50ID0gYXR0YWNoRXZlbnQoYWN0aW9ucy5lbmQsIHNjb3BlX0RvY3VtZW50RWxlbWVudCwgZXZlbnRFbmQsIHtcclxuXHRcdFx0aGFuZGxlTnVtYmVyczogZGF0YS5oYW5kbGVOdW1iZXJzXHJcblx0XHR9KTtcclxuXHJcblx0XHR2YXIgb3V0RXZlbnQgPSBhdHRhY2hFdmVudChcIm1vdXNlb3V0XCIsIHNjb3BlX0RvY3VtZW50RWxlbWVudCwgZG9jdW1lbnRMZWF2ZSwge1xyXG5cdFx0XHRoYW5kbGVOdW1iZXJzOiBkYXRhLmhhbmRsZU51bWJlcnNcclxuXHRcdH0pO1xyXG5cclxuXHRcdHNjb3BlX0xpc3RlbmVycyA9IG1vdmVFdmVudC5jb25jYXQoZW5kRXZlbnQsIG91dEV2ZW50KTtcclxuXHJcblx0XHQvLyBUZXh0IHNlbGVjdGlvbiBpc24ndCBhbiBpc3N1ZSBvbiB0b3VjaCBkZXZpY2VzLFxyXG5cdFx0Ly8gc28gYWRkaW5nIGN1cnNvciBzdHlsZXMgY2FuIGJlIHNraXBwZWQuXHJcblx0XHRpZiAoIGV2ZW50LmN1cnNvciApIHtcclxuXHJcblx0XHRcdC8vIFByZXZlbnQgdGhlICdJJyBjdXJzb3IgYW5kIGV4dGVuZCB0aGUgcmFuZ2UtZHJhZyBjdXJzb3IuXHJcblx0XHRcdHNjb3BlX0JvZHkuc3R5bGUuY3Vyc29yID0gZ2V0Q29tcHV0ZWRTdHlsZShldmVudC50YXJnZXQpLmN1cnNvcjtcclxuXHJcblx0XHRcdC8vIE1hcmsgdGhlIHRhcmdldCB3aXRoIGEgZHJhZ2dpbmcgc3RhdGUuXHJcblx0XHRcdGlmICggc2NvcGVfSGFuZGxlcy5sZW5ndGggPiAxICkge1xyXG5cdFx0XHRcdGFkZENsYXNzKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLmRyYWcpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBQcmV2ZW50IHRleHQgc2VsZWN0aW9uIHdoZW4gZHJhZ2dpbmcgdGhlIGhhbmRsZXMuXHJcblx0XHRcdC8vIEluIG5vVWlTbGlkZXIgPD0gOS4yLjAsIHRoaXMgd2FzIGhhbmRsZWQgYnkgY2FsbGluZyBwcmV2ZW50RGVmYXVsdCBvbiBtb3VzZS90b3VjaCBzdGFydC9tb3ZlLFxyXG5cdFx0XHQvLyB3aGljaCBpcyBzY3JvbGwgYmxvY2tpbmcuIFRoZSBzZWxlY3RzdGFydCBldmVudCBpcyBzdXBwb3J0ZWQgYnkgRmlyZUZveCBzdGFydGluZyBmcm9tIHZlcnNpb24gNTIsXHJcblx0XHRcdC8vIG1lYW5pbmcgdGhlIG9ubHkgaG9sZG91dCBpcyBpT1MgU2FmYXJpLiBUaGlzIGRvZXNuJ3QgbWF0dGVyOiB0ZXh0IHNlbGVjdGlvbiBpc24ndCB0cmlnZ2VyZWQgdGhlcmUuXHJcblx0XHRcdC8vIFRoZSAnY3Vyc29yJyBmbGFnIGlzIGZhbHNlLlxyXG5cdFx0XHQvLyBTZWU6IGh0dHA6Ly9jYW5pdXNlLmNvbS8jc2VhcmNoPXNlbGVjdHN0YXJ0XHJcblx0XHRcdHNjb3BlX0JvZHkuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0c3RhcnQnLCBwcmV2ZW50RGVmYXVsdCwgZmFsc2UpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGRhdGEuaGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZU51bWJlcil7XHJcblx0XHRcdGZpcmVFdmVudCgnc3RhcnQnLCBoYW5kbGVOdW1iZXIpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvLyBNb3ZlIGNsb3Nlc3QgaGFuZGxlIHRvIHRhcHBlZCBsb2NhdGlvbi5cclxuXHRmdW5jdGlvbiBldmVudFRhcCAoIGV2ZW50ICkge1xyXG5cclxuXHRcdC8vIFRoZSB0YXAgZXZlbnQgc2hvdWxkbid0IHByb3BhZ2F0ZSB1cFxyXG5cdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG5cdFx0dmFyIHByb3Bvc2FsID0gY2FsY1BvaW50VG9QZXJjZW50YWdlKGV2ZW50LmNhbGNQb2ludCk7XHJcblx0XHR2YXIgaGFuZGxlTnVtYmVyID0gZ2V0Q2xvc2VzdEhhbmRsZShwcm9wb3NhbCk7XHJcblxyXG5cdFx0Ly8gVGFja2xlIHRoZSBjYXNlIHRoYXQgYWxsIGhhbmRsZXMgYXJlICdkaXNhYmxlZCcuXHJcblx0XHRpZiAoIGhhbmRsZU51bWJlciA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBGbGFnIHRoZSBzbGlkZXIgYXMgaXQgaXMgbm93IGluIGEgdHJhbnNpdGlvbmFsIHN0YXRlLlxyXG5cdFx0Ly8gVHJhbnNpdGlvbiB0YWtlcyBhIGNvbmZpZ3VyYWJsZSBhbW91bnQgb2YgbXMgKGRlZmF1bHQgMzAwKS4gUmUtZW5hYmxlIHRoZSBzbGlkZXIgYWZ0ZXIgdGhhdC5cclxuXHRcdGlmICggIW9wdGlvbnMuZXZlbnRzLnNuYXAgKSB7XHJcblx0XHRcdGFkZENsYXNzRm9yKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLnRhcCwgb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbik7XHJcblx0XHR9XHJcblxyXG5cdFx0c2V0SGFuZGxlKGhhbmRsZU51bWJlciwgcHJvcG9zYWwsIHRydWUsIHRydWUpO1xyXG5cclxuXHRcdHNldFppbmRleCgpO1xyXG5cclxuXHRcdGZpcmVFdmVudCgnc2xpZGUnLCBoYW5kbGVOdW1iZXIsIHRydWUpO1xyXG5cdFx0ZmlyZUV2ZW50KCd1cGRhdGUnLCBoYW5kbGVOdW1iZXIsIHRydWUpO1xyXG5cdFx0ZmlyZUV2ZW50KCdjaGFuZ2UnLCBoYW5kbGVOdW1iZXIsIHRydWUpO1xyXG5cdFx0ZmlyZUV2ZW50KCdzZXQnLCBoYW5kbGVOdW1iZXIsIHRydWUpO1xyXG5cclxuXHRcdGlmICggb3B0aW9ucy5ldmVudHMuc25hcCApIHtcclxuXHRcdFx0ZXZlbnRTdGFydChldmVudCwgeyBoYW5kbGVOdW1iZXJzOiBbaGFuZGxlTnVtYmVyXSB9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIEZpcmVzIGEgJ2hvdmVyJyBldmVudCBmb3IgYSBob3ZlcmVkIG1vdXNlL3BlbiBwb3NpdGlvbi5cclxuXHRmdW5jdGlvbiBldmVudEhvdmVyICggZXZlbnQgKSB7XHJcblxyXG5cdFx0dmFyIHByb3Bvc2FsID0gY2FsY1BvaW50VG9QZXJjZW50YWdlKGV2ZW50LmNhbGNQb2ludCk7XHJcblxyXG5cdFx0dmFyIHRvID0gc2NvcGVfU3BlY3RydW0uZ2V0U3RlcChwcm9wb3NhbCk7XHJcblx0XHR2YXIgdmFsdWUgPSBzY29wZV9TcGVjdHJ1bS5mcm9tU3RlcHBpbmcodG8pO1xyXG5cclxuXHRcdE9iamVjdC5rZXlzKHNjb3BlX0V2ZW50cykuZm9yRWFjaChmdW5jdGlvbiggdGFyZ2V0RXZlbnQgKSB7XHJcblx0XHRcdGlmICggJ2hvdmVyJyA9PT0gdGFyZ2V0RXZlbnQuc3BsaXQoJy4nKVswXSApIHtcclxuXHRcdFx0XHRzY29wZV9FdmVudHNbdGFyZ2V0RXZlbnRdLmZvckVhY2goZnVuY3Rpb24oIGNhbGxiYWNrICkge1xyXG5cdFx0XHRcdFx0Y2FsbGJhY2suY2FsbCggc2NvcGVfU2VsZiwgdmFsdWUgKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvLyBBdHRhY2ggZXZlbnRzIHRvIHNldmVyYWwgc2xpZGVyIHBhcnRzLlxyXG5cdGZ1bmN0aW9uIGJpbmRTbGlkZXJFdmVudHMgKCBiZWhhdmlvdXIgKSB7XHJcblxyXG5cdFx0Ly8gQXR0YWNoIHRoZSBzdGFuZGFyZCBkcmFnIGV2ZW50IHRvIHRoZSBoYW5kbGVzLlxyXG5cdFx0aWYgKCAhYmVoYXZpb3VyLmZpeGVkICkge1xyXG5cclxuXHRcdFx0c2NvcGVfSGFuZGxlcy5mb3JFYWNoKGZ1bmN0aW9uKCBoYW5kbGUsIGluZGV4ICl7XHJcblxyXG5cdFx0XHRcdC8vIFRoZXNlIGV2ZW50cyBhcmUgb25seSBib3VuZCB0byB0aGUgdmlzdWFsIGhhbmRsZVxyXG5cdFx0XHRcdC8vIGVsZW1lbnQsIG5vdCB0aGUgJ3JlYWwnIG9yaWdpbiBlbGVtZW50LlxyXG5cdFx0XHRcdGF0dGFjaEV2ZW50ICggYWN0aW9ucy5zdGFydCwgaGFuZGxlLmNoaWxkcmVuWzBdLCBldmVudFN0YXJ0LCB7XHJcblx0XHRcdFx0XHRoYW5kbGVOdW1iZXJzOiBbaW5kZXhdXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEF0dGFjaCB0aGUgdGFwIGV2ZW50IHRvIHRoZSBzbGlkZXIgYmFzZS5cclxuXHRcdGlmICggYmVoYXZpb3VyLnRhcCApIHtcclxuXHRcdFx0YXR0YWNoRXZlbnQgKGFjdGlvbnMuc3RhcnQsIHNjb3BlX0Jhc2UsIGV2ZW50VGFwLCB7fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRmlyZSBob3ZlciBldmVudHNcclxuXHRcdGlmICggYmVoYXZpb3VyLmhvdmVyICkge1xyXG5cdFx0XHRhdHRhY2hFdmVudCAoYWN0aW9ucy5tb3ZlLCBzY29wZV9CYXNlLCBldmVudEhvdmVyLCB7IGhvdmVyOiB0cnVlIH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE1ha2UgdGhlIHJhbmdlIGRyYWdnYWJsZS5cclxuXHRcdGlmICggYmVoYXZpb3VyLmRyYWcgKXtcclxuXHJcblx0XHRcdHNjb3BlX0Nvbm5lY3RzLmZvckVhY2goZnVuY3Rpb24oIGNvbm5lY3QsIGluZGV4ICl7XHJcblxyXG5cdFx0XHRcdGlmICggY29ubmVjdCA9PT0gZmFsc2UgfHwgaW5kZXggPT09IDAgfHwgaW5kZXggPT09IHNjb3BlX0Nvbm5lY3RzLmxlbmd0aCAtIDEgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR2YXIgaGFuZGxlQmVmb3JlID0gc2NvcGVfSGFuZGxlc1tpbmRleCAtIDFdO1xyXG5cdFx0XHRcdHZhciBoYW5kbGVBZnRlciA9IHNjb3BlX0hhbmRsZXNbaW5kZXhdO1xyXG5cdFx0XHRcdHZhciBldmVudEhvbGRlcnMgPSBbY29ubmVjdF07XHJcblxyXG5cdFx0XHRcdGFkZENsYXNzKGNvbm5lY3QsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5kcmFnZ2FibGUpO1xyXG5cclxuXHRcdFx0XHQvLyBXaGVuIHRoZSByYW5nZSBpcyBmaXhlZCwgdGhlIGVudGlyZSByYW5nZSBjYW5cclxuXHRcdFx0XHQvLyBiZSBkcmFnZ2VkIGJ5IHRoZSBoYW5kbGVzLiBUaGUgaGFuZGxlIGluIHRoZSBmaXJzdFxyXG5cdFx0XHRcdC8vIG9yaWdpbiB3aWxsIHByb3BhZ2F0ZSB0aGUgc3RhcnQgZXZlbnQgdXB3YXJkLFxyXG5cdFx0XHRcdC8vIGJ1dCBpdCBuZWVkcyB0byBiZSBib3VuZCBtYW51YWxseSBvbiB0aGUgb3RoZXIuXHJcblx0XHRcdFx0aWYgKCBiZWhhdmlvdXIuZml4ZWQgKSB7XHJcblx0XHRcdFx0XHRldmVudEhvbGRlcnMucHVzaChoYW5kbGVCZWZvcmUuY2hpbGRyZW5bMF0pO1xyXG5cdFx0XHRcdFx0ZXZlbnRIb2xkZXJzLnB1c2goaGFuZGxlQWZ0ZXIuY2hpbGRyZW5bMF0pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZXZlbnRIb2xkZXJzLmZvckVhY2goZnVuY3Rpb24oIGV2ZW50SG9sZGVyICkge1xyXG5cdFx0XHRcdFx0YXR0YWNoRXZlbnQgKCBhY3Rpb25zLnN0YXJ0LCBldmVudEhvbGRlciwgZXZlbnRTdGFydCwge1xyXG5cdFx0XHRcdFx0XHRoYW5kbGVzOiBbaGFuZGxlQmVmb3JlLCBoYW5kbGVBZnRlcl0sXHJcblx0XHRcdFx0XHRcdGhhbmRsZU51bWJlcnM6IFtpbmRleCAtIDEsIGluZGV4XVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblxyXG5cdC8vIFNwbGl0IG91dCB0aGUgaGFuZGxlIHBvc2l0aW9uaW5nIGxvZ2ljIHNvIHRoZSBNb3ZlIGV2ZW50IGNhbiB1c2UgaXQsIHRvb1xyXG5cdGZ1bmN0aW9uIGNoZWNrSGFuZGxlUG9zaXRpb24gKCByZWZlcmVuY2UsIGhhbmRsZU51bWJlciwgdG8sIGxvb2tCYWNrd2FyZCwgbG9va0ZvcndhcmQsIGdldFZhbHVlICkge1xyXG5cclxuXHRcdC8vIEZvciBzbGlkZXJzIHdpdGggbXVsdGlwbGUgaGFuZGxlcywgbGltaXQgbW92ZW1lbnQgdG8gdGhlIG90aGVyIGhhbmRsZS5cclxuXHRcdC8vIEFwcGx5IHRoZSBtYXJnaW4gb3B0aW9uIGJ5IGFkZGluZyBpdCB0byB0aGUgaGFuZGxlIHBvc2l0aW9ucy5cclxuXHRcdGlmICggc2NvcGVfSGFuZGxlcy5sZW5ndGggPiAxICkge1xyXG5cclxuXHRcdFx0aWYgKCBsb29rQmFja3dhcmQgJiYgaGFuZGxlTnVtYmVyID4gMCApIHtcclxuXHRcdFx0XHR0byA9IE1hdGgubWF4KHRvLCByZWZlcmVuY2VbaGFuZGxlTnVtYmVyIC0gMV0gKyBvcHRpb25zLm1hcmdpbik7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggbG9va0ZvcndhcmQgJiYgaGFuZGxlTnVtYmVyIDwgc2NvcGVfSGFuZGxlcy5sZW5ndGggLSAxICkge1xyXG5cdFx0XHRcdHRvID0gTWF0aC5taW4odG8sIHJlZmVyZW5jZVtoYW5kbGVOdW1iZXIgKyAxXSAtIG9wdGlvbnMubWFyZ2luKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFRoZSBsaW1pdCBvcHRpb24gaGFzIHRoZSBvcHBvc2l0ZSBlZmZlY3QsIGxpbWl0aW5nIGhhbmRsZXMgdG8gYVxyXG5cdFx0Ly8gbWF4aW11bSBkaXN0YW5jZSBmcm9tIGFub3RoZXIuIExpbWl0IG11c3QgYmUgPiAwLCBhcyBvdGhlcndpc2VcclxuXHRcdC8vIGhhbmRsZXMgd291bGQgYmUgdW5tb3ZlYWJsZS5cclxuXHRcdGlmICggc2NvcGVfSGFuZGxlcy5sZW5ndGggPiAxICYmIG9wdGlvbnMubGltaXQgKSB7XHJcblxyXG5cdFx0XHRpZiAoIGxvb2tCYWNrd2FyZCAmJiBoYW5kbGVOdW1iZXIgPiAwICkge1xyXG5cdFx0XHRcdHRvID0gTWF0aC5taW4odG8sIHJlZmVyZW5jZVtoYW5kbGVOdW1iZXIgLSAxXSArIG9wdGlvbnMubGltaXQpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIGxvb2tGb3J3YXJkICYmIGhhbmRsZU51bWJlciA8IHNjb3BlX0hhbmRsZXMubGVuZ3RoIC0gMSApIHtcclxuXHRcdFx0XHR0byA9IE1hdGgubWF4KHRvLCByZWZlcmVuY2VbaGFuZGxlTnVtYmVyICsgMV0gLSBvcHRpb25zLmxpbWl0KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFRoZSBwYWRkaW5nIG9wdGlvbiBrZWVwcyB0aGUgaGFuZGxlcyBhIGNlcnRhaW4gZGlzdGFuY2UgZnJvbSB0aGVcclxuXHRcdC8vIGVkZ2VzIG9mIHRoZSBzbGlkZXIuIFBhZGRpbmcgbXVzdCBiZSA+IDAuXHJcblx0XHRpZiAoIG9wdGlvbnMucGFkZGluZyApIHtcclxuXHJcblx0XHRcdGlmICggaGFuZGxlTnVtYmVyID09PSAwICkge1xyXG5cdFx0XHRcdHRvID0gTWF0aC5tYXgodG8sIG9wdGlvbnMucGFkZGluZyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggaGFuZGxlTnVtYmVyID09PSBzY29wZV9IYW5kbGVzLmxlbmd0aCAtIDEgKSB7XHJcblx0XHRcdFx0dG8gPSBNYXRoLm1pbih0bywgMTAwIC0gb3B0aW9ucy5wYWRkaW5nKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRvID0gc2NvcGVfU3BlY3RydW0uZ2V0U3RlcCh0byk7XHJcblxyXG5cdFx0Ly8gTGltaXQgcGVyY2VudGFnZSB0byB0aGUgMCAtIDEwMCByYW5nZVxyXG5cdFx0dG8gPSBsaW1pdCh0byk7XHJcblxyXG5cdFx0Ly8gUmV0dXJuIGZhbHNlIGlmIGhhbmRsZSBjYW4ndCBtb3ZlXHJcblx0XHRpZiAoIHRvID09PSByZWZlcmVuY2VbaGFuZGxlTnVtYmVyXSAmJiAhZ2V0VmFsdWUgKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdG87XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiB0b1BjdCAoIHBjdCApIHtcclxuXHRcdHJldHVybiBwY3QgKyAnJSc7XHJcblx0fVxyXG5cclxuXHQvLyBVcGRhdGVzIHNjb3BlX0xvY2F0aW9ucyBhbmQgc2NvcGVfVmFsdWVzLCB1cGRhdGVzIHZpc3VhbCBzdGF0ZVxyXG5cdGZ1bmN0aW9uIHVwZGF0ZUhhbmRsZVBvc2l0aW9uICggaGFuZGxlTnVtYmVyLCB0byApIHtcclxuXHJcblx0XHQvLyBVcGRhdGUgbG9jYXRpb25zLlxyXG5cdFx0c2NvcGVfTG9jYXRpb25zW2hhbmRsZU51bWJlcl0gPSB0bztcclxuXHJcblx0XHQvLyBDb252ZXJ0IHRoZSB2YWx1ZSB0byB0aGUgc2xpZGVyIHN0ZXBwaW5nL3JhbmdlLlxyXG5cdFx0c2NvcGVfVmFsdWVzW2hhbmRsZU51bWJlcl0gPSBzY29wZV9TcGVjdHJ1bS5mcm9tU3RlcHBpbmcodG8pO1xyXG5cclxuXHRcdC8vIENhbGxlZCBzeW5jaHJvbm91c2x5IG9yIG9uIHRoZSBuZXh0IGFuaW1hdGlvbkZyYW1lXHJcblx0XHR2YXIgc3RhdGVVcGRhdGUgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0c2NvcGVfSGFuZGxlc1toYW5kbGVOdW1iZXJdLnN0eWxlW29wdGlvbnMuc3R5bGVdID0gdG9QY3QodG8pO1xyXG5cdFx0XHR1cGRhdGVDb25uZWN0KGhhbmRsZU51bWJlcik7XHJcblx0XHRcdHVwZGF0ZUNvbm5lY3QoaGFuZGxlTnVtYmVyICsgMSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFNldCB0aGUgaGFuZGxlIHRvIHRoZSBuZXcgcG9zaXRpb24uXHJcblx0XHQvLyBVc2UgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGZvciBlZmZpY2llbnQgcGFpbnRpbmcuXHJcblx0XHQvLyBObyBzaWduaWZpY2FudCBlZmZlY3QgaW4gQ2hyb21lLCBFZGdlIHNlZXMgZHJhbWF0aWMgcGVyZm9ybWFjZSBpbXByb3ZlbWVudHMuXHJcblx0XHQvLyBPcHRpb24gdG8gZGlzYWJsZSBpcyB1c2VmdWwgZm9yIHVuaXQgdGVzdHMsIGFuZCBzaW5nbGUtc3RlcCBkZWJ1Z2dpbmcuXHJcblx0XHRpZiAoIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgJiYgb3B0aW9ucy51c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgKSB7XHJcblx0XHRcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RhdGVVcGRhdGUpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c3RhdGVVcGRhdGUoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHNldFppbmRleCAoICkge1xyXG5cclxuXHRcdHNjb3BlX0hhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIpe1xyXG5cdFx0XHQvLyBIYW5kbGVzIGJlZm9yZSB0aGUgc2xpZGVyIG1pZGRsZSBhcmUgc3RhY2tlZCBsYXRlciA9IGhpZ2hlcixcclxuXHRcdFx0Ly8gSGFuZGxlcyBhZnRlciB0aGUgbWlkZGxlIGxhdGVyIGlzIGxvd2VyXHJcblx0XHRcdC8vIFtbN10gWzhdIC4uLi4uLi4uLi4gfCAuLi4uLi4uLi4uIFs1XSBbNF1cclxuXHRcdFx0dmFyIGRpciA9IChzY29wZV9Mb2NhdGlvbnNbaGFuZGxlTnVtYmVyXSA+IDUwID8gLTEgOiAxKTtcclxuXHRcdFx0dmFyIHpJbmRleCA9IDMgKyAoc2NvcGVfSGFuZGxlcy5sZW5ndGggKyAoZGlyICogaGFuZGxlTnVtYmVyKSk7XHJcblx0XHRcdHNjb3BlX0hhbmRsZXNbaGFuZGxlTnVtYmVyXS5jaGlsZE5vZGVzWzBdLnN0eWxlLnpJbmRleCA9IHpJbmRleDtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Ly8gVGVzdCBzdWdnZXN0ZWQgdmFsdWVzIGFuZCBhcHBseSBtYXJnaW4sIHN0ZXAuXHJcblx0ZnVuY3Rpb24gc2V0SGFuZGxlICggaGFuZGxlTnVtYmVyLCB0bywgbG9va0JhY2t3YXJkLCBsb29rRm9yd2FyZCApIHtcclxuXHJcblx0XHR0byA9IGNoZWNrSGFuZGxlUG9zaXRpb24oc2NvcGVfTG9jYXRpb25zLCBoYW5kbGVOdW1iZXIsIHRvLCBsb29rQmFja3dhcmQsIGxvb2tGb3J3YXJkLCBmYWxzZSk7XHJcblxyXG5cdFx0aWYgKCB0byA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHR1cGRhdGVIYW5kbGVQb3NpdGlvbihoYW5kbGVOdW1iZXIsIHRvKTtcclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8vIFVwZGF0ZXMgc3R5bGUgYXR0cmlidXRlIGZvciBjb25uZWN0IG5vZGVzXHJcblx0ZnVuY3Rpb24gdXBkYXRlQ29ubmVjdCAoIGluZGV4ICkge1xyXG5cclxuXHRcdC8vIFNraXAgY29ubmVjdHMgc2V0IHRvIGZhbHNlXHJcblx0XHRpZiAoICFzY29wZV9Db25uZWN0c1tpbmRleF0gKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR2YXIgbCA9IDA7XHJcblx0XHR2YXIgaCA9IDEwMDtcclxuXHJcblx0XHRpZiAoIGluZGV4ICE9PSAwICkge1xyXG5cdFx0XHRsID0gc2NvcGVfTG9jYXRpb25zW2luZGV4IC0gMV07XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBpbmRleCAhPT0gc2NvcGVfQ29ubmVjdHMubGVuZ3RoIC0gMSApIHtcclxuXHRcdFx0aCA9IHNjb3BlX0xvY2F0aW9uc1tpbmRleF07XHJcblx0XHR9XHJcblxyXG5cdFx0c2NvcGVfQ29ubmVjdHNbaW5kZXhdLnN0eWxlW29wdGlvbnMuc3R5bGVdID0gdG9QY3QobCk7XHJcblx0XHRzY29wZV9Db25uZWN0c1tpbmRleF0uc3R5bGVbb3B0aW9ucy5zdHlsZU9wb3NpdGVdID0gdG9QY3QoMTAwIC0gaCk7XHJcblx0fVxyXG5cclxuXHQvLyAuLi5cclxuXHRmdW5jdGlvbiBzZXRWYWx1ZSAoIHRvLCBoYW5kbGVOdW1iZXIgKSB7XHJcblxyXG5cdFx0Ly8gU2V0dGluZyB3aXRoIG51bGwgaW5kaWNhdGVzIGFuICdpZ25vcmUnLlxyXG5cdFx0Ly8gSW5wdXR0aW5nICdmYWxzZScgaXMgaW52YWxpZC5cclxuXHRcdGlmICggdG8gPT09IG51bGwgfHwgdG8gPT09IGZhbHNlICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgYSBmb3JtYXR0ZWQgbnVtYmVyIHdhcyBwYXNzZWQsIGF0dGVtdCB0byBkZWNvZGUgaXQuXHJcblx0XHRpZiAoIHR5cGVvZiB0byA9PT0gJ251bWJlcicgKSB7XHJcblx0XHRcdHRvID0gU3RyaW5nKHRvKTtcclxuXHRcdH1cclxuXHJcblx0XHR0byA9IG9wdGlvbnMuZm9ybWF0LmZyb20odG8pO1xyXG5cclxuXHRcdC8vIFJlcXVlc3QgYW4gdXBkYXRlIGZvciBhbGwgbGlua3MgaWYgdGhlIHZhbHVlIHdhcyBpbnZhbGlkLlxyXG5cdFx0Ly8gRG8gc28gdG9vIGlmIHNldHRpbmcgdGhlIGhhbmRsZSBmYWlscy5cclxuXHRcdGlmICggdG8gIT09IGZhbHNlICYmICFpc05hTih0bykgKSB7XHJcblx0XHRcdHNldEhhbmRsZShoYW5kbGVOdW1iZXIsIHNjb3BlX1NwZWN0cnVtLnRvU3RlcHBpbmcodG8pLCBmYWxzZSwgZmFsc2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gU2V0IHRoZSBzbGlkZXIgdmFsdWUuXHJcblx0ZnVuY3Rpb24gdmFsdWVTZXQgKCBpbnB1dCwgZmlyZVNldEV2ZW50ICkge1xyXG5cclxuXHRcdHZhciB2YWx1ZXMgPSBhc0FycmF5KGlucHV0KTtcclxuXHRcdHZhciBpc0luaXQgPSBzY29wZV9Mb2NhdGlvbnNbMF0gPT09IHVuZGVmaW5lZDtcclxuXHJcblx0XHQvLyBFdmVudCBmaXJlcyBieSBkZWZhdWx0XHJcblx0XHRmaXJlU2V0RXZlbnQgPSAoZmlyZVNldEV2ZW50ID09PSB1bmRlZmluZWQgPyB0cnVlIDogISFmaXJlU2V0RXZlbnQpO1xyXG5cclxuXHRcdHZhbHVlcy5mb3JFYWNoKHNldFZhbHVlKTtcclxuXHJcblx0XHQvLyBBbmltYXRpb24gaXMgb3B0aW9uYWwuXHJcblx0XHQvLyBNYWtlIHN1cmUgdGhlIGluaXRpYWwgdmFsdWVzIHdlcmUgc2V0IGJlZm9yZSB1c2luZyBhbmltYXRlZCBwbGFjZW1lbnQuXHJcblx0XHRpZiAoIG9wdGlvbnMuYW5pbWF0ZSAmJiAhaXNJbml0ICkge1xyXG5cdFx0XHRhZGRDbGFzc0ZvcihzY29wZV9UYXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy50YXAsIG9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE5vdyB0aGF0IGFsbCBiYXNlIHZhbHVlcyBhcmUgc2V0LCBhcHBseSBjb25zdHJhaW50c1xyXG5cdFx0c2NvcGVfSGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZU51bWJlcil7XHJcblx0XHRcdHNldEhhbmRsZShoYW5kbGVOdW1iZXIsIHNjb3BlX0xvY2F0aW9uc1toYW5kbGVOdW1iZXJdLCB0cnVlLCBmYWxzZSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRzZXRaaW5kZXgoKTtcclxuXHJcblx0XHRzY29wZV9IYW5kbGVOdW1iZXJzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlTnVtYmVyKXtcclxuXHJcblx0XHRcdGZpcmVFdmVudCgndXBkYXRlJywgaGFuZGxlTnVtYmVyKTtcclxuXHJcblx0XHRcdC8vIEZpcmUgdGhlIGV2ZW50IG9ubHkgZm9yIGhhbmRsZXMgdGhhdCByZWNlaXZlZCBhIG5ldyB2YWx1ZSwgYXMgcGVyICM1NzlcclxuXHRcdFx0aWYgKCB2YWx1ZXNbaGFuZGxlTnVtYmVyXSAhPT0gbnVsbCAmJiBmaXJlU2V0RXZlbnQgKSB7XHJcblx0XHRcdFx0ZmlyZUV2ZW50KCdzZXQnLCBoYW5kbGVOdW1iZXIpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8vIFJlc2V0IHNsaWRlciB0byBpbml0aWFsIHZhbHVlc1xyXG5cdGZ1bmN0aW9uIHZhbHVlUmVzZXQgKCBmaXJlU2V0RXZlbnQgKSB7XHJcblx0XHR2YWx1ZVNldChvcHRpb25zLnN0YXJ0LCBmaXJlU2V0RXZlbnQpO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IHRoZSBzbGlkZXIgdmFsdWUuXHJcblx0ZnVuY3Rpb24gdmFsdWVHZXQgKCApIHtcclxuXHJcblx0XHR2YXIgdmFsdWVzID0gc2NvcGVfVmFsdWVzLm1hcChvcHRpb25zLmZvcm1hdC50byk7XHJcblxyXG5cdFx0Ly8gSWYgb25seSBvbmUgaGFuZGxlIGlzIHVzZWQsIHJldHVybiBhIHNpbmdsZSB2YWx1ZS5cclxuXHRcdGlmICggdmFsdWVzLmxlbmd0aCA9PT0gMSApe1xyXG5cdFx0XHRyZXR1cm4gdmFsdWVzWzBdO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB2YWx1ZXM7XHJcblx0fVxyXG5cclxuXHQvLyBSZW1vdmVzIGNsYXNzZXMgZnJvbSB0aGUgcm9vdCBhbmQgZW1wdGllcyBpdC5cclxuXHRmdW5jdGlvbiBkZXN0cm95ICggKSB7XHJcblxyXG5cdFx0Zm9yICggdmFyIGtleSBpbiBvcHRpb25zLmNzc0NsYXNzZXMgKSB7XHJcblx0XHRcdGlmICggIW9wdGlvbnMuY3NzQ2xhc3Nlcy5oYXNPd25Qcm9wZXJ0eShrZXkpICkgeyBjb250aW51ZTsgfVxyXG5cdFx0XHRyZW1vdmVDbGFzcyhzY29wZV9UYXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlc1trZXldKTtcclxuXHRcdH1cclxuXHJcblx0XHR3aGlsZSAoc2NvcGVfVGFyZ2V0LmZpcnN0Q2hpbGQpIHtcclxuXHRcdFx0c2NvcGVfVGFyZ2V0LnJlbW92ZUNoaWxkKHNjb3BlX1RhcmdldC5maXJzdENoaWxkKTtcclxuXHRcdH1cclxuXHJcblx0XHRkZWxldGUgc2NvcGVfVGFyZ2V0Lm5vVWlTbGlkZXI7XHJcblx0fVxyXG5cclxuXHQvLyBHZXQgdGhlIGN1cnJlbnQgc3RlcCBzaXplIGZvciB0aGUgc2xpZGVyLlxyXG5cdGZ1bmN0aW9uIGdldEN1cnJlbnRTdGVwICggKSB7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgYWxsIGxvY2F0aW9ucywgbWFwIHRoZW0gdG8gdGhlaXIgc3RlcHBpbmcgcG9pbnQuXHJcblx0XHQvLyBHZXQgdGhlIHN0ZXAgcG9pbnQsIHRoZW4gZmluZCBpdCBpbiB0aGUgaW5wdXQgbGlzdC5cclxuXHRcdHJldHVybiBzY29wZV9Mb2NhdGlvbnMubWFwKGZ1bmN0aW9uKCBsb2NhdGlvbiwgaW5kZXggKXtcclxuXHJcblx0XHRcdHZhciBuZWFyYnlTdGVwcyA9IHNjb3BlX1NwZWN0cnVtLmdldE5lYXJieVN0ZXBzKCBsb2NhdGlvbiApO1xyXG5cdFx0XHR2YXIgdmFsdWUgPSBzY29wZV9WYWx1ZXNbaW5kZXhdO1xyXG5cdFx0XHR2YXIgaW5jcmVtZW50ID0gbmVhcmJ5U3RlcHMudGhpc1N0ZXAuc3RlcDtcclxuXHRcdFx0dmFyIGRlY3JlbWVudCA9IG51bGw7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgbmV4dCB2YWx1ZSBpbiB0aGlzIHN0ZXAgbW92ZXMgaW50byB0aGUgbmV4dCBzdGVwLFxyXG5cdFx0XHQvLyB0aGUgaW5jcmVtZW50IGlzIHRoZSBzdGFydCBvZiB0aGUgbmV4dCBzdGVwIC0gdGhlIGN1cnJlbnQgdmFsdWVcclxuXHRcdFx0aWYgKCBpbmNyZW1lbnQgIT09IGZhbHNlICkge1xyXG5cdFx0XHRcdGlmICggdmFsdWUgKyBpbmNyZW1lbnQgPiBuZWFyYnlTdGVwcy5zdGVwQWZ0ZXIuc3RhcnRWYWx1ZSApIHtcclxuXHRcdFx0XHRcdGluY3JlbWVudCA9IG5lYXJieVN0ZXBzLnN0ZXBBZnRlci5zdGFydFZhbHVlIC0gdmFsdWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIHZhbHVlIGlzIGJleW9uZCB0aGUgc3RhcnRpbmcgcG9pbnRcclxuXHRcdFx0aWYgKCB2YWx1ZSA+IG5lYXJieVN0ZXBzLnRoaXNTdGVwLnN0YXJ0VmFsdWUgKSB7XHJcblx0XHRcdFx0ZGVjcmVtZW50ID0gbmVhcmJ5U3RlcHMudGhpc1N0ZXAuc3RlcDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZWxzZSBpZiAoIG5lYXJieVN0ZXBzLnN0ZXBCZWZvcmUuc3RlcCA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdFx0ZGVjcmVtZW50ID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIGEgaGFuZGxlIGlzIGF0IHRoZSBzdGFydCBvZiBhIHN0ZXAsIGl0IGFsd2F5cyBzdGVwcyBiYWNrIGludG8gdGhlIHByZXZpb3VzIHN0ZXAgZmlyc3RcclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0ZGVjcmVtZW50ID0gdmFsdWUgLSBuZWFyYnlTdGVwcy5zdGVwQmVmb3JlLmhpZ2hlc3RTdGVwO1xyXG5cdFx0XHR9XHJcblxyXG5cclxuXHRcdFx0Ly8gTm93LCBpZiBhdCB0aGUgc2xpZGVyIGVkZ2VzLCB0aGVyZSBpcyBub3QgaW4vZGVjcmVtZW50XHJcblx0XHRcdGlmICggbG9jYXRpb24gPT09IDEwMCApIHtcclxuXHRcdFx0XHRpbmNyZW1lbnQgPSBudWxsO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRlbHNlIGlmICggbG9jYXRpb24gPT09IDAgKSB7XHJcblx0XHRcdFx0ZGVjcmVtZW50ID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQXMgcGVyICMzOTEsIHRoZSBjb21wYXJpc29uIGZvciB0aGUgZGVjcmVtZW50IHN0ZXAgY2FuIGhhdmUgc29tZSByb3VuZGluZyBpc3N1ZXMuXHJcblx0XHRcdHZhciBzdGVwRGVjaW1hbHMgPSBzY29wZV9TcGVjdHJ1bS5jb3VudFN0ZXBEZWNpbWFscygpO1xyXG5cclxuXHRcdFx0Ly8gUm91bmQgcGVyICMzOTFcclxuXHRcdFx0aWYgKCBpbmNyZW1lbnQgIT09IG51bGwgJiYgaW5jcmVtZW50ICE9PSBmYWxzZSApIHtcclxuXHRcdFx0XHRpbmNyZW1lbnQgPSBOdW1iZXIoaW5jcmVtZW50LnRvRml4ZWQoc3RlcERlY2ltYWxzKSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggZGVjcmVtZW50ICE9PSBudWxsICYmIGRlY3JlbWVudCAhPT0gZmFsc2UgKSB7XHJcblx0XHRcdFx0ZGVjcmVtZW50ID0gTnVtYmVyKGRlY3JlbWVudC50b0ZpeGVkKHN0ZXBEZWNpbWFscykpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gW2RlY3JlbWVudCwgaW5jcmVtZW50XTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Ly8gQXR0YWNoIGFuIGV2ZW50IHRvIHRoaXMgc2xpZGVyLCBwb3NzaWJseSBpbmNsdWRpbmcgYSBuYW1lc3BhY2VcclxuXHRmdW5jdGlvbiBiaW5kRXZlbnQgKCBuYW1lc3BhY2VkRXZlbnQsIGNhbGxiYWNrICkge1xyXG5cdFx0c2NvcGVfRXZlbnRzW25hbWVzcGFjZWRFdmVudF0gPSBzY29wZV9FdmVudHNbbmFtZXNwYWNlZEV2ZW50XSB8fCBbXTtcclxuXHRcdHNjb3BlX0V2ZW50c1tuYW1lc3BhY2VkRXZlbnRdLnB1c2goY2FsbGJhY2spO1xyXG5cclxuXHRcdC8vIElmIHRoZSBldmVudCBib3VuZCBpcyAndXBkYXRlLCcgZmlyZSBpdCBpbW1lZGlhdGVseSBmb3IgYWxsIGhhbmRsZXMuXHJcblx0XHRpZiAoIG5hbWVzcGFjZWRFdmVudC5zcGxpdCgnLicpWzBdID09PSAndXBkYXRlJyApIHtcclxuXHRcdFx0c2NvcGVfSGFuZGxlcy5mb3JFYWNoKGZ1bmN0aW9uKGEsIGluZGV4KXtcclxuXHRcdFx0XHRmaXJlRXZlbnQoJ3VwZGF0ZScsIGluZGV4KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBVbmRvIGF0dGFjaG1lbnQgb2YgZXZlbnRcclxuXHRmdW5jdGlvbiByZW1vdmVFdmVudCAoIG5hbWVzcGFjZWRFdmVudCApIHtcclxuXHJcblx0XHR2YXIgZXZlbnQgPSBuYW1lc3BhY2VkRXZlbnQgJiYgbmFtZXNwYWNlZEV2ZW50LnNwbGl0KCcuJylbMF07XHJcblx0XHR2YXIgbmFtZXNwYWNlID0gZXZlbnQgJiYgbmFtZXNwYWNlZEV2ZW50LnN1YnN0cmluZyhldmVudC5sZW5ndGgpO1xyXG5cclxuXHRcdE9iamVjdC5rZXlzKHNjb3BlX0V2ZW50cykuZm9yRWFjaChmdW5jdGlvbiggYmluZCApe1xyXG5cclxuXHRcdFx0dmFyIHRFdmVudCA9IGJpbmQuc3BsaXQoJy4nKVswXSxcclxuXHRcdFx0XHR0TmFtZXNwYWNlID0gYmluZC5zdWJzdHJpbmcodEV2ZW50Lmxlbmd0aCk7XHJcblxyXG5cdFx0XHRpZiAoICghZXZlbnQgfHwgZXZlbnQgPT09IHRFdmVudCkgJiYgKCFuYW1lc3BhY2UgfHwgbmFtZXNwYWNlID09PSB0TmFtZXNwYWNlKSApIHtcclxuXHRcdFx0XHRkZWxldGUgc2NvcGVfRXZlbnRzW2JpbmRdO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8vIFVwZGF0ZWFibGU6IG1hcmdpbiwgbGltaXQsIHBhZGRpbmcsIHN0ZXAsIHJhbmdlLCBhbmltYXRlLCBzbmFwXHJcblx0ZnVuY3Rpb24gdXBkYXRlT3B0aW9ucyAoIG9wdGlvbnNUb1VwZGF0ZSwgZmlyZVNldEV2ZW50ICkge1xyXG5cclxuXHRcdC8vIFNwZWN0cnVtIGlzIGNyZWF0ZWQgdXNpbmcgdGhlIHJhbmdlLCBzbmFwLCBkaXJlY3Rpb24gYW5kIHN0ZXAgb3B0aW9ucy5cclxuXHRcdC8vICdzbmFwJyBhbmQgJ3N0ZXAnIGNhbiBiZSB1cGRhdGVkLlxyXG5cdFx0Ly8gSWYgJ3NuYXAnIGFuZCAnc3RlcCcgYXJlIG5vdCBwYXNzZWQsIHRoZXkgc2hvdWxkIHJlbWFpbiB1bmNoYW5nZWQuXHJcblx0XHR2YXIgdiA9IHZhbHVlR2V0KCk7XHJcblxyXG5cdFx0dmFyIHVwZGF0ZUFibGUgPSBbJ21hcmdpbicsICdsaW1pdCcsICdwYWRkaW5nJywgJ3JhbmdlJywgJ2FuaW1hdGUnLCAnc25hcCcsICdzdGVwJywgJ2Zvcm1hdCddO1xyXG5cclxuXHRcdC8vIE9ubHkgY2hhbmdlIG9wdGlvbnMgdGhhdCB3ZSdyZSBhY3R1YWxseSBwYXNzZWQgdG8gdXBkYXRlLlxyXG5cdFx0dXBkYXRlQWJsZS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpe1xyXG5cdFx0XHRpZiAoIG9wdGlvbnNUb1VwZGF0ZVtuYW1lXSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdG9yaWdpbmFsT3B0aW9uc1tuYW1lXSA9IG9wdGlvbnNUb1VwZGF0ZVtuYW1lXTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dmFyIG5ld09wdGlvbnMgPSB0ZXN0T3B0aW9ucyhvcmlnaW5hbE9wdGlvbnMpO1xyXG5cclxuXHRcdC8vIExvYWQgbmV3IG9wdGlvbnMgaW50byB0aGUgc2xpZGVyIHN0YXRlXHJcblx0XHR1cGRhdGVBYmxlLmZvckVhY2goZnVuY3Rpb24obmFtZSl7XHJcblx0XHRcdGlmICggb3B0aW9uc1RvVXBkYXRlW25hbWVdICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0b3B0aW9uc1tuYW1lXSA9IG5ld09wdGlvbnNbbmFtZV07XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHNjb3BlX1NwZWN0cnVtID0gbmV3T3B0aW9ucy5zcGVjdHJ1bTtcclxuXHJcblx0XHQvLyBMaW1pdCwgbWFyZ2luIGFuZCBwYWRkaW5nIGRlcGVuZCBvbiB0aGUgc3BlY3RydW0gYnV0IGFyZSBzdG9yZWQgb3V0c2lkZSBvZiBpdC4gKCM2NzcpXHJcblx0XHRvcHRpb25zLm1hcmdpbiA9IG5ld09wdGlvbnMubWFyZ2luO1xyXG5cdFx0b3B0aW9ucy5saW1pdCA9IG5ld09wdGlvbnMubGltaXQ7XHJcblx0XHRvcHRpb25zLnBhZGRpbmcgPSBuZXdPcHRpb25zLnBhZGRpbmc7XHJcblxyXG5cdFx0Ly8gVXBkYXRlIHBpcHMsIHJlbW92ZXMgZXhpc3RpbmcuXHJcblx0XHRpZiAoIG9wdGlvbnMucGlwcyApIHtcclxuXHRcdFx0cGlwcyhvcHRpb25zLnBpcHMpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEludmFsaWRhdGUgdGhlIGN1cnJlbnQgcG9zaXRpb25pbmcgc28gdmFsdWVTZXQgZm9yY2VzIGFuIHVwZGF0ZS5cclxuXHRcdHNjb3BlX0xvY2F0aW9ucyA9IFtdO1xyXG5cdFx0dmFsdWVTZXQob3B0aW9uc1RvVXBkYXRlLnN0YXJ0IHx8IHYsIGZpcmVTZXRFdmVudCk7XHJcblx0fVxyXG5cclxuXHQvLyBUaHJvdyBhbiBlcnJvciBpZiB0aGUgc2xpZGVyIHdhcyBhbHJlYWR5IGluaXRpYWxpemVkLlxyXG5cdGlmICggc2NvcGVfVGFyZ2V0Lm5vVWlTbGlkZXIgKSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6IFNsaWRlciB3YXMgYWxyZWFkeSBpbml0aWFsaXplZC5cIik7XHJcblx0fVxyXG5cclxuXHQvLyBDcmVhdGUgdGhlIGJhc2UgZWxlbWVudCwgaW5pdGlhbGlzZSBIVE1MIGFuZCBzZXQgY2xhc3Nlcy5cclxuXHQvLyBBZGQgaGFuZGxlcyBhbmQgY29ubmVjdCBlbGVtZW50cy5cclxuXHRhZGRTbGlkZXIoc2NvcGVfVGFyZ2V0KTtcclxuXHRhZGRFbGVtZW50cyhvcHRpb25zLmNvbm5lY3QsIHNjb3BlX0Jhc2UpO1xyXG5cclxuXHRzY29wZV9TZWxmID0ge1xyXG5cdFx0ZGVzdHJveTogZGVzdHJveSxcclxuXHRcdHN0ZXBzOiBnZXRDdXJyZW50U3RlcCxcclxuXHRcdG9uOiBiaW5kRXZlbnQsXHJcblx0XHRvZmY6IHJlbW92ZUV2ZW50LFxyXG5cdFx0Z2V0OiB2YWx1ZUdldCxcclxuXHRcdHNldDogdmFsdWVTZXQsXHJcblx0XHRyZXNldDogdmFsdWVSZXNldCxcclxuXHRcdC8vIEV4cG9zZWQgZm9yIHVuaXQgdGVzdGluZywgZG9uJ3QgdXNlIHRoaXMgaW4geW91ciBhcHBsaWNhdGlvbi5cclxuXHRcdF9fbW92ZUhhbmRsZXM6IGZ1bmN0aW9uKGEsIGIsIGMpIHsgbW92ZUhhbmRsZXMoYSwgYiwgc2NvcGVfTG9jYXRpb25zLCBjKTsgfSxcclxuXHRcdG9wdGlvbnM6IG9yaWdpbmFsT3B0aW9ucywgLy8gSXNzdWUgIzYwMCwgIzY3OFxyXG5cdFx0dXBkYXRlT3B0aW9uczogdXBkYXRlT3B0aW9ucyxcclxuXHRcdHRhcmdldDogc2NvcGVfVGFyZ2V0LCAvLyBJc3N1ZSAjNTk3XHJcblx0XHRyZW1vdmVQaXBzOiByZW1vdmVQaXBzLFxyXG5cdFx0cGlwczogcGlwcyAvLyBJc3N1ZSAjNTk0XHJcblx0fTtcclxuXHJcblx0Ly8gQXR0YWNoIHVzZXIgZXZlbnRzLlxyXG5cdGJpbmRTbGlkZXJFdmVudHMob3B0aW9ucy5ldmVudHMpO1xyXG5cclxuXHQvLyBVc2UgdGhlIHB1YmxpYyB2YWx1ZSBtZXRob2QgdG8gc2V0IHRoZSBzdGFydCB2YWx1ZXMuXHJcblx0dmFsdWVTZXQob3B0aW9ucy5zdGFydCk7XHJcblxyXG5cdGlmICggb3B0aW9ucy5waXBzICkge1xyXG5cdFx0cGlwcyhvcHRpb25zLnBpcHMpO1xyXG5cdH1cclxuXHJcblx0aWYgKCBvcHRpb25zLnRvb2x0aXBzICkge1xyXG5cdFx0dG9vbHRpcHMoKTtcclxuXHR9XHJcblxyXG5cdGFyaWEoKTtcclxuXHJcblx0cmV0dXJuIHNjb3BlX1NlbGY7XHJcblxyXG59XHJcblxyXG5cclxuXHQvLyBSdW4gdGhlIHN0YW5kYXJkIGluaXRpYWxpemVyXHJcblx0ZnVuY3Rpb24gaW5pdGlhbGl6ZSAoIHRhcmdldCwgb3JpZ2luYWxPcHRpb25zICkge1xyXG5cclxuXHRcdGlmICggIXRhcmdldCB8fCAhdGFyZ2V0Lm5vZGVOYW1lICkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6IGNyZWF0ZSByZXF1aXJlcyBhIHNpbmdsZSBlbGVtZW50LCBnb3Q6IFwiICsgdGFyZ2V0KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBUZXN0IHRoZSBvcHRpb25zIGFuZCBjcmVhdGUgdGhlIHNsaWRlciBlbnZpcm9ubWVudDtcclxuXHRcdHZhciBvcHRpb25zID0gdGVzdE9wdGlvbnMoIG9yaWdpbmFsT3B0aW9ucywgdGFyZ2V0ICk7XHJcblx0XHR2YXIgYXBpID0gY2xvc3VyZSggdGFyZ2V0LCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMgKTtcclxuXHJcblx0XHR0YXJnZXQubm9VaVNsaWRlciA9IGFwaTtcclxuXHJcblx0XHRyZXR1cm4gYXBpO1xyXG5cdH1cclxuXHJcblx0Ly8gVXNlIGFuIG9iamVjdCBpbnN0ZWFkIG9mIGEgZnVuY3Rpb24gZm9yIGZ1dHVyZSBleHBhbnNpYmlsaXR5O1xyXG5cdHJldHVybiB7XHJcblx0XHR2ZXJzaW9uOiBWRVJTSU9OLFxyXG5cdFx0Y3JlYXRlOiBpbml0aWFsaXplXHJcblx0fTtcclxuXHJcbn0pKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdmVuZG9yL25vdWlzbGlkZXIuanMiLCJpbXBvcnQgZGVzdGluYXRpb24gZnJvbSAnQHR1cmYvZGVzdGluYXRpb24nO1xuaW1wb3J0IHsgcG9seWdvbiB9IGZyb20gJ0B0dXJmL2hlbHBlcnMnO1xuXG4vKipcbiAqIFRha2VzIGEge0BsaW5rIFBvaW50fSBhbmQgY2FsY3VsYXRlcyB0aGUgY2lyY2xlIHBvbHlnb24gZ2l2ZW4gYSByYWRpdXMgaW4gZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnM7IGFuZCBzdGVwcyBmb3IgcHJlY2lzaW9uLlxuICpcbiAqIEBuYW1lIGNpcmNsZVxuICogQHBhcmFtIHtGZWF0dXJlPFBvaW50PnxudW1iZXJbXX0gY2VudGVyIGNlbnRlciBwb2ludFxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyByYWRpdXMgb2YgdGhlIGNpcmNsZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBPcHRpb25hbCBwYXJhbWV0ZXJzXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuc3RlcHM9NjRdIG51bWJlciBvZiBzdGVwc1xuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnVuaXRzPSdraWxvbWV0ZXJzJ10gbWlsZXMsIGtpbG9tZXRlcnMsIGRlZ3JlZXMsIG9yIHJhZGlhbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5wcm9wZXJ0aWVzPXt9XSBwcm9wZXJ0aWVzXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxQb2x5Z29uPn0gY2lyY2xlIHBvbHlnb25cbiAqIEBleGFtcGxlXG4gKiB2YXIgY2VudGVyID0gWy03NS4zNDMsIDM5Ljk4NF07XG4gKiB2YXIgcmFkaXVzID0gNTtcbiAqIHZhciBzdGVwcyA9IDEwO1xuICogdmFyIHVuaXRzID0gJ2tpbG9tZXRlcnMnO1xuICogdmFyIHByb3BlcnRpZXMgPSB7Zm9vOiAnYmFyJ307XG4gKlxuICogdmFyIGNpcmNsZSA9IHR1cmYuY2lyY2xlKGNlbnRlciwgcmFkaXVzLCBzdGVwcywgdW5pdHMsIHByb3BlcnRpZXMpO1xuICpcbiAqIC8vYWRkVG9NYXBcbiAqIHZhciBhZGRUb01hcCA9IFt0dXJmLnBvaW50KGNlbnRlciksIGNpcmNsZV1cbiAqL1xuZnVuY3Rpb24gY2lyY2xlKGNlbnRlciwgcmFkaXVzLCBvcHRpb25zKSB7XG4gICAgLy8gT3B0aW9uYWwgcGFyYW1zXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdmFyIHN0ZXBzID0gb3B0aW9ucy5zdGVwcyB8fCA2NDtcbiAgICB2YXIgdW5pdHMgPSBvcHRpb25zLnVuaXRzO1xuICAgIHZhciBwcm9wZXJ0aWVzID0gb3B0aW9ucy5wcm9wZXJ0aWVzO1xuXG4gICAgLy8gdmFsaWRhdGlvblxuICAgIGlmICghY2VudGVyKSB0aHJvdyBuZXcgRXJyb3IoJ2NlbnRlciBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghcmFkaXVzKSB0aHJvdyBuZXcgRXJyb3IoJ3JhZGl1cyBpcyByZXF1aXJlZCcpO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHRocm93IG5ldyBFcnJvcignb3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgIGlmICh0eXBlb2Ygc3RlcHMgIT09ICdudW1iZXInKSB0aHJvdyBuZXcgRXJyb3IoJ3N0ZXBzIG11c3QgYmUgYSBudW1iZXInKTtcblxuICAgIC8vIGRlZmF1bHQgcGFyYW1zXG4gICAgc3RlcHMgPSBzdGVwcyB8fCA2NDtcbiAgICBwcm9wZXJ0aWVzID0gcHJvcGVydGllcyB8fCBjZW50ZXIucHJvcGVydGllcyB8fCB7fTtcblxuICAgIHZhciBjb29yZGluYXRlcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RlcHM7IGkrKykge1xuICAgICAgICBjb29yZGluYXRlcy5wdXNoKGRlc3RpbmF0aW9uKGNlbnRlciwgcmFkaXVzLCBpICogMzYwIC8gc3RlcHMsIHVuaXRzKS5nZW9tZXRyeS5jb29yZGluYXRlcyk7XG4gICAgfVxuICAgIGNvb3JkaW5hdGVzLnB1c2goY29vcmRpbmF0ZXNbMF0pO1xuXG4gICAgcmV0dXJuIHBvbHlnb24oW2Nvb3JkaW5hdGVzXSwgcHJvcGVydGllcyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNpcmNsZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL0B0dXJmL2NpcmNsZS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy9odHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hhdmVyc2luZV9mb3JtdWxhXG4vL2h0dHA6Ly93d3cubW92YWJsZS10eXBlLmNvLnVrL3NjcmlwdHMvbGF0bG9uZy5odG1sXG5pbXBvcnQgeyBnZXRDb29yZCB9IGZyb20gJ0B0dXJmL2ludmFyaWFudCc7XG5pbXBvcnQgeyBwb2ludCwgZGlzdGFuY2VUb1JhZGlhbnMgfSBmcm9tICdAdHVyZi9oZWxwZXJzJztcblxuLyoqXG4gKiBUYWtlcyBhIHtAbGluayBQb2ludH0gYW5kIGNhbGN1bGF0ZXMgdGhlIGxvY2F0aW9uIG9mIGEgZGVzdGluYXRpb24gcG9pbnQgZ2l2ZW4gYSBkaXN0YW5jZSBpbiBkZWdyZWVzLCByYWRpYW5zLCBtaWxlcywgb3Iga2lsb21ldGVyczsgYW5kIGJlYXJpbmcgaW4gZGVncmVlcy4gVGhpcyB1c2VzIHRoZSBbSGF2ZXJzaW5lIGZvcm11bGFdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSGF2ZXJzaW5lX2Zvcm11bGEpIHRvIGFjY291bnQgZm9yIGdsb2JhbCBjdXJ2YXR1cmUuXG4gKlxuICogQG5hbWUgZGVzdGluYXRpb25cbiAqIEBwYXJhbSB7R2VvbWV0cnl8RmVhdHVyZTxQb2ludD58QXJyYXk8bnVtYmVyPn0gb3JpZ2luIHN0YXJ0aW5nIHBvaW50XG4gKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2UgZGlzdGFuY2UgZnJvbSB0aGUgb3JpZ2luIHBvaW50XG4gKiBAcGFyYW0ge251bWJlcn0gYmVhcmluZyByYW5naW5nIGZyb20gLTE4MCB0byAxODBcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9wdGlvbmFsIHBhcmFtZXRlcnNcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy51bml0cz0na2lsb21ldGVycyddIG1pbGVzLCBraWxvbWV0ZXJzLCBkZWdyZWVzLCBvciByYWRpYW5zXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxQb2ludD59IGRlc3RpbmF0aW9uIHBvaW50XG4gKiBAZXhhbXBsZVxuICogdmFyIHBvaW50ID0gdHVyZi5wb2ludChbLTc1LjM0MywgMzkuOTg0XSk7XG4gKiB2YXIgZGlzdGFuY2UgPSA1MDtcbiAqIHZhciBiZWFyaW5nID0gOTA7XG4gKiB2YXIgdW5pdHMgPSAnbWlsZXMnO1xuICpcbiAqIHZhciBkZXN0aW5hdGlvbiA9IHR1cmYuZGVzdGluYXRpb24ocG9pbnQsIGRpc3RhbmNlLCBiZWFyaW5nLCB1bml0cyk7XG4gKlxuICogLy9hZGRUb01hcFxuICogdmFyIGFkZFRvTWFwID0gW3BvaW50LCBkZXN0aW5hdGlvbl1cbiAqIGRlc3RpbmF0aW9uLnByb3BlcnRpZXNbJ21hcmtlci1jb2xvciddID0gJyNmMDAnO1xuICogcG9pbnQucHJvcGVydGllc1snbWFya2VyLWNvbG9yJ10gPSAnIzBmMCc7XG4gKi9cbmZ1bmN0aW9uIGRlc3RpbmF0aW9uKG9yaWdpbiwgZGlzdGFuY2UsIGJlYXJpbmcsIG9wdGlvbnMpIHtcbiAgICAvLyBCYWNrd2FyZHMgY29tcGF0aWJsZSB3aXRoIHY0LjBcbiAgICB2YXIgdW5pdHMgPSAodHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnKSA/IG9wdGlvbnMudW5pdHMgOiBvcHRpb25zO1xuXG4gICAgdmFyIGRlZ3JlZXMycmFkaWFucyA9IE1hdGguUEkgLyAxODA7XG4gICAgdmFyIHJhZGlhbnMyZGVncmVlcyA9IDE4MCAvIE1hdGguUEk7XG4gICAgdmFyIGNvb3JkaW5hdGVzMSA9IGdldENvb3JkKG9yaWdpbik7XG4gICAgdmFyIGxvbmdpdHVkZTEgPSBkZWdyZWVzMnJhZGlhbnMgKiBjb29yZGluYXRlczFbMF07XG4gICAgdmFyIGxhdGl0dWRlMSA9IGRlZ3JlZXMycmFkaWFucyAqIGNvb3JkaW5hdGVzMVsxXTtcbiAgICB2YXIgYmVhcmluZ19yYWQgPSBkZWdyZWVzMnJhZGlhbnMgKiBiZWFyaW5nO1xuXG4gICAgdmFyIHJhZGlhbnMgPSBkaXN0YW5jZVRvUmFkaWFucyhkaXN0YW5jZSwgdW5pdHMpO1xuXG4gICAgdmFyIGxhdGl0dWRlMiA9IE1hdGguYXNpbihNYXRoLnNpbihsYXRpdHVkZTEpICogTWF0aC5jb3MocmFkaWFucykgK1xuICAgICAgICBNYXRoLmNvcyhsYXRpdHVkZTEpICogTWF0aC5zaW4ocmFkaWFucykgKiBNYXRoLmNvcyhiZWFyaW5nX3JhZCkpO1xuICAgIHZhciBsb25naXR1ZGUyID0gbG9uZ2l0dWRlMSArIE1hdGguYXRhbjIoTWF0aC5zaW4oYmVhcmluZ19yYWQpICogTWF0aC5zaW4ocmFkaWFucykgKiBNYXRoLmNvcyhsYXRpdHVkZTEpLFxuICAgICAgICBNYXRoLmNvcyhyYWRpYW5zKSAtIE1hdGguc2luKGxhdGl0dWRlMSkgKiBNYXRoLnNpbihsYXRpdHVkZTIpKTtcblxuICAgIHJldHVybiBwb2ludChbcmFkaWFuczJkZWdyZWVzICogbG9uZ2l0dWRlMiwgcmFkaWFuczJkZWdyZWVzICogbGF0aXR1ZGUyXSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRlc3RpbmF0aW9uO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvQHR1cmYvZGVzdGluYXRpb24vaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDMyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogVW53cmFwIGEgY29vcmRpbmF0ZSBmcm9tIGEgUG9pbnQgRmVhdHVyZSwgR2VvbWV0cnkgb3IgYSBzaW5nbGUgY29vcmRpbmF0ZS5cbiAqXG4gKiBAbmFtZSBnZXRDb29yZFxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fEdlb21ldHJ5PFBvaW50PnxGZWF0dXJlPFBvaW50Pn0gb2JqIE9iamVjdFxuICogQHJldHVybnMge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzXG4gKiBAZXhhbXBsZVxuICogdmFyIHB0ID0gdHVyZi5wb2ludChbMTAsIDEwXSk7XG4gKlxuICogdmFyIGNvb3JkID0gdHVyZi5nZXRDb29yZChwdCk7XG4gKiAvLz0gWzEwLCAxMF1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvb3JkKG9iaikge1xuICAgIGlmICghb2JqKSB0aHJvdyBuZXcgRXJyb3IoJ29iaiBpcyByZXF1aXJlZCcpO1xuXG4gICAgdmFyIGNvb3JkaW5hdGVzID0gZ2V0Q29vcmRzKG9iaik7XG5cbiAgICAvLyBnZXRDb29yZCgpIG11c3QgY29udGFpbiBhdCBsZWFzdCB0d28gbnVtYmVycyAoUG9pbnQpXG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA+IDEgJiZcbiAgICAgICAgdHlwZW9mIGNvb3JkaW5hdGVzWzBdID09PSAnbnVtYmVyJyAmJlxuICAgICAgICB0eXBlb2YgY29vcmRpbmF0ZXNbMV0gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiBjb29yZGluYXRlcztcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGUgaXMgbm90IGEgdmFsaWQgUG9pbnQnKTtcbiAgICB9XG59XG5cbi8qKlxuICogVW53cmFwIGNvb3JkaW5hdGVzIGZyb20gYSBGZWF0dXJlLCBHZW9tZXRyeSBPYmplY3Qgb3IgYW4gQXJyYXkgb2YgbnVtYmVyc1xuICpcbiAqIEBuYW1lIGdldENvb3Jkc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fEdlb21ldHJ5fEZlYXR1cmV9IG9iaiBPYmplY3RcbiAqIEByZXR1cm5zIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlc1xuICogQGV4YW1wbGVcbiAqIHZhciBwb2x5ID0gdHVyZi5wb2x5Z29uKFtbWzExOS4zMiwgLTguN10sIFsxMTkuNTUsIC04LjY5XSwgWzExOS41MSwgLTguNTRdLCBbMTE5LjMyLCAtOC43XV1dKTtcbiAqXG4gKiB2YXIgY29vcmQgPSB0dXJmLmdldENvb3Jkcyhwb2x5KTtcbiAqIC8vPSBbW1sxMTkuMzIsIC04LjddLCBbMTE5LjU1LCAtOC42OV0sIFsxMTkuNTEsIC04LjU0XSwgWzExOS4zMiwgLTguN11dXVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29vcmRzKG9iaikge1xuICAgIGlmICghb2JqKSB0aHJvdyBuZXcgRXJyb3IoJ29iaiBpcyByZXF1aXJlZCcpO1xuICAgIHZhciBjb29yZGluYXRlcztcblxuICAgIC8vIEFycmF5IG9mIG51bWJlcnNcbiAgICBpZiAob2JqLmxlbmd0aCkge1xuICAgICAgICBjb29yZGluYXRlcyA9IG9iajtcblxuICAgIC8vIEdlb21ldHJ5IE9iamVjdFxuICAgIH0gZWxzZSBpZiAob2JqLmNvb3JkaW5hdGVzKSB7XG4gICAgICAgIGNvb3JkaW5hdGVzID0gb2JqLmNvb3JkaW5hdGVzO1xuXG4gICAgLy8gRmVhdHVyZVxuICAgIH0gZWxzZSBpZiAob2JqLmdlb21ldHJ5ICYmIG9iai5nZW9tZXRyeS5jb29yZGluYXRlcykge1xuICAgICAgICBjb29yZGluYXRlcyA9IG9iai5nZW9tZXRyeS5jb29yZGluYXRlcztcbiAgICB9XG4gICAgLy8gQ2hlY2tzIGlmIGNvb3JkaW5hdGVzIGNvbnRhaW5zIGEgbnVtYmVyXG4gICAgaWYgKGNvb3JkaW5hdGVzKSB7XG4gICAgICAgIGNvbnRhaW5zTnVtYmVyKGNvb3JkaW5hdGVzKTtcbiAgICAgICAgcmV0dXJuIGNvb3JkaW5hdGVzO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHZhbGlkIGNvb3JkaW5hdGVzJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGNvb3JkaW5hdGVzIGNvbnRhaW5zIGEgbnVtYmVyXG4gKlxuICogQG5hbWUgY29udGFpbnNOdW1iZXJcbiAqIEBwYXJhbSB7QXJyYXk8YW55Pn0gY29vcmRpbmF0ZXMgR2VvSlNPTiBDb29yZGluYXRlc1xuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgQXJyYXkgY29udGFpbnMgYSBudW1iZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zTnVtYmVyKGNvb3JkaW5hdGVzKSB7XG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA+IDEgJiZcbiAgICAgICAgdHlwZW9mIGNvb3JkaW5hdGVzWzBdID09PSAnbnVtYmVyJyAmJlxuICAgICAgICB0eXBlb2YgY29vcmRpbmF0ZXNbMV0gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChBcnJheS5pc0FycmF5KGNvb3JkaW5hdGVzWzBdKSAmJiBjb29yZGluYXRlc1swXS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5zTnVtYmVyKGNvb3JkaW5hdGVzWzBdKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBtdXN0IG9ubHkgY29udGFpbiBudW1iZXJzJyk7XG59XG5cbi8qKlxuICogRW5mb3JjZSBleHBlY3RhdGlvbnMgYWJvdXQgdHlwZXMgb2YgR2VvSlNPTiBvYmplY3RzIGZvciBUdXJmLlxuICpcbiAqIEBuYW1lIGdlb2pzb25UeXBlXG4gKiBAcGFyYW0ge0dlb0pTT059IHZhbHVlIGFueSBHZW9KU09OIG9iamVjdFxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgZXhwZWN0ZWQgR2VvSlNPTiB0eXBlXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBuYW1lIG9mIGNhbGxpbmcgZnVuY3Rpb25cbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB2YWx1ZSBpcyBub3QgdGhlIGV4cGVjdGVkIHR5cGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW9qc29uVHlwZSh2YWx1ZSwgdHlwZSwgbmFtZSkge1xuICAgIGlmICghdHlwZSB8fCAhbmFtZSkgdGhyb3cgbmV3IEVycm9yKCd0eXBlIGFuZCBuYW1lIHJlcXVpcmVkJyk7XG5cbiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlLnR5cGUgIT09IHR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0IHRvICcgKyBuYW1lICsgJzogbXVzdCBiZSBhICcgKyB0eXBlICsgJywgZ2l2ZW4gJyArIHZhbHVlLnR5cGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbmZvcmNlIGV4cGVjdGF0aW9ucyBhYm91dCB0eXBlcyBvZiB7QGxpbmsgRmVhdHVyZX0gaW5wdXRzIGZvciBUdXJmLlxuICogSW50ZXJuYWxseSB0aGlzIHVzZXMge0BsaW5rIGdlb2pzb25UeXBlfSB0byBqdWRnZSBnZW9tZXRyeSB0eXBlcy5cbiAqXG4gKiBAbmFtZSBmZWF0dXJlT2ZcbiAqIEBwYXJhbSB7RmVhdHVyZX0gZmVhdHVyZSBhIGZlYXR1cmUgd2l0aCBhbiBleHBlY3RlZCBnZW9tZXRyeSB0eXBlXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBleHBlY3RlZCBHZW9KU09OIHR5cGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgY2FsbGluZyBmdW5jdGlvblxuICogQHRocm93cyB7RXJyb3J9IGVycm9yIGlmIHZhbHVlIGlzIG5vdCB0aGUgZXhwZWN0ZWQgdHlwZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZlYXR1cmVPZihmZWF0dXJlLCB0eXBlLCBuYW1lKSB7XG4gICAgaWYgKCFmZWF0dXJlKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGZlYXR1cmUgcGFzc2VkJyk7XG4gICAgaWYgKCFuYW1lKSB0aHJvdyBuZXcgRXJyb3IoJy5mZWF0dXJlT2YoKSByZXF1aXJlcyBhIG5hbWUnKTtcbiAgICBpZiAoIWZlYXR1cmUgfHwgZmVhdHVyZS50eXBlICE9PSAnRmVhdHVyZScgfHwgIWZlYXR1cmUuZ2VvbWV0cnkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0IHRvICcgKyBuYW1lICsgJywgRmVhdHVyZSB3aXRoIGdlb21ldHJ5IHJlcXVpcmVkJyk7XG4gICAgfVxuICAgIGlmICghZmVhdHVyZS5nZW9tZXRyeSB8fCBmZWF0dXJlLmdlb21ldHJ5LnR5cGUgIT09IHR5cGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0IHRvICcgKyBuYW1lICsgJzogbXVzdCBiZSBhICcgKyB0eXBlICsgJywgZ2l2ZW4gJyArIGZlYXR1cmUuZ2VvbWV0cnkudHlwZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEVuZm9yY2UgZXhwZWN0YXRpb25zIGFib3V0IHR5cGVzIG9mIHtAbGluayBGZWF0dXJlQ29sbGVjdGlvbn0gaW5wdXRzIGZvciBUdXJmLlxuICogSW50ZXJuYWxseSB0aGlzIHVzZXMge0BsaW5rIGdlb2pzb25UeXBlfSB0byBqdWRnZSBnZW9tZXRyeSB0eXBlcy5cbiAqXG4gKiBAbmFtZSBjb2xsZWN0aW9uT2ZcbiAqIEBwYXJhbSB7RmVhdHVyZUNvbGxlY3Rpb259IGZlYXR1cmVDb2xsZWN0aW9uIGEgRmVhdHVyZUNvbGxlY3Rpb24gZm9yIHdoaWNoIGZlYXR1cmVzIHdpbGwgYmUganVkZ2VkXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBleHBlY3RlZCBHZW9KU09OIHR5cGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgY2FsbGluZyBmdW5jdGlvblxuICogQHRocm93cyB7RXJyb3J9IGlmIHZhbHVlIGlzIG5vdCB0aGUgZXhwZWN0ZWQgdHlwZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbGxlY3Rpb25PZihmZWF0dXJlQ29sbGVjdGlvbiwgdHlwZSwgbmFtZSkge1xuICAgIGlmICghZmVhdHVyZUNvbGxlY3Rpb24pIHRocm93IG5ldyBFcnJvcignTm8gZmVhdHVyZUNvbGxlY3Rpb24gcGFzc2VkJyk7XG4gICAgaWYgKCFuYW1lKSB0aHJvdyBuZXcgRXJyb3IoJy5jb2xsZWN0aW9uT2YoKSByZXF1aXJlcyBhIG5hbWUnKTtcbiAgICBpZiAoIWZlYXR1cmVDb2xsZWN0aW9uIHx8IGZlYXR1cmVDb2xsZWN0aW9uLnR5cGUgIT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0IHRvICcgKyBuYW1lICsgJywgRmVhdHVyZUNvbGxlY3Rpb24gcmVxdWlyZWQnKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmZWF0dXJlQ29sbGVjdGlvbi5mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZmVhdHVyZSA9IGZlYXR1cmVDb2xsZWN0aW9uLmZlYXR1cmVzW2ldO1xuICAgICAgICBpZiAoIWZlYXR1cmUgfHwgZmVhdHVyZS50eXBlICE9PSAnRmVhdHVyZScgfHwgIWZlYXR1cmUuZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCB0byAnICsgbmFtZSArICcsIEZlYXR1cmUgd2l0aCBnZW9tZXRyeSByZXF1aXJlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZmVhdHVyZS5nZW9tZXRyeSB8fCBmZWF0dXJlLmdlb21ldHJ5LnR5cGUgIT09IHR5cGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCB0byAnICsgbmFtZSArICc6IG11c3QgYmUgYSAnICsgdHlwZSArICcsIGdpdmVuICcgKyBmZWF0dXJlLmdlb21ldHJ5LnR5cGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEdldCBHZW9tZXRyeSBmcm9tIEZlYXR1cmUgb3IgR2VvbWV0cnkgT2JqZWN0XG4gKlxuICogQHBhcmFtIHtGZWF0dXJlfEdlb21ldHJ5fSBnZW9qc29uIEdlb0pTT04gRmVhdHVyZSBvciBHZW9tZXRyeSBPYmplY3RcbiAqIEByZXR1cm5zIHtHZW9tZXRyeXxudWxsfSBHZW9KU09OIEdlb21ldHJ5IE9iamVjdFxuICogQHRocm93cyB7RXJyb3J9IGlmIGdlb2pzb24gaXMgbm90IGEgRmVhdHVyZSBvciBHZW9tZXRyeSBPYmplY3RcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9pbnQgPSB7XG4gKiAgIFwidHlwZVwiOiBcIkZlYXR1cmVcIixcbiAqICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICogICBcImdlb21ldHJ5XCI6IHtcbiAqICAgICBcInR5cGVcIjogXCJQb2ludFwiLFxuICogICAgIFwiY29vcmRpbmF0ZXNcIjogWzExMCwgNDBdXG4gKiAgIH1cbiAqIH1cbiAqIHZhciBnZW9tID0gdHVyZi5nZXRHZW9tKHBvaW50KVxuICogLy89e1widHlwZVwiOiBcIlBvaW50XCIsIFwiY29vcmRpbmF0ZXNcIjogWzExMCwgNDBdfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0R2VvbShnZW9qc29uKSB7XG4gICAgaWYgKCFnZW9qc29uKSB0aHJvdyBuZXcgRXJyb3IoJ2dlb2pzb24gaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoZ2VvanNvbi5nZW9tZXRyeSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gZ2VvanNvbi5nZW9tZXRyeTtcbiAgICBpZiAoZ2VvanNvbi5jb29yZGluYXRlcyB8fCBnZW9qc29uLmdlb21ldHJpZXMpIHJldHVybiBnZW9qc29uO1xuICAgIHRocm93IG5ldyBFcnJvcignZ2VvanNvbiBtdXN0IGJlIGEgdmFsaWQgRmVhdHVyZSBvciBHZW9tZXRyeSBPYmplY3QnKTtcbn1cblxuLyoqXG4gKiBHZXQgR2VvbWV0cnkgVHlwZSBmcm9tIEZlYXR1cmUgb3IgR2VvbWV0cnkgT2JqZWN0XG4gKlxuICogQHRocm93cyB7RXJyb3J9ICoqREVQUkVDQVRFRCoqIGluIHY1LjAuMCBpbiBmYXZvciBvZiBnZXRUeXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRHZW9tVHlwZSgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudC5nZXRHZW9tVHlwZSBoYXMgYmVlbiBkZXByZWNhdGVkIGluIHY1LjAgaW4gZmF2b3Igb2YgaW52YXJpYW50LmdldFR5cGUnKTtcbn1cblxuLyoqXG4gKiBHZXQgR2VvSlNPTiBvYmplY3QncyB0eXBlLCBHZW9tZXRyeSB0eXBlIGlzIHByaW9yaXRpemUuXG4gKlxuICogQHBhcmFtIHtHZW9KU09OfSBnZW9qc29uIEdlb0pTT04gb2JqZWN0XG4gKiBAcGFyYW0ge3N0cmluZ30gW25hbWVdIG5hbWUgb2YgdGhlIHZhcmlhYmxlIHRvIGRpc3BsYXkgaW4gZXJyb3IgbWVzc2FnZVxuICogQHJldHVybnMge3N0cmluZ30gR2VvSlNPTiB0eXBlXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvaW50ID0ge1xuICogICBcInR5cGVcIjogXCJGZWF0dXJlXCIsXG4gKiAgIFwicHJvcGVydGllc1wiOiB7fSxcbiAqICAgXCJnZW9tZXRyeVwiOiB7XG4gKiAgICAgXCJ0eXBlXCI6IFwiUG9pbnRcIixcbiAqICAgICBcImNvb3JkaW5hdGVzXCI6IFsxMTAsIDQwXVxuICogICB9XG4gKiB9XG4gKiB2YXIgZ2VvbSA9IHR1cmYuZ2V0VHlwZShwb2ludClcbiAqIC8vPVwiUG9pbnRcIlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHlwZShnZW9qc29uLCBuYW1lKSB7XG4gICAgaWYgKCFnZW9qc29uKSB0aHJvdyBuZXcgRXJyb3IoKG5hbWUgfHwgJ2dlb2pzb24nKSArICcgaXMgcmVxdWlyZWQnKTtcbiAgICAvLyBHZW9KU09OIEZlYXR1cmUgJiBHZW9tZXRyeUNvbGxlY3Rpb25cbiAgICBpZiAoZ2VvanNvbi5nZW9tZXRyeSAmJiBnZW9qc29uLmdlb21ldHJ5LnR5cGUpIHJldHVybiBnZW9qc29uLmdlb21ldHJ5LnR5cGU7XG4gICAgLy8gR2VvSlNPTiBHZW9tZXRyeSAmIEZlYXR1cmVDb2xsZWN0aW9uXG4gICAgaWYgKGdlb2pzb24udHlwZSkgcmV0dXJuIGdlb2pzb24udHlwZTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoKG5hbWUgfHwgJ2dlb2pzb24nKSArICcgaXMgaW52YWxpZCcpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvQHR1cmYvaW52YXJpYW50L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIFdyYXBzIGEgR2VvSlNPTiB7QGxpbmsgR2VvbWV0cnl9IGluIGEgR2VvSlNPTiB7QGxpbmsgRmVhdHVyZX0uXG4gKlxuICogQG5hbWUgZmVhdHVyZVxuICogQHBhcmFtIHtHZW9tZXRyeX0gZ2VvbWV0cnkgaW5wdXQgZ2VvbWV0cnlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlfSBhIEdlb0pTT04gRmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBnZW9tZXRyeSA9IHtcbiAqICAgXCJ0eXBlXCI6IFwiUG9pbnRcIixcbiAqICAgXCJjb29yZGluYXRlc1wiOiBbMTEwLCA1MF1cbiAqIH07XG4gKlxuICogdmFyIGZlYXR1cmUgPSB0dXJmLmZlYXR1cmUoZ2VvbWV0cnkpO1xuICpcbiAqIC8vPWZlYXR1cmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZlYXR1cmUoZ2VvbWV0cnksIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKGdlb21ldHJ5ID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignZ2VvbWV0cnkgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAocHJvcGVydGllcyAmJiBwcm9wZXJ0aWVzLmNvbnN0cnVjdG9yICE9PSBPYmplY3QpIHRocm93IG5ldyBFcnJvcigncHJvcGVydGllcyBtdXN0IGJlIGFuIE9iamVjdCcpO1xuICAgIGlmIChiYm94ICYmIGJib3gubGVuZ3RoICE9PSA0KSB0aHJvdyBuZXcgRXJyb3IoJ2Jib3ggbXVzdCBiZSBhbiBBcnJheSBvZiA0IG51bWJlcnMnKTtcbiAgICBpZiAoaWQgJiYgWydzdHJpbmcnLCAnbnVtYmVyJ10uaW5kZXhPZih0eXBlb2YgaWQpID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKCdpZCBtdXN0IGJlIGEgbnVtYmVyIG9yIGEgc3RyaW5nJyk7XG5cbiAgICB2YXIgZmVhdCA9IHt0eXBlOiAnRmVhdHVyZSd9O1xuICAgIGlmIChpZCkgZmVhdC5pZCA9IGlkO1xuICAgIGlmIChiYm94KSBmZWF0LmJib3ggPSBiYm94O1xuICAgIGZlYXQucHJvcGVydGllcyA9IHByb3BlcnRpZXMgfHwge307XG4gICAgZmVhdC5nZW9tZXRyeSA9IGdlb21ldHJ5O1xuICAgIHJldHVybiBmZWF0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBHZW9KU09OIHtAbGluayBHZW9tZXRyeX0gZnJvbSBhIEdlb21ldHJ5IHN0cmluZyB0eXBlICYgY29vcmRpbmF0ZXMuXG4gKiBGb3IgR2VvbWV0cnlDb2xsZWN0aW9uIHR5cGUgdXNlIGBoZWxwZXJzLmdlb21ldHJ5Q29sbGVjdGlvbmBcbiAqXG4gKiBAbmFtZSBnZW9tZXRyeVxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgR2VvbWV0cnkgVHlwZVxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlcyBDb29yZGluYXRlc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHJldHVybnMge0dlb21ldHJ5fSBhIEdlb0pTT04gR2VvbWV0cnlcbiAqIEBleGFtcGxlXG4gKiB2YXIgdHlwZSA9ICdQb2ludCc7XG4gKiB2YXIgY29vcmRpbmF0ZXMgPSBbMTEwLCA1MF07XG4gKlxuICogdmFyIGdlb21ldHJ5ID0gdHVyZi5nZW9tZXRyeSh0eXBlLCBjb29yZGluYXRlcyk7XG4gKlxuICogLy89Z2VvbWV0cnlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlb21ldHJ5KHR5cGUsIGNvb3JkaW5hdGVzLCBiYm94KSB7XG4gICAgLy8gVmFsaWRhdGlvblxuICAgIGlmICghdHlwZSkgdGhyb3cgbmV3IEVycm9yKCd0eXBlIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShjb29yZGluYXRlcykpIHRocm93IG5ldyBFcnJvcignY29vcmRpbmF0ZXMgbXVzdCBiZSBhbiBBcnJheScpO1xuICAgIGlmIChiYm94ICYmIGJib3gubGVuZ3RoICE9PSA0KSB0aHJvdyBuZXcgRXJyb3IoJ2Jib3ggbXVzdCBiZSBhbiBBcnJheSBvZiA0IG51bWJlcnMnKTtcblxuICAgIHZhciBnZW9tO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ1BvaW50JzogZ2VvbSA9IHBvaW50KGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgY2FzZSAnTGluZVN0cmluZyc6IGdlb20gPSBsaW5lU3RyaW5nKGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgY2FzZSAnUG9seWdvbic6IGdlb20gPSBwb2x5Z29uKGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgY2FzZSAnTXVsdGlQb2ludCc6IGdlb20gPSBtdWx0aVBvaW50KGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgY2FzZSAnTXVsdGlMaW5lU3RyaW5nJzogZ2VvbSA9IG11bHRpTGluZVN0cmluZyhjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGNhc2UgJ011bHRpUG9seWdvbic6IGdlb20gPSBtdWx0aVBvbHlnb24oY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IodHlwZSArICcgaXMgaW52YWxpZCcpO1xuICAgIH1cbiAgICBpZiAoYmJveCkgZ2VvbS5iYm94ID0gYmJveDtcbiAgICByZXR1cm4gZ2VvbTtcbn1cblxuLyoqXG4gKiBUYWtlcyBjb29yZGluYXRlcyBhbmQgcHJvcGVydGllcyAob3B0aW9uYWwpIGFuZCByZXR1cm5zIGEgbmV3IHtAbGluayBQb2ludH0gZmVhdHVyZS5cbiAqXG4gKiBAbmFtZSBwb2ludFxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlcyBsb25naXR1ZGUsIGxhdGl0dWRlIHBvc2l0aW9uIChlYWNoIGluIGRlY2ltYWwgZGVncmVlcylcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPFBvaW50Pn0gYSBQb2ludCBmZWF0dXJlXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvaW50ID0gdHVyZi5wb2ludChbLTc1LjM0MywgMzkuOTg0XSk7XG4gKlxuICogLy89cG9pbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBvaW50KGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgYmUgYW4gYXJyYXknKTtcbiAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoIDwgMikgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGJlIGF0IGxlYXN0IDIgbnVtYmVycyBsb25nJyk7XG4gICAgaWYgKCFpc051bWJlcihjb29yZGluYXRlc1swXSkgfHwgIWlzTnVtYmVyKGNvb3JkaW5hdGVzWzFdKSkgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGNvbnRhaW4gbnVtYmVycycpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8qKlxuICogVGFrZXMgYW4gYXJyYXkgb2YgTGluZWFyUmluZ3MgYW5kIG9wdGlvbmFsbHkgYW4ge0BsaW5rIE9iamVjdH0gd2l0aCBwcm9wZXJ0aWVzIGFuZCByZXR1cm5zIGEge0BsaW5rIFBvbHlnb259IGZlYXR1cmUuXG4gKlxuICogQG5hbWUgcG9seWdvblxuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxudW1iZXI+Pj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIExpbmVhclJpbmdzXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxQb2x5Z29uPn0gYSBQb2x5Z29uIGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSB0aHJvdyBhbiBlcnJvciBpZiBhIExpbmVhclJpbmcgb2YgdGhlIHBvbHlnb24gaGFzIHRvbyBmZXcgcG9zaXRpb25zXG4gKiBvciBpZiBhIExpbmVhclJpbmcgb2YgdGhlIFBvbHlnb24gZG9lcyBub3QgaGF2ZSBtYXRjaGluZyBQb3NpdGlvbnMgYXQgdGhlIGJlZ2lubmluZyAmIGVuZC5cbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9seWdvbiA9IHR1cmYucG9seWdvbihbW1xuICogICBbLTIuMjc1NTQzLCA1My40NjQ1NDddLFxuICogICBbLTIuMjc1NTQzLCA1My40ODkyNzFdLFxuICogICBbLTIuMjE1MTE4LCA1My40ODkyNzFdLFxuICogICBbLTIuMjE1MTE4LCA1My40NjQ1NDddLFxuICogICBbLTIuMjc1NTQzLCA1My40NjQ1NDddXG4gKiBdXSwgeyBuYW1lOiAncG9seTEnLCBwb3B1bGF0aW9uOiA0MDB9KTtcbiAqXG4gKiAvLz1wb2x5Z29uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwb2x5Z29uKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByaW5nID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgIGlmIChyaW5nLmxlbmd0aCA8IDQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRWFjaCBMaW5lYXJSaW5nIG9mIGEgUG9seWdvbiBtdXN0IGhhdmUgNCBvciBtb3JlIFBvc2l0aW9ucy4nKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJpbmdbcmluZy5sZW5ndGggLSAxXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZmlyc3QgcG9pbnQgb2YgUG9seWdvbiBjb250YWlucyB0d28gbnVtYmVyc1xuICAgICAgICAgICAgaWYgKGkgPT09IDAgJiYgaiA9PT0gMCAmJiAhaXNOdW1iZXIocmluZ1swXVswXSkgfHwgIWlzTnVtYmVyKHJpbmdbMF1bMV0pKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgY29udGFpbiBudW1iZXJzJyk7XG4gICAgICAgICAgICBpZiAocmluZ1tyaW5nLmxlbmd0aCAtIDFdW2pdICE9PSByaW5nWzBdW2pdKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJzdCBhbmQgbGFzdCBQb3NpdGlvbiBhcmUgbm90IGVxdWl2YWxlbnQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdQb2x5Z29uJyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgTGluZVN0cmluZ30gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBsaW5lU3RyaW5nXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBQb3NpdGlvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPExpbmVTdHJpbmc+fSBhIExpbmVTdHJpbmcgZmVhdHVyZVxuICogQHRocm93cyB7RXJyb3J9IGlmIG5vIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWRcbiAqIEBleGFtcGxlXG4gKiB2YXIgbGluZXN0cmluZzEgPSB0dXJmLmxpbmVTdHJpbmcoW1xuICogICBbLTIxLjk2NDQxNiwgNjQuMTQ4MjAzXSxcbiAqICAgWy0yMS45NTYxNzYsIDY0LjE0MTMxNl0sXG4gKiAgIFstMjEuOTM5MDEsIDY0LjEzNTkyNF0sXG4gKiAgIFstMjEuOTI3MzM3LCA2NC4xMzY2NzNdXG4gKiBdKTtcbiAqIHZhciBsaW5lc3RyaW5nMiA9IHR1cmYubGluZVN0cmluZyhbXG4gKiAgIFstMjEuOTI5MDU0LCA2NC4xMjc5ODVdLFxuICogICBbLTIxLjkxMjkxOCwgNjQuMTM0NzI2XSxcbiAqICAgWy0yMS45MTYwMDcsIDY0LjE0MTAxNl0sXG4gKiAgIFstMjEuOTMwMDg0LCA2NC4xNDQ0Nl1cbiAqIF0sIHtuYW1lOiAnbGluZSAxJywgZGlzdGFuY2U6IDE0NX0pO1xuICpcbiAqIC8vPWxpbmVzdHJpbmcxXG4gKlxuICogLy89bGluZXN0cmluZzJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVTdHJpbmcoY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcbiAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoIDwgMikgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGJlIGFuIGFycmF5IG9mIHR3byBvciBtb3JlIHBvc2l0aW9ucycpO1xuICAgIC8vIENoZWNrIGlmIGZpcnN0IHBvaW50IG9mIExpbmVTdHJpbmcgY29udGFpbnMgdHdvIG51bWJlcnNcbiAgICBpZiAoIWlzTnVtYmVyKGNvb3JkaW5hdGVzWzBdWzFdKSB8fCAhaXNOdW1iZXIoY29vcmRpbmF0ZXNbMF1bMV0pKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgY29udGFpbiBudW1iZXJzJyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdMaW5lU3RyaW5nJyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIFRha2VzIG9uZSBvciBtb3JlIHtAbGluayBGZWF0dXJlfEZlYXR1cmVzfSBhbmQgY3JlYXRlcyBhIHtAbGluayBGZWF0dXJlQ29sbGVjdGlvbn0uXG4gKlxuICogQG5hbWUgZmVhdHVyZUNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7RmVhdHVyZVtdfSBmZWF0dXJlcyBpbnB1dCBmZWF0dXJlc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlQ29sbGVjdGlvbn0gYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiBpbnB1dCBmZWF0dXJlc1xuICogQGV4YW1wbGVcbiAqIHZhciBmZWF0dXJlcyA9IFtcbiAqICB0dXJmLnBvaW50KFstNzUuMzQzLCAzOS45ODRdLCB7bmFtZTogJ0xvY2F0aW9uIEEnfSksXG4gKiAgdHVyZi5wb2ludChbLTc1LjgzMywgMzkuMjg0XSwge25hbWU6ICdMb2NhdGlvbiBCJ30pLFxuICogIHR1cmYucG9pbnQoWy03NS41MzQsIDM5LjEyM10sIHtuYW1lOiAnTG9jYXRpb24gQyd9KVxuICogXTtcbiAqXG4gKiB2YXIgY29sbGVjdGlvbiA9IHR1cmYuZmVhdHVyZUNvbGxlY3Rpb24oZmVhdHVyZXMpO1xuICpcbiAqIC8vPWNvbGxlY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZlYXR1cmVDb2xsZWN0aW9uKGZlYXR1cmVzLCBiYm94LCBpZCkge1xuICAgIGlmICghZmVhdHVyZXMpIHRocm93IG5ldyBFcnJvcignTm8gZmVhdHVyZXMgcGFzc2VkJyk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGZlYXR1cmVzKSkgdGhyb3cgbmV3IEVycm9yKCdmZWF0dXJlcyBtdXN0IGJlIGFuIEFycmF5Jyk7XG4gICAgaWYgKGJib3ggJiYgYmJveC5sZW5ndGggIT09IDQpIHRocm93IG5ldyBFcnJvcignYmJveCBtdXN0IGJlIGFuIEFycmF5IG9mIDQgbnVtYmVycycpO1xuICAgIGlmIChpZCAmJiBbJ3N0cmluZycsICdudW1iZXInXS5pbmRleE9mKHR5cGVvZiBpZCkgPT09IC0xKSB0aHJvdyBuZXcgRXJyb3IoJ2lkIG11c3QgYmUgYSBudW1iZXIgb3IgYSBzdHJpbmcnKTtcblxuICAgIHZhciBmYyA9IHt0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nfTtcbiAgICBpZiAoaWQpIGZjLmlkID0gaWQ7XG4gICAgaWYgKGJib3gpIGZjLmJib3ggPSBiYm94O1xuICAgIGZjLmZlYXR1cmVzID0gZmVhdHVyZXM7XG4gICAgcmV0dXJuIGZjO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgRmVhdHVyZTxNdWx0aUxpbmVTdHJpbmc+fSBiYXNlZCBvbiBhXG4gKiBjb29yZGluYXRlIGFycmF5LiBQcm9wZXJ0aWVzIGNhbiBiZSBhZGRlZCBvcHRpb25hbGx5LlxuICpcbiAqIEBuYW1lIG11bHRpTGluZVN0cmluZ1xuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxudW1iZXI+Pj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIExpbmVTdHJpbmdzXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxNdWx0aUxpbmVTdHJpbmc+fSBhIE11bHRpTGluZVN0cmluZyBmZWF0dXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgbm8gY29vcmRpbmF0ZXMgYXJlIHBhc3NlZFxuICogQGV4YW1wbGVcbiAqIHZhciBtdWx0aUxpbmUgPSB0dXJmLm11bHRpTGluZVN0cmluZyhbW1swLDBdLFsxMCwxMF1dXSk7XG4gKlxuICogLy89bXVsdGlMaW5lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aUxpbmVTdHJpbmcoY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ011bHRpTGluZVN0cmluZycsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8TXVsdGlQb2ludD59IGJhc2VkIG9uIGFcbiAqIGNvb3JkaW5hdGUgYXJyYXkuIFByb3BlcnRpZXMgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHkuXG4gKlxuICogQG5hbWUgbXVsdGlQb2ludFxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gY29vcmRpbmF0ZXMgYW4gYXJyYXkgb2YgUG9zaXRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxNdWx0aVBvaW50Pn0gYSBNdWx0aVBvaW50IGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBubyBjb29yZGluYXRlcyBhcmUgcGFzc2VkXG4gKiBAZXhhbXBsZVxuICogdmFyIG11bHRpUHQgPSB0dXJmLm11bHRpUG9pbnQoW1swLDBdLFsxMCwxMF1dKTtcbiAqXG4gKiAvLz1tdWx0aVB0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aVBvaW50KGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdNdWx0aVBvaW50JyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgRmVhdHVyZTxNdWx0aVBvbHlnb24+fSBiYXNlZCBvbiBhXG4gKiBjb29yZGluYXRlIGFycmF5LiBQcm9wZXJ0aWVzIGNhbiBiZSBhZGRlZCBvcHRpb25hbGx5LlxuICpcbiAqIEBuYW1lIG11bHRpUG9seWdvblxuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxBcnJheTxudW1iZXI+Pj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBQb2x5Z29uc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8TXVsdGlQb2x5Z29uPn0gYSBtdWx0aXBvbHlnb24gZmVhdHVyZVxuICogQHRocm93cyB7RXJyb3J9IGlmIG5vIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWRcbiAqIEBleGFtcGxlXG4gKiB2YXIgbXVsdGlQb2x5ID0gdHVyZi5tdWx0aVBvbHlnb24oW1tbWzAsMF0sWzAsMTBdLFsxMCwxMF0sWzEwLDBdLFswLDBdXV1dKTtcbiAqXG4gKiAvLz1tdWx0aVBvbHlcbiAqXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aVBvbHlnb24oY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ011bHRpUG9seWdvbicsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8R2VvbWV0cnlDb2xsZWN0aW9uPn0gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBnZW9tZXRyeUNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7QXJyYXk8R2VvbWV0cnk+fSBnZW9tZXRyaWVzIGFuIGFycmF5IG9mIEdlb0pTT04gR2VvbWV0cmllc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8R2VvbWV0cnlDb2xsZWN0aW9uPn0gYSBHZW9KU09OIEdlb21ldHJ5Q29sbGVjdGlvbiBGZWF0dXJlXG4gKiBAZXhhbXBsZVxuICogdmFyIHB0ID0ge1xuICogICAgIFwidHlwZVwiOiBcIlBvaW50XCIsXG4gKiAgICAgICBcImNvb3JkaW5hdGVzXCI6IFsxMDAsIDBdXG4gKiAgICAgfTtcbiAqIHZhciBsaW5lID0ge1xuICogICAgIFwidHlwZVwiOiBcIkxpbmVTdHJpbmdcIixcbiAqICAgICBcImNvb3JkaW5hdGVzXCI6IFsgWzEwMSwgMF0sIFsxMDIsIDFdIF1cbiAqICAgfTtcbiAqIHZhciBjb2xsZWN0aW9uID0gdHVyZi5nZW9tZXRyeUNvbGxlY3Rpb24oW3B0LCBsaW5lXSk7XG4gKlxuICogLy89Y29sbGVjdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VvbWV0cnlDb2xsZWN0aW9uKGdlb21ldHJpZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFnZW9tZXRyaWVzKSB0aHJvdyBuZXcgRXJyb3IoJ2dlb21ldHJpZXMgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZ2VvbWV0cmllcykpIHRocm93IG5ldyBFcnJvcignZ2VvbWV0cmllcyBtdXN0IGJlIGFuIEFycmF5Jyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdHZW9tZXRyeUNvbGxlY3Rpb24nLFxuICAgICAgICBnZW9tZXRyaWVzOiBnZW9tZXRyaWVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9HcmVhdC1jaXJjbGVfZGlzdGFuY2UjUmFkaXVzX2Zvcl9zcGhlcmljYWxfRWFydGhcbnZhciBmYWN0b3JzID0ge1xuICAgIG1pbGVzOiAzOTYwLFxuICAgIG5hdXRpY2FsbWlsZXM6IDM0NDEuMTQ1LFxuICAgIGRlZ3JlZXM6IDU3LjI5NTc3OTUsXG4gICAgcmFkaWFuczogMSxcbiAgICBpbmNoZXM6IDI1MDkwNTYwMCxcbiAgICB5YXJkczogNjk2OTYwMCxcbiAgICBtZXRlcnM6IDYzNzMwMDAsXG4gICAgbWV0cmVzOiA2MzczMDAwLFxuICAgIGNlbnRpbWV0ZXJzOiA2LjM3M2UrOCxcbiAgICBjZW50aW1ldHJlczogNi4zNzNlKzgsXG4gICAga2lsb21ldGVyczogNjM3MyxcbiAgICBraWxvbWV0cmVzOiA2MzczLFxuICAgIGZlZXQ6IDIwOTA4NzkyLjY1XG59O1xuXG52YXIgYXJlYUZhY3RvcnMgPSB7XG4gICAga2lsb21ldGVyczogMC4wMDAwMDEsXG4gICAga2lsb21ldHJlczogMC4wMDAwMDEsXG4gICAgbWV0ZXJzOiAxLFxuICAgIG1ldHJlczogMSxcbiAgICBjZW50aW1ldHJlczogMTAwMDAsXG4gICAgbWlsbGltZXRlcjogMTAwMDAwMCxcbiAgICBhY3JlczogMC4wMDAyNDcxMDUsXG4gICAgbWlsZXM6IDMuODZlLTcsXG4gICAgeWFyZHM6IDEuMTk1OTkwMDQ2LFxuICAgIGZlZXQ6IDEwLjc2MzkxMDQxNyxcbiAgICBpbmNoZXM6IDE1NTAuMDAzMTAwMDA2XG59O1xuXG4vKipcbiAqIFJvdW5kIG51bWJlciB0byBwcmVjaXNpb25cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtIE51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IFtwcmVjaXNpb249MF0gUHJlY2lzaW9uXG4gKiBAcmV0dXJucyB7bnVtYmVyfSByb3VuZGVkIG51bWJlclxuICogQGV4YW1wbGVcbiAqIHR1cmYucm91bmQoMTIwLjQzMjEpXG4gKiAvLz0xMjBcbiAqXG4gKiB0dXJmLnJvdW5kKDEyMC40MzIxLCAyKVxuICogLy89MTIwLjQzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3VuZChudW0sIHByZWNpc2lvbikge1xuICAgIGlmIChudW0gPT09IHVuZGVmaW5lZCB8fCBudW0gPT09IG51bGwgfHwgaXNOYU4obnVtKSkgdGhyb3cgbmV3IEVycm9yKCdudW0gaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAocHJlY2lzaW9uICYmICEocHJlY2lzaW9uID49IDApKSB0aHJvdyBuZXcgRXJyb3IoJ3ByZWNpc2lvbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gICAgdmFyIG11bHRpcGxpZXIgPSBNYXRoLnBvdygxMCwgcHJlY2lzaW9uIHx8IDApO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG51bSAqIG11bHRpcGxpZXIpIC8gbXVsdGlwbGllcjtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgZGlzdGFuY2UgbWVhc3VyZW1lbnQgKGFzc3VtaW5nIGEgc3BoZXJpY2FsIEVhcnRoKSBmcm9tIHJhZGlhbnMgdG8gYSBtb3JlIGZyaWVuZGx5IHVuaXQuXG4gKiBWYWxpZCB1bml0czogbWlsZXMsIG5hdXRpY2FsbWlsZXMsIGluY2hlcywgeWFyZHMsIG1ldGVycywgbWV0cmVzLCBraWxvbWV0ZXJzLCBjZW50aW1ldGVycywgZmVldFxuICpcbiAqIEBuYW1lIHJhZGlhbnNUb0Rpc3RhbmNlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaWFucyBpbiByYWRpYW5zIGFjcm9zcyB0aGUgc3BoZXJlXG4gKiBAcGFyYW0ge3N0cmluZ30gW3VuaXRzPVwia2lsb21ldGVyc1wiXSBjYW4gYmUgZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnMgaW5jaGVzLCB5YXJkcywgbWV0cmVzLCBtZXRlcnMsIGtpbG9tZXRyZXMsIGtpbG9tZXRlcnMuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBkaXN0YW5jZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmFkaWFuc1RvRGlzdGFuY2UocmFkaWFucywgdW5pdHMpIHtcbiAgICBpZiAocmFkaWFucyA9PT0gdW5kZWZpbmVkIHx8IHJhZGlhbnMgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcigncmFkaWFucyBpcyByZXF1aXJlZCcpO1xuXG4gICAgaWYgKHVuaXRzICYmIHR5cGVvZiB1bml0cyAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcigndW5pdHMgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgIHZhciBmYWN0b3IgPSBmYWN0b3JzW3VuaXRzIHx8ICdraWxvbWV0ZXJzJ107XG4gICAgaWYgKCFmYWN0b3IpIHRocm93IG5ldyBFcnJvcih1bml0cyArICcgdW5pdHMgaXMgaW52YWxpZCcpO1xuICAgIHJldHVybiByYWRpYW5zICogZmFjdG9yO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSBkaXN0YW5jZSBtZWFzdXJlbWVudCAoYXNzdW1pbmcgYSBzcGhlcmljYWwgRWFydGgpIGZyb20gYSByZWFsLXdvcmxkIHVuaXQgaW50byByYWRpYW5zXG4gKiBWYWxpZCB1bml0czogbWlsZXMsIG5hdXRpY2FsbWlsZXMsIGluY2hlcywgeWFyZHMsIG1ldGVycywgbWV0cmVzLCBraWxvbWV0ZXJzLCBjZW50aW1ldGVycywgZmVldFxuICpcbiAqIEBuYW1lIGRpc3RhbmNlVG9SYWRpYW5zXG4gKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2UgaW4gcmVhbCB1bml0c1xuICogQHBhcmFtIHtzdHJpbmd9IFt1bml0cz1raWxvbWV0ZXJzXSBjYW4gYmUgZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnMgaW5jaGVzLCB5YXJkcywgbWV0cmVzLCBtZXRlcnMsIGtpbG9tZXRyZXMsIGtpbG9tZXRlcnMuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSByYWRpYW5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZVRvUmFkaWFucyhkaXN0YW5jZSwgdW5pdHMpIHtcbiAgICBpZiAoZGlzdGFuY2UgPT09IHVuZGVmaW5lZCB8fCBkaXN0YW5jZSA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKCdkaXN0YW5jZSBpcyByZXF1aXJlZCcpO1xuXG4gICAgaWYgKHVuaXRzICYmIHR5cGVvZiB1bml0cyAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcigndW5pdHMgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgIHZhciBmYWN0b3IgPSBmYWN0b3JzW3VuaXRzIHx8ICdraWxvbWV0ZXJzJ107XG4gICAgaWYgKCFmYWN0b3IpIHRocm93IG5ldyBFcnJvcih1bml0cyArICcgdW5pdHMgaXMgaW52YWxpZCcpO1xuICAgIHJldHVybiBkaXN0YW5jZSAvIGZhY3Rvcjtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgZGlzdGFuY2UgbWVhc3VyZW1lbnQgKGFzc3VtaW5nIGEgc3BoZXJpY2FsIEVhcnRoKSBmcm9tIGEgcmVhbC13b3JsZCB1bml0IGludG8gZGVncmVlc1xuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywgY2VudGltZXRlcnMsIGtpbG9tZXRyZXMsIGZlZXRcbiAqXG4gKiBAbmFtZSBkaXN0YW5jZVRvRGVncmVlc1xuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIGluIHJlYWwgdW5pdHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBbdW5pdHM9a2lsb21ldGVyc10gY2FuIGJlIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzIGluY2hlcywgeWFyZHMsIG1ldHJlcywgbWV0ZXJzLCBraWxvbWV0cmVzLCBraWxvbWV0ZXJzLlxuICogQHJldHVybnMge251bWJlcn0gZGVncmVlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2VUb0RlZ3JlZXMoZGlzdGFuY2UsIHVuaXRzKSB7XG4gICAgcmV0dXJuIHJhZGlhbnMyZGVncmVlcyhkaXN0YW5jZVRvUmFkaWFucyhkaXN0YW5jZSwgdW5pdHMpKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbnkgYmVhcmluZyBhbmdsZSBmcm9tIHRoZSBub3J0aCBsaW5lIGRpcmVjdGlvbiAocG9zaXRpdmUgY2xvY2t3aXNlKVxuICogYW5kIHJldHVybnMgYW4gYW5nbGUgYmV0d2VlbiAwLTM2MCBkZWdyZWVzIChwb3NpdGl2ZSBjbG9ja3dpc2UpLCAwIGJlaW5nIHRoZSBub3J0aCBsaW5lXG4gKlxuICogQG5hbWUgYmVhcmluZ1RvQW5nbGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBiZWFyaW5nIGFuZ2xlLCBiZXR3ZWVuIC0xODAgYW5kICsxODAgZGVncmVlc1xuICogQHJldHVybnMge251bWJlcn0gYW5nbGUgYmV0d2VlbiAwIGFuZCAzNjAgZGVncmVlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYmVhcmluZ1RvQW5nbGUoYmVhcmluZykge1xuICAgIGlmIChiZWFyaW5nID09PSBudWxsIHx8IGJlYXJpbmcgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdiZWFyaW5nIGlzIHJlcXVpcmVkJyk7XG5cbiAgICB2YXIgYW5nbGUgPSBiZWFyaW5nICUgMzYwO1xuICAgIGlmIChhbmdsZSA8IDApIGFuZ2xlICs9IDM2MDtcbiAgICByZXR1cm4gYW5nbGU7XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gYW5nbGUgaW4gcmFkaWFucyB0byBkZWdyZWVzXG4gKlxuICogQG5hbWUgcmFkaWFuczJkZWdyZWVzXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaWFucyBhbmdsZSBpbiByYWRpYW5zXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBkZWdyZWVzIGJldHdlZW4gMCBhbmQgMzYwIGRlZ3JlZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhZGlhbnMyZGVncmVlcyhyYWRpYW5zKSB7XG4gICAgaWYgKHJhZGlhbnMgPT09IG51bGwgfHwgcmFkaWFucyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ3JhZGlhbnMgaXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciBkZWdyZWVzID0gcmFkaWFucyAlICgyICogTWF0aC5QSSk7XG4gICAgcmV0dXJuIGRlZ3JlZXMgKiAxODAgLyBNYXRoLlBJO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFuZ2xlIGluIGRlZ3JlZXMgdG8gcmFkaWFuc1xuICpcbiAqIEBuYW1lIGRlZ3JlZXMycmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGRlZ3JlZXMgYW5nbGUgYmV0d2VlbiAwIGFuZCAzNjAgZGVncmVlc1xuICogQHJldHVybnMge251bWJlcn0gYW5nbGUgaW4gcmFkaWFuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVncmVlczJyYWRpYW5zKGRlZ3JlZXMpIHtcbiAgICBpZiAoZGVncmVlcyA9PT0gbnVsbCB8fCBkZWdyZWVzID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignZGVncmVlcyBpcyByZXF1aXJlZCcpO1xuXG4gICAgdmFyIHJhZGlhbnMgPSBkZWdyZWVzICUgMzYwO1xuICAgIHJldHVybiByYWRpYW5zICogTWF0aC5QSSAvIDE4MDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIGRpc3RhbmNlIHRvIHRoZSByZXF1ZXN0ZWQgdW5pdC5cbiAqIFZhbGlkIHVuaXRzOiBtaWxlcywgbmF1dGljYWxtaWxlcywgaW5jaGVzLCB5YXJkcywgbWV0ZXJzLCBtZXRyZXMsIGtpbG9tZXRlcnMsIGNlbnRpbWV0ZXJzLCBmZWV0XG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIHRvIGJlIGNvbnZlcnRlZFxuICogQHBhcmFtIHtzdHJpbmd9IG9yaWdpbmFsVW5pdCBvZiB0aGUgZGlzdGFuY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBbZmluYWxVbml0PWtpbG9tZXRlcnNdIHJldHVybmVkIHVuaXRcbiAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSBjb252ZXJ0ZWQgZGlzdGFuY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnREaXN0YW5jZShkaXN0YW5jZSwgb3JpZ2luYWxVbml0LCBmaW5hbFVuaXQpIHtcbiAgICBpZiAoZGlzdGFuY2UgPT09IG51bGwgfHwgZGlzdGFuY2UgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdkaXN0YW5jZSBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghKGRpc3RhbmNlID49IDApKSB0aHJvdyBuZXcgRXJyb3IoJ2Rpc3RhbmNlIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcblxuICAgIHZhciBjb252ZXJ0ZWREaXN0YW5jZSA9IHJhZGlhbnNUb0Rpc3RhbmNlKGRpc3RhbmNlVG9SYWRpYW5zKGRpc3RhbmNlLCBvcmlnaW5hbFVuaXQpLCBmaW5hbFVuaXQgfHwgJ2tpbG9tZXRlcnMnKTtcbiAgICByZXR1cm4gY29udmVydGVkRGlzdGFuY2U7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBhcmVhIHRvIHRoZSByZXF1ZXN0ZWQgdW5pdC5cbiAqIFZhbGlkIHVuaXRzOiBraWxvbWV0ZXJzLCBraWxvbWV0cmVzLCBtZXRlcnMsIG1ldHJlcywgY2VudGltZXRyZXMsIG1pbGxpbWV0ZXIsIGFjcmUsIG1pbGUsIHlhcmQsIGZvb3QsIGluY2hcbiAqIEBwYXJhbSB7bnVtYmVyfSBhcmVhIHRvIGJlIGNvbnZlcnRlZFxuICogQHBhcmFtIHtzdHJpbmd9IFtvcmlnaW5hbFVuaXQ9bWV0ZXJzXSBvZiB0aGUgZGlzdGFuY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBbZmluYWxVbml0PWtpbG9tZXRlcnNdIHJldHVybmVkIHVuaXRcbiAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSBjb252ZXJ0ZWQgZGlzdGFuY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRBcmVhKGFyZWEsIG9yaWdpbmFsVW5pdCwgZmluYWxVbml0KSB7XG4gICAgaWYgKGFyZWEgPT09IG51bGwgfHwgYXJlYSA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ2FyZWEgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIShhcmVhID49IDApKSB0aHJvdyBuZXcgRXJyb3IoJ2FyZWEgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuXG4gICAgdmFyIHN0YXJ0RmFjdG9yID0gYXJlYUZhY3RvcnNbb3JpZ2luYWxVbml0IHx8ICdtZXRlcnMnXTtcbiAgICBpZiAoIXN0YXJ0RmFjdG9yKSB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgb3JpZ2luYWwgdW5pdHMnKTtcblxuICAgIHZhciBmaW5hbEZhY3RvciA9IGFyZWFGYWN0b3JzW2ZpbmFsVW5pdCB8fCAna2lsb21ldGVycyddO1xuICAgIGlmICghZmluYWxGYWN0b3IpIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBmaW5hbCB1bml0cycpO1xuXG4gICAgcmV0dXJuIChhcmVhIC8gc3RhcnRGYWN0b3IpICogZmluYWxGYWN0b3I7XG59XG5cbi8qKlxuICogaXNOdW1iZXJcbiAqXG4gKiBAcGFyYW0geyp9IG51bSBOdW1iZXIgdG8gdmFsaWRhdGVcbiAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlL2ZhbHNlXG4gKiBAZXhhbXBsZVxuICogdHVyZi5pc051bWJlcigxMjMpXG4gKiAvLz10cnVlXG4gKiB0dXJmLmlzTnVtYmVyKCdmb28nKVxuICogLy89ZmFsc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKG51bSkge1xuICAgIHJldHVybiAhaXNOYU4obnVtKSAmJiBudW0gIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkobnVtKTtcbn1cblxuLyoqXG4gKiBpc09iamVjdFxuICpcbiAqIEBwYXJhbSB7Kn0gaW5wdXQgdmFyaWFibGUgdG8gdmFsaWRhdGVcbiAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlL2ZhbHNlXG4gKiBAZXhhbXBsZVxuICogdHVyZi5pc09iamVjdCh7ZWxldmF0aW9uOiAxMH0pXG4gKiAvLz10cnVlXG4gKiB0dXJmLmlzT2JqZWN0KCdmb28nKVxuICogLy89ZmFsc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KGlucHV0KSB7XG4gICAgcmV0dXJuICghIWlucHV0KSAmJiAoaW5wdXQuY29uc3RydWN0b3IgPT09IE9iamVjdCk7XG59XG5cbi8qKlxuICogRWFydGggUmFkaXVzIHVzZWQgd2l0aCB0aGUgSGFydmVzaW5lIGZvcm11bGEgYW5kIGFwcHJveGltYXRlcyB1c2luZyBhIHNwaGVyaWNhbCAobm9uLWVsbGlwc29pZCkgRWFydGguXG4gKi9cbmV4cG9ydCB2YXIgZWFydGhSYWRpdXMgPSA2MzcxMDA4Ljg7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9AdHVyZi9kZXN0aW5hdGlvbi9ub2RlX21vZHVsZXMvQHR1cmYvaGVscGVycy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBXcmFwcyBhIEdlb0pTT04ge0BsaW5rIEdlb21ldHJ5fSBpbiBhIEdlb0pTT04ge0BsaW5rIEZlYXR1cmV9LlxuICpcbiAqIEBuYW1lIGZlYXR1cmVcbiAqIEBwYXJhbSB7R2VvbWV0cnl9IGdlb21ldHJ5IGlucHV0IGdlb21ldHJ5XG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZX0gYSBHZW9KU09OIEZlYXR1cmVcbiAqIEBleGFtcGxlXG4gKiB2YXIgZ2VvbWV0cnkgPSB7XG4gKiAgIFwidHlwZVwiOiBcIlBvaW50XCIsXG4gKiAgIFwiY29vcmRpbmF0ZXNcIjogWzExMCwgNTBdXG4gKiB9O1xuICpcbiAqIHZhciBmZWF0dXJlID0gdHVyZi5mZWF0dXJlKGdlb21ldHJ5KTtcbiAqXG4gKiAvLz1mZWF0dXJlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmZWF0dXJlKGdlb21ldHJ5LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmIChnZW9tZXRyeSA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ2dlb21ldHJ5IGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKHByb3BlcnRpZXMgJiYgcHJvcGVydGllcy5jb25zdHJ1Y3RvciAhPT0gT2JqZWN0KSB0aHJvdyBuZXcgRXJyb3IoJ3Byb3BlcnRpZXMgbXVzdCBiZSBhbiBPYmplY3QnKTtcbiAgICBpZiAoYmJveCAmJiBiYm94Lmxlbmd0aCAhPT0gNCkgdGhyb3cgbmV3IEVycm9yKCdiYm94IG11c3QgYmUgYW4gQXJyYXkgb2YgNCBudW1iZXJzJyk7XG4gICAgaWYgKGlkICYmIFsnc3RyaW5nJywgJ251bWJlciddLmluZGV4T2YodHlwZW9mIGlkKSA9PT0gLTEpIHRocm93IG5ldyBFcnJvcignaWQgbXVzdCBiZSBhIG51bWJlciBvciBhIHN0cmluZycpO1xuXG4gICAgdmFyIGZlYXQgPSB7dHlwZTogJ0ZlYXR1cmUnfTtcbiAgICBpZiAoaWQpIGZlYXQuaWQgPSBpZDtcbiAgICBpZiAoYmJveCkgZmVhdC5iYm94ID0gYmJveDtcbiAgICBmZWF0LnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IHt9O1xuICAgIGZlYXQuZ2VvbWV0cnkgPSBnZW9tZXRyeTtcbiAgICByZXR1cm4gZmVhdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgR2VvSlNPTiB7QGxpbmsgR2VvbWV0cnl9IGZyb20gYSBHZW9tZXRyeSBzdHJpbmcgdHlwZSAmIGNvb3JkaW5hdGVzLlxuICogRm9yIEdlb21ldHJ5Q29sbGVjdGlvbiB0eXBlIHVzZSBgaGVscGVycy5nZW9tZXRyeUNvbGxlY3Rpb25gXG4gKlxuICogQG5hbWUgZ2VvbWV0cnlcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEdlb21ldHJ5IFR5cGVcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEByZXR1cm5zIHtHZW9tZXRyeX0gYSBHZW9KU09OIEdlb21ldHJ5XG4gKiBAZXhhbXBsZVxuICogdmFyIHR5cGUgPSAnUG9pbnQnO1xuICogdmFyIGNvb3JkaW5hdGVzID0gWzExMCwgNTBdO1xuICpcbiAqIHZhciBnZW9tZXRyeSA9IHR1cmYuZ2VvbWV0cnkodHlwZSwgY29vcmRpbmF0ZXMpO1xuICpcbiAqIC8vPWdlb21ldHJ5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW9tZXRyeSh0eXBlLCBjb29yZGluYXRlcywgYmJveCkge1xuICAgIC8vIFZhbGlkYXRpb25cbiAgICBpZiAoIXR5cGUpIHRocm93IG5ldyBFcnJvcigndHlwZSBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignY29vcmRpbmF0ZXMgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29vcmRpbmF0ZXMpKSB0aHJvdyBuZXcgRXJyb3IoJ2Nvb3JkaW5hdGVzIG11c3QgYmUgYW4gQXJyYXknKTtcbiAgICBpZiAoYmJveCAmJiBiYm94Lmxlbmd0aCAhPT0gNCkgdGhyb3cgbmV3IEVycm9yKCdiYm94IG11c3QgYmUgYW4gQXJyYXkgb2YgNCBudW1iZXJzJyk7XG5cbiAgICB2YXIgZ2VvbTtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdQb2ludCc6IGdlb20gPSBwb2ludChjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGNhc2UgJ0xpbmVTdHJpbmcnOiBnZW9tID0gbGluZVN0cmluZyhjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGNhc2UgJ1BvbHlnb24nOiBnZW9tID0gcG9seWdvbihjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGNhc2UgJ011bHRpUG9pbnQnOiBnZW9tID0gbXVsdGlQb2ludChjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGNhc2UgJ011bHRpTGluZVN0cmluZyc6IGdlb20gPSBtdWx0aUxpbmVTdHJpbmcoY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBjYXNlICdNdWx0aVBvbHlnb24nOiBnZW9tID0gbXVsdGlQb2x5Z29uKGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKHR5cGUgKyAnIGlzIGludmFsaWQnKTtcbiAgICB9XG4gICAgaWYgKGJib3gpIGdlb20uYmJveCA9IGJib3g7XG4gICAgcmV0dXJuIGdlb207XG59XG5cbi8qKlxuICogVGFrZXMgY29vcmRpbmF0ZXMgYW5kIHByb3BlcnRpZXMgKG9wdGlvbmFsKSBhbmQgcmV0dXJucyBhIG5ldyB7QGxpbmsgUG9pbnR9IGZlYXR1cmUuXG4gKlxuICogQG5hbWUgcG9pbnRcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXMgbG9uZ2l0dWRlLCBsYXRpdHVkZSBwb3NpdGlvbiAoZWFjaCBpbiBkZWNpbWFsIGRlZ3JlZXMpXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxQb2ludD59IGEgUG9pbnQgZmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBwb2ludCA9IHR1cmYucG9pbnQoWy03NS4zNDMsIDM5Ljk4NF0pO1xuICpcbiAqIC8vPXBvaW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwb2ludChjb29yZGluYXRlcywgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvb3JkaW5hdGVzIHBhc3NlZCcpO1xuICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGJlIGFuIGFycmF5Jyk7XG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA8IDIpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBiZSBhdCBsZWFzdCAyIG51bWJlcnMgbG9uZycpO1xuICAgIGlmICghaXNOdW1iZXIoY29vcmRpbmF0ZXNbMF0pIHx8ICFpc051bWJlcihjb29yZGluYXRlc1sxXSkpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBjb250YWluIG51bWJlcnMnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ1BvaW50JyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIFRha2VzIGFuIGFycmF5IG9mIExpbmVhclJpbmdzIGFuZCBvcHRpb25hbGx5IGFuIHtAbGluayBPYmplY3R9IHdpdGggcHJvcGVydGllcyBhbmQgcmV0dXJucyBhIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlLlxuICpcbiAqIEBuYW1lIHBvbHlnb25cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8bnVtYmVyPj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBMaW5lYXJSaW5nc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8UG9seWdvbj59IGEgUG9seWdvbiBmZWF0dXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gdGhyb3cgYW4gZXJyb3IgaWYgYSBMaW5lYXJSaW5nIG9mIHRoZSBwb2x5Z29uIGhhcyB0b28gZmV3IHBvc2l0aW9uc1xuICogb3IgaWYgYSBMaW5lYXJSaW5nIG9mIHRoZSBQb2x5Z29uIGRvZXMgbm90IGhhdmUgbWF0Y2hpbmcgUG9zaXRpb25zIGF0IHRoZSBiZWdpbm5pbmcgJiBlbmQuXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvbHlnb24gPSB0dXJmLnBvbHlnb24oW1tcbiAqICAgWy0yLjI3NTU0MywgNTMuNDY0NTQ3XSxcbiAqICAgWy0yLjI3NTU0MywgNTMuNDg5MjcxXSxcbiAqICAgWy0yLjIxNTExOCwgNTMuNDg5MjcxXSxcbiAqICAgWy0yLjIxNTExOCwgNTMuNDY0NTQ3XSxcbiAqICAgWy0yLjI3NTU0MywgNTMuNDY0NTQ3XVxuICogXV0sIHsgbmFtZTogJ3BvbHkxJywgcG9wdWxhdGlvbjogNDAwfSk7XG4gKlxuICogLy89cG9seWdvblxuICovXG5leHBvcnQgZnVuY3Rpb24gcG9seWdvbihjb29yZGluYXRlcywgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvb3JkaW5hdGVzIHBhc3NlZCcpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29yZGluYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcmluZyA9IGNvb3JkaW5hdGVzW2ldO1xuICAgICAgICBpZiAocmluZy5sZW5ndGggPCA0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VhY2ggTGluZWFyUmluZyBvZiBhIFBvbHlnb24gbXVzdCBoYXZlIDQgb3IgbW9yZSBQb3NpdGlvbnMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByaW5nW3JpbmcubGVuZ3RoIC0gMV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGZpcnN0IHBvaW50IG9mIFBvbHlnb24gY29udGFpbnMgdHdvIG51bWJlcnNcbiAgICAgICAgICAgIGlmIChpID09PSAwICYmIGogPT09IDAgJiYgIWlzTnVtYmVyKHJpbmdbMF1bMF0pIHx8ICFpc051bWJlcihyaW5nWzBdWzFdKSkgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGNvbnRhaW4gbnVtYmVycycpO1xuICAgICAgICAgICAgaWYgKHJpbmdbcmluZy5sZW5ndGggLSAxXVtqXSAhPT0gcmluZ1swXVtqXSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmlyc3QgYW5kIGxhc3QgUG9zaXRpb24gYXJlIG5vdCBlcXVpdmFsZW50LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnUG9seWdvbicsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIExpbmVTdHJpbmd9IGJhc2VkIG9uIGFcbiAqIGNvb3JkaW5hdGUgYXJyYXkuIFByb3BlcnRpZXMgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHkuXG4gKlxuICogQG5hbWUgbGluZVN0cmluZ1xuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gY29vcmRpbmF0ZXMgYW4gYXJyYXkgb2YgUG9zaXRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxMaW5lU3RyaW5nPn0gYSBMaW5lU3RyaW5nIGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBubyBjb29yZGluYXRlcyBhcmUgcGFzc2VkXG4gKiBAZXhhbXBsZVxuICogdmFyIGxpbmVzdHJpbmcxID0gdHVyZi5saW5lU3RyaW5nKFtcbiAqICAgWy0yMS45NjQ0MTYsIDY0LjE0ODIwM10sXG4gKiAgIFstMjEuOTU2MTc2LCA2NC4xNDEzMTZdLFxuICogICBbLTIxLjkzOTAxLCA2NC4xMzU5MjRdLFxuICogICBbLTIxLjkyNzMzNywgNjQuMTM2NjczXVxuICogXSk7XG4gKiB2YXIgbGluZXN0cmluZzIgPSB0dXJmLmxpbmVTdHJpbmcoW1xuICogICBbLTIxLjkyOTA1NCwgNjQuMTI3OTg1XSxcbiAqICAgWy0yMS45MTI5MTgsIDY0LjEzNDcyNl0sXG4gKiAgIFstMjEuOTE2MDA3LCA2NC4xNDEwMTZdLFxuICogICBbLTIxLjkzMDA4NCwgNjQuMTQ0NDZdXG4gKiBdLCB7bmFtZTogJ2xpbmUgMScsIGRpc3RhbmNlOiAxNDV9KTtcbiAqXG4gKiAvLz1saW5lc3RyaW5nMVxuICpcbiAqIC8vPWxpbmVzdHJpbmcyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lU3RyaW5nKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA8IDIpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBiZSBhbiBhcnJheSBvZiB0d28gb3IgbW9yZSBwb3NpdGlvbnMnKTtcbiAgICAvLyBDaGVjayBpZiBmaXJzdCBwb2ludCBvZiBMaW5lU3RyaW5nIGNvbnRhaW5zIHR3byBudW1iZXJzXG4gICAgaWYgKCFpc051bWJlcihjb29yZGluYXRlc1swXVsxXSkgfHwgIWlzTnVtYmVyKGNvb3JkaW5hdGVzWzBdWzFdKSkgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGNvbnRhaW4gbnVtYmVycycpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnTGluZVN0cmluZycsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBUYWtlcyBvbmUgb3IgbW9yZSB7QGxpbmsgRmVhdHVyZXxGZWF0dXJlc30gYW5kIGNyZWF0ZXMgYSB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259LlxuICpcbiAqIEBuYW1lIGZlYXR1cmVDb2xsZWN0aW9uXG4gKiBAcGFyYW0ge0ZlYXR1cmVbXX0gZmVhdHVyZXMgaW5wdXQgZmVhdHVyZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZUNvbGxlY3Rpb259IGEgRmVhdHVyZUNvbGxlY3Rpb24gb2YgaW5wdXQgZmVhdHVyZXNcbiAqIEBleGFtcGxlXG4gKiB2YXIgZmVhdHVyZXMgPSBbXG4gKiAgdHVyZi5wb2ludChbLTc1LjM0MywgMzkuOTg0XSwge25hbWU6ICdMb2NhdGlvbiBBJ30pLFxuICogIHR1cmYucG9pbnQoWy03NS44MzMsIDM5LjI4NF0sIHtuYW1lOiAnTG9jYXRpb24gQid9KSxcbiAqICB0dXJmLnBvaW50KFstNzUuNTM0LCAzOS4xMjNdLCB7bmFtZTogJ0xvY2F0aW9uIEMnfSlcbiAqIF07XG4gKlxuICogdmFyIGNvbGxlY3Rpb24gPSB0dXJmLmZlYXR1cmVDb2xsZWN0aW9uKGZlYXR1cmVzKTtcbiAqXG4gKiAvLz1jb2xsZWN0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmZWF0dXJlQ29sbGVjdGlvbihmZWF0dXJlcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWZlYXR1cmVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGZlYXR1cmVzIHBhc3NlZCcpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShmZWF0dXJlcykpIHRocm93IG5ldyBFcnJvcignZmVhdHVyZXMgbXVzdCBiZSBhbiBBcnJheScpO1xuICAgIGlmIChiYm94ICYmIGJib3gubGVuZ3RoICE9PSA0KSB0aHJvdyBuZXcgRXJyb3IoJ2Jib3ggbXVzdCBiZSBhbiBBcnJheSBvZiA0IG51bWJlcnMnKTtcbiAgICBpZiAoaWQgJiYgWydzdHJpbmcnLCAnbnVtYmVyJ10uaW5kZXhPZih0eXBlb2YgaWQpID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKCdpZCBtdXN0IGJlIGEgbnVtYmVyIG9yIGEgc3RyaW5nJyk7XG5cbiAgICB2YXIgZmMgPSB7dHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJ307XG4gICAgaWYgKGlkKSBmYy5pZCA9IGlkO1xuICAgIGlmIChiYm94KSBmYy5iYm94ID0gYmJveDtcbiAgICBmYy5mZWF0dXJlcyA9IGZlYXR1cmVzO1xuICAgIHJldHVybiBmYztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8TXVsdGlMaW5lU3RyaW5nPn0gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBtdWx0aUxpbmVTdHJpbmdcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8bnVtYmVyPj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBMaW5lU3RyaW5nc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8TXVsdGlMaW5lU3RyaW5nPn0gYSBNdWx0aUxpbmVTdHJpbmcgZmVhdHVyZVxuICogQHRocm93cyB7RXJyb3J9IGlmIG5vIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWRcbiAqIEBleGFtcGxlXG4gKiB2YXIgbXVsdGlMaW5lID0gdHVyZi5tdWx0aUxpbmVTdHJpbmcoW1tbMCwwXSxbMTAsMTBdXV0pO1xuICpcbiAqIC8vPW11bHRpTGluZVxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlMaW5lU3RyaW5nKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdNdWx0aUxpbmVTdHJpbmcnLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBGZWF0dXJlPE11bHRpUG9pbnQ+fSBiYXNlZCBvbiBhXG4gKiBjb29yZGluYXRlIGFycmF5LiBQcm9wZXJ0aWVzIGNhbiBiZSBhZGRlZCBvcHRpb25hbGx5LlxuICpcbiAqIEBuYW1lIG11bHRpUG9pbnRcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIFBvc2l0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8TXVsdGlQb2ludD59IGEgTXVsdGlQb2ludCBmZWF0dXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgbm8gY29vcmRpbmF0ZXMgYXJlIHBhc3NlZFxuICogQGV4YW1wbGVcbiAqIHZhciBtdWx0aVB0ID0gdHVyZi5tdWx0aVBvaW50KFtbMCwwXSxbMTAsMTBdXSk7XG4gKlxuICogLy89bXVsdGlQdFxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlQb2ludChjb29yZGluYXRlcywgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvb3JkaW5hdGVzIHBhc3NlZCcpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnTXVsdGlQb2ludCcsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8TXVsdGlQb2x5Z29uPn0gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBtdWx0aVBvbHlnb25cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8QXJyYXk8bnVtYmVyPj4+Pn0gY29vcmRpbmF0ZXMgYW4gYXJyYXkgb2YgUG9seWdvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPE11bHRpUG9seWdvbj59IGEgbXVsdGlwb2x5Z29uIGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBubyBjb29yZGluYXRlcyBhcmUgcGFzc2VkXG4gKiBAZXhhbXBsZVxuICogdmFyIG11bHRpUG9seSA9IHR1cmYubXVsdGlQb2x5Z29uKFtbW1swLDBdLFswLDEwXSxbMTAsMTBdLFsxMCwwXSxbMCwwXV1dXSk7XG4gKlxuICogLy89bXVsdGlQb2x5XG4gKlxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlQb2x5Z29uKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdNdWx0aVBvbHlnb24nLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBGZWF0dXJlPEdlb21ldHJ5Q29sbGVjdGlvbj59IGJhc2VkIG9uIGFcbiAqIGNvb3JkaW5hdGUgYXJyYXkuIFByb3BlcnRpZXMgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHkuXG4gKlxuICogQG5hbWUgZ2VvbWV0cnlDb2xsZWN0aW9uXG4gKiBAcGFyYW0ge0FycmF5PEdlb21ldHJ5Pn0gZ2VvbWV0cmllcyBhbiBhcnJheSBvZiBHZW9KU09OIEdlb21ldHJpZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPEdlb21ldHJ5Q29sbGVjdGlvbj59IGEgR2VvSlNPTiBHZW9tZXRyeUNvbGxlY3Rpb24gRmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBwdCA9IHtcbiAqICAgICBcInR5cGVcIjogXCJQb2ludFwiLFxuICogICAgICAgXCJjb29yZGluYXRlc1wiOiBbMTAwLCAwXVxuICogICAgIH07XG4gKiB2YXIgbGluZSA9IHtcbiAqICAgICBcInR5cGVcIjogXCJMaW5lU3RyaW5nXCIsXG4gKiAgICAgXCJjb29yZGluYXRlc1wiOiBbIFsxMDEsIDBdLCBbMTAyLCAxXSBdXG4gKiAgIH07XG4gKiB2YXIgY29sbGVjdGlvbiA9IHR1cmYuZ2VvbWV0cnlDb2xsZWN0aW9uKFtwdCwgbGluZV0pO1xuICpcbiAqIC8vPWNvbGxlY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlb21ldHJ5Q29sbGVjdGlvbihnZW9tZXRyaWVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghZ2VvbWV0cmllcykgdGhyb3cgbmV3IEVycm9yKCdnZW9tZXRyaWVzIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGdlb21ldHJpZXMpKSB0aHJvdyBuZXcgRXJyb3IoJ2dlb21ldHJpZXMgbXVzdCBiZSBhbiBBcnJheScpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnR2VvbWV0cnlDb2xsZWN0aW9uJyxcbiAgICAgICAgZ2VvbWV0cmllczogZ2VvbWV0cmllc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvR3JlYXQtY2lyY2xlX2Rpc3RhbmNlI1JhZGl1c19mb3Jfc3BoZXJpY2FsX0VhcnRoXG52YXIgZmFjdG9ycyA9IHtcbiAgICBtaWxlczogMzk2MCxcbiAgICBuYXV0aWNhbG1pbGVzOiAzNDQxLjE0NSxcbiAgICBkZWdyZWVzOiA1Ny4yOTU3Nzk1LFxuICAgIHJhZGlhbnM6IDEsXG4gICAgaW5jaGVzOiAyNTA5MDU2MDAsXG4gICAgeWFyZHM6IDY5Njk2MDAsXG4gICAgbWV0ZXJzOiA2MzczMDAwLFxuICAgIG1ldHJlczogNjM3MzAwMCxcbiAgICBjZW50aW1ldGVyczogNi4zNzNlKzgsXG4gICAgY2VudGltZXRyZXM6IDYuMzczZSs4LFxuICAgIGtpbG9tZXRlcnM6IDYzNzMsXG4gICAga2lsb21ldHJlczogNjM3MyxcbiAgICBmZWV0OiAyMDkwODc5Mi42NVxufTtcblxudmFyIGFyZWFGYWN0b3JzID0ge1xuICAgIGtpbG9tZXRlcnM6IDAuMDAwMDAxLFxuICAgIGtpbG9tZXRyZXM6IDAuMDAwMDAxLFxuICAgIG1ldGVyczogMSxcbiAgICBtZXRyZXM6IDEsXG4gICAgY2VudGltZXRyZXM6IDEwMDAwLFxuICAgIG1pbGxpbWV0ZXI6IDEwMDAwMDAsXG4gICAgYWNyZXM6IDAuMDAwMjQ3MTA1LFxuICAgIG1pbGVzOiAzLjg2ZS03LFxuICAgIHlhcmRzOiAxLjE5NTk5MDA0NixcbiAgICBmZWV0OiAxMC43NjM5MTA0MTcsXG4gICAgaW5jaGVzOiAxNTUwLjAwMzEwMDAwNlxufTtcblxuLyoqXG4gKiBSb3VuZCBudW1iZXIgdG8gcHJlY2lzaW9uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG51bSBOdW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbcHJlY2lzaW9uPTBdIFByZWNpc2lvblxuICogQHJldHVybnMge251bWJlcn0gcm91bmRlZCBudW1iZXJcbiAqIEBleGFtcGxlXG4gKiB0dXJmLnJvdW5kKDEyMC40MzIxKVxuICogLy89MTIwXG4gKlxuICogdHVyZi5yb3VuZCgxMjAuNDMyMSwgMilcbiAqIC8vPTEyMC40M1xuICovXG5leHBvcnQgZnVuY3Rpb24gcm91bmQobnVtLCBwcmVjaXNpb24pIHtcbiAgICBpZiAobnVtID09PSB1bmRlZmluZWQgfHwgbnVtID09PSBudWxsIHx8IGlzTmFOKG51bSkpIHRocm93IG5ldyBFcnJvcignbnVtIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKHByZWNpc2lvbiAmJiAhKHByZWNpc2lvbiA+PSAwKSkgdGhyb3cgbmV3IEVycm9yKCdwcmVjaXNpb24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICAgIHZhciBtdWx0aXBsaWVyID0gTWF0aC5wb3coMTAsIHByZWNpc2lvbiB8fCAwKTtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChudW0gKiBtdWx0aXBsaWVyKSAvIG11bHRpcGxpZXI7XG59XG5cbi8qKlxuICogQ29udmVydCBhIGRpc3RhbmNlIG1lYXN1cmVtZW50IChhc3N1bWluZyBhIHNwaGVyaWNhbCBFYXJ0aCkgZnJvbSByYWRpYW5zIHRvIGEgbW9yZSBmcmllbmRseSB1bml0LlxuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywga2lsb21ldGVycywgY2VudGltZXRlcnMsIGZlZXRcbiAqXG4gKiBAbmFtZSByYWRpYW5zVG9EaXN0YW5jZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGlhbnMgaW4gcmFkaWFucyBhY3Jvc3MgdGhlIHNwaGVyZVxuICogQHBhcmFtIHtzdHJpbmd9IFt1bml0cz1cImtpbG9tZXRlcnNcIl0gY2FuIGJlIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzIGluY2hlcywgeWFyZHMsIG1ldHJlcywgbWV0ZXJzLCBraWxvbWV0cmVzLCBraWxvbWV0ZXJzLlxuICogQHJldHVybnMge251bWJlcn0gZGlzdGFuY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhZGlhbnNUb0Rpc3RhbmNlKHJhZGlhbnMsIHVuaXRzKSB7XG4gICAgaWYgKHJhZGlhbnMgPT09IHVuZGVmaW5lZCB8fCByYWRpYW5zID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoJ3JhZGlhbnMgaXMgcmVxdWlyZWQnKTtcblxuICAgIGlmICh1bml0cyAmJiB0eXBlb2YgdW5pdHMgIT09ICdzdHJpbmcnKSB0aHJvdyBuZXcgRXJyb3IoJ3VuaXRzIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICB2YXIgZmFjdG9yID0gZmFjdG9yc1t1bml0cyB8fCAna2lsb21ldGVycyddO1xuICAgIGlmICghZmFjdG9yKSB0aHJvdyBuZXcgRXJyb3IodW5pdHMgKyAnIHVuaXRzIGlzIGludmFsaWQnKTtcbiAgICByZXR1cm4gcmFkaWFucyAqIGZhY3Rvcjtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgZGlzdGFuY2UgbWVhc3VyZW1lbnQgKGFzc3VtaW5nIGEgc3BoZXJpY2FsIEVhcnRoKSBmcm9tIGEgcmVhbC13b3JsZCB1bml0IGludG8gcmFkaWFuc1xuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywga2lsb21ldGVycywgY2VudGltZXRlcnMsIGZlZXRcbiAqXG4gKiBAbmFtZSBkaXN0YW5jZVRvUmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIGluIHJlYWwgdW5pdHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBbdW5pdHM9a2lsb21ldGVyc10gY2FuIGJlIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzIGluY2hlcywgeWFyZHMsIG1ldHJlcywgbWV0ZXJzLCBraWxvbWV0cmVzLCBraWxvbWV0ZXJzLlxuICogQHJldHVybnMge251bWJlcn0gcmFkaWFuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2VUb1JhZGlhbnMoZGlzdGFuY2UsIHVuaXRzKSB7XG4gICAgaWYgKGRpc3RhbmNlID09PSB1bmRlZmluZWQgfHwgZGlzdGFuY2UgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcignZGlzdGFuY2UgaXMgcmVxdWlyZWQnKTtcblxuICAgIGlmICh1bml0cyAmJiB0eXBlb2YgdW5pdHMgIT09ICdzdHJpbmcnKSB0aHJvdyBuZXcgRXJyb3IoJ3VuaXRzIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICB2YXIgZmFjdG9yID0gZmFjdG9yc1t1bml0cyB8fCAna2lsb21ldGVycyddO1xuICAgIGlmICghZmFjdG9yKSB0aHJvdyBuZXcgRXJyb3IodW5pdHMgKyAnIHVuaXRzIGlzIGludmFsaWQnKTtcbiAgICByZXR1cm4gZGlzdGFuY2UgLyBmYWN0b3I7XG59XG5cbi8qKlxuICogQ29udmVydCBhIGRpc3RhbmNlIG1lYXN1cmVtZW50IChhc3N1bWluZyBhIHNwaGVyaWNhbCBFYXJ0aCkgZnJvbSBhIHJlYWwtd29ybGQgdW5pdCBpbnRvIGRlZ3JlZXNcbiAqIFZhbGlkIHVuaXRzOiBtaWxlcywgbmF1dGljYWxtaWxlcywgaW5jaGVzLCB5YXJkcywgbWV0ZXJzLCBtZXRyZXMsIGNlbnRpbWV0ZXJzLCBraWxvbWV0cmVzLCBmZWV0XG4gKlxuICogQG5hbWUgZGlzdGFuY2VUb0RlZ3JlZXNcbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0YW5jZSBpbiByZWFsIHVuaXRzXG4gKiBAcGFyYW0ge3N0cmluZ30gW3VuaXRzPWtpbG9tZXRlcnNdIGNhbiBiZSBkZWdyZWVzLCByYWRpYW5zLCBtaWxlcywgb3Iga2lsb21ldGVycyBpbmNoZXMsIHlhcmRzLCBtZXRyZXMsIG1ldGVycywga2lsb21ldHJlcywga2lsb21ldGVycy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IGRlZ3JlZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlVG9EZWdyZWVzKGRpc3RhbmNlLCB1bml0cykge1xuICAgIHJldHVybiByYWRpYW5zMmRlZ3JlZXMoZGlzdGFuY2VUb1JhZGlhbnMoZGlzdGFuY2UsIHVuaXRzKSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYW55IGJlYXJpbmcgYW5nbGUgZnJvbSB0aGUgbm9ydGggbGluZSBkaXJlY3Rpb24gKHBvc2l0aXZlIGNsb2Nrd2lzZSlcbiAqIGFuZCByZXR1cm5zIGFuIGFuZ2xlIGJldHdlZW4gMC0zNjAgZGVncmVlcyAocG9zaXRpdmUgY2xvY2t3aXNlKSwgMCBiZWluZyB0aGUgbm9ydGggbGluZVxuICpcbiAqIEBuYW1lIGJlYXJpbmdUb0FuZ2xlXG4gKiBAcGFyYW0ge251bWJlcn0gYmVhcmluZyBhbmdsZSwgYmV0d2VlbiAtMTgwIGFuZCArMTgwIGRlZ3JlZXNcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGFuZ2xlIGJldHdlZW4gMCBhbmQgMzYwIGRlZ3JlZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJlYXJpbmdUb0FuZ2xlKGJlYXJpbmcpIHtcbiAgICBpZiAoYmVhcmluZyA9PT0gbnVsbCB8fCBiZWFyaW5nID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignYmVhcmluZyBpcyByZXF1aXJlZCcpO1xuXG4gICAgdmFyIGFuZ2xlID0gYmVhcmluZyAlIDM2MDtcbiAgICBpZiAoYW5nbGUgPCAwKSBhbmdsZSArPSAzNjA7XG4gICAgcmV0dXJuIGFuZ2xlO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFuZ2xlIGluIHJhZGlhbnMgdG8gZGVncmVlc1xuICpcbiAqIEBuYW1lIHJhZGlhbnMyZGVncmVlc1xuICogQHBhcmFtIHtudW1iZXJ9IHJhZGlhbnMgYW5nbGUgaW4gcmFkaWFuc1xuICogQHJldHVybnMge251bWJlcn0gZGVncmVlcyBiZXR3ZWVuIDAgYW5kIDM2MCBkZWdyZWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYWRpYW5zMmRlZ3JlZXMocmFkaWFucykge1xuICAgIGlmIChyYWRpYW5zID09PSBudWxsIHx8IHJhZGlhbnMgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdyYWRpYW5zIGlzIHJlcXVpcmVkJyk7XG5cbiAgICB2YXIgZGVncmVlcyA9IHJhZGlhbnMgJSAoMiAqIE1hdGguUEkpO1xuICAgIHJldHVybiBkZWdyZWVzICogMTgwIC8gTWF0aC5QSTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBhbmdsZSBpbiBkZWdyZWVzIHRvIHJhZGlhbnNcbiAqXG4gKiBAbmFtZSBkZWdyZWVzMnJhZGlhbnNcbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWdyZWVzIGFuZ2xlIGJldHdlZW4gMCBhbmQgMzYwIGRlZ3JlZXNcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGFuZ2xlIGluIHJhZGlhbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZ3JlZXMycmFkaWFucyhkZWdyZWVzKSB7XG4gICAgaWYgKGRlZ3JlZXMgPT09IG51bGwgfHwgZGVncmVlcyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ2RlZ3JlZXMgaXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciByYWRpYW5zID0gZGVncmVlcyAlIDM2MDtcbiAgICByZXR1cm4gcmFkaWFucyAqIE1hdGguUEkgLyAxODA7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBkaXN0YW5jZSB0byB0aGUgcmVxdWVzdGVkIHVuaXQuXG4gKiBWYWxpZCB1bml0czogbWlsZXMsIG5hdXRpY2FsbWlsZXMsIGluY2hlcywgeWFyZHMsIG1ldGVycywgbWV0cmVzLCBraWxvbWV0ZXJzLCBjZW50aW1ldGVycywgZmVldFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0YW5jZSB0byBiZSBjb252ZXJ0ZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcmlnaW5hbFVuaXQgb2YgdGhlIGRpc3RhbmNlXG4gKiBAcGFyYW0ge3N0cmluZ30gW2ZpbmFsVW5pdD1raWxvbWV0ZXJzXSByZXR1cm5lZCB1bml0XG4gKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgY29udmVydGVkIGRpc3RhbmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0RGlzdGFuY2UoZGlzdGFuY2UsIG9yaWdpbmFsVW5pdCwgZmluYWxVbml0KSB7XG4gICAgaWYgKGRpc3RhbmNlID09PSBudWxsIHx8IGRpc3RhbmNlID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignZGlzdGFuY2UgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIShkaXN0YW5jZSA+PSAwKSkgdGhyb3cgbmV3IEVycm9yKCdkaXN0YW5jZSBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG5cbiAgICB2YXIgY29udmVydGVkRGlzdGFuY2UgPSByYWRpYW5zVG9EaXN0YW5jZShkaXN0YW5jZVRvUmFkaWFucyhkaXN0YW5jZSwgb3JpZ2luYWxVbml0KSwgZmluYWxVbml0IHx8ICdraWxvbWV0ZXJzJyk7XG4gICAgcmV0dXJuIGNvbnZlcnRlZERpc3RhbmNlO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgYXJlYSB0byB0aGUgcmVxdWVzdGVkIHVuaXQuXG4gKiBWYWxpZCB1bml0czoga2lsb21ldGVycywga2lsb21ldHJlcywgbWV0ZXJzLCBtZXRyZXMsIGNlbnRpbWV0cmVzLCBtaWxsaW1ldGVyLCBhY3JlLCBtaWxlLCB5YXJkLCBmb290LCBpbmNoXG4gKiBAcGFyYW0ge251bWJlcn0gYXJlYSB0byBiZSBjb252ZXJ0ZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3JpZ2luYWxVbml0PW1ldGVyc10gb2YgdGhlIGRpc3RhbmNlXG4gKiBAcGFyYW0ge3N0cmluZ30gW2ZpbmFsVW5pdD1raWxvbWV0ZXJzXSByZXR1cm5lZCB1bml0XG4gKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgY29udmVydGVkIGRpc3RhbmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0QXJlYShhcmVhLCBvcmlnaW5hbFVuaXQsIGZpbmFsVW5pdCkge1xuICAgIGlmIChhcmVhID09PSBudWxsIHx8IGFyZWEgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdhcmVhIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCEoYXJlYSA+PSAwKSkgdGhyb3cgbmV3IEVycm9yKCdhcmVhIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcblxuICAgIHZhciBzdGFydEZhY3RvciA9IGFyZWFGYWN0b3JzW29yaWdpbmFsVW5pdCB8fCAnbWV0ZXJzJ107XG4gICAgaWYgKCFzdGFydEZhY3RvcikgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIG9yaWdpbmFsIHVuaXRzJyk7XG5cbiAgICB2YXIgZmluYWxGYWN0b3IgPSBhcmVhRmFjdG9yc1tmaW5hbFVuaXQgfHwgJ2tpbG9tZXRlcnMnXTtcbiAgICBpZiAoIWZpbmFsRmFjdG9yKSB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgZmluYWwgdW5pdHMnKTtcblxuICAgIHJldHVybiAoYXJlYSAvIHN0YXJ0RmFjdG9yKSAqIGZpbmFsRmFjdG9yO1xufVxuXG4vKipcbiAqIGlzTnVtYmVyXG4gKlxuICogQHBhcmFtIHsqfSBudW0gTnVtYmVyIHRvIHZhbGlkYXRlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZS9mYWxzZVxuICogQGV4YW1wbGVcbiAqIHR1cmYuaXNOdW1iZXIoMTIzKVxuICogLy89dHJ1ZVxuICogdHVyZi5pc051bWJlcignZm9vJylcbiAqIC8vPWZhbHNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc051bWJlcihudW0pIHtcbiAgICByZXR1cm4gIWlzTmFOKG51bSkgJiYgbnVtICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KG51bSk7XG59XG5cbi8qKlxuICogaXNPYmplY3RcbiAqXG4gKiBAcGFyYW0geyp9IGlucHV0IHZhcmlhYmxlIHRvIHZhbGlkYXRlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZS9mYWxzZVxuICogQGV4YW1wbGVcbiAqIHR1cmYuaXNPYmplY3Qoe2VsZXZhdGlvbjogMTB9KVxuICogLy89dHJ1ZVxuICogdHVyZi5pc09iamVjdCgnZm9vJylcbiAqIC8vPWZhbHNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdChpbnB1dCkge1xuICAgIHJldHVybiAoISFpbnB1dCkgJiYgKGlucHV0LmNvbnN0cnVjdG9yID09PSBPYmplY3QpO1xufVxuXG4vKipcbiAqIEVhcnRoIFJhZGl1cyB1c2VkIHdpdGggdGhlIEhhcnZlc2luZSBmb3JtdWxhIGFuZCBhcHByb3hpbWF0ZXMgdXNpbmcgYSBzcGhlcmljYWwgKG5vbi1lbGxpcHNvaWQpIEVhcnRoLlxuICovXG5leHBvcnQgdmFyIGVhcnRoUmFkaXVzID0gNjM3MTAwOC44O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvQHR1cmYvY2lyY2xlL25vZGVfbW9kdWxlcy9AdHVyZi9oZWxwZXJzL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIEVhcnRoIFJhZGl1cyB1c2VkIHdpdGggdGhlIEhhcnZlc2luZSBmb3JtdWxhIGFuZCBhcHByb3hpbWF0ZXMgdXNpbmcgYSBzcGhlcmljYWwgKG5vbi1lbGxpcHNvaWQpIEVhcnRoLlxuICovXG5leHBvcnQgdmFyIGVhcnRoUmFkaXVzID0gNjM3MTAwOC44O1xuXG4vKipcbiAqIFVuaXQgb2YgbWVhc3VyZW1lbnQgZmFjdG9ycyB1c2luZyBhIHNwaGVyaWNhbCAobm9uLWVsbGlwc29pZCkgZWFydGggcmFkaXVzLlxuICovXG5leHBvcnQgdmFyIGZhY3RvcnMgPSB7XG4gICAgbWV0ZXJzOiBlYXJ0aFJhZGl1cyxcbiAgICBtZXRyZXM6IGVhcnRoUmFkaXVzLFxuICAgIG1pbGxpbWV0ZXJzOiBlYXJ0aFJhZGl1cyAqIDEwMDAsXG4gICAgbWlsbGltZXRyZXM6IGVhcnRoUmFkaXVzICogMTAwMCxcbiAgICBjZW50aW1ldGVyczogZWFydGhSYWRpdXMgKiAxMDAsXG4gICAgY2VudGltZXRyZXM6IGVhcnRoUmFkaXVzICogMTAwLFxuICAgIGtpbG9tZXRlcnM6IGVhcnRoUmFkaXVzIC8gMTAwMCxcbiAgICBraWxvbWV0cmVzOiBlYXJ0aFJhZGl1cyAvIDEwMDAsXG4gICAgbWlsZXM6IGVhcnRoUmFkaXVzIC8gMTYwOS4zNDQsXG4gICAgbmF1dGljYWxtaWxlczogZWFydGhSYWRpdXMgLyAxODUyLFxuICAgIGluY2hlczogZWFydGhSYWRpdXMgKiAzOS4zNzAsXG4gICAgeWFyZHM6IGVhcnRoUmFkaXVzIC8gMS4wOTM2LFxuICAgIGZlZXQ6IGVhcnRoUmFkaXVzICogMy4yODA4NCxcbiAgICByYWRpYW5zOiAxLFxuICAgIGRlZ3JlZXM6IGVhcnRoUmFkaXVzIC8gMTExMzI1LFxufTtcblxuLyoqXG4gKiBVbml0cyBvZiBtZWFzdXJlbWVudCBmYWN0b3JzIGJhc2VkIG9uIDEgbWV0ZXIuXG4gKi9cbmV4cG9ydCB2YXIgdW5pdHNGYWN0b3JzID0ge1xuICAgIG1ldGVyczogMSxcbiAgICBtZXRyZXM6IDEsXG4gICAgbWlsbGltZXRlcnM6IDEwMDAsXG4gICAgbWlsbGltZXRyZXM6IDEwMDAsXG4gICAgY2VudGltZXRlcnM6IDEwMCxcbiAgICBjZW50aW1ldHJlczogMTAwLFxuICAgIGtpbG9tZXRlcnM6IDEgLyAxMDAwLFxuICAgIGtpbG9tZXRyZXM6IDEgLyAxMDAwLFxuICAgIG1pbGVzOiAxIC8gMTYwOS4zNDQsXG4gICAgbmF1dGljYWxtaWxlczogMSAvIDE4NTIsXG4gICAgaW5jaGVzOiAzOS4zNzAsXG4gICAgeWFyZHM6IDEgLyAxLjA5MzYsXG4gICAgZmVldDogMy4yODA4NCxcbiAgICByYWRpYW5zOiAxIC8gZWFydGhSYWRpdXMsXG4gICAgZGVncmVlczogMSAvIDExMTMyNSxcbn07XG5cbi8qKlxuICogQXJlYSBvZiBtZWFzdXJlbWVudCBmYWN0b3JzIGJhc2VkIG9uIDEgc3F1YXJlIG1ldGVyLlxuICovXG5leHBvcnQgdmFyIGFyZWFGYWN0b3JzID0ge1xuICAgIG1ldGVyczogMSxcbiAgICBtZXRyZXM6IDEsXG4gICAgbWlsbGltZXRlcnM6IDEwMDAwMDAsXG4gICAgbWlsbGltZXRyZXM6IDEwMDAwMDAsXG4gICAgY2VudGltZXRlcnM6IDEwMDAwLFxuICAgIGNlbnRpbWV0cmVzOiAxMDAwMCxcbiAgICBraWxvbWV0ZXJzOiAwLjAwMDAwMSxcbiAgICBraWxvbWV0cmVzOiAwLjAwMDAwMSxcbiAgICBhY3JlczogMC4wMDAyNDcxMDUsXG4gICAgbWlsZXM6IDMuODZlLTcsXG4gICAgeWFyZHM6IDEuMTk1OTkwMDQ2LFxuICAgIGZlZXQ6IDEwLjc2MzkxMDQxNyxcbiAgICBpbmNoZXM6IDE1NTAuMDAzMTAwMDA2XG59O1xuXG4vKipcbiAqIFdyYXBzIGEgR2VvSlNPTiB7QGxpbmsgR2VvbWV0cnl9IGluIGEgR2VvSlNPTiB7QGxpbmsgRmVhdHVyZX0uXG4gKlxuICogQG5hbWUgZmVhdHVyZVxuICogQHBhcmFtIHtHZW9tZXRyeX0gZ2VvbWV0cnkgaW5wdXQgZ2VvbWV0cnlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlfSBhIEdlb0pTT04gRmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBnZW9tZXRyeSA9IHtcbiAqICAgXCJ0eXBlXCI6IFwiUG9pbnRcIixcbiAqICAgXCJjb29yZGluYXRlc1wiOiBbMTEwLCA1MF1cbiAqIH07XG4gKlxuICogdmFyIGZlYXR1cmUgPSB0dXJmLmZlYXR1cmUoZ2VvbWV0cnkpO1xuICpcbiAqIC8vPWZlYXR1cmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZlYXR1cmUoZ2VvbWV0cnksIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKGdlb21ldHJ5ID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignZ2VvbWV0cnkgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAocHJvcGVydGllcyAmJiBwcm9wZXJ0aWVzLmNvbnN0cnVjdG9yICE9PSBPYmplY3QpIHRocm93IG5ldyBFcnJvcigncHJvcGVydGllcyBtdXN0IGJlIGFuIE9iamVjdCcpO1xuICAgIGlmIChiYm94ICYmIGJib3gubGVuZ3RoICE9PSA0KSB0aHJvdyBuZXcgRXJyb3IoJ2Jib3ggbXVzdCBiZSBhbiBBcnJheSBvZiA0IG51bWJlcnMnKTtcbiAgICBpZiAoaWQgJiYgWydzdHJpbmcnLCAnbnVtYmVyJ10uaW5kZXhPZih0eXBlb2YgaWQpID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKCdpZCBtdXN0IGJlIGEgbnVtYmVyIG9yIGEgc3RyaW5nJyk7XG5cbiAgICB2YXIgZmVhdCA9IHt0eXBlOiAnRmVhdHVyZSd9O1xuICAgIGlmIChpZCkgZmVhdC5pZCA9IGlkO1xuICAgIGlmIChiYm94KSBmZWF0LmJib3ggPSBiYm94O1xuICAgIGZlYXQucHJvcGVydGllcyA9IHByb3BlcnRpZXMgfHwge307XG4gICAgZmVhdC5nZW9tZXRyeSA9IGdlb21ldHJ5O1xuICAgIHJldHVybiBmZWF0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBHZW9KU09OIHtAbGluayBHZW9tZXRyeX0gZnJvbSBhIEdlb21ldHJ5IHN0cmluZyB0eXBlICYgY29vcmRpbmF0ZXMuXG4gKiBGb3IgR2VvbWV0cnlDb2xsZWN0aW9uIHR5cGUgdXNlIGBoZWxwZXJzLmdlb21ldHJ5Q29sbGVjdGlvbmBcbiAqXG4gKiBAbmFtZSBnZW9tZXRyeVxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgR2VvbWV0cnkgVHlwZVxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlcyBDb29yZGluYXRlc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHJldHVybnMge0dlb21ldHJ5fSBhIEdlb0pTT04gR2VvbWV0cnlcbiAqIEBleGFtcGxlXG4gKiB2YXIgdHlwZSA9ICdQb2ludCc7XG4gKiB2YXIgY29vcmRpbmF0ZXMgPSBbMTEwLCA1MF07XG4gKlxuICogdmFyIGdlb21ldHJ5ID0gdHVyZi5nZW9tZXRyeSh0eXBlLCBjb29yZGluYXRlcyk7XG4gKlxuICogLy89Z2VvbWV0cnlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlb21ldHJ5KHR5cGUsIGNvb3JkaW5hdGVzLCBiYm94KSB7XG4gICAgLy8gVmFsaWRhdGlvblxuICAgIGlmICghdHlwZSkgdGhyb3cgbmV3IEVycm9yKCd0eXBlIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShjb29yZGluYXRlcykpIHRocm93IG5ldyBFcnJvcignY29vcmRpbmF0ZXMgbXVzdCBiZSBhbiBBcnJheScpO1xuICAgIGlmIChiYm94ICYmIGJib3gubGVuZ3RoICE9PSA0KSB0aHJvdyBuZXcgRXJyb3IoJ2Jib3ggbXVzdCBiZSBhbiBBcnJheSBvZiA0IG51bWJlcnMnKTtcblxuICAgIHZhciBnZW9tO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ1BvaW50JzogZ2VvbSA9IHBvaW50KGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgY2FzZSAnTGluZVN0cmluZyc6IGdlb20gPSBsaW5lU3RyaW5nKGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgY2FzZSAnUG9seWdvbic6IGdlb20gPSBwb2x5Z29uKGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgY2FzZSAnTXVsdGlQb2ludCc6IGdlb20gPSBtdWx0aVBvaW50KGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgY2FzZSAnTXVsdGlMaW5lU3RyaW5nJzogZ2VvbSA9IG11bHRpTGluZVN0cmluZyhjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGNhc2UgJ011bHRpUG9seWdvbic6IGdlb20gPSBtdWx0aVBvbHlnb24oY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IodHlwZSArICcgaXMgaW52YWxpZCcpO1xuICAgIH1cbiAgICBpZiAoYmJveCkgZ2VvbS5iYm94ID0gYmJveDtcbiAgICByZXR1cm4gZ2VvbTtcbn1cblxuLyoqXG4gKiBUYWtlcyBjb29yZGluYXRlcyBhbmQgcHJvcGVydGllcyAob3B0aW9uYWwpIGFuZCByZXR1cm5zIGEgbmV3IHtAbGluayBQb2ludH0gZmVhdHVyZS5cbiAqXG4gKiBAbmFtZSBwb2ludFxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlcyBsb25naXR1ZGUsIGxhdGl0dWRlIHBvc2l0aW9uIChlYWNoIGluIGRlY2ltYWwgZGVncmVlcylcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPFBvaW50Pn0gYSBQb2ludCBmZWF0dXJlXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvaW50ID0gdHVyZi5wb2ludChbLTc1LjM0MywgMzkuOTg0XSk7XG4gKlxuICogLy89cG9pbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBvaW50KGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgYmUgYW4gYXJyYXknKTtcbiAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoIDwgMikgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGJlIGF0IGxlYXN0IDIgbnVtYmVycyBsb25nJyk7XG4gICAgaWYgKCFpc051bWJlcihjb29yZGluYXRlc1swXSkgfHwgIWlzTnVtYmVyKGNvb3JkaW5hdGVzWzFdKSkgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGNvbnRhaW4gbnVtYmVycycpO1xuXG4gICAgcmV0dXJuIGZlYXR1cmUoe1xuICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8qKlxuICogVGFrZXMgYW4gYXJyYXkgb2YgTGluZWFyUmluZ3MgYW5kIG9wdGlvbmFsbHkgYW4ge0BsaW5rIE9iamVjdH0gd2l0aCBwcm9wZXJ0aWVzIGFuZCByZXR1cm5zIGEge0BsaW5rIFBvbHlnb259IGZlYXR1cmUuXG4gKlxuICogQG5hbWUgcG9seWdvblxuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxudW1iZXI+Pj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIExpbmVhclJpbmdzXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxQb2x5Z29uPn0gYSBQb2x5Z29uIGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSB0aHJvdyBhbiBlcnJvciBpZiBhIExpbmVhclJpbmcgb2YgdGhlIHBvbHlnb24gaGFzIHRvbyBmZXcgcG9zaXRpb25zXG4gKiBvciBpZiBhIExpbmVhclJpbmcgb2YgdGhlIFBvbHlnb24gZG9lcyBub3QgaGF2ZSBtYXRjaGluZyBQb3NpdGlvbnMgYXQgdGhlIGJlZ2lubmluZyAmIGVuZC5cbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9seWdvbiA9IHR1cmYucG9seWdvbihbW1xuICogICBbLTIuMjc1NTQzLCA1My40NjQ1NDddLFxuICogICBbLTIuMjc1NTQzLCA1My40ODkyNzFdLFxuICogICBbLTIuMjE1MTE4LCA1My40ODkyNzFdLFxuICogICBbLTIuMjE1MTE4LCA1My40NjQ1NDddLFxuICogICBbLTIuMjc1NTQzLCA1My40NjQ1NDddXG4gKiBdXSwgeyBuYW1lOiAncG9seTEnLCBwb3B1bGF0aW9uOiA0MDB9KTtcbiAqXG4gKiAvLz1wb2x5Z29uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwb2x5Z29uKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByaW5nID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgIGlmIChyaW5nLmxlbmd0aCA8IDQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRWFjaCBMaW5lYXJSaW5nIG9mIGEgUG9seWdvbiBtdXN0IGhhdmUgNCBvciBtb3JlIFBvc2l0aW9ucy4nKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJpbmdbcmluZy5sZW5ndGggLSAxXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZmlyc3QgcG9pbnQgb2YgUG9seWdvbiBjb250YWlucyB0d28gbnVtYmVyc1xuICAgICAgICAgICAgaWYgKGkgPT09IDAgJiYgaiA9PT0gMCAmJiAhaXNOdW1iZXIocmluZ1swXVswXSkgfHwgIWlzTnVtYmVyKHJpbmdbMF1bMV0pKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgY29udGFpbiBudW1iZXJzJyk7XG4gICAgICAgICAgICBpZiAocmluZ1tyaW5nLmxlbmd0aCAtIDFdW2pdICE9PSByaW5nWzBdW2pdKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJzdCBhbmQgbGFzdCBQb3NpdGlvbiBhcmUgbm90IGVxdWl2YWxlbnQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdQb2x5Z29uJyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgTGluZVN0cmluZ30gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBsaW5lU3RyaW5nXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBQb3NpdGlvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPExpbmVTdHJpbmc+fSBhIExpbmVTdHJpbmcgZmVhdHVyZVxuICogQHRocm93cyB7RXJyb3J9IGlmIG5vIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWRcbiAqIEBleGFtcGxlXG4gKiB2YXIgbGluZXN0cmluZzEgPSB0dXJmLmxpbmVTdHJpbmcoW1xuICogICBbLTIxLjk2NDQxNiwgNjQuMTQ4MjAzXSxcbiAqICAgWy0yMS45NTYxNzYsIDY0LjE0MTMxNl0sXG4gKiAgIFstMjEuOTM5MDEsIDY0LjEzNTkyNF0sXG4gKiAgIFstMjEuOTI3MzM3LCA2NC4xMzY2NzNdXG4gKiBdKTtcbiAqIHZhciBsaW5lc3RyaW5nMiA9IHR1cmYubGluZVN0cmluZyhbXG4gKiAgIFstMjEuOTI5MDU0LCA2NC4xMjc5ODVdLFxuICogICBbLTIxLjkxMjkxOCwgNjQuMTM0NzI2XSxcbiAqICAgWy0yMS45MTYwMDcsIDY0LjE0MTAxNl0sXG4gKiAgIFstMjEuOTMwMDg0LCA2NC4xNDQ0Nl1cbiAqIF0sIHtuYW1lOiAnbGluZSAxJywgZGlzdGFuY2U6IDE0NX0pO1xuICpcbiAqIC8vPWxpbmVzdHJpbmcxXG4gKlxuICogLy89bGluZXN0cmluZzJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVTdHJpbmcoY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcbiAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoIDwgMikgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGJlIGFuIGFycmF5IG9mIHR3byBvciBtb3JlIHBvc2l0aW9ucycpO1xuICAgIC8vIENoZWNrIGlmIGZpcnN0IHBvaW50IG9mIExpbmVTdHJpbmcgY29udGFpbnMgdHdvIG51bWJlcnNcbiAgICBpZiAoIWlzTnVtYmVyKGNvb3JkaW5hdGVzWzBdWzFdKSB8fCAhaXNOdW1iZXIoY29vcmRpbmF0ZXNbMF1bMV0pKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgY29udGFpbiBudW1iZXJzJyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdMaW5lU3RyaW5nJyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIFRha2VzIG9uZSBvciBtb3JlIHtAbGluayBGZWF0dXJlfEZlYXR1cmVzfSBhbmQgY3JlYXRlcyBhIHtAbGluayBGZWF0dXJlQ29sbGVjdGlvbn0uXG4gKlxuICogQG5hbWUgZmVhdHVyZUNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7RmVhdHVyZVtdfSBmZWF0dXJlcyBpbnB1dCBmZWF0dXJlc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlQ29sbGVjdGlvbn0gYSBGZWF0dXJlQ29sbGVjdGlvbiBvZiBpbnB1dCBmZWF0dXJlc1xuICogQGV4YW1wbGVcbiAqIHZhciBmZWF0dXJlcyA9IFtcbiAqICB0dXJmLnBvaW50KFstNzUuMzQzLCAzOS45ODRdLCB7bmFtZTogJ0xvY2F0aW9uIEEnfSksXG4gKiAgdHVyZi5wb2ludChbLTc1LjgzMywgMzkuMjg0XSwge25hbWU6ICdMb2NhdGlvbiBCJ30pLFxuICogIHR1cmYucG9pbnQoWy03NS41MzQsIDM5LjEyM10sIHtuYW1lOiAnTG9jYXRpb24gQyd9KVxuICogXTtcbiAqXG4gKiB2YXIgY29sbGVjdGlvbiA9IHR1cmYuZmVhdHVyZUNvbGxlY3Rpb24oZmVhdHVyZXMpO1xuICpcbiAqIC8vPWNvbGxlY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZlYXR1cmVDb2xsZWN0aW9uKGZlYXR1cmVzLCBiYm94LCBpZCkge1xuICAgIGlmICghZmVhdHVyZXMpIHRocm93IG5ldyBFcnJvcignTm8gZmVhdHVyZXMgcGFzc2VkJyk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGZlYXR1cmVzKSkgdGhyb3cgbmV3IEVycm9yKCdmZWF0dXJlcyBtdXN0IGJlIGFuIEFycmF5Jyk7XG4gICAgaWYgKGJib3ggJiYgYmJveC5sZW5ndGggIT09IDQpIHRocm93IG5ldyBFcnJvcignYmJveCBtdXN0IGJlIGFuIEFycmF5IG9mIDQgbnVtYmVycycpO1xuICAgIGlmIChpZCAmJiBbJ3N0cmluZycsICdudW1iZXInXS5pbmRleE9mKHR5cGVvZiBpZCkgPT09IC0xKSB0aHJvdyBuZXcgRXJyb3IoJ2lkIG11c3QgYmUgYSBudW1iZXIgb3IgYSBzdHJpbmcnKTtcblxuICAgIHZhciBmYyA9IHt0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nfTtcbiAgICBpZiAoaWQpIGZjLmlkID0gaWQ7XG4gICAgaWYgKGJib3gpIGZjLmJib3ggPSBiYm94O1xuICAgIGZjLmZlYXR1cmVzID0gZmVhdHVyZXM7XG4gICAgcmV0dXJuIGZjO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgRmVhdHVyZTxNdWx0aUxpbmVTdHJpbmc+fSBiYXNlZCBvbiBhXG4gKiBjb29yZGluYXRlIGFycmF5LiBQcm9wZXJ0aWVzIGNhbiBiZSBhZGRlZCBvcHRpb25hbGx5LlxuICpcbiAqIEBuYW1lIG11bHRpTGluZVN0cmluZ1xuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxudW1iZXI+Pj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIExpbmVTdHJpbmdzXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxNdWx0aUxpbmVTdHJpbmc+fSBhIE11bHRpTGluZVN0cmluZyBmZWF0dXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgbm8gY29vcmRpbmF0ZXMgYXJlIHBhc3NlZFxuICogQGV4YW1wbGVcbiAqIHZhciBtdWx0aUxpbmUgPSB0dXJmLm11bHRpTGluZVN0cmluZyhbW1swLDBdLFsxMCwxMF1dXSk7XG4gKlxuICogLy89bXVsdGlMaW5lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aUxpbmVTdHJpbmcoY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ011bHRpTGluZVN0cmluZycsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8TXVsdGlQb2ludD59IGJhc2VkIG9uIGFcbiAqIGNvb3JkaW5hdGUgYXJyYXkuIFByb3BlcnRpZXMgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHkuXG4gKlxuICogQG5hbWUgbXVsdGlQb2ludFxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gY29vcmRpbmF0ZXMgYW4gYXJyYXkgb2YgUG9zaXRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxNdWx0aVBvaW50Pn0gYSBNdWx0aVBvaW50IGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBubyBjb29yZGluYXRlcyBhcmUgcGFzc2VkXG4gKiBAZXhhbXBsZVxuICogdmFyIG11bHRpUHQgPSB0dXJmLm11bHRpUG9pbnQoW1swLDBdLFsxMCwxMF1dKTtcbiAqXG4gKiAvLz1tdWx0aVB0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aVBvaW50KGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdNdWx0aVBvaW50JyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgRmVhdHVyZTxNdWx0aVBvbHlnb24+fSBiYXNlZCBvbiBhXG4gKiBjb29yZGluYXRlIGFycmF5LiBQcm9wZXJ0aWVzIGNhbiBiZSBhZGRlZCBvcHRpb25hbGx5LlxuICpcbiAqIEBuYW1lIG11bHRpUG9seWdvblxuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxBcnJheTxudW1iZXI+Pj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBQb2x5Z29uc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8TXVsdGlQb2x5Z29uPn0gYSBtdWx0aXBvbHlnb24gZmVhdHVyZVxuICogQHRocm93cyB7RXJyb3J9IGlmIG5vIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWRcbiAqIEBleGFtcGxlXG4gKiB2YXIgbXVsdGlQb2x5ID0gdHVyZi5tdWx0aVBvbHlnb24oW1tbWzAsMF0sWzAsMTBdLFsxMCwxMF0sWzEwLDBdLFswLDBdXV1dKTtcbiAqXG4gKiAvLz1tdWx0aVBvbHlcbiAqXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aVBvbHlnb24oY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ011bHRpUG9seWdvbicsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8R2VvbWV0cnlDb2xsZWN0aW9uPn0gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBnZW9tZXRyeUNvbGxlY3Rpb25cbiAqIEBwYXJhbSB7QXJyYXk8R2VvbWV0cnk+fSBnZW9tZXRyaWVzIGFuIGFycmF5IG9mIEdlb0pTT04gR2VvbWV0cmllc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8R2VvbWV0cnlDb2xsZWN0aW9uPn0gYSBHZW9KU09OIEdlb21ldHJ5Q29sbGVjdGlvbiBGZWF0dXJlXG4gKiBAZXhhbXBsZVxuICogdmFyIHB0ID0ge1xuICogICAgIFwidHlwZVwiOiBcIlBvaW50XCIsXG4gKiAgICAgICBcImNvb3JkaW5hdGVzXCI6IFsxMDAsIDBdXG4gKiAgICAgfTtcbiAqIHZhciBsaW5lID0ge1xuICogICAgIFwidHlwZVwiOiBcIkxpbmVTdHJpbmdcIixcbiAqICAgICBcImNvb3JkaW5hdGVzXCI6IFsgWzEwMSwgMF0sIFsxMDIsIDFdIF1cbiAqICAgfTtcbiAqIHZhciBjb2xsZWN0aW9uID0gdHVyZi5nZW9tZXRyeUNvbGxlY3Rpb24oW3B0LCBsaW5lXSk7XG4gKlxuICogLy89Y29sbGVjdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VvbWV0cnlDb2xsZWN0aW9uKGdlb21ldHJpZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFnZW9tZXRyaWVzKSB0aHJvdyBuZXcgRXJyb3IoJ2dlb21ldHJpZXMgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZ2VvbWV0cmllcykpIHRocm93IG5ldyBFcnJvcignZ2VvbWV0cmllcyBtdXN0IGJlIGFuIEFycmF5Jyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdHZW9tZXRyeUNvbGxlY3Rpb24nLFxuICAgICAgICBnZW9tZXRyaWVzOiBnZW9tZXRyaWVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIFJvdW5kIG51bWJlciB0byBwcmVjaXNpb25cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtIE51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IFtwcmVjaXNpb249MF0gUHJlY2lzaW9uXG4gKiBAcmV0dXJucyB7bnVtYmVyfSByb3VuZGVkIG51bWJlclxuICogQGV4YW1wbGVcbiAqIHR1cmYucm91bmQoMTIwLjQzMjEpXG4gKiAvLz0xMjBcbiAqXG4gKiB0dXJmLnJvdW5kKDEyMC40MzIxLCAyKVxuICogLy89MTIwLjQzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3VuZChudW0sIHByZWNpc2lvbikge1xuICAgIGlmIChudW0gPT09IHVuZGVmaW5lZCB8fCBudW0gPT09IG51bGwgfHwgaXNOYU4obnVtKSkgdGhyb3cgbmV3IEVycm9yKCdudW0gaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAocHJlY2lzaW9uICYmICEocHJlY2lzaW9uID49IDApKSB0aHJvdyBuZXcgRXJyb3IoJ3ByZWNpc2lvbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gICAgdmFyIG11bHRpcGxpZXIgPSBNYXRoLnBvdygxMCwgcHJlY2lzaW9uIHx8IDApO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG51bSAqIG11bHRpcGxpZXIpIC8gbXVsdGlwbGllcjtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgZGlzdGFuY2UgbWVhc3VyZW1lbnQgKGFzc3VtaW5nIGEgc3BoZXJpY2FsIEVhcnRoKSBmcm9tIHJhZGlhbnMgdG8gYSBtb3JlIGZyaWVuZGx5IHVuaXQuXG4gKiBWYWxpZCB1bml0czogbWlsZXMsIG5hdXRpY2FsbWlsZXMsIGluY2hlcywgeWFyZHMsIG1ldGVycywgbWV0cmVzLCBraWxvbWV0ZXJzLCBjZW50aW1ldGVycywgZmVldFxuICpcbiAqIEBuYW1lIHJhZGlhbnNUb0Rpc3RhbmNlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaWFucyBpbiByYWRpYW5zIGFjcm9zcyB0aGUgc3BoZXJlXG4gKiBAcGFyYW0ge3N0cmluZ30gW3VuaXRzPSdraWxvbWV0ZXJzJ10gY2FuIGJlIGRlZ3JlZXMsIHJhZGlhbnMsIG1pbGVzLCBvciBraWxvbWV0ZXJzIGluY2hlcywgeWFyZHMsIG1ldHJlcywgbWV0ZXJzLCBraWxvbWV0cmVzLCBraWxvbWV0ZXJzLlxuICogQHJldHVybnMge251bWJlcn0gZGlzdGFuY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhZGlhbnNUb0Rpc3RhbmNlKHJhZGlhbnMsIHVuaXRzKSB7XG4gICAgaWYgKHJhZGlhbnMgPT09IHVuZGVmaW5lZCB8fCByYWRpYW5zID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoJ3JhZGlhbnMgaXMgcmVxdWlyZWQnKTtcblxuICAgIGlmICh1bml0cyAmJiB0eXBlb2YgdW5pdHMgIT09ICdzdHJpbmcnKSB0aHJvdyBuZXcgRXJyb3IoJ3VuaXRzIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICB2YXIgZmFjdG9yID0gZmFjdG9yc1t1bml0cyB8fCAna2lsb21ldGVycyddO1xuICAgIGlmICghZmFjdG9yKSB0aHJvdyBuZXcgRXJyb3IodW5pdHMgKyAnIHVuaXRzIGlzIGludmFsaWQnKTtcbiAgICByZXR1cm4gcmFkaWFucyAqIGZhY3Rvcjtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgZGlzdGFuY2UgbWVhc3VyZW1lbnQgKGFzc3VtaW5nIGEgc3BoZXJpY2FsIEVhcnRoKSBmcm9tIGEgcmVhbC13b3JsZCB1bml0IGludG8gcmFkaWFuc1xuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywga2lsb21ldGVycywgY2VudGltZXRlcnMsIGZlZXRcbiAqXG4gKiBAbmFtZSBkaXN0YW5jZVRvUmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIGluIHJlYWwgdW5pdHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBbdW5pdHM9J2tpbG9tZXRlcnMnXSBjYW4gYmUgZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnMgaW5jaGVzLCB5YXJkcywgbWV0cmVzLCBtZXRlcnMsIGtpbG9tZXRyZXMsIGtpbG9tZXRlcnMuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSByYWRpYW5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZVRvUmFkaWFucyhkaXN0YW5jZSwgdW5pdHMpIHtcbiAgICBpZiAoZGlzdGFuY2UgPT09IHVuZGVmaW5lZCB8fCBkaXN0YW5jZSA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKCdkaXN0YW5jZSBpcyByZXF1aXJlZCcpO1xuXG4gICAgaWYgKHVuaXRzICYmIHR5cGVvZiB1bml0cyAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcigndW5pdHMgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgIHZhciBmYWN0b3IgPSBmYWN0b3JzW3VuaXRzIHx8ICdraWxvbWV0ZXJzJ107XG4gICAgaWYgKCFmYWN0b3IpIHRocm93IG5ldyBFcnJvcih1bml0cyArICcgdW5pdHMgaXMgaW52YWxpZCcpO1xuICAgIHJldHVybiBkaXN0YW5jZSAvIGZhY3Rvcjtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgZGlzdGFuY2UgbWVhc3VyZW1lbnQgKGFzc3VtaW5nIGEgc3BoZXJpY2FsIEVhcnRoKSBmcm9tIGEgcmVhbC13b3JsZCB1bml0IGludG8gZGVncmVlc1xuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywgY2VudGltZXRlcnMsIGtpbG9tZXRyZXMsIGZlZXRcbiAqXG4gKiBAbmFtZSBkaXN0YW5jZVRvRGVncmVlc1xuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIGluIHJlYWwgdW5pdHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBbdW5pdHM9J2tpbG9tZXRlcnMnXSBjYW4gYmUgZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnMgaW5jaGVzLCB5YXJkcywgbWV0cmVzLCBtZXRlcnMsIGtpbG9tZXRyZXMsIGtpbG9tZXRlcnMuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBkZWdyZWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZVRvRGVncmVlcyhkaXN0YW5jZSwgdW5pdHMpIHtcbiAgICByZXR1cm4gcmFkaWFuczJkZWdyZWVzKGRpc3RhbmNlVG9SYWRpYW5zKGRpc3RhbmNlLCB1bml0cykpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFueSBiZWFyaW5nIGFuZ2xlIGZyb20gdGhlIG5vcnRoIGxpbmUgZGlyZWN0aW9uIChwb3NpdGl2ZSBjbG9ja3dpc2UpXG4gKiBhbmQgcmV0dXJucyBhbiBhbmdsZSBiZXR3ZWVuIDAtMzYwIGRlZ3JlZXMgKHBvc2l0aXZlIGNsb2Nrd2lzZSksIDAgYmVpbmcgdGhlIG5vcnRoIGxpbmVcbiAqXG4gKiBAbmFtZSBiZWFyaW5nVG9BbmdsZVxuICogQHBhcmFtIHtudW1iZXJ9IGJlYXJpbmcgYW5nbGUsIGJldHdlZW4gLTE4MCBhbmQgKzE4MCBkZWdyZWVzXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBhbmdsZSBiZXR3ZWVuIDAgYW5kIDM2MCBkZWdyZWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiZWFyaW5nVG9BbmdsZShiZWFyaW5nKSB7XG4gICAgaWYgKGJlYXJpbmcgPT09IG51bGwgfHwgYmVhcmluZyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ2JlYXJpbmcgaXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciBhbmdsZSA9IGJlYXJpbmcgJSAzNjA7XG4gICAgaWYgKGFuZ2xlIDwgMCkgYW5nbGUgKz0gMzYwO1xuICAgIHJldHVybiBhbmdsZTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBhbmdsZSBpbiByYWRpYW5zIHRvIGRlZ3JlZXNcbiAqXG4gKiBAbmFtZSByYWRpYW5zMmRlZ3JlZXNcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpYW5zIGFuZ2xlIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGRlZ3JlZXMgYmV0d2VlbiAwIGFuZCAzNjAgZGVncmVlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmFkaWFuczJkZWdyZWVzKHJhZGlhbnMpIHtcbiAgICBpZiAocmFkaWFucyA9PT0gbnVsbCB8fCByYWRpYW5zID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcigncmFkaWFucyBpcyByZXF1aXJlZCcpO1xuXG4gICAgdmFyIGRlZ3JlZXMgPSByYWRpYW5zICUgKDIgKiBNYXRoLlBJKTtcbiAgICByZXR1cm4gZGVncmVlcyAqIDE4MCAvIE1hdGguUEk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gYW5nbGUgaW4gZGVncmVlcyB0byByYWRpYW5zXG4gKlxuICogQG5hbWUgZGVncmVlczJyYWRpYW5zXG4gKiBAcGFyYW0ge251bWJlcn0gZGVncmVlcyBhbmdsZSBiZXR3ZWVuIDAgYW5kIDM2MCBkZWdyZWVzXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBhbmdsZSBpbiByYWRpYW5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWdyZWVzMnJhZGlhbnMoZGVncmVlcykge1xuICAgIGlmIChkZWdyZWVzID09PSBudWxsIHx8IGRlZ3JlZXMgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdkZWdyZWVzIGlzIHJlcXVpcmVkJyk7XG5cbiAgICB2YXIgcmFkaWFucyA9IGRlZ3JlZXMgJSAzNjA7XG4gICAgcmV0dXJuIHJhZGlhbnMgKiBNYXRoLlBJIC8gMTgwO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgZGlzdGFuY2UgdG8gdGhlIHJlcXVlc3RlZCB1bml0LlxuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywga2lsb21ldGVycywgY2VudGltZXRlcnMsIGZlZXRcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2UgdG8gYmUgY29udmVydGVkXG4gKiBAcGFyYW0ge3N0cmluZ30gb3JpZ2luYWxVbml0IG9mIHRoZSBkaXN0YW5jZVxuICogQHBhcmFtIHtzdHJpbmd9IFtmaW5hbFVuaXQ9J2tpbG9tZXRlcnMnXSByZXR1cm5lZCB1bml0XG4gKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgY29udmVydGVkIGRpc3RhbmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0RGlzdGFuY2UoZGlzdGFuY2UsIG9yaWdpbmFsVW5pdCwgZmluYWxVbml0KSB7XG4gICAgaWYgKGRpc3RhbmNlID09PSBudWxsIHx8IGRpc3RhbmNlID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignZGlzdGFuY2UgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIShkaXN0YW5jZSA+PSAwKSkgdGhyb3cgbmV3IEVycm9yKCdkaXN0YW5jZSBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG5cbiAgICB2YXIgY29udmVydGVkRGlzdGFuY2UgPSByYWRpYW5zVG9EaXN0YW5jZShkaXN0YW5jZVRvUmFkaWFucyhkaXN0YW5jZSwgb3JpZ2luYWxVbml0KSwgZmluYWxVbml0IHx8ICdraWxvbWV0ZXJzJyk7XG4gICAgcmV0dXJuIGNvbnZlcnRlZERpc3RhbmNlO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgYXJlYSB0byB0aGUgcmVxdWVzdGVkIHVuaXQuXG4gKiBWYWxpZCB1bml0czoga2lsb21ldGVycywga2lsb21ldHJlcywgbWV0ZXJzLCBtZXRyZXMsIGNlbnRpbWV0cmVzLCBtaWxsaW1ldGVyLCBhY3JlLCBtaWxlLCB5YXJkLCBmb290LCBpbmNoXG4gKiBAcGFyYW0ge251bWJlcn0gYXJlYSB0byBiZSBjb252ZXJ0ZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3JpZ2luYWxVbml0PSdtZXRlcnMnXSBvZiB0aGUgZGlzdGFuY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBbZmluYWxVbml0PSdraWxvbWV0ZXJzJ10gcmV0dXJuZWQgdW5pdFxuICogQHJldHVybnMge251bWJlcn0gdGhlIGNvbnZlcnRlZCBkaXN0YW5jZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udmVydEFyZWEoYXJlYSwgb3JpZ2luYWxVbml0LCBmaW5hbFVuaXQpIHtcbiAgICBpZiAoYXJlYSA9PT0gbnVsbCB8fCBhcmVhID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignYXJlYSBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghKGFyZWEgPj0gMCkpIHRocm93IG5ldyBFcnJvcignYXJlYSBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG5cbiAgICB2YXIgc3RhcnRGYWN0b3IgPSBhcmVhRmFjdG9yc1tvcmlnaW5hbFVuaXQgfHwgJ21ldGVycyddO1xuICAgIGlmICghc3RhcnRGYWN0b3IpIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBvcmlnaW5hbCB1bml0cycpO1xuXG4gICAgdmFyIGZpbmFsRmFjdG9yID0gYXJlYUZhY3RvcnNbZmluYWxVbml0IHx8ICdraWxvbWV0ZXJzJ107XG4gICAgaWYgKCFmaW5hbEZhY3RvcikgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGZpbmFsIHVuaXRzJyk7XG5cbiAgICByZXR1cm4gKGFyZWEgLyBzdGFydEZhY3RvcikgKiBmaW5hbEZhY3Rvcjtcbn1cblxuLyoqXG4gKiBpc051bWJlclxuICpcbiAqIEBwYXJhbSB7Kn0gbnVtIE51bWJlciB0byB2YWxpZGF0ZVxuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUvZmFsc2VcbiAqIEBleGFtcGxlXG4gKiB0dXJmLmlzTnVtYmVyKDEyMylcbiAqIC8vPXRydWVcbiAqIHR1cmYuaXNOdW1iZXIoJ2ZvbycpXG4gKiAvLz1mYWxzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXIobnVtKSB7XG4gICAgcmV0dXJuICFpc05hTihudW0pICYmIG51bSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShudW0pO1xufVxuXG4vKipcbiAqIGlzT2JqZWN0XG4gKlxuICogQHBhcmFtIHsqfSBpbnB1dCB2YXJpYWJsZSB0byB2YWxpZGF0ZVxuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUvZmFsc2VcbiAqIEBleGFtcGxlXG4gKiB0dXJmLmlzT2JqZWN0KHtlbGV2YXRpb246IDEwfSlcbiAqIC8vPXRydWVcbiAqIHR1cmYuaXNPYmplY3QoJ2ZvbycpXG4gKiAvLz1mYWxzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QoaW5wdXQpIHtcbiAgICByZXR1cm4gKCEhaW5wdXQpICYmIChpbnB1dC5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL0B0dXJmL2hlbHBlcnMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBpbnNpZGUgPSByZXF1aXJlKCdAdHVyZi9pbnNpZGUnKTtcbnZhciBmZWF0dXJlQ29sbGVjdGlvbiA9IHJlcXVpcmUoJ0B0dXJmL2hlbHBlcnMnKS5mZWF0dXJlQ29sbGVjdGlvbjtcblxuLyoqXG4gKiBUYWtlcyBhIHNldCBvZiB7QGxpbmsgUG9pbnR8cG9pbnRzfSBhbmQgYSBzZXQgb2Yge0BsaW5rIFBvbHlnb258cG9seWdvbnN9IGFuZCByZXR1cm5zIHRoZSBwb2ludHMgdGhhdCBmYWxsIHdpdGhpbiB0aGUgcG9seWdvbnMuXG4gKlxuICogQG5hbWUgd2l0aGluXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9uPFBvaW50Pn0gcG9pbnRzIGlucHV0IHBvaW50c1xuICogQHBhcmFtIHtGZWF0dXJlQ29sbGVjdGlvbjxQb2x5Z29uPn0gcG9seWdvbnMgaW5wdXQgcG9seWdvbnNcbiAqIEByZXR1cm5zIHtGZWF0dXJlQ29sbGVjdGlvbjxQb2ludD59IHBvaW50cyB0aGF0IGxhbmQgd2l0aGluIGF0IGxlYXN0IG9uZSBwb2x5Z29uXG4gKiBAZXhhbXBsZVxuICogdmFyIHNlYXJjaFdpdGhpbiA9IHR1cmYuZmVhdHVyZUNvbGxlY3Rpb24oW1xuICogICAgIHR1cmYucG9seWdvbihbW1xuICogICAgICAgICBbLTQ2LjY1MywtMjMuNTQzXSxcbiAqICAgICAgICAgWy00Ni42MzQsLTIzLjUzNDZdLFxuICogICAgICAgICBbLTQ2LjYxMywtMjMuNTQzXSxcbiAqICAgICAgICAgWy00Ni42MTQsLTIzLjU1OV0sXG4gKiAgICAgICAgIFstNDYuNjMxLC0yMy41NjddLFxuICogICAgICAgICBbLTQ2LjY1MywtMjMuNTYwXSxcbiAqICAgICAgICAgWy00Ni42NTMsLTIzLjU0M11cbiAqICAgICBdXSlcbiAqIF0pO1xuICogdmFyIHBvaW50cyA9IHR1cmYuZmVhdHVyZUNvbGxlY3Rpb24oW1xuICogICAgIHR1cmYucG9pbnQoWy00Ni42MzE4LCAtMjMuNTUyM10pLFxuICogICAgIHR1cmYucG9pbnQoWy00Ni42MjQ2LCAtMjMuNTMyNV0pLFxuICogICAgIHR1cmYucG9pbnQoWy00Ni42MDYyLCAtMjMuNTUxM10pLFxuICogICAgIHR1cmYucG9pbnQoWy00Ni42NjMsIC0yMy41NTRdKSxcbiAqICAgICB0dXJmLnBvaW50KFstNDYuNjQzLCAtMjMuNTU3XSlcbiAqIF0pO1xuICpcbiAqIHZhciBwdHNXaXRoaW4gPSB0dXJmLndpdGhpbihwb2ludHMsIHNlYXJjaFdpdGhpbik7XG4gKlxuICogLy9hZGRUb01hcFxuICogdmFyIGFkZFRvTWFwID0gW3BvaW50cywgc2VhcmNoV2l0aGluLCBwdHNXaXRoaW5dXG4gKiB0dXJmLmZlYXR1cmVFYWNoKHB0c1dpdGhpbiwgZnVuY3Rpb24gKGN1cnJlbnRGZWF0dXJlKSB7XG4gKiAgIGN1cnJlbnRGZWF0dXJlLnByb3BlcnRpZXNbJ21hcmtlci1zaXplJ10gPSAnbGFyZ2UnO1xuICogICBjdXJyZW50RmVhdHVyZS5wcm9wZXJ0aWVzWydtYXJrZXItY29sb3InXSA9ICcjMDAwJztcbiAqIH0pO1xuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwb2ludHMsIHBvbHlnb25zKSB7XG4gICAgdmFyIHBvaW50c1dpdGhpbiA9IGZlYXR1cmVDb2xsZWN0aW9uKFtdKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvbHlnb25zLmZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcG9pbnRzLmZlYXR1cmVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgaXNJbnNpZGUgPSBpbnNpZGUocG9pbnRzLmZlYXR1cmVzW2pdLCBwb2x5Z29ucy5mZWF0dXJlc1tpXSk7XG4gICAgICAgICAgICBpZiAoaXNJbnNpZGUpIHtcbiAgICAgICAgICAgICAgICBwb2ludHNXaXRoaW4uZmVhdHVyZXMucHVzaChwb2ludHMuZmVhdHVyZXNbal0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwb2ludHNXaXRoaW47XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvQHR1cmYvd2l0aGluL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnQHR1cmYvaW52YXJpYW50Jyk7XG52YXIgZ2V0Q29vcmQgPSBpbnZhcmlhbnQuZ2V0Q29vcmQ7XG52YXIgZ2V0Q29vcmRzID0gaW52YXJpYW50LmdldENvb3JkcztcblxuLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FdmVuJUUyJTgwJTkzb2RkX3J1bGVcbi8vIG1vZGlmaWVkIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9zdWJzdGFjay9wb2ludC1pbi1wb2x5Z29uL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG4vLyB3aGljaCB3YXMgbW9kaWZpZWQgZnJvbSBodHRwOi8vd3d3LmVjc2UucnBpLmVkdS9Ib21lcGFnZXMvd3JmL1Jlc2VhcmNoL1Nob3J0X05vdGVzL3BucG9seS5odG1sXG5cbi8qKlxuICogVGFrZXMgYSB7QGxpbmsgUG9pbnR9IGFuZCBhIHtAbGluayBQb2x5Z29ufSBvciB7QGxpbmsgTXVsdGlQb2x5Z29ufSBhbmQgZGV0ZXJtaW5lcyBpZiB0aGUgcG9pbnQgcmVzaWRlcyBpbnNpZGUgdGhlIHBvbHlnb24uIFRoZSBwb2x5Z29uIGNhblxuICogYmUgY29udmV4IG9yIGNvbmNhdmUuIFRoZSBmdW5jdGlvbiBhY2NvdW50cyBmb3IgaG9sZXMuXG4gKlxuICogQG5hbWUgaW5zaWRlXG4gKiBAcGFyYW0ge0ZlYXR1cmU8UG9pbnQ+fSBwb2ludCBpbnB1dCBwb2ludFxuICogQHBhcmFtIHtGZWF0dXJlPFBvbHlnb258TXVsdGlQb2x5Z29uPn0gcG9seWdvbiBpbnB1dCBwb2x5Z29uIG9yIG11bHRpcG9seWdvblxuICogQHBhcmFtIHtib29sZWFufSBbaWdub3JlQm91bmRhcnk9ZmFsc2VdIFRydWUgaWYgcG9seWdvbiBib3VuZGFyeSBzaG91bGQgYmUgaWdub3JlZCB3aGVuIGRldGVybWluaW5nIGlmIHRoZSBwb2ludCBpcyBpbnNpZGUgdGhlIHBvbHlnb24gb3RoZXJ3aXNlIGZhbHNlLlxuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgUG9pbnQgaXMgaW5zaWRlIHRoZSBQb2x5Z29uOyBgZmFsc2VgIGlmIHRoZSBQb2ludCBpcyBub3QgaW5zaWRlIHRoZSBQb2x5Z29uXG4gKiBAZXhhbXBsZVxuICogdmFyIHB0ID0gdHVyZi5wb2ludChbLTc3LCA0NF0pO1xuICogdmFyIHBvbHkgPSB0dXJmLnBvbHlnb24oW1tcbiAqICAgWy04MSwgNDFdLFxuICogICBbLTgxLCA0N10sXG4gKiAgIFstNzIsIDQ3XSxcbiAqICAgWy03MiwgNDFdLFxuICogICBbLTgxLCA0MV1cbiAqIF1dKTtcbiAqXG4gKiB0dXJmLmluc2lkZShwdCwgcG9seSk7XG4gKiAvLz0gdHJ1ZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwb2ludCwgcG9seWdvbiwgaWdub3JlQm91bmRhcnkpIHtcbiAgICAvLyB2YWxpZGF0aW9uXG4gICAgaWYgKCFwb2ludCkgdGhyb3cgbmV3IEVycm9yKCdwb2ludCBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghcG9seWdvbikgdGhyb3cgbmV3IEVycm9yKCdwb2x5Z29uIGlzIHJlcXVpcmVkJyk7XG5cbiAgICB2YXIgcHQgPSBnZXRDb29yZChwb2ludCk7XG4gICAgdmFyIHBvbHlzID0gZ2V0Q29vcmRzKHBvbHlnb24pO1xuICAgIHZhciB0eXBlID0gKHBvbHlnb24uZ2VvbWV0cnkpID8gcG9seWdvbi5nZW9tZXRyeS50eXBlIDogcG9seWdvbi50eXBlO1xuICAgIHZhciBiYm94ID0gcG9seWdvbi5iYm94O1xuXG4gICAgLy8gUXVpY2sgZWxpbWluYXRpb24gaWYgcG9pbnQgaXMgbm90IGluc2lkZSBiYm94XG4gICAgaWYgKGJib3ggJiYgaW5CQm94KHB0LCBiYm94KSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIG5vcm1hbGl6ZSB0byBtdWx0aXBvbHlnb25cbiAgICBpZiAodHlwZSA9PT0gJ1BvbHlnb24nKSBwb2x5cyA9IFtwb2x5c107XG5cbiAgICBmb3IgKHZhciBpID0gMCwgaW5zaWRlUG9seSA9IGZhbHNlOyBpIDwgcG9seXMubGVuZ3RoICYmICFpbnNpZGVQb2x5OyBpKyspIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgaXQgaXMgaW4gdGhlIG91dGVyIHJpbmcgZmlyc3RcbiAgICAgICAgaWYgKGluUmluZyhwdCwgcG9seXNbaV1bMF0sIGlnbm9yZUJvdW5kYXJ5KSkge1xuICAgICAgICAgICAgdmFyIGluSG9sZSA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGsgPSAxO1xuICAgICAgICAgICAgLy8gY2hlY2sgZm9yIHRoZSBwb2ludCBpbiBhbnkgb2YgdGhlIGhvbGVzXG4gICAgICAgICAgICB3aGlsZSAoayA8IHBvbHlzW2ldLmxlbmd0aCAmJiAhaW5Ib2xlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluUmluZyhwdCwgcG9seXNbaV1ba10sICFpZ25vcmVCb3VuZGFyeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5Ib2xlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpbkhvbGUpIGluc2lkZVBvbHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbnNpZGVQb2x5O1xufTtcblxuLyoqXG4gKiBpblJpbmdcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtbbnVtYmVyLCBudW1iZXJdfSBwdCBbeCx5XVxuICogQHBhcmFtIHtBcnJheTxbbnVtYmVyLCBudW1iZXJdPn0gcmluZyBbW3gseV0sIFt4LHldLC4uXVxuICogQHBhcmFtIHtib29sZWFufSBpZ25vcmVCb3VuZGFyeSBpZ25vcmVCb3VuZGFyeVxuICogQHJldHVybnMge2Jvb2xlYW59IGluUmluZ1xuICovXG5mdW5jdGlvbiBpblJpbmcocHQsIHJpbmcsIGlnbm9yZUJvdW5kYXJ5KSB7XG4gICAgdmFyIGlzSW5zaWRlID0gZmFsc2U7XG4gICAgaWYgKHJpbmdbMF1bMF0gPT09IHJpbmdbcmluZy5sZW5ndGggLSAxXVswXSAmJiByaW5nWzBdWzFdID09PSByaW5nW3JpbmcubGVuZ3RoIC0gMV1bMV0pIHJpbmcgPSByaW5nLnNsaWNlKDAsIHJpbmcubGVuZ3RoIC0gMSk7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgaiA9IHJpbmcubGVuZ3RoIC0gMTsgaSA8IHJpbmcubGVuZ3RoOyBqID0gaSsrKSB7XG4gICAgICAgIHZhciB4aSA9IHJpbmdbaV1bMF0sIHlpID0gcmluZ1tpXVsxXTtcbiAgICAgICAgdmFyIHhqID0gcmluZ1tqXVswXSwgeWogPSByaW5nW2pdWzFdO1xuICAgICAgICB2YXIgb25Cb3VuZGFyeSA9IChwdFsxXSAqICh4aSAtIHhqKSArIHlpICogKHhqIC0gcHRbMF0pICsgeWogKiAocHRbMF0gLSB4aSkgPT09IDApICYmXG4gICAgICAgICAgICAoKHhpIC0gcHRbMF0pICogKHhqIC0gcHRbMF0pIDw9IDApICYmICgoeWkgLSBwdFsxXSkgKiAoeWogLSBwdFsxXSkgPD0gMCk7XG4gICAgICAgIGlmIChvbkJvdW5kYXJ5KSByZXR1cm4gIWlnbm9yZUJvdW5kYXJ5O1xuICAgICAgICB2YXIgaW50ZXJzZWN0ID0gKCh5aSA+IHB0WzFdKSAhPT0gKHlqID4gcHRbMV0pKSAmJlxuICAgICAgICAocHRbMF0gPCAoeGogLSB4aSkgKiAocHRbMV0gLSB5aSkgLyAoeWogLSB5aSkgKyB4aSk7XG4gICAgICAgIGlmIChpbnRlcnNlY3QpIGlzSW5zaWRlID0gIWlzSW5zaWRlO1xuICAgIH1cbiAgICByZXR1cm4gaXNJbnNpZGU7XG59XG5cbi8qKlxuICogaW5CQm94XG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7W251bWJlciwgbnVtYmVyXX0gcHQgcG9pbnQgW3gseV1cbiAqIEBwYXJhbSB7W251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl19IGJib3ggQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUvZmFsc2UgaWYgcG9pbnQgaXMgaW5zaWRlIEJCb3hcbiAqL1xuZnVuY3Rpb24gaW5CQm94KHB0LCBiYm94KSB7XG4gICAgcmV0dXJuIGJib3hbMF0gPD0gcHRbMF0gJiZcbiAgICAgICAgICAgYmJveFsxXSA8PSBwdFsxXSAmJlxuICAgICAgICAgICBiYm94WzJdID49IHB0WzBdICYmXG4gICAgICAgICAgIGJib3hbM10gPj0gcHRbMV07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9AdHVyZi9pbnNpZGUvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogVW53cmFwIGEgY29vcmRpbmF0ZSBmcm9tIGEgUG9pbnQgRmVhdHVyZSwgR2VvbWV0cnkgb3IgYSBzaW5nbGUgY29vcmRpbmF0ZS5cbiAqXG4gKiBAbmFtZSBnZXRDb29yZFxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fEdlb21ldHJ5PFBvaW50PnxGZWF0dXJlPFBvaW50Pn0gb2JqIE9iamVjdFxuICogQHJldHVybnMge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzXG4gKiBAZXhhbXBsZVxuICogdmFyIHB0ID0gdHVyZi5wb2ludChbMTAsIDEwXSk7XG4gKlxuICogdmFyIGNvb3JkID0gdHVyZi5nZXRDb29yZChwdCk7XG4gKiAvLz0gWzEwLCAxMF1cbiAqL1xuZnVuY3Rpb24gZ2V0Q29vcmQob2JqKSB7XG4gICAgaWYgKCFvYmopIHRocm93IG5ldyBFcnJvcignb2JqIGlzIHJlcXVpcmVkJyk7XG5cbiAgICB2YXIgY29vcmRpbmF0ZXMgPSBnZXRDb29yZHMob2JqKTtcblxuICAgIC8vIGdldENvb3JkKCkgbXVzdCBjb250YWluIGF0IGxlYXN0IHR3byBudW1iZXJzIChQb2ludClcbiAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID4gMSAmJlxuICAgICAgICB0eXBlb2YgY29vcmRpbmF0ZXNbMF0gPT09ICdudW1iZXInICYmXG4gICAgICAgIHR5cGVvZiBjb29yZGluYXRlc1sxXSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIGNvb3JkaW5hdGVzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZSBpcyBub3QgYSB2YWxpZCBQb2ludCcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBVbndyYXAgY29vcmRpbmF0ZXMgZnJvbSBhIEZlYXR1cmUsIEdlb21ldHJ5IE9iamVjdCBvciBhbiBBcnJheSBvZiBudW1iZXJzXG4gKlxuICogQG5hbWUgZ2V0Q29vcmRzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj58R2VvbWV0cnl8RmVhdHVyZX0gb2JqIE9iamVjdFxuICogQHJldHVybnMge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvbHkgPSB0dXJmLnBvbHlnb24oW1tbMTE5LjMyLCAtOC43XSwgWzExOS41NSwgLTguNjldLCBbMTE5LjUxLCAtOC41NF0sIFsxMTkuMzIsIC04LjddXV0pO1xuICpcbiAqIHZhciBjb29yZCA9IHR1cmYuZ2V0Q29vcmRzKHBvbHkpO1xuICogLy89IFtbWzExOS4zMiwgLTguN10sIFsxMTkuNTUsIC04LjY5XSwgWzExOS41MSwgLTguNTRdLCBbMTE5LjMyLCAtOC43XV1dXG4gKi9cbmZ1bmN0aW9uIGdldENvb3JkcyhvYmopIHtcbiAgICBpZiAoIW9iaikgdGhyb3cgbmV3IEVycm9yKCdvYmogaXMgcmVxdWlyZWQnKTtcbiAgICB2YXIgY29vcmRpbmF0ZXM7XG5cbiAgICAvLyBBcnJheSBvZiBudW1iZXJzXG4gICAgaWYgKG9iai5sZW5ndGgpIHtcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBvYmo7XG5cbiAgICAvLyBHZW9tZXRyeSBPYmplY3RcbiAgICB9IGVsc2UgaWYgKG9iai5jb29yZGluYXRlcykge1xuICAgICAgICBjb29yZGluYXRlcyA9IG9iai5jb29yZGluYXRlcztcblxuICAgIC8vIEZlYXR1cmVcbiAgICB9IGVsc2UgaWYgKG9iai5nZW9tZXRyeSAmJiBvYmouZ2VvbWV0cnkuY29vcmRpbmF0ZXMpIHtcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBvYmouZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XG4gICAgfVxuICAgIC8vIENoZWNrcyBpZiBjb29yZGluYXRlcyBjb250YWlucyBhIG51bWJlclxuICAgIGlmIChjb29yZGluYXRlcykge1xuICAgICAgICBjb250YWluc051bWJlcihjb29yZGluYXRlcyk7XG4gICAgICAgIHJldHVybiBjb29yZGluYXRlcztcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyB2YWxpZCBjb29yZGluYXRlcycpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBjb29yZGluYXRlcyBjb250YWlucyBhIG51bWJlclxuICpcbiAqIEBuYW1lIGNvbnRhaW5zTnVtYmVyXG4gKiBAcGFyYW0ge0FycmF5PGFueT59IGNvb3JkaW5hdGVzIEdlb0pTT04gQ29vcmRpbmF0ZXNcbiAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIEFycmF5IGNvbnRhaW5zIGEgbnVtYmVyXG4gKi9cbmZ1bmN0aW9uIGNvbnRhaW5zTnVtYmVyKGNvb3JkaW5hdGVzKSB7XG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA+IDEgJiZcbiAgICAgICAgdHlwZW9mIGNvb3JkaW5hdGVzWzBdID09PSAnbnVtYmVyJyAmJlxuICAgICAgICB0eXBlb2YgY29vcmRpbmF0ZXNbMV0gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChBcnJheS5pc0FycmF5KGNvb3JkaW5hdGVzWzBdKSAmJiBjb29yZGluYXRlc1swXS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5zTnVtYmVyKGNvb3JkaW5hdGVzWzBdKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBtdXN0IG9ubHkgY29udGFpbiBudW1iZXJzJyk7XG59XG5cbi8qKlxuICogRW5mb3JjZSBleHBlY3RhdGlvbnMgYWJvdXQgdHlwZXMgb2YgR2VvSlNPTiBvYmplY3RzIGZvciBUdXJmLlxuICpcbiAqIEBuYW1lIGdlb2pzb25UeXBlXG4gKiBAcGFyYW0ge0dlb0pTT059IHZhbHVlIGFueSBHZW9KU09OIG9iamVjdFxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgZXhwZWN0ZWQgR2VvSlNPTiB0eXBlXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBuYW1lIG9mIGNhbGxpbmcgZnVuY3Rpb25cbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB2YWx1ZSBpcyBub3QgdGhlIGV4cGVjdGVkIHR5cGUuXG4gKi9cbmZ1bmN0aW9uIGdlb2pzb25UeXBlKHZhbHVlLCB0eXBlLCBuYW1lKSB7XG4gICAgaWYgKCF0eXBlIHx8ICFuYW1lKSB0aHJvdyBuZXcgRXJyb3IoJ3R5cGUgYW5kIG5hbWUgcmVxdWlyZWQnKTtcblxuICAgIGlmICghdmFsdWUgfHwgdmFsdWUudHlwZSAhPT0gdHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaW5wdXQgdG8gJyArIG5hbWUgKyAnOiBtdXN0IGJlIGEgJyArIHR5cGUgKyAnLCBnaXZlbiAnICsgdmFsdWUudHlwZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEVuZm9yY2UgZXhwZWN0YXRpb25zIGFib3V0IHR5cGVzIG9mIHtAbGluayBGZWF0dXJlfSBpbnB1dHMgZm9yIFR1cmYuXG4gKiBJbnRlcm5hbGx5IHRoaXMgdXNlcyB7QGxpbmsgZ2VvanNvblR5cGV9IHRvIGp1ZGdlIGdlb21ldHJ5IHR5cGVzLlxuICpcbiAqIEBuYW1lIGZlYXR1cmVPZlxuICogQHBhcmFtIHtGZWF0dXJlfSBmZWF0dXJlIGEgZmVhdHVyZSB3aXRoIGFuIGV4cGVjdGVkIGdlb21ldHJ5IHR5cGVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIGV4cGVjdGVkIEdlb0pTT04gdHlwZVxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgbmFtZSBvZiBjYWxsaW5nIGZ1bmN0aW9uXG4gKiBAdGhyb3dzIHtFcnJvcn0gZXJyb3IgaWYgdmFsdWUgaXMgbm90IHRoZSBleHBlY3RlZCB0eXBlLlxuICovXG5mdW5jdGlvbiBmZWF0dXJlT2YoZmVhdHVyZSwgdHlwZSwgbmFtZSkge1xuICAgIGlmICghZmVhdHVyZSkgdGhyb3cgbmV3IEVycm9yKCdObyBmZWF0dXJlIHBhc3NlZCcpO1xuICAgIGlmICghbmFtZSkgdGhyb3cgbmV3IEVycm9yKCcuZmVhdHVyZU9mKCkgcmVxdWlyZXMgYSBuYW1lJyk7XG4gICAgaWYgKCFmZWF0dXJlIHx8IGZlYXR1cmUudHlwZSAhPT0gJ0ZlYXR1cmUnIHx8ICFmZWF0dXJlLmdlb21ldHJ5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCB0byAnICsgbmFtZSArICcsIEZlYXR1cmUgd2l0aCBnZW9tZXRyeSByZXF1aXJlZCcpO1xuICAgIH1cbiAgICBpZiAoIWZlYXR1cmUuZ2VvbWV0cnkgfHwgZmVhdHVyZS5nZW9tZXRyeS50eXBlICE9PSB0eXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCB0byAnICsgbmFtZSArICc6IG11c3QgYmUgYSAnICsgdHlwZSArICcsIGdpdmVuICcgKyBmZWF0dXJlLmdlb21ldHJ5LnR5cGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbmZvcmNlIGV4cGVjdGF0aW9ucyBhYm91dCB0eXBlcyBvZiB7QGxpbmsgRmVhdHVyZUNvbGxlY3Rpb259IGlucHV0cyBmb3IgVHVyZi5cbiAqIEludGVybmFsbHkgdGhpcyB1c2VzIHtAbGluayBnZW9qc29uVHlwZX0gdG8ganVkZ2UgZ2VvbWV0cnkgdHlwZXMuXG4gKlxuICogQG5hbWUgY29sbGVjdGlvbk9mXG4gKiBAcGFyYW0ge0ZlYXR1cmVDb2xsZWN0aW9ufSBmZWF0dXJlQ29sbGVjdGlvbiBhIEZlYXR1cmVDb2xsZWN0aW9uIGZvciB3aGljaCBmZWF0dXJlcyB3aWxsIGJlIGp1ZGdlZFxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgZXhwZWN0ZWQgR2VvSlNPTiB0eXBlXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBuYW1lIG9mIGNhbGxpbmcgZnVuY3Rpb25cbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB2YWx1ZSBpcyBub3QgdGhlIGV4cGVjdGVkIHR5cGUuXG4gKi9cbmZ1bmN0aW9uIGNvbGxlY3Rpb25PZihmZWF0dXJlQ29sbGVjdGlvbiwgdHlwZSwgbmFtZSkge1xuICAgIGlmICghZmVhdHVyZUNvbGxlY3Rpb24pIHRocm93IG5ldyBFcnJvcignTm8gZmVhdHVyZUNvbGxlY3Rpb24gcGFzc2VkJyk7XG4gICAgaWYgKCFuYW1lKSB0aHJvdyBuZXcgRXJyb3IoJy5jb2xsZWN0aW9uT2YoKSByZXF1aXJlcyBhIG5hbWUnKTtcbiAgICBpZiAoIWZlYXR1cmVDb2xsZWN0aW9uIHx8IGZlYXR1cmVDb2xsZWN0aW9uLnR5cGUgIT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0IHRvICcgKyBuYW1lICsgJywgRmVhdHVyZUNvbGxlY3Rpb24gcmVxdWlyZWQnKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmZWF0dXJlQ29sbGVjdGlvbi5mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZmVhdHVyZSA9IGZlYXR1cmVDb2xsZWN0aW9uLmZlYXR1cmVzW2ldO1xuICAgICAgICBpZiAoIWZlYXR1cmUgfHwgZmVhdHVyZS50eXBlICE9PSAnRmVhdHVyZScgfHwgIWZlYXR1cmUuZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCB0byAnICsgbmFtZSArICcsIEZlYXR1cmUgd2l0aCBnZW9tZXRyeSByZXF1aXJlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZmVhdHVyZS5nZW9tZXRyeSB8fCBmZWF0dXJlLmdlb21ldHJ5LnR5cGUgIT09IHR5cGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCB0byAnICsgbmFtZSArICc6IG11c3QgYmUgYSAnICsgdHlwZSArICcsIGdpdmVuICcgKyBmZWF0dXJlLmdlb21ldHJ5LnR5cGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEdldCBHZW9tZXRyeSBmcm9tIEZlYXR1cmUgb3IgR2VvbWV0cnkgT2JqZWN0XG4gKlxuICogQHBhcmFtIHtGZWF0dXJlfEdlb21ldHJ5fSBnZW9qc29uIEdlb0pTT04gRmVhdHVyZSBvciBHZW9tZXRyeSBPYmplY3RcbiAqIEByZXR1cm5zIHtHZW9tZXRyeXxudWxsfSBHZW9KU09OIEdlb21ldHJ5IE9iamVjdFxuICogQHRocm93cyB7RXJyb3J9IGlmIGdlb2pzb24gaXMgbm90IGEgRmVhdHVyZSBvciBHZW9tZXRyeSBPYmplY3RcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9pbnQgPSB7XG4gKiAgIFwidHlwZVwiOiBcIkZlYXR1cmVcIixcbiAqICAgXCJwcm9wZXJ0aWVzXCI6IHt9LFxuICogICBcImdlb21ldHJ5XCI6IHtcbiAqICAgICBcInR5cGVcIjogXCJQb2ludFwiLFxuICogICAgIFwiY29vcmRpbmF0ZXNcIjogWzExMCwgNDBdXG4gKiAgIH1cbiAqIH1cbiAqIHZhciBnZW9tID0gdHVyZi5nZXRHZW9tKHBvaW50KVxuICogLy89e1widHlwZVwiOiBcIlBvaW50XCIsIFwiY29vcmRpbmF0ZXNcIjogWzExMCwgNDBdfVxuICovXG5mdW5jdGlvbiBnZXRHZW9tKGdlb2pzb24pIHtcbiAgICBpZiAoIWdlb2pzb24pIHRocm93IG5ldyBFcnJvcignZ2VvanNvbiBpcyByZXF1aXJlZCcpO1xuICAgIGlmIChnZW9qc29uLmdlb21ldHJ5ICE9PSB1bmRlZmluZWQpIHJldHVybiBnZW9qc29uLmdlb21ldHJ5O1xuICAgIGlmIChnZW9qc29uLmNvb3JkaW5hdGVzIHx8IGdlb2pzb24uZ2VvbWV0cmllcykgcmV0dXJuIGdlb2pzb247XG4gICAgdGhyb3cgbmV3IEVycm9yKCdnZW9qc29uIG11c3QgYmUgYSB2YWxpZCBGZWF0dXJlIG9yIEdlb21ldHJ5IE9iamVjdCcpO1xufVxuXG4vKipcbiAqIEdldCBHZW9tZXRyeSBUeXBlIGZyb20gRmVhdHVyZSBvciBHZW9tZXRyeSBPYmplY3RcbiAqXG4gKiBAcGFyYW0ge0ZlYXR1cmV8R2VvbWV0cnl9IGdlb2pzb24gR2VvSlNPTiBGZWF0dXJlIG9yIEdlb21ldHJ5IE9iamVjdFxuICogQHJldHVybnMge3N0cmluZ30gR2VvSlNPTiBHZW9tZXRyeSBUeXBlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgZ2VvanNvbiBpcyBub3QgYSBGZWF0dXJlIG9yIEdlb21ldHJ5IE9iamVjdFxuICogQGV4YW1wbGVcbiAqIHZhciBwb2ludCA9IHtcbiAqICAgXCJ0eXBlXCI6IFwiRmVhdHVyZVwiLFxuICogICBcInByb3BlcnRpZXNcIjoge30sXG4gKiAgIFwiZ2VvbWV0cnlcIjoge1xuICogICAgIFwidHlwZVwiOiBcIlBvaW50XCIsXG4gKiAgICAgXCJjb29yZGluYXRlc1wiOiBbMTEwLCA0MF1cbiAqICAgfVxuICogfVxuICogdmFyIGdlb20gPSB0dXJmLmdldEdlb21UeXBlKHBvaW50KVxuICogLy89XCJQb2ludFwiXG4gKi9cbmZ1bmN0aW9uIGdldEdlb21UeXBlKGdlb2pzb24pIHtcbiAgICBpZiAoIWdlb2pzb24pIHRocm93IG5ldyBFcnJvcignZ2VvanNvbiBpcyByZXF1aXJlZCcpO1xuICAgIHZhciBnZW9tID0gZ2V0R2VvbShnZW9qc29uKTtcbiAgICBpZiAoZ2VvbSkgcmV0dXJuIGdlb20udHlwZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgZ2VvanNvblR5cGU6IGdlb2pzb25UeXBlLFxuICAgIGNvbGxlY3Rpb25PZjogY29sbGVjdGlvbk9mLFxuICAgIGZlYXR1cmVPZjogZmVhdHVyZU9mLFxuICAgIGdldENvb3JkOiBnZXRDb29yZCxcbiAgICBnZXRDb29yZHM6IGdldENvb3JkcyxcbiAgICBjb250YWluc051bWJlcjogY29udGFpbnNOdW1iZXIsXG4gICAgZ2V0R2VvbTogZ2V0R2VvbSxcbiAgICBnZXRHZW9tVHlwZTogZ2V0R2VvbVR5cGVcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9AdHVyZi9pbnNpZGUvbm9kZV9tb2R1bGVzL0B0dXJmL2ludmFyaWFudC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMzlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBXcmFwcyBhIEdlb0pTT04ge0BsaW5rIEdlb21ldHJ5fSBpbiBhIEdlb0pTT04ge0BsaW5rIEZlYXR1cmV9LlxuICpcbiAqIEBuYW1lIGZlYXR1cmVcbiAqIEBwYXJhbSB7R2VvbWV0cnl9IGdlb21ldHJ5IGlucHV0IGdlb21ldHJ5XG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZX0gYSBHZW9KU09OIEZlYXR1cmVcbiAqIEBleGFtcGxlXG4gKiB2YXIgZ2VvbWV0cnkgPSB7XG4gKiAgIFwidHlwZVwiOiBcIlBvaW50XCIsXG4gKiAgIFwiY29vcmRpbmF0ZXNcIjogWzExMCwgNTBdXG4gKiB9O1xuICpcbiAqIHZhciBmZWF0dXJlID0gdHVyZi5mZWF0dXJlKGdlb21ldHJ5KTtcbiAqXG4gKiAvLz1mZWF0dXJlXG4gKi9cbmZ1bmN0aW9uIGZlYXR1cmUoZ2VvbWV0cnksIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKGdlb21ldHJ5ID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignZ2VvbWV0cnkgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAocHJvcGVydGllcyAmJiBwcm9wZXJ0aWVzLmNvbnN0cnVjdG9yICE9PSBPYmplY3QpIHRocm93IG5ldyBFcnJvcigncHJvcGVydGllcyBtdXN0IGJlIGFuIE9iamVjdCcpO1xuICAgIGlmIChiYm94ICYmIGJib3gubGVuZ3RoICE9PSA0KSB0aHJvdyBuZXcgRXJyb3IoJ2Jib3ggbXVzdCBiZSBhbiBBcnJheSBvZiA0IG51bWJlcnMnKTtcbiAgICBpZiAoaWQgJiYgWydzdHJpbmcnLCAnbnVtYmVyJ10uaW5kZXhPZih0eXBlb2YgaWQpID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKCdpZCBtdXN0IGJlIGEgbnVtYmVyIG9yIGEgc3RyaW5nJyk7XG5cbiAgICB2YXIgZmVhdCA9IHt0eXBlOiAnRmVhdHVyZSd9O1xuICAgIGlmIChpZCkgZmVhdC5pZCA9IGlkO1xuICAgIGlmIChiYm94KSBmZWF0LmJib3ggPSBiYm94O1xuICAgIGZlYXQucHJvcGVydGllcyA9IHByb3BlcnRpZXMgfHwge307XG4gICAgZmVhdC5nZW9tZXRyeSA9IGdlb21ldHJ5O1xuICAgIHJldHVybiBmZWF0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBHZW9KU09OIHtAbGluayBHZW9tZXRyeX0gZnJvbSBhIEdlb21ldHJ5IHN0cmluZyB0eXBlICYgY29vcmRpbmF0ZXMuXG4gKiBGb3IgR2VvbWV0cnlDb2xsZWN0aW9uIHR5cGUgdXNlIGBoZWxwZXJzLmdlb21ldHJ5Q29sbGVjdGlvbmBcbiAqXG4gKiBAbmFtZSBnZW9tZXRyeVxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgR2VvbWV0cnkgVHlwZVxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlcyBDb29yZGluYXRlc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHJldHVybnMge0dlb21ldHJ5fSBhIEdlb0pTT04gR2VvbWV0cnlcbiAqIEBleGFtcGxlXG4gKiB2YXIgdHlwZSA9ICdQb2ludCc7XG4gKiB2YXIgY29vcmRpbmF0ZXMgPSBbMTEwLCA1MF07XG4gKlxuICogdmFyIGdlb21ldHJ5ID0gdHVyZi5nZW9tZXRyeSh0eXBlLCBjb29yZGluYXRlcyk7XG4gKlxuICogLy89Z2VvbWV0cnlcbiAqL1xuZnVuY3Rpb24gZ2VvbWV0cnkodHlwZSwgY29vcmRpbmF0ZXMsIGJib3gpIHtcbiAgICAvLyBWYWxpZGF0aW9uXG4gICAgaWYgKCF0eXBlKSB0aHJvdyBuZXcgRXJyb3IoJ3R5cGUgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ2Nvb3JkaW5hdGVzIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGNvb3JkaW5hdGVzKSkgdGhyb3cgbmV3IEVycm9yKCdjb29yZGluYXRlcyBtdXN0IGJlIGFuIEFycmF5Jyk7XG4gICAgaWYgKGJib3ggJiYgYmJveC5sZW5ndGggIT09IDQpIHRocm93IG5ldyBFcnJvcignYmJveCBtdXN0IGJlIGFuIEFycmF5IG9mIDQgbnVtYmVycycpO1xuXG4gICAgdmFyIGdlb207XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnUG9pbnQnOiBnZW9tID0gcG9pbnQoY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBjYXNlICdMaW5lU3RyaW5nJzogZ2VvbSA9IGxpbmVTdHJpbmcoY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBjYXNlICdQb2x5Z29uJzogZ2VvbSA9IHBvbHlnb24oY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBjYXNlICdNdWx0aVBvaW50JzogZ2VvbSA9IG11bHRpUG9pbnQoY29vcmRpbmF0ZXMpLmdlb21ldHJ5OyBicmVhaztcbiAgICBjYXNlICdNdWx0aUxpbmVTdHJpbmcnOiBnZW9tID0gbXVsdGlMaW5lU3RyaW5nKGNvb3JkaW5hdGVzKS5nZW9tZXRyeTsgYnJlYWs7XG4gICAgY2FzZSAnTXVsdGlQb2x5Z29uJzogZ2VvbSA9IG11bHRpUG9seWdvbihjb29yZGluYXRlcykuZ2VvbWV0cnk7IGJyZWFrO1xuICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcih0eXBlICsgJyBpcyBpbnZhbGlkJyk7XG4gICAgfVxuICAgIGlmIChiYm94KSBnZW9tLmJib3ggPSBiYm94O1xuICAgIHJldHVybiBnZW9tO1xufVxuXG4vKipcbiAqIFRha2VzIGNvb3JkaW5hdGVzIGFuZCBwcm9wZXJ0aWVzIChvcHRpb25hbCkgYW5kIHJldHVybnMgYSBuZXcge0BsaW5rIFBvaW50fSBmZWF0dXJlLlxuICpcbiAqIEBuYW1lIHBvaW50XG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzIGxvbmdpdHVkZSwgbGF0aXR1ZGUgcG9zaXRpb24gKGVhY2ggaW4gZGVjaW1hbCBkZWdyZWVzKVxuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8UG9pbnQ+fSBhIFBvaW50IGZlYXR1cmVcbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9pbnQgPSB0dXJmLnBvaW50KFstNzUuMzQzLCAzOS45ODRdKTtcbiAqXG4gKiAvLz1wb2ludFxuICovXG5mdW5jdGlvbiBwb2ludChjb29yZGluYXRlcywgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvb3JkaW5hdGVzIHBhc3NlZCcpO1xuICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdDb29yZGluYXRlcyBtdXN0IGJlIGFuIGFycmF5Jyk7XG4gICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA8IDIpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBiZSBhdCBsZWFzdCAyIG51bWJlcnMgbG9uZycpO1xuICAgIGlmICghaXNOdW1iZXIoY29vcmRpbmF0ZXNbMF0pIHx8ICFpc051bWJlcihjb29yZGluYXRlc1sxXSkpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBjb250YWluIG51bWJlcnMnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ1BvaW50JyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIFRha2VzIGFuIGFycmF5IG9mIExpbmVhclJpbmdzIGFuZCBvcHRpb25hbGx5IGFuIHtAbGluayBPYmplY3R9IHdpdGggcHJvcGVydGllcyBhbmQgcmV0dXJucyBhIHtAbGluayBQb2x5Z29ufSBmZWF0dXJlLlxuICpcbiAqIEBuYW1lIHBvbHlnb25cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8bnVtYmVyPj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBMaW5lYXJSaW5nc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8UG9seWdvbj59IGEgUG9seWdvbiBmZWF0dXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gdGhyb3cgYW4gZXJyb3IgaWYgYSBMaW5lYXJSaW5nIG9mIHRoZSBwb2x5Z29uIGhhcyB0b28gZmV3IHBvc2l0aW9uc1xuICogb3IgaWYgYSBMaW5lYXJSaW5nIG9mIHRoZSBQb2x5Z29uIGRvZXMgbm90IGhhdmUgbWF0Y2hpbmcgUG9zaXRpb25zIGF0IHRoZSBiZWdpbm5pbmcgJiBlbmQuXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvbHlnb24gPSB0dXJmLnBvbHlnb24oW1tcbiAqICAgWy0yLjI3NTU0MywgNTMuNDY0NTQ3XSxcbiAqICAgWy0yLjI3NTU0MywgNTMuNDg5MjcxXSxcbiAqICAgWy0yLjIxNTExOCwgNTMuNDg5MjcxXSxcbiAqICAgWy0yLjIxNTExOCwgNTMuNDY0NTQ3XSxcbiAqICAgWy0yLjI3NTU0MywgNTMuNDY0NTQ3XVxuICogXV0sIHsgbmFtZTogJ3BvbHkxJywgcG9wdWxhdGlvbjogNDAwfSk7XG4gKlxuICogLy89cG9seWdvblxuICovXG5mdW5jdGlvbiBwb2x5Z29uKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByaW5nID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgIGlmIChyaW5nLmxlbmd0aCA8IDQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRWFjaCBMaW5lYXJSaW5nIG9mIGEgUG9seWdvbiBtdXN0IGhhdmUgNCBvciBtb3JlIFBvc2l0aW9ucy4nKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJpbmdbcmluZy5sZW5ndGggLSAxXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZmlyc3QgcG9pbnQgb2YgUG9seWdvbiBjb250YWlucyB0d28gbnVtYmVyc1xuICAgICAgICAgICAgaWYgKGkgPT09IDAgJiYgaiA9PT0gMCAmJiAhaXNOdW1iZXIocmluZ1swXVswXSkgfHwgIWlzTnVtYmVyKHJpbmdbMF1bMV0pKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgY29udGFpbiBudW1iZXJzJyk7XG4gICAgICAgICAgICBpZiAocmluZ1tyaW5nLmxlbmd0aCAtIDFdW2pdICE9PSByaW5nWzBdW2pdKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJzdCBhbmQgbGFzdCBQb3NpdGlvbiBhcmUgbm90IGVxdWl2YWxlbnQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdQb2x5Z29uJyxcbiAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgTGluZVN0cmluZ30gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBsaW5lU3RyaW5nXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBQb3NpdGlvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPExpbmVTdHJpbmc+fSBhIExpbmVTdHJpbmcgZmVhdHVyZVxuICogQHRocm93cyB7RXJyb3J9IGlmIG5vIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWRcbiAqIEBleGFtcGxlXG4gKiB2YXIgbGluZXN0cmluZzEgPSB0dXJmLmxpbmVTdHJpbmcoW1xuICogICBbLTIxLjk2NDQxNiwgNjQuMTQ4MjAzXSxcbiAqICAgWy0yMS45NTYxNzYsIDY0LjE0MTMxNl0sXG4gKiAgIFstMjEuOTM5MDEsIDY0LjEzNTkyNF0sXG4gKiAgIFstMjEuOTI3MzM3LCA2NC4xMzY2NzNdXG4gKiBdKTtcbiAqIHZhciBsaW5lc3RyaW5nMiA9IHR1cmYubGluZVN0cmluZyhbXG4gKiAgIFstMjEuOTI5MDU0LCA2NC4xMjc5ODVdLFxuICogICBbLTIxLjkxMjkxOCwgNjQuMTM0NzI2XSxcbiAqICAgWy0yMS45MTYwMDcsIDY0LjE0MTAxNl0sXG4gKiAgIFstMjEuOTMwMDg0LCA2NC4xNDQ0Nl1cbiAqIF0sIHtuYW1lOiAnbGluZSAxJywgZGlzdGFuY2U6IDE0NX0pO1xuICpcbiAqIC8vPWxpbmVzdHJpbmcxXG4gKlxuICogLy89bGluZXN0cmluZzJcbiAqL1xuZnVuY3Rpb24gbGluZVN0cmluZyhjb29yZGluYXRlcywgcHJvcGVydGllcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvb3JkaW5hdGVzIHBhc3NlZCcpO1xuICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPCAyKSB0aHJvdyBuZXcgRXJyb3IoJ0Nvb3JkaW5hdGVzIG11c3QgYmUgYW4gYXJyYXkgb2YgdHdvIG9yIG1vcmUgcG9zaXRpb25zJyk7XG4gICAgLy8gQ2hlY2sgaWYgZmlyc3QgcG9pbnQgb2YgTGluZVN0cmluZyBjb250YWlucyB0d28gbnVtYmVyc1xuICAgIGlmICghaXNOdW1iZXIoY29vcmRpbmF0ZXNbMF1bMV0pIHx8ICFpc051bWJlcihjb29yZGluYXRlc1swXVsxXSkpIHRocm93IG5ldyBFcnJvcignQ29vcmRpbmF0ZXMgbXVzdCBjb250YWluIG51bWJlcnMnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ0xpbmVTdHJpbmcnLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8qKlxuICogVGFrZXMgb25lIG9yIG1vcmUge0BsaW5rIEZlYXR1cmV8RmVhdHVyZXN9IGFuZCBjcmVhdGVzIGEge0BsaW5rIEZlYXR1cmVDb2xsZWN0aW9ufS5cbiAqXG4gKiBAbmFtZSBmZWF0dXJlQ29sbGVjdGlvblxuICogQHBhcmFtIHtGZWF0dXJlW119IGZlYXR1cmVzIGlucHV0IGZlYXR1cmVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmVDb2xsZWN0aW9ufSBhIEZlYXR1cmVDb2xsZWN0aW9uIG9mIGlucHV0IGZlYXR1cmVzXG4gKiBAZXhhbXBsZVxuICogdmFyIGZlYXR1cmVzID0gW1xuICogIHR1cmYucG9pbnQoWy03NS4zNDMsIDM5Ljk4NF0sIHtuYW1lOiAnTG9jYXRpb24gQSd9KSxcbiAqICB0dXJmLnBvaW50KFstNzUuODMzLCAzOS4yODRdLCB7bmFtZTogJ0xvY2F0aW9uIEInfSksXG4gKiAgdHVyZi5wb2ludChbLTc1LjUzNCwgMzkuMTIzXSwge25hbWU6ICdMb2NhdGlvbiBDJ30pXG4gKiBdO1xuICpcbiAqIHZhciBjb2xsZWN0aW9uID0gdHVyZi5mZWF0dXJlQ29sbGVjdGlvbihmZWF0dXJlcyk7XG4gKlxuICogLy89Y29sbGVjdGlvblxuICovXG5mdW5jdGlvbiBmZWF0dXJlQ29sbGVjdGlvbihmZWF0dXJlcywgYmJveCwgaWQpIHtcbiAgICBpZiAoIWZlYXR1cmVzKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGZlYXR1cmVzIHBhc3NlZCcpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShmZWF0dXJlcykpIHRocm93IG5ldyBFcnJvcignZmVhdHVyZXMgbXVzdCBiZSBhbiBBcnJheScpO1xuICAgIGlmIChiYm94ICYmIGJib3gubGVuZ3RoICE9PSA0KSB0aHJvdyBuZXcgRXJyb3IoJ2Jib3ggbXVzdCBiZSBhbiBBcnJheSBvZiA0IG51bWJlcnMnKTtcbiAgICBpZiAoaWQgJiYgWydzdHJpbmcnLCAnbnVtYmVyJ10uaW5kZXhPZih0eXBlb2YgaWQpID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKCdpZCBtdXN0IGJlIGEgbnVtYmVyIG9yIGEgc3RyaW5nJyk7XG5cbiAgICB2YXIgZmMgPSB7dHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJ307XG4gICAgaWYgKGlkKSBmYy5pZCA9IGlkO1xuICAgIGlmIChiYm94KSBmYy5iYm94ID0gYmJveDtcbiAgICBmYy5mZWF0dXJlcyA9IGZlYXR1cmVzO1xuICAgIHJldHVybiBmYztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8TXVsdGlMaW5lU3RyaW5nPn0gYmFzZWQgb24gYVxuICogY29vcmRpbmF0ZSBhcnJheS4gUHJvcGVydGllcyBjYW4gYmUgYWRkZWQgb3B0aW9uYWxseS5cbiAqXG4gKiBAbmFtZSBtdWx0aUxpbmVTdHJpbmdcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8bnVtYmVyPj4+fSBjb29yZGluYXRlcyBhbiBhcnJheSBvZiBMaW5lU3RyaW5nc1xuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzPXt9XSBhbiBPYmplY3Qgb2Yga2V5LXZhbHVlIHBhaXJzIHRvIGFkZCBhcyBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtiYm94XSBCQm94IFt3ZXN0LCBzb3V0aCwgZWFzdCwgbm9ydGhdXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IFtpZF0gSWRlbnRpZmllclxuICogQHJldHVybnMge0ZlYXR1cmU8TXVsdGlMaW5lU3RyaW5nPn0gYSBNdWx0aUxpbmVTdHJpbmcgZmVhdHVyZVxuICogQHRocm93cyB7RXJyb3J9IGlmIG5vIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWRcbiAqIEBleGFtcGxlXG4gKiB2YXIgbXVsdGlMaW5lID0gdHVyZi5tdWx0aUxpbmVTdHJpbmcoW1tbMCwwXSxbMTAsMTBdXV0pO1xuICpcbiAqIC8vPW11bHRpTGluZVxuICovXG5mdW5jdGlvbiBtdWx0aUxpbmVTdHJpbmcoY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ011bHRpTGluZVN0cmluZycsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xuICAgIH0sIHByb3BlcnRpZXMsIGJib3gsIGlkKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIEZlYXR1cmU8TXVsdGlQb2ludD59IGJhc2VkIG9uIGFcbiAqIGNvb3JkaW5hdGUgYXJyYXkuIFByb3BlcnRpZXMgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHkuXG4gKlxuICogQG5hbWUgbXVsdGlQb2ludFxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gY29vcmRpbmF0ZXMgYW4gYXJyYXkgb2YgUG9zaXRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxNdWx0aVBvaW50Pn0gYSBNdWx0aVBvaW50IGZlYXR1cmVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBubyBjb29yZGluYXRlcyBhcmUgcGFzc2VkXG4gKiBAZXhhbXBsZVxuICogdmFyIG11bHRpUHQgPSB0dXJmLm11bHRpUG9pbnQoW1swLDBdLFsxMCwxMF1dKTtcbiAqXG4gKiAvLz1tdWx0aVB0XG4gKi9cbmZ1bmN0aW9uIG11bHRpUG9pbnQoY29vcmRpbmF0ZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFjb29yZGluYXRlcykgdGhyb3cgbmV3IEVycm9yKCdObyBjb29yZGluYXRlcyBwYXNzZWQnKTtcblxuICAgIHJldHVybiBmZWF0dXJlKHtcbiAgICAgICAgdHlwZTogJ011bHRpUG9pbnQnLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBGZWF0dXJlPE11bHRpUG9seWdvbj59IGJhc2VkIG9uIGFcbiAqIGNvb3JkaW5hdGUgYXJyYXkuIFByb3BlcnRpZXMgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHkuXG4gKlxuICogQG5hbWUgbXVsdGlQb2x5Z29uXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PEFycmF5PEFycmF5PG51bWJlcj4+Pj59IGNvb3JkaW5hdGVzIGFuIGFycmF5IG9mIFBvbHlnb25zXG4gKiBAcGFyYW0ge09iamVjdH0gW3Byb3BlcnRpZXM9e31dIGFuIE9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMgdG8gYWRkIGFzIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Jib3hdIEJCb3ggW3dlc3QsIHNvdXRoLCBlYXN0LCBub3J0aF1cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gW2lkXSBJZGVudGlmaWVyXG4gKiBAcmV0dXJucyB7RmVhdHVyZTxNdWx0aVBvbHlnb24+fSBhIG11bHRpcG9seWdvbiBmZWF0dXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgbm8gY29vcmRpbmF0ZXMgYXJlIHBhc3NlZFxuICogQGV4YW1wbGVcbiAqIHZhciBtdWx0aVBvbHkgPSB0dXJmLm11bHRpUG9seWdvbihbW1tbMCwwXSxbMCwxMF0sWzEwLDEwXSxbMTAsMF0sWzAsMF1dXV0pO1xuICpcbiAqIC8vPW11bHRpUG9seVxuICpcbiAqL1xuZnVuY3Rpb24gbXVsdGlQb2x5Z29uKGNvb3JkaW5hdGVzLCBwcm9wZXJ0aWVzLCBiYm94LCBpZCkge1xuICAgIGlmICghY29vcmRpbmF0ZXMpIHRocm93IG5ldyBFcnJvcignTm8gY29vcmRpbmF0ZXMgcGFzc2VkJyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdNdWx0aVBvbHlnb24nLFxuICAgICAgICBjb29yZGluYXRlczogY29vcmRpbmF0ZXNcbiAgICB9LCBwcm9wZXJ0aWVzLCBiYm94LCBpZCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBGZWF0dXJlPEdlb21ldHJ5Q29sbGVjdGlvbj59IGJhc2VkIG9uIGFcbiAqIGNvb3JkaW5hdGUgYXJyYXkuIFByb3BlcnRpZXMgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHkuXG4gKlxuICogQG5hbWUgZ2VvbWV0cnlDb2xsZWN0aW9uXG4gKiBAcGFyYW0ge0FycmF5PEdlb21ldHJ5Pn0gZ2VvbWV0cmllcyBhbiBhcnJheSBvZiBHZW9KU09OIEdlb21ldHJpZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllcz17fV0gYW4gT2JqZWN0IG9mIGtleS12YWx1ZSBwYWlycyB0byBhZGQgYXMgcHJvcGVydGllc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbYmJveF0gQkJveCBbd2VzdCwgc291dGgsIGVhc3QsIG5vcnRoXVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBbaWRdIElkZW50aWZpZXJcbiAqIEByZXR1cm5zIHtGZWF0dXJlPEdlb21ldHJ5Q29sbGVjdGlvbj59IGEgR2VvSlNPTiBHZW9tZXRyeUNvbGxlY3Rpb24gRmVhdHVyZVxuICogQGV4YW1wbGVcbiAqIHZhciBwdCA9IHtcbiAqICAgICBcInR5cGVcIjogXCJQb2ludFwiLFxuICogICAgICAgXCJjb29yZGluYXRlc1wiOiBbMTAwLCAwXVxuICogICAgIH07XG4gKiB2YXIgbGluZSA9IHtcbiAqICAgICBcInR5cGVcIjogXCJMaW5lU3RyaW5nXCIsXG4gKiAgICAgXCJjb29yZGluYXRlc1wiOiBbIFsxMDEsIDBdLCBbMTAyLCAxXSBdXG4gKiAgIH07XG4gKiB2YXIgY29sbGVjdGlvbiA9IHR1cmYuZ2VvbWV0cnlDb2xsZWN0aW9uKFtwdCwgbGluZV0pO1xuICpcbiAqIC8vPWNvbGxlY3Rpb25cbiAqL1xuZnVuY3Rpb24gZ2VvbWV0cnlDb2xsZWN0aW9uKGdlb21ldHJpZXMsIHByb3BlcnRpZXMsIGJib3gsIGlkKSB7XG4gICAgaWYgKCFnZW9tZXRyaWVzKSB0aHJvdyBuZXcgRXJyb3IoJ2dlb21ldHJpZXMgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZ2VvbWV0cmllcykpIHRocm93IG5ldyBFcnJvcignZ2VvbWV0cmllcyBtdXN0IGJlIGFuIEFycmF5Jyk7XG5cbiAgICByZXR1cm4gZmVhdHVyZSh7XG4gICAgICAgIHR5cGU6ICdHZW9tZXRyeUNvbGxlY3Rpb24nLFxuICAgICAgICBnZW9tZXRyaWVzOiBnZW9tZXRyaWVzXG4gICAgfSwgcHJvcGVydGllcywgYmJveCwgaWQpO1xufVxuXG4vLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9HcmVhdC1jaXJjbGVfZGlzdGFuY2UjUmFkaXVzX2Zvcl9zcGhlcmljYWxfRWFydGhcbnZhciBmYWN0b3JzID0ge1xuICAgIG1pbGVzOiAzOTYwLFxuICAgIG5hdXRpY2FsbWlsZXM6IDM0NDEuMTQ1LFxuICAgIGRlZ3JlZXM6IDU3LjI5NTc3OTUsXG4gICAgcmFkaWFuczogMSxcbiAgICBpbmNoZXM6IDI1MDkwNTYwMCxcbiAgICB5YXJkczogNjk2OTYwMCxcbiAgICBtZXRlcnM6IDYzNzMwMDAsXG4gICAgbWV0cmVzOiA2MzczMDAwLFxuICAgIGNlbnRpbWV0ZXJzOiA2LjM3M2UrOCxcbiAgICBjZW50aW1ldHJlczogNi4zNzNlKzgsXG4gICAga2lsb21ldGVyczogNjM3MyxcbiAgICBraWxvbWV0cmVzOiA2MzczLFxuICAgIGZlZXQ6IDIwOTA4NzkyLjY1XG59O1xuXG52YXIgYXJlYUZhY3RvcnMgPSB7XG4gICAga2lsb21ldGVyczogMC4wMDAwMDEsXG4gICAga2lsb21ldHJlczogMC4wMDAwMDEsXG4gICAgbWV0ZXJzOiAxLFxuICAgIG1ldHJlczogMSxcbiAgICBjZW50aW1ldHJlczogMTAwMDAsXG4gICAgbWlsbGltZXRlcjogMTAwMDAwMCxcbiAgICBhY3JlczogMC4wMDAyNDcxMDUsXG4gICAgbWlsZXM6IDMuODZlLTcsXG4gICAgeWFyZHM6IDEuMTk1OTkwMDQ2LFxuICAgIGZlZXQ6IDEwLjc2MzkxMDQxNyxcbiAgICBpbmNoZXM6IDE1NTAuMDAzMTAwMDA2XG59O1xuLyoqXG4gKiBSb3VuZCBudW1iZXIgdG8gcHJlY2lzaW9uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG51bSBOdW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbcHJlY2lzaW9uPTBdIFByZWNpc2lvblxuICogQHJldHVybnMge251bWJlcn0gcm91bmRlZCBudW1iZXJcbiAqIEBleGFtcGxlXG4gKiB0dXJmLnJvdW5kKDEyMC40MzIxKVxuICogLy89MTIwXG4gKlxuICogdHVyZi5yb3VuZCgxMjAuNDMyMSwgMilcbiAqIC8vPTEyMC40M1xuICovXG5mdW5jdGlvbiByb3VuZChudW0sIHByZWNpc2lvbikge1xuICAgIGlmIChudW0gPT09IHVuZGVmaW5lZCB8fCBudW0gPT09IG51bGwgfHwgaXNOYU4obnVtKSkgdGhyb3cgbmV3IEVycm9yKCdudW0gaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAocHJlY2lzaW9uICYmICEocHJlY2lzaW9uID49IDApKSB0aHJvdyBuZXcgRXJyb3IoJ3ByZWNpc2lvbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gICAgdmFyIG11bHRpcGxpZXIgPSBNYXRoLnBvdygxMCwgcHJlY2lzaW9uIHx8IDApO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG51bSAqIG11bHRpcGxpZXIpIC8gbXVsdGlwbGllcjtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgZGlzdGFuY2UgbWVhc3VyZW1lbnQgKGFzc3VtaW5nIGEgc3BoZXJpY2FsIEVhcnRoKSBmcm9tIHJhZGlhbnMgdG8gYSBtb3JlIGZyaWVuZGx5IHVuaXQuXG4gKiBWYWxpZCB1bml0czogbWlsZXMsIG5hdXRpY2FsbWlsZXMsIGluY2hlcywgeWFyZHMsIG1ldGVycywgbWV0cmVzLCBraWxvbWV0ZXJzLCBjZW50aW1ldGVycywgZmVldFxuICpcbiAqIEBuYW1lIHJhZGlhbnNUb0Rpc3RhbmNlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaWFucyBpbiByYWRpYW5zIGFjcm9zcyB0aGUgc3BoZXJlXG4gKiBAcGFyYW0ge3N0cmluZ30gW3VuaXRzPWtpbG9tZXRlcnNdIGNhbiBiZSBkZWdyZWVzLCByYWRpYW5zLCBtaWxlcywgb3Iga2lsb21ldGVycyBpbmNoZXMsIHlhcmRzLCBtZXRyZXMsIG1ldGVycywga2lsb21ldHJlcywga2lsb21ldGVycy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IGRpc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIHJhZGlhbnNUb0Rpc3RhbmNlKHJhZGlhbnMsIHVuaXRzKSB7XG4gICAgaWYgKHJhZGlhbnMgPT09IHVuZGVmaW5lZCB8fCByYWRpYW5zID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoJ3JhZGlhbnMgaXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciBmYWN0b3IgPSBmYWN0b3JzW3VuaXRzIHx8ICdraWxvbWV0ZXJzJ107XG4gICAgaWYgKCFmYWN0b3IpIHRocm93IG5ldyBFcnJvcigndW5pdHMgaXMgaW52YWxpZCcpO1xuICAgIHJldHVybiByYWRpYW5zICogZmFjdG9yO1xufVxuXG4vKipcbiAqIENvbnZlcnQgYSBkaXN0YW5jZSBtZWFzdXJlbWVudCAoYXNzdW1pbmcgYSBzcGhlcmljYWwgRWFydGgpIGZyb20gYSByZWFsLXdvcmxkIHVuaXQgaW50byByYWRpYW5zXG4gKiBWYWxpZCB1bml0czogbWlsZXMsIG5hdXRpY2FsbWlsZXMsIGluY2hlcywgeWFyZHMsIG1ldGVycywgbWV0cmVzLCBraWxvbWV0ZXJzLCBjZW50aW1ldGVycywgZmVldFxuICpcbiAqIEBuYW1lIGRpc3RhbmNlVG9SYWRpYW5zXG4gKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2UgaW4gcmVhbCB1bml0c1xuICogQHBhcmFtIHtzdHJpbmd9IFt1bml0cz1raWxvbWV0ZXJzXSBjYW4gYmUgZGVncmVlcywgcmFkaWFucywgbWlsZXMsIG9yIGtpbG9tZXRlcnMgaW5jaGVzLCB5YXJkcywgbWV0cmVzLCBtZXRlcnMsIGtpbG9tZXRyZXMsIGtpbG9tZXRlcnMuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSByYWRpYW5zXG4gKi9cbmZ1bmN0aW9uIGRpc3RhbmNlVG9SYWRpYW5zKGRpc3RhbmNlLCB1bml0cykge1xuICAgIGlmIChkaXN0YW5jZSA9PT0gdW5kZWZpbmVkIHx8IGRpc3RhbmNlID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoJ2Rpc3RhbmNlIGlzIHJlcXVpcmVkJyk7XG5cbiAgICB2YXIgZmFjdG9yID0gZmFjdG9yc1t1bml0cyB8fCAna2lsb21ldGVycyddO1xuICAgIGlmICghZmFjdG9yKSB0aHJvdyBuZXcgRXJyb3IoJ3VuaXRzIGlzIGludmFsaWQnKTtcbiAgICByZXR1cm4gZGlzdGFuY2UgLyBmYWN0b3I7XG59XG5cbi8qKlxuICogQ29udmVydCBhIGRpc3RhbmNlIG1lYXN1cmVtZW50IChhc3N1bWluZyBhIHNwaGVyaWNhbCBFYXJ0aCkgZnJvbSBhIHJlYWwtd29ybGQgdW5pdCBpbnRvIGRlZ3JlZXNcbiAqIFZhbGlkIHVuaXRzOiBtaWxlcywgbmF1dGljYWxtaWxlcywgaW5jaGVzLCB5YXJkcywgbWV0ZXJzLCBtZXRyZXMsIGNlbnRpbWV0ZXJzLCBraWxvbWV0cmVzLCBmZWV0XG4gKlxuICogQG5hbWUgZGlzdGFuY2VUb0RlZ3JlZXNcbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0YW5jZSBpbiByZWFsIHVuaXRzXG4gKiBAcGFyYW0ge3N0cmluZ30gW3VuaXRzPWtpbG9tZXRlcnNdIGNhbiBiZSBkZWdyZWVzLCByYWRpYW5zLCBtaWxlcywgb3Iga2lsb21ldGVycyBpbmNoZXMsIHlhcmRzLCBtZXRyZXMsIG1ldGVycywga2lsb21ldHJlcywga2lsb21ldGVycy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IGRlZ3JlZXNcbiAqL1xuZnVuY3Rpb24gZGlzdGFuY2VUb0RlZ3JlZXMoZGlzdGFuY2UsIHVuaXRzKSB7XG4gICAgcmV0dXJuIHJhZGlhbnMyZGVncmVlcyhkaXN0YW5jZVRvUmFkaWFucyhkaXN0YW5jZSwgdW5pdHMpKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbnkgYmVhcmluZyBhbmdsZSBmcm9tIHRoZSBub3J0aCBsaW5lIGRpcmVjdGlvbiAocG9zaXRpdmUgY2xvY2t3aXNlKVxuICogYW5kIHJldHVybnMgYW4gYW5nbGUgYmV0d2VlbiAwLTM2MCBkZWdyZWVzIChwb3NpdGl2ZSBjbG9ja3dpc2UpLCAwIGJlaW5nIHRoZSBub3J0aCBsaW5lXG4gKlxuICogQG5hbWUgYmVhcmluZ1RvQW5nbGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBiZWFyaW5nIGFuZ2xlLCBiZXR3ZWVuIC0xODAgYW5kICsxODAgZGVncmVlc1xuICogQHJldHVybnMge251bWJlcn0gYW5nbGUgYmV0d2VlbiAwIGFuZCAzNjAgZGVncmVlc1xuICovXG5mdW5jdGlvbiBiZWFyaW5nVG9BbmdsZShiZWFyaW5nKSB7XG4gICAgaWYgKGJlYXJpbmcgPT09IG51bGwgfHwgYmVhcmluZyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ2JlYXJpbmcgaXMgcmVxdWlyZWQnKTtcblxuICAgIHZhciBhbmdsZSA9IGJlYXJpbmcgJSAzNjA7XG4gICAgaWYgKGFuZ2xlIDwgMCkgYW5nbGUgKz0gMzYwO1xuICAgIHJldHVybiBhbmdsZTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBhbmdsZSBpbiByYWRpYW5zIHRvIGRlZ3JlZXNcbiAqXG4gKiBAbmFtZSByYWRpYW5zMmRlZ3JlZXNcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpYW5zIGFuZ2xlIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGRlZ3JlZXMgYmV0d2VlbiAwIGFuZCAzNjAgZGVncmVlc1xuICovXG5mdW5jdGlvbiByYWRpYW5zMmRlZ3JlZXMocmFkaWFucykge1xuICAgIGlmIChyYWRpYW5zID09PSBudWxsIHx8IHJhZGlhbnMgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdyYWRpYW5zIGlzIHJlcXVpcmVkJyk7XG5cbiAgICB2YXIgZGVncmVlcyA9IHJhZGlhbnMgJSAoMiAqIE1hdGguUEkpO1xuICAgIHJldHVybiBkZWdyZWVzICogMTgwIC8gTWF0aC5QSTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBhbmdsZSBpbiBkZWdyZWVzIHRvIHJhZGlhbnNcbiAqXG4gKiBAbmFtZSBkZWdyZWVzMnJhZGlhbnNcbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWdyZWVzIGFuZ2xlIGJldHdlZW4gMCBhbmQgMzYwIGRlZ3JlZXNcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGFuZ2xlIGluIHJhZGlhbnNcbiAqL1xuZnVuY3Rpb24gZGVncmVlczJyYWRpYW5zKGRlZ3JlZXMpIHtcbiAgICBpZiAoZGVncmVlcyA9PT0gbnVsbCB8fCBkZWdyZWVzID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignZGVncmVlcyBpcyByZXF1aXJlZCcpO1xuXG4gICAgdmFyIHJhZGlhbnMgPSBkZWdyZWVzICUgMzYwO1xuICAgIHJldHVybiByYWRpYW5zICogTWF0aC5QSSAvIDE4MDtcbn1cblxuXG4vKipcbiAqIENvbnZlcnRzIGEgZGlzdGFuY2UgdG8gdGhlIHJlcXVlc3RlZCB1bml0LlxuICogVmFsaWQgdW5pdHM6IG1pbGVzLCBuYXV0aWNhbG1pbGVzLCBpbmNoZXMsIHlhcmRzLCBtZXRlcnMsIG1ldHJlcywga2lsb21ldGVycywgY2VudGltZXRlcnMsIGZlZXRcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2UgdG8gYmUgY29udmVydGVkXG4gKiBAcGFyYW0ge3N0cmluZ30gb3JpZ2luYWxVbml0IG9mIHRoZSBkaXN0YW5jZVxuICogQHBhcmFtIHtzdHJpbmd9IFtmaW5hbFVuaXQ9a2lsb21ldGVyc10gcmV0dXJuZWQgdW5pdFxuICogQHJldHVybnMge251bWJlcn0gdGhlIGNvbnZlcnRlZCBkaXN0YW5jZVxuICovXG5mdW5jdGlvbiBjb252ZXJ0RGlzdGFuY2UoZGlzdGFuY2UsIG9yaWdpbmFsVW5pdCwgZmluYWxVbml0KSB7XG4gICAgaWYgKGRpc3RhbmNlID09PSBudWxsIHx8IGRpc3RhbmNlID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignZGlzdGFuY2UgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIShkaXN0YW5jZSA+PSAwKSkgdGhyb3cgbmV3IEVycm9yKCdkaXN0YW5jZSBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG5cbiAgICB2YXIgY29udmVydGVkRGlzdGFuY2UgPSByYWRpYW5zVG9EaXN0YW5jZShkaXN0YW5jZVRvUmFkaWFucyhkaXN0YW5jZSwgb3JpZ2luYWxVbml0KSwgZmluYWxVbml0IHx8ICdraWxvbWV0ZXJzJyk7XG4gICAgcmV0dXJuIGNvbnZlcnRlZERpc3RhbmNlO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgYXJlYSB0byB0aGUgcmVxdWVzdGVkIHVuaXQuXG4gKiBWYWxpZCB1bml0czoga2lsb21ldGVycywga2lsb21ldHJlcywgbWV0ZXJzLCBtZXRyZXMsIGNlbnRpbWV0cmVzLCBtaWxsaW1ldGVyLCBhY3JlLCBtaWxlLCB5YXJkLCBmb290LCBpbmNoXG4gKiBAcGFyYW0ge251bWJlcn0gYXJlYSB0byBiZSBjb252ZXJ0ZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3JpZ2luYWxVbml0PW1ldGVyc10gb2YgdGhlIGRpc3RhbmNlXG4gKiBAcGFyYW0ge3N0cmluZ30gW2ZpbmFsVW5pdD1raWxvbWV0ZXJzXSByZXR1cm5lZCB1bml0XG4gKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgY29udmVydGVkIGRpc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnRBcmVhKGFyZWEsIG9yaWdpbmFsVW5pdCwgZmluYWxVbml0KSB7XG4gICAgaWYgKGFyZWEgPT09IG51bGwgfHwgYXJlYSA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ2FyZWEgaXMgcmVxdWlyZWQnKTtcbiAgICBpZiAoIShhcmVhID49IDApKSB0aHJvdyBuZXcgRXJyb3IoJ2FyZWEgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuXG4gICAgdmFyIHN0YXJ0RmFjdG9yID0gYXJlYUZhY3RvcnNbb3JpZ2luYWxVbml0IHx8ICdtZXRlcnMnXTtcbiAgICBpZiAoIXN0YXJ0RmFjdG9yKSB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgb3JpZ2luYWwgdW5pdHMnKTtcblxuICAgIHZhciBmaW5hbEZhY3RvciA9IGFyZWFGYWN0b3JzW2ZpbmFsVW5pdCB8fCAna2lsb21ldGVycyddO1xuICAgIGlmICghZmluYWxGYWN0b3IpIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBmaW5hbCB1bml0cycpO1xuXG4gICAgcmV0dXJuIChhcmVhIC8gc3RhcnRGYWN0b3IpICogZmluYWxGYWN0b3I7XG59XG5cbi8qKlxuICogaXNOdW1iZXJcbiAqXG4gKiBAcGFyYW0geyp9IG51bSBOdW1iZXIgdG8gdmFsaWRhdGVcbiAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlL2ZhbHNlXG4gKiBAZXhhbXBsZVxuICogdHVyZi5pc051bWJlcigxMjMpXG4gKiAvLz10cnVlXG4gKiB0dXJmLmlzTnVtYmVyKCdmb28nKVxuICogLy89ZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNOdW1iZXIobnVtKSB7XG4gICAgcmV0dXJuICFpc05hTihudW0pICYmIG51bSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShudW0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBmZWF0dXJlOiBmZWF0dXJlLFxuICAgIGdlb21ldHJ5OiBnZW9tZXRyeSxcbiAgICBmZWF0dXJlQ29sbGVjdGlvbjogZmVhdHVyZUNvbGxlY3Rpb24sXG4gICAgZ2VvbWV0cnlDb2xsZWN0aW9uOiBnZW9tZXRyeUNvbGxlY3Rpb24sXG4gICAgcG9pbnQ6IHBvaW50LFxuICAgIG11bHRpUG9pbnQ6IG11bHRpUG9pbnQsXG4gICAgbGluZVN0cmluZzogbGluZVN0cmluZyxcbiAgICBtdWx0aUxpbmVTdHJpbmc6IG11bHRpTGluZVN0cmluZyxcbiAgICBwb2x5Z29uOiBwb2x5Z29uLFxuICAgIG11bHRpUG9seWdvbjogbXVsdGlQb2x5Z29uLFxuICAgIHJhZGlhbnNUb0Rpc3RhbmNlOiByYWRpYW5zVG9EaXN0YW5jZSxcbiAgICBkaXN0YW5jZVRvUmFkaWFuczogZGlzdGFuY2VUb1JhZGlhbnMsXG4gICAgZGlzdGFuY2VUb0RlZ3JlZXM6IGRpc3RhbmNlVG9EZWdyZWVzLFxuICAgIHJhZGlhbnMyZGVncmVlczogcmFkaWFuczJkZWdyZWVzLFxuICAgIGRlZ3JlZXMycmFkaWFuczogZGVncmVlczJyYWRpYW5zLFxuICAgIGJlYXJpbmdUb0FuZ2xlOiBiZWFyaW5nVG9BbmdsZSxcbiAgICBjb252ZXJ0RGlzdGFuY2U6IGNvbnZlcnREaXN0YW5jZSxcbiAgICBjb252ZXJ0QXJlYTogY29udmVydEFyZWEsXG4gICAgcm91bmQ6IHJvdW5kLFxuICAgIGlzTnVtYmVyOiBpc051bWJlclxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL0B0dXJmL3dpdGhpbi9ub2RlX21vZHVsZXMvQHR1cmYvaGVscGVycy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZyc7XG5cbi8vIGJlY2F1c2Ugd2UgY2FuJ3QgZWFzaWx5IGdyYWIgZGF0YSBmcm9tIG1hcCwgYW5kXG4vLyBxdWVyeVNvdXJjZUZlYXR1cmVzIG9ubHkgcmV0dXJucyB0aGluZ3MgdGhhdCBhcmUgd2l0aGluIHZpZXcuXG5jbGFzcyBTdGF0aW9uRmVlZCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGxldCBzdGF0aW9ucyA9IFtdO1xuXG4gICAgLy8gcmV0dXJucyBnZW9qc29uXG4gICAgdGhpcy5nZXRTdGF0aW9ucyA9IGZ1bmN0aW9uIGdldFN0YXRpb25zKCkgeyByZXR1cm4gc3RhdGlvbnM7IH07XG5cbiAgICAvLyByZXR1cm5zIGFycmF5XG4gICAgdGhpcy5nZXRTdGF0aW9uc0FycmF5ID0gZnVuY3Rpb24gZ2V0U3RhdGlvbnNBcnJheSgpIHtcbiAgICAgIHJldHVybiBzdGF0aW9ucy5mZWF0dXJlcyA/IHN0YXRpb25zLmZlYXR1cmVzIDogW107XG4gICAgfTtcbiAgICAvLyBjb25zdCBzZXRTdGF0aW9ucyA9IGZ1bmN0aW9uIHNldFN0YXRpb25zKGRhdGEpIHsgc3RhdGlvbnMgPSBkYXRhOyB9XG4gICAgLy8gZnVuY3Rpb24gc2V0U3RhdGlvbnMoZGF0YSkgeyBzdGF0aW9ucyA9IGRhdGE7IH1cblxuICAgIGNvbnN0IGRvRmV0Y2ggPSAoKSA9PiB7XG4gICAgICBmZXRjaChjb25maWcuc3RhdGlvbnNVcmwpXG4gICAgICAgIC50aGVuKHJlc3AgPT4gcmVzcC5qc29uKCkpXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZldGNoZWQgc3RhdGlvbnM6ICcsIGRhdGEpO1xuICAgICAgICAgIHN0YXRpb25zID0gZGF0YTtcbiAgICAgICAgICAvLyBzZXRTdGF0aW9ucyhkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGRvRmV0Y2goKTtcbiAgICB3aW5kb3cuc2V0VGltZW91dChkb0ZldGNoLCAzMCAvKiBzZWNvbmRzICovICogMTAwMCk7XG4gIH1cbn1cblxuY29uc3QgZmVlZCA9IG5ldyBTdGF0aW9uRmVlZCgpO1xuZXhwb3J0IGRlZmF1bHQgZmVlZDsgLy8gZXhwb3J0IHNpbmdsZXRvblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL1N0YXRpb25GZWVkLmpzIiwiaW1wb3J0IHN0YXRlIGZyb20gJy4vc3RhdGUnO1xuXG4vKipcbiAqIEdldCBHb29nbGUgZGlyZWN0aW9ucyA8YT4gbGluayB0by9mcm9tIHVwIHRvIHR3byBwb2ludHNcbiAqIEBwYXJhbSB7e2xhdGl0dWRlLCBsb25naXR1ZGUsIGFkZHJlc3N9fSBzdGFydCBkaXJlY3Rpb25zIHN0YXJ0cG9pbnQ7IGNhbiBiZSBudWxsLlxuICogQHBhcmFtIHt7bGF0aXR1ZGUsIGxvbmdpdHVkZSwgYWRkcmVzc319IGVuZCBkaXJlY3Rpb25zIGVuZHBvaW50XG4gKiBAcGFyYW0gdG9PckZyb20gLSBEaXJlY3Rpb25zICd0bycgb3IgJ2Zyb20gaGVyZVxuICovXG5mdW5jdGlvbiBnZXREaXJlY3Rpb25zTGluayhzdGFydCwgZW5kLCB0b09yRnJvbSkge1xuICAvLyBUT0RPIC8gQlVHOiBcImFkZHJlc3Nlc1wiIHdpdGggYSAnLycgaW4gdGhlbSBkb24ndCB3b3JrLCBsaWtlXG4gIC8vIFwiQ2l2aWMgQ2VudGVyL1VOIFBsYXphIEJBUlQgU3RhdGlvbiAoTWFya2V0IFN0IGF0IE1jQWxsaXN0ZXIgU3QpXCIgLSBjdXJyZW50bHkgdGhhdCByZXN1bHRzXG4gIC8vIGluIGRpcmVjdGlvbnMgZnJvbSBjaXZpYyBjZW50ZXIgdG8gVU4gcGxhemEgKGIvYyBnLW1hcHMgc2VwYXJhdGVzIGxvY2F0aW9ucyB3aXRoIGEgJy8nKVxuXG4gIGNvbnN0IGZyb20gPSBzdGFydCA/IChzdGFydC5hZGRyZXNzIHx8IGAke3N0YXJ0LmxhdGl0dWRlfSwke3N0YXJ0LmxvbmdpdHVkZX1gKSA6ICcnO1xuICBjb25zdCB0byA9IGVuZCA/IChlbmQuYWRkcmVzcyB8fCBgJHtlbmQubGF0aXR1ZGV9LCR7ZW5kLmxvbmdpdHVkZX1gKSA6ICcnO1xuXG4gIGNvbnN0IGJhc2VVUkwgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9tYXBzL2Rpcic7XG4gIGNvbnN0IHpvb20gPSAxNztcblxuICAvLyBHb29nbGUgTWFwcyBtYWdpYyB0aGF0IHNheXM6IFwiR2l2ZSBtZSB3YWxraW5nIGRpcmVjdGlvbnNcIi5cbiAgLy8gU2VlIGh0dHBzOi8vbXN0aWNrbGVzLndvcmRwcmVzcy5jb20vMjAxNS8wNi8xMi9nbWFwcy11cmxzLW9wdGlvbnMvXG4gIC8vIGh0dHBzOi8vd2ViYXBwcy5zdGFja2V4Y2hhbmdlLmNvbS9hLzc5NTQ0XG4gIGNvbnN0IGRhdGEgPSAnZGF0YT0hNG0yITRtMSEzZTInO1xuXG4gIGNvbnN0IGRpcmVjdGlvbnNVUkwgPSBgJHtiYXNlVVJMfS8ke2Zyb219LyR7dG99L0Ake3pvb219LyR7ZGF0YX1gO1xuICAvLyBHb29nbGUgbWFwcyBleHBlY3RzIGFkZHJlc3NlcyB3aXRoIG5hbWUgZmlyc3QsIHRoZW4gcGx1cy1zZXBhcmF0ZWQgY29tcG9uZW50cyBsaWtlIHRoaXM6XG4gIC8vIE5vaXNlYnJpZGdlLCsyMTY5K01pc3Npb24rU3QsK1NhbitGcmFuY2lzY28sK0NBKzk0MTEwXG4gIHJldHVybiBgPGEgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCIke2RpcmVjdGlvbnNVUkx9XCI+RGlyZWN0aW9ucyAke3RvT3JGcm9tfSBoZXJlPC9hPmA7XG59XG5cblxuLyoqXG4gKiBHZXQgSFRNTCBjb250ZW50IGRlc2NyaWJpbmcgYSBzdGF0aW9uLlxuICogQHBhcmFtIHN0YXRpb24gLSBvbmUgc3RhdGlvbiBmcm9tIHRoZSBBUElcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZWFyYnlFbmRwb2ludCAtICdvcmlnaW4nIG9yICdkZXN0aW5hdGlvbicgKGZvciBkaXJlY3Rpb25zIGxpbmspXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFBvcHVwQ29udGVudChzdGF0aW9uLCBuZWFyYnlFbmRwb2ludCkge1xuICBjb25zdCB7XG4gICAgc3RBZGRyZXNzMTogYWRkcixcbiAgICBsYXRpdHVkZTogbGF0LFxuICAgIGxvbmdpdHVkZTogbG5nLFxuICAgIGF2YWlsYWJsZUJpa2VzOiBiaWtlcyxcbiAgICBhdmFpbGFibGVEb2NrczogZG9ja3MsXG4gICAgc3RhdHVzVmFsdWU6IHN0YXR1cyxcbiAgfSA9IHN0YXRpb24ucHJvcGVydGllcztcblxuICBjb25zdCBzdGF0aW9uTG9jYXRpb24gPSB7XG4gICAgbG9uZ2l0dWRlOiBsbmcsXG4gICAgbGF0aXR1ZGU6IGxhdCxcbiAgICAvLyBhZGRyZXNzOiBhZGRyLFxuICAgIC8vIGp1c3QgaWdub3JlIHRoZSBzdGF0aW9uIGFkZHJlc3NlcyBiZWNhdXNlIHRoZXkncmUgdXNlbGVzczpcbiAgICAvLyBcIndlc3Rlcm4gYWRkaXRpb24gLSBjb21pbmcgMjAxOFwiIGRvZXNuJ3QgZ2VvY29kZS5cbiAgfTtcblxuICBsZXQgc3RhcnQ7XG4gIGxldCBlbmQ7XG4gIGxldCB0b09yRnJvbSA9ICcnO1xuICBpZiAobmVhcmJ5RW5kcG9pbnQgPT09ICdvcmlnaW4nKSB7XG4gICAgc3RhcnQgPSBzdGF0ZS5vcmlnaW47XG4gICAgZW5kID0gc3RhdGlvbkxvY2F0aW9uO1xuICAgIHRvT3JGcm9tID0gJ3RvJztcbiAgfSBlbHNlIGlmIChuZWFyYnlFbmRwb2ludCA9PT0gJ2Rlc3RpbmF0aW9uJykge1xuICAgIHN0YXJ0ID0gc3RhdGlvbkxvY2F0aW9uO1xuICAgIGVuZCA9IHN0YXRlLmRlc3RpbmF0aW9uO1xuICAgIHRvT3JGcm9tID0gJ2Zyb20nO1xuICB9IGVsc2Uge1xuICAgIHN0YXJ0ID0gbnVsbDtcbiAgICBlbmQgPSBzdGF0aW9uTG9jYXRpb247XG4gIH1cbiAgY29uc3QgZGlyZWN0aW9uc0xpbmsgPSBnZXREaXJlY3Rpb25zTGluayhzdGFydCwgZW5kLCB0b09yRnJvbSk7XG5cbiAgY29uc3Qgcm91bmQgPSBuID0+IE51bWJlcihuKS50b0ZpeGVkKDIpO1xuXG4gIGNvbnN0IGFsZXJ0TXNnID0gKHN0YXR1cyA9PT0gJ05vdCBJbiBTZXJ2aWNlJykgPyBgPGRpdiBjbGFzcz1cInN0YXRpb24tcG9wdXAtLWFsZXJ0XCI+JHtzdGF0dXN9PC9kaXY+YCA6ICcnO1xuXG4gIHJldHVybiBgXG4gICAgPGRpdiBjbGFzcz1cInN0YXRpb24tcG9wdXBcIj5cbiAgICAgIDxoMz4ke2FkZHJ9PC9oMz5cbiAgICAgICR7YWxlcnRNc2d9XG4gICAgICA8ZGl2IGNsYXNzPVwiY29sdW1ucyBzdGF0aW9uLXBvcHVwLS1zdGF0c1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sdW1uIHN0YXRpb24tcG9wdXAtLWJpa2VzXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInN0YXRpb24tcG9wdXAtLWJpa2VzLW51bWJlclwiPiR7YmlrZXN9PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInN0YXRpb24tcG9wdXAtLWJpa2VzLXRleHRcIj5iaWtlczwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbHVtbiBzdGF0aW9uLXBvcHVwLS1kb2Nrc1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0aW9uLXBvcHVwLS1kb2Nrcy1udW1iZXJcIj4ke2RvY2tzfTwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0aW9uLXBvcHVwLS1kb2Nrcy10ZXh0XCI+ZG9ja3M8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJzdGF0aW9uLXBvcHVwLS1kaXJlY3Rpb25zXCI+XG4gICAgICAgICR7ZGlyZWN0aW9uc0xpbmt9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJzdGF0aW9uLXBvcHVwLS1jb29yZGluYXRlc1wiPkxhdC9Mb25nOiA8YWJiciB0aXRsZT1cIiR7bGF0fSwgJHtsbmd9XCI+JHtyb3VuZChsYXQpfSwgJHtyb3VuZChsbmcpfTwvYWJicj48L2Rpdj5cbiAgICA8L2Rpdj5gO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3BvcHVwcy5qcyIsImltcG9ydCBtYnhEaXJlY3Rpb25zIGZyb20gJ0BtYXBib3gvbWFwYm94LXNkay9zZXJ2aWNlcy9kaXJlY3Rpb25zJztcbmltcG9ydCBwb2x5bGluZSBmcm9tICdAbWFwYm94L3BvbHlsaW5lJztcblxuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZyc7XG5cbmNvbnN0IGRpcmVjdGlvbnNDbGllbnQgPSBtYnhEaXJlY3Rpb25zKHsgYWNjZXNzVG9rZW46IGNvbmZpZy5tYXBib3hUb2tlbiB9KTtcblxuXG4vKipcbiAqIEZldGNoIHJvdXRlIHBvaW50IGEgdG8gcG9pbnQgYiwgY2FsbCBjYWxsYmFjayB3aGVuIGRvbmUuXG4gKiBAcGFyYW0ge1BvaW50fSBmcm9tXG4gKiBAcGFyYW0ge1BvaW50fSB0b1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZmV0Y2hSb3V0ZShhLCBiLCBjYWxsYmFjaykge1xuICBkaXJlY3Rpb25zQ2xpZW50XG4gICAgLmdldERpcmVjdGlvbnMoe1xuICAgICAgcHJvZmlsZTogJ2N5Y2xpbmcnLFxuICAgICAgd2F5cG9pbnRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBjb29yZGluYXRlczogW2EubG9uZ2l0dWRlLCBhLmxhdGl0dWRlXSxcbiAgICAgICAgICB3YXlwb2ludE5hbWU6IGEuYWRkcmVzcyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGNvb3JkaW5hdGVzOiBbYi5sb25naXR1ZGUsIGIubGF0aXR1ZGVdLFxuICAgICAgICAgIHdheXBvaW50TmFtZTogYi5hZGRyZXNzLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KVxuICAgIC5zZW5kKClcbiAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnN0IGRpcmVjdGlvbnMgPSByZXNwb25zZS5ib2R5O1xuICAgICAgaWYgKGRpcmVjdGlvbnMuY29kZSAhPT0gJ09rJykge1xuICAgICAgICAvLyBTZWU6IGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vYXBpLWRvY3VtZW50YXRpb24vI2RpcmVjdGlvbnMtYXBpLWVycm9yc1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICBjb25zb2xlLmVycm9yKGRpcmVjdGlvbnMpO1xuICAgICAgICB0aHJvdyBFcnJvcignRmFpbGVkIGdldHRpbmcgZGlyZWN0aW9ucy4nKTtcbiAgICAgIH1cbiAgICAgIGNhbGxiYWNrKHBvbHlsaW5lLnRvR2VvSlNPTihkaXJlY3Rpb25zLnJvdXRlc1swXS5nZW9tZXRyeSkpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yIGZldGNoaW5nIHJvdXRlOiAnLCBlcnJvcik7XG4gICAgICB0aHJvdyBFcnJvcignRXJyb3Igd2hpbGUgcmVxdWVzdGluZyBkaXJlY3Rpb25zLicpO1xuICAgIH0pO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3JvdXRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIHYgPSByZXF1aXJlKCcuL3NlcnZpY2UtaGVscGVycy92YWxpZGF0b3InKTtcbnZhciBjcmVhdGVTZXJ2aWNlRmFjdG9yeSA9IHJlcXVpcmUoJy4vc2VydmljZS1oZWxwZXJzL2NyZWF0ZS1zZXJ2aWNlLWZhY3RvcnknKTtcbnZhciBvYmplY3RDbGVhbiA9IHJlcXVpcmUoJy4vc2VydmljZS1oZWxwZXJzL29iamVjdC1jbGVhbicpO1xudmFyIHN0cmluZ2lmeUJvb2xlYW5zID0gcmVxdWlyZSgnLi9zZXJ2aWNlLWhlbHBlcnMvc3RyaW5naWZ5LWJvb2xlYW5zJyk7XG5cbi8qKlxuICogRGlyZWN0aW9ucyBBUEkgc2VydmljZS5cbiAqXG4gKiBMZWFybiBtb3JlIGFib3V0IHRoaXMgc2VydmljZSBhbmQgaXRzIHJlc3BvbnNlcyBpblxuICogW3RoZSBIVFRQIHNlcnZpY2UgZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly93d3cubWFwYm94LmNvbS9hcGktZG9jdW1lbnRhdGlvbi8jZGlyZWN0aW9ucykuXG4gKi9cbnZhciBEaXJlY3Rpb25zID0ge307XG5cbi8qKlxuICogR2V0IGRpcmVjdGlvbnMuXG4gKlxuICogUGxlYXNlIHJlYWQgW3RoZSBmdWxsIEhUVFAgc2VydmljZSBkb2N1bWVudGF0aW9uXShodHRwczovL3d3dy5tYXBib3guY29tL2FwaS1kb2N1bWVudGF0aW9uLyNkaXJlY3Rpb25zKVxuICogdG8gdW5kZXJzdGFuZCBhbGwgb2YgdGhlIGF2YWlsYWJsZSBvcHRpb25zLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAqIEBwYXJhbSB7J2RyaXZpbmctdHJhZmZpYyd8J2RyaXZpbmcnfCd3YWxraW5nJ3wnY3ljbGluZyd9IFtjb25maWcucHJvZmlsZT1cImRyaXZpbmdcIl1cbiAqIEBwYXJhbSB7QXJyYXk8RGlyZWN0aW9uc1dheXBvaW50Pn0gY29uZmlnLndheXBvaW50cyAtIEFuIG9yZGVyZWQgYXJyYXkgb2YgW2BEaXJlY3Rpb25zV2F5cG9pbnRgXSgjZGlyZWN0aW9uc3dheXBvaW50KSBvYmplY3RzLCBiZXR3ZWVuIDIgYW5kIDI1IChpbmNsdXNpdmUpLlxuICogQHBhcmFtIHtib29sZWFufSBbY29uZmlnLmFsdGVybmF0aXZlcz1mYWxzZV0gLSBXaGV0aGVyIHRvIHRyeSB0byByZXR1cm4gYWx0ZXJuYXRpdmUgcm91dGVzLlxuICogQHBhcmFtIHtBcnJheTwnZHVyYXRpb24nfCdkaXN0YW5jZSd8J3NwZWVkJ3wnY29uZ2VzdGlvbic+fSBbY29uZmlnLmFubm90YXRpb25zXSAtIFNwZWNpZnkgYWRkaXRpb25hbCBtZXRhZGF0YSB0aGF0IHNob3VsZCBiZSByZXR1cm5lZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NvbmZpZy5iYW5uZXJJbnN0cnVjdGlvbnM9ZmFsc2VdIC0gU2hvdWxkIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgc3RlcHNgLlxuICogQHBhcmFtIHtib29sZWFufSBbY29uZmlnLmNvbnRpbnVlU3RyYWlnaHRdIC0gU2V0cyB0aGUgYWxsb3dlZCBkaXJlY3Rpb24gb2YgdHJhdmVsIHdoZW4gZGVwYXJ0aW5nIGludGVybWVkaWF0ZSB3YXlwb2ludHMuXG4gKiBAcGFyYW0ge3N0cmluZ30gW2NvbmZpZy5leGNsdWRlXSAtIEV4Y2x1ZGUgY2VydGFpbiByb2FkIHR5cGVzIGZyb20gcm91dGluZy4gU2VlIEhUVFAgc2VydmljZSBkb2N1bWVudGF0aW9uIGZvciBvcHRpb25zLlxuICogQHBhcmFtIHsnZ2VvanNvbid8J3BvbHlsaW5lJ3wncG9seWxpbmU2J30gW2NvbmZpZy5nZW9tZXRyaWVzPVwicG9seWxpbmVcIl0gLSBGb3JtYXQgb2YgdGhlIHJldHVybmVkIGdlb21ldHJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb25maWcubGFuZ3VhZ2U9XCJlblwiXSAtIExhbmd1YWdlIG9mIHJldHVybmVkIHR1cm4tYnktdHVybiB0ZXh0IGluc3RydWN0aW9ucy5cbiAqICAgU2VlIG9wdGlvbnMgbGlzdGVkIGluIFt0aGUgSFRUUCBzZXJ2aWNlIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vYXBpLWRvY3VtZW50YXRpb24vI2luc3RydWN0aW9ucy1sYW5ndWFnZXMpLlxuICogQHBhcmFtIHsnc2ltcGxpZmllZCd8J2Z1bGwnfCdmYWxzZSd9IFtjb25maWcub3ZlcnZpZXc9XCJzaW1wbGlmaWVkXCJdIC0gVHlwZSBvZiByZXR1cm5lZCBvdmVydmlldyBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NvbmZpZy5yb3VuZGFib3V0RXhpdHM9ZmFsc2VdIC0gRW1pdCBpbnNidHJ1Y3Rpb25zIGF0IHJvdW5kYWJvdXQgZXhpdHMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtjb25maWcuc3RlcHM9ZmFsc2VdIC0gV2hldGhlciB0byByZXR1cm4gc3RlcHMgYW5kIHR1cm4tYnktdHVybiBpbnN0cnVjdGlvbnMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtjb25maWcudm9pY2VJbnN0cnVjdGlvbnM9ZmFsc2VdIC0gV2hldGhlciBvciBub3QgdG8gcmV0dXJuIFNTTUwgbWFya2VkLXVwIHRleHQgZm9yIHZvaWNlIGd1aWRhbmNlIGFsb25nIHRoZSByb3V0ZS5cbiAqIEBwYXJhbSB7J2ltcGVyaWFsJ3wnbWV0cmljJ30gW2NvbmZpZy52b2ljZVVuaXRzPVwiaW1wZXJpYWxcIl0gLSBXaGljaCB0eXBlIG9mIHVuaXRzIHRvIHJldHVybiBpbiB0aGUgdGV4dCBmb3Igdm9pY2UgaW5zdHJ1Y3Rpb25zLlxuICogQHJldHVybiB7TWFwaVJlcXVlc3R9XG4gKi9cbkRpcmVjdGlvbnMuZ2V0RGlyZWN0aW9ucyA9IGZ1bmN0aW9uKGNvbmZpZykge1xuICB2LmFzc2VydFNoYXBlKHtcbiAgICBwcm9maWxlOiB2Lm9uZU9mKCdkcml2aW5nLXRyYWZmaWMnLCAnZHJpdmluZycsICd3YWxraW5nJywgJ2N5Y2xpbmcnKSxcbiAgICB3YXlwb2ludHM6IHYucmVxdWlyZWQoXG4gICAgICB2LmFycmF5T2YoXG4gICAgICAgIHYuc2hhcGUoe1xuICAgICAgICAgIGNvb3JkaW5hdGVzOiB2LnJlcXVpcmVkKHYuY29vcmRpbmF0ZXMpLFxuICAgICAgICAgIGFwcHJvYWNoOiB2Lm9uZU9mKCd1bnJlc3RyaWN0ZWQnLCAnY3VyYicpLFxuICAgICAgICAgIGJlYXJpbmc6IHYuYXJyYXlPZih2LnJhbmdlKFswLCAzNjBdKSksXG4gICAgICAgICAgcmFkaXVzOiB2Lm9uZU9mVHlwZSh2Lm51bWJlciwgdi5lcXVhbCgndW5saW1pdGVkJykpLFxuICAgICAgICAgIHdheXBvaW50TmFtZTogdi5zdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICApLFxuICAgIGFsdGVybmF0aXZlczogdi5ib29sZWFuLFxuICAgIGFubm90YXRpb25zOiB2LmFycmF5T2YoXG4gICAgICB2Lm9uZU9mKCdkdXJhdGlvbicsICdkaXN0YW5jZScsICdzcGVlZCcsICdjb25nZXN0aW9uJylcbiAgICApLFxuICAgIGJhbm5lckluc3RydWN0aW9uczogdi5ib29sZWFuLFxuICAgIGNvbnRpbnVlU3RyYWlnaHQ6IHYuYm9vbGVhbixcbiAgICBleGNsdWRlOiB2LnN0cmluZyxcbiAgICBnZW9tZXRyaWVzOiB2LnN0cmluZyxcbiAgICBsYW5ndWFnZTogdi5zdHJpbmcsXG4gICAgb3ZlcnZpZXc6IHYuc3RyaW5nLFxuICAgIHJvdW5kYWJvdXRFeGl0czogdi5ib29sZWFuLFxuICAgIHN0ZXBzOiB2LmJvb2xlYW4sXG4gICAgdm9pY2VJbnN0cnVjdGlvbnM6IHYuYm9vbGVhbixcbiAgICB2b2ljZVVuaXRzOiB2LnN0cmluZ1xuICB9KShjb25maWcpO1xuXG4gIGNvbmZpZy5wcm9maWxlID0gY29uZmlnLnByb2ZpbGUgfHwgJ2RyaXZpbmcnO1xuXG4gIHZhciBwYXRoID0ge1xuICAgIGNvb3JkaW5hdGVzOiBbXSxcbiAgICBhcHByb2FjaDogW10sXG4gICAgYmVhcmluZzogW10sXG4gICAgcmFkaXVzOiBbXSxcbiAgICB3YXlwb2ludE5hbWU6IFtdXG4gIH07XG5cbiAgdmFyIHdheXBvaW50Q291bnQgPSBjb25maWcud2F5cG9pbnRzLmxlbmd0aDtcbiAgaWYgKHdheXBvaW50Q291bnQgPCAyIHx8IHdheXBvaW50Q291bnQgPiAyNSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICd3YXlwb2ludHMgbXVzdCBpbmNsdWRlIGJldHdlZW4gMiBhbmQgMjUgRGlyZWN0aW9uc1dheXBvaW50cydcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlZGVmIHtPYmplY3R9IERpcmVjdGlvbnNXYXlwb2ludFxuICAgKiBAcHJvcGVydHkge0Nvb3JkaW5hdGVzfSBjb29yZGluYXRlc1xuICAgKiBAcHJvcGVydHkgeyd1bnJlc3RyaWN0ZWQnfCdjdXJiJ30gW2FwcHJvYWNoPVwidW5yZXN0cmljdGVkXCJdIC0gVXNlZCB0byBpbmRpY2F0ZSBob3cgcmVxdWVzdGVkIHJvdXRlcyBjb25zaWRlciBmcm9tIHdoaWNoIHNpZGUgb2YgdGhlIHJvYWQgdG8gYXBwcm9hY2ggdGhlIHdheXBvaW50LlxuICAgKiBAcHJvcGVydHkge1tudW1iZXIsIG51bWJlcl19IFtiZWFyaW5nXSAtIFVzZWQgdG8gZmlsdGVyIHRoZSByb2FkIHNlZ21lbnQgdGhlIHdheXBvaW50IHdpbGwgYmUgcGxhY2VkIG9uIGJ5IGRpcmVjdGlvbiBhbmQgZGljdGF0ZXMgdGhlIGFuZ2xlIG9mIGFwcHJvYWNoLlxuICAgKiAgIFRoaXMgb3B0aW9uIHNob3VsZCBhbHdheXMgYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGEgYHJhZGl1c2AuIFRoZSBmaXJzdCB2YWx1ZSBpcyBhbiBhbmdsZSBjbG9ja3dpc2UgZnJvbSB0cnVlIG5vcnRoIGJldHdlZW4gMCBhbmQgMzYwLFxuICAgKiAgIGFuZCB0aGUgc2Vjb25kIGlzIHRoZSByYW5nZSBvZiBkZWdyZWVzIHRoZSBhbmdsZSBjYW4gZGV2aWF0ZSBieS5cbiAgICogQHByb3BlcnR5IHtudW1iZXJ8J3VubGltaXRlZCd9IFtyYWRpdXNdIC0gTWF4aW11bSBkaXN0YW5jZSBpbiBtZXRlcnMgdGhhdCB0aGUgY29vcmRpbmF0ZSBpcyBhbGxvd2VkIHRvIG1vdmUgd2hlbiBzbmFwcGVkIHRvIGEgbmVhcmJ5IHJvYWQgc2VnbWVudC5cbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFt3YXlwb2ludE5hbWVdIC0gQ3VzdG9tIG5hbWUgZm9yIHRoZSB3YXlwb2ludCB1c2VkIGZvciB0aGUgYXJyaXZhbCBpbnN0cnVjdGlvbiBpbiBiYW5uZXJzIGFuZCB2b2ljZSBpbnN0cnVjdGlvbnMuXG4gICAqL1xuICBjb25maWcud2F5cG9pbnRzLmZvckVhY2goZnVuY3Rpb24od2F5cG9pbnQpIHtcbiAgICBwYXRoLmNvb3JkaW5hdGVzLnB1c2goXG4gICAgICB3YXlwb2ludC5jb29yZGluYXRlc1swXSArICcsJyArIHdheXBvaW50LmNvb3JkaW5hdGVzWzFdXG4gICAgKTtcblxuICAgIC8vIGpvaW4gcHJvcHMgd2hpY2ggY29tZSBpbiBwYWlyc1xuICAgIFsnYmVhcmluZyddLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKHdheXBvaW50Lmhhc093blByb3BlcnR5KHByb3ApICYmIHdheXBvaW50W3Byb3BdICE9IG51bGwpIHtcbiAgICAgICAgd2F5cG9pbnRbcHJvcF0gPSB3YXlwb2ludFtwcm9wXS5qb2luKCcsJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBbJ2FwcHJvYWNoJywgJ2JlYXJpbmcnLCAncmFkaXVzJywgJ3dheXBvaW50TmFtZSddLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKHdheXBvaW50Lmhhc093blByb3BlcnR5KHByb3ApICYmIHdheXBvaW50W3Byb3BdICE9IG51bGwpIHtcbiAgICAgICAgcGF0aFtwcm9wXS5wdXNoKHdheXBvaW50W3Byb3BdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhdGhbcHJvcF0ucHVzaCgnJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIFsnYXBwcm9hY2gnLCAnYmVhcmluZycsICdyYWRpdXMnLCAnd2F5cG9pbnROYW1lJ10uZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgLy8gYXZvaWQgc2VuZGluZyBwYXJhbXMgd2hpY2ggYXJlIGFsbCBgO2BcbiAgICBpZiAoXG4gICAgICBwYXRoW3Byb3BdLmV2ZXJ5KGZ1bmN0aW9uKGNoYXIpIHtcbiAgICAgICAgcmV0dXJuIGNoYXIgPT09ICcnO1xuICAgICAgfSlcbiAgICApIHtcbiAgICAgIGRlbGV0ZSBwYXRoW3Byb3BdO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXRoW3Byb3BdID0gcGF0aFtwcm9wXS5qb2luKCc7Jyk7XG4gICAgfVxuICB9KTtcblxuICB2YXIgcXVlcnkgPSBzdHJpbmdpZnlCb29sZWFucyh7XG4gICAgYWx0ZXJuYXRpdmVzOiBjb25maWcuYWx0ZXJuYXRpdmVzLFxuICAgIGFubm90YXRpb25zOiBjb25maWcuYW5ub3RhdGlvbnMsXG4gICAgYmFubmVyX2luc3RydWN0aW9uczogY29uZmlnLmJhbm5lckluc3RydWN0aW9ucyxcbiAgICBjb250aW51ZV9zdHJhaWdodDogY29uZmlnLmNvbnRpbnVlU3RyYWlnaHQsXG4gICAgZXhjbHVkZTogY29uZmlnLmV4Y2x1ZGUsXG4gICAgZ2VvbWV0cmllczogY29uZmlnLmdlb21ldHJpZXMsXG4gICAgbGFuZ3VhZ2U6IGNvbmZpZy5sYW5ndWFnZSxcbiAgICBvdmVydmlldzogY29uZmlnLm92ZXJ2aWV3LFxuICAgIHJvdW5kYWJvdXRfZXhpdHM6IGNvbmZpZy5yb3VuZGFib3V0RXhpdHMsXG4gICAgc3RlcHM6IGNvbmZpZy5zdGVwcyxcbiAgICB2b2ljZV9pbnN0cnVjdGlvbnM6IGNvbmZpZy52b2ljZUluc3RydWN0aW9ucyxcbiAgICB2b2ljZV91bml0czogY29uZmlnLnZvaWNlVW5pdHMsXG4gICAgYXBwcm9hY2hlczogcGF0aC5hcHByb2FjaCxcbiAgICBiZWFyaW5nczogcGF0aC5iZWFyaW5nLFxuICAgIHJhZGl1c2VzOiBwYXRoLnJhZGl1cyxcbiAgICB3YXlwb2ludF9uYW1lczogcGF0aC53YXlwb2ludE5hbWVcbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXMuY2xpZW50LmNyZWF0ZVJlcXVlc3Qoe1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgcGF0aDogJy9kaXJlY3Rpb25zL3Y1L21hcGJveC86cHJvZmlsZS86Y29vcmRpbmF0ZXMnLFxuICAgIHBhcmFtczoge1xuICAgICAgcHJvZmlsZTogY29uZmlnLnByb2ZpbGUsXG4gICAgICBjb29yZGluYXRlczogcGF0aC5jb29yZGluYXRlcy5qb2luKCc7JylcbiAgICB9LFxuICAgIHF1ZXJ5OiBvYmplY3RDbGVhbihxdWVyeSlcbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVNlcnZpY2VGYWN0b3J5KERpcmVjdGlvbnMpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvQG1hcGJveC9tYXBib3gtc2RrL3NlcnZpY2VzL2RpcmVjdGlvbnMuanNcbi8vIG1vZHVsZSBpZCA9IDQ0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0Jztcbi8qKlxuICogVmFsaWRhdG9ycyBhcmUgZnVuY3Rpb25zIHdoaWNoIGFzc2VydCBjZXJ0YWluIHR5cGUuXG4gKiBUaGV5IGNhbiByZXR1cm4gYSBzdHJpbmcgd2hpY2ggY2FuIHRoZW4gYmUgdXNlZFxuICogdG8gZGlzcGxheSBhIGhlbHBmdWwgZXJyb3IgbWVzc2FnZS5cbiAqIFRoZXkgY2FuIGFsc28gcmV0dXJuIGEgZnVuY3Rpb24gZm9yIGEgY3VzdG9tIGVycm9yIG1lc3NhZ2UuXG4gKi9cbnZhciBpc1BsYWluT2JqZWN0ID0gcmVxdWlyZSgnaXMtcGxhaW4tb2JqJyk7XG52YXIgeHRlbmQgPSByZXF1aXJlKCd4dGVuZCcpO1xuXG52YXIgREVGQVVMVF9FUlJPUl9QQVRIID0gJ3ZhbHVlJztcbnZhciBORVdMSU5FX0lOREVOVCA9ICdcXG4gICc7XG5cbnZhciB2ID0ge307XG5cbi8qKlxuICogUnVubmVyc1xuICpcbiAqIFRha2Ugcm9vdCB2YWxpZGF0b3JzIGFuZCBydW4gYXNzZXJ0aW9uXG4gKi9cbnYuYXNzZXJ0ID0gZnVuY3Rpb24ocm9vdFZhbGlkYXRvciwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIG1lc3NhZ2UgPSB2YWxpZGF0ZShyb290VmFsaWRhdG9yLCB2YWx1ZSk7XG4gICAgLy8gYWxsIGdvb2RcbiAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZXJyb3JNZXNzYWdlID0gcHJvY2Vzc01lc3NhZ2UobWVzc2FnZSwgb3B0aW9ucyk7XG5cbiAgICBpZiAob3B0aW9ucy5hcGlOYW1lKSB7XG4gICAgICBlcnJvck1lc3NhZ2UgPSBvcHRpb25zLmFwaU5hbWUgKyAnOiAnICsgZXJyb3JNZXNzYWdlO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICB9O1xufTtcblxuLyoqXG4gKiBIaWdoZXIgT3JkZXIgVmFsaWRhdG9yc1xuICpcbiAqIHZhbGlkYXRvcnMgd2hpY2ggdGFrZSBvdGhlciB2YWxpZGF0b3JzIGFzIGlucHV0XG4gKiBhbmQgb3V0cHV0IGEgbmV3IHZhbGlkYXRvclxuICovXG52LnNoYXBlID0gZnVuY3Rpb24gc2hhcGUodmFsaWRhdG9yT2JqKSB7XG4gIHZhciB2YWxpZGF0b3JzID0gb2JqZWN0RW50cmllcyh2YWxpZGF0b3JPYmopO1xuICByZXR1cm4gZnVuY3Rpb24gc2hhcGVWYWxpZGF0b3IodmFsdWUpIHtcbiAgICB2YXIgdmFsaWRhdGlvblJlc3VsdCA9IHZhbGlkYXRlKHYucGxhaW5PYmplY3QsIHZhbHVlKTtcblxuICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0KSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdDtcbiAgICB9XG5cbiAgICB2YXIga2V5LCB2YWxpZGF0b3I7XG4gICAgdmFyIGVycm9yTWVzc2FnZXMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsaWRhdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0gdmFsaWRhdG9yc1tpXS5rZXk7XG4gICAgICB2YWxpZGF0b3IgPSB2YWxpZGF0b3JzW2ldLnZhbHVlO1xuICAgICAgdmFsaWRhdGlvblJlc3VsdCA9IHZhbGlkYXRlKHZhbGlkYXRvciwgdmFsdWVba2V5XSk7XG5cbiAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0KSB7XG4gICAgICAgIC8vIHJldHVybiBba2V5XS5jb25jYXQodmFsaWRhdGlvblJlc3VsdCk7XG4gICAgICAgIGVycm9yTWVzc2FnZXMucHVzaChba2V5XS5jb25jYXQodmFsaWRhdGlvblJlc3VsdCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlcnJvck1lc3NhZ2VzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHJldHVybiBlcnJvck1lc3NhZ2VzWzBdO1xuICAgIH1cblxuICAgIC8vIGVudW1lcmF0ZSBhbGwgdGhlIGVycm9yIG1lc3NhZ2VzXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIGVycm9yTWVzc2FnZXMgPSBlcnJvck1lc3NhZ2VzLm1hcChmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICAgIHZhciBrZXkgPSBtZXNzYWdlWzBdO1xuICAgICAgICB2YXIgcmVuZGVyZWRNZXNzYWdlID0gcHJvY2Vzc01lc3NhZ2UobWVzc2FnZSwgb3B0aW9ucylcbiAgICAgICAgICAuc3BsaXQoJ1xcbicpXG4gICAgICAgICAgLmpvaW4oTkVXTElORV9JTkRFTlQpOyAvLyBpbmRlbnRzIGFueSBpbm5lciBuZXN0aW5nXG4gICAgICAgIHJldHVybiAnLSAnICsga2V5ICsgJzogJyArIHJlbmRlcmVkTWVzc2FnZTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgb2JqZWN0SWQgPSBvcHRpb25zLnBhdGguam9pbignLicpO1xuICAgICAgdmFyIG9mUGhyYXNlID0gb2JqZWN0SWQgPT09IERFRkFVTFRfRVJST1JfUEFUSCA/ICcnIDogJyBvZiAnICsgb2JqZWN0SWQ7XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgICdUaGUgZm9sbG93aW5nIHByb3BlcnRpZXMnICtcbiAgICAgICAgb2ZQaHJhc2UgK1xuICAgICAgICAnIGhhdmUgaW52YWxpZCB2YWx1ZXM6JyArXG4gICAgICAgIE5FV0xJTkVfSU5ERU5UICtcbiAgICAgICAgZXJyb3JNZXNzYWdlcy5qb2luKE5FV0xJTkVfSU5ERU5UKVxuICAgICAgKTtcbiAgICB9O1xuICB9O1xufTtcblxudi5zdHJpY3RTaGFwZSA9IGZ1bmN0aW9uIHN0cmljdFNoYXBlKHZhbGlkYXRvck9iaikge1xuICB2YXIgc2hhcGVWYWxpZGF0b3IgPSB2LnNoYXBlKHZhbGlkYXRvck9iaik7XG4gIHJldHVybiBmdW5jdGlvbiBzdHJpY3RTaGFwZVZhbGlkYXRvcih2YWx1ZSkge1xuICAgIHZhciBzaGFwZVJlc3VsdCA9IHNoYXBlVmFsaWRhdG9yKHZhbHVlKTtcbiAgICBpZiAoc2hhcGVSZXN1bHQpIHtcbiAgICAgIHJldHVybiBzaGFwZVJlc3VsdDtcbiAgICB9XG5cbiAgICB2YXIgaW52YWxpZEtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSkucmVkdWNlKGZ1bmN0aW9uKG1lbW8sIHZhbHVlS2V5KSB7XG4gICAgICBpZiAodmFsaWRhdG9yT2JqW3ZhbHVlS2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG1lbW8ucHVzaCh2YWx1ZUtleSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWVtbztcbiAgICB9LCBbXSk7XG5cbiAgICBpZiAoaW52YWxpZEtleXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnVGhlIGZvbGxvd2luZyBrZXlzIGFyZSBpbnZhbGlkOiAnICsgaW52YWxpZEtleXMuam9pbignLCAnKTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufTtcblxudi5hcnJheU9mID0gZnVuY3Rpb24gYXJyYXlPZih2YWxpZGF0b3IpIHtcbiAgcmV0dXJuIGNyZWF0ZUFycmF5VmFsaWRhdG9yKHZhbGlkYXRvcik7XG59O1xuXG52LnR1cGxlID0gZnVuY3Rpb24gdHVwbGUoKSB7XG4gIHZhciB2YWxpZGF0b3JzID0gQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pXG4gICAgPyBhcmd1bWVudHNbMF1cbiAgICA6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gIHJldHVybiBjcmVhdGVBcnJheVZhbGlkYXRvcih2YWxpZGF0b3JzKTtcbn07XG5cbi8vIEN1cnJlbnRseSBhcnJheSB2YWxpZGF0aW9uIGZhaWxzIHdoZW4gdGhlIGZpcnN0IGludmFsaWQgaXRlbSBpcyBmb3VuZC5cbmZ1bmN0aW9uIGNyZWF0ZUFycmF5VmFsaWRhdG9yKHZhbGlkYXRvcnMpIHtcbiAgdmFyIHZhbGlkYXRpbmdUdXBsZSA9IEFycmF5LmlzQXJyYXkodmFsaWRhdG9ycyk7XG4gIHZhciBnZXRWYWxpZGF0b3IgPSBmdW5jdGlvbihpbmRleCkge1xuICAgIGlmICh2YWxpZGF0aW5nVHVwbGUpIHtcbiAgICAgIHJldHVybiB2YWxpZGF0b3JzW2luZGV4XTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbGlkYXRvcnM7XG4gIH07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGFycmF5VmFsaWRhdG9yKHZhbHVlKSB7XG4gICAgdmFyIHZhbGlkYXRpb25SZXN1bHQgPSB2YWxpZGF0ZSh2LnBsYWluQXJyYXksIHZhbHVlKTtcbiAgICBpZiAodmFsaWRhdGlvblJlc3VsdCkge1xuICAgICAgcmV0dXJuIHZhbGlkYXRpb25SZXN1bHQ7XG4gICAgfVxuXG4gICAgaWYgKHZhbGlkYXRpbmdUdXBsZSAmJiB2YWx1ZS5sZW5ndGggIT09IHZhbGlkYXRvcnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gJ2FuIGFycmF5IHdpdGggJyArIHZhbGlkYXRvcnMubGVuZ3RoICsgJyBpdGVtcyc7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFsaWRhdGlvblJlc3VsdCA9IHZhbGlkYXRlKGdldFZhbGlkYXRvcihpKSwgdmFsdWVbaV0pO1xuICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIFtpXS5jb25jYXQodmFsaWRhdGlvblJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG52LnJlcXVpcmVkID0gZnVuY3Rpb24gcmVxdWlyZWQodmFsaWRhdG9yKSB7XG4gIGZ1bmN0aW9uIHJlcXVpcmVkVmFsaWRhdG9yKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRFcnJvck1lc3NhZ2UoXG4gICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICBpc0FycmF5Q3VscHJpdChvcHRpb25zLnBhdGgpXG4gICAgICAgICAgICA/ICdjYW5ub3QgYmUgdW5kZWZpbmVkL251bGwuJ1xuICAgICAgICAgICAgOiAnaXMgcmVxdWlyZWQuJ1xuICAgICAgICApO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbGlkYXRvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG4gIHJlcXVpcmVkVmFsaWRhdG9yLl9fcmVxdWlyZWQgPSB0cnVlO1xuXG4gIHJldHVybiByZXF1aXJlZFZhbGlkYXRvcjtcbn07XG5cbnYub25lT2ZUeXBlID0gZnVuY3Rpb24gb25lT2ZUeXBlKCkge1xuICB2YXIgdmFsaWRhdG9ycyA9IEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKVxuICAgID8gYXJndW1lbnRzWzBdXG4gICAgOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICByZXR1cm4gZnVuY3Rpb24gb25lT2ZUeXBlVmFsaWRhdG9yKHZhbHVlKSB7XG4gICAgdmFyIG1lc3NhZ2VzID0gdmFsaWRhdG9yc1xuICAgICAgLm1hcChmdW5jdGlvbih2YWxpZGF0b3IpIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlKHZhbGlkYXRvciwgdmFsdWUpO1xuICAgICAgfSlcbiAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFzIG1hbnkgbWVzc2FnZXMgYXMgbm8uIG9mIHZhbGlkYXRvcnMsXG4gICAgLy8gdGhlbiBhdCBsZWFzdCBvbmUgdmFsaWRhdG9yIHdhcyBvayB3aXRoIHRoZSB2YWx1ZS5cbiAgICBpZiAobWVzc2FnZXMubGVuZ3RoICE9PSB2YWxpZGF0b3JzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGNoZWNrIHByaW1pdGl2ZSB0eXBlXG4gICAgaWYgKFxuICAgICAgbWVzc2FnZXMuZXZlcnkoZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZS5sZW5ndGggPT09IDEgJiYgdHlwZW9mIG1lc3NhZ2VbMF0gPT09ICdzdHJpbmcnO1xuICAgICAgfSlcbiAgICApIHtcbiAgICAgIHJldHVybiBvckxpc3QoXG4gICAgICAgIG1lc3NhZ2VzLm1hcChmdW5jdGlvbihtKSB7XG4gICAgICAgICAgcmV0dXJuIG1bMF07XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIENvbXBsZXggb25lT2ZUeXBlcyBsaWtlXG4gICAgLy8gYHYub25lT2Z0eXBlcyh2LnNoYXBlKHtuYW1lOiB2LnN0cmluZ30pYCwgYHYuc2hhcGUoe25hbWU6IHYubnVtYmVyfSkpYFxuICAgIC8vIGFyZSBjb21wbGV4IMKvXFxfKOODhClfL8KvLiBGb3IgdGhlIGN1cnJlbnQgc2NvcGUgb25seSByZXR1cm5pbmcgdGhlIGxvbmdlc3QgbWVzc2FnZS5cbiAgICByZXR1cm4gbWVzc2FnZXMucmVkdWNlKGZ1bmN0aW9uKG1heCwgYXJyKSB7XG4gICAgICByZXR1cm4gYXJyLmxlbmd0aCA+IG1heC5sZW5ndGggPyBhcnIgOiBtYXg7XG4gICAgfSk7XG4gIH07XG59O1xuXG4vKipcbiAqIE1ldGEgVmFsaWRhdG9yc1xuICogd2hpY2ggdGFrZSBvcHRpb25zIGFzIGFyZ3VtZW50IChub3QgdmFsaWRhdG9ycylcbiAqIGFuZCByZXR1cm4gYSBuZXcgcHJpbWl0aXZlIHZhbGlkYXRvclxuICovXG52LmVxdWFsID0gZnVuY3Rpb24gZXF1YWwoY29tcGFyZVdpdGgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGVxdWFsVmFsaWRhdG9yKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlICE9PSBjb21wYXJlV2l0aCkge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGNvbXBhcmVXaXRoKTtcbiAgICB9XG4gIH07XG59O1xuXG52Lm9uZU9mID0gZnVuY3Rpb24gb25lT2YoKSB7XG4gIHZhciBvcHRpb25zID0gQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pXG4gICAgPyBhcmd1bWVudHNbMF1cbiAgICA6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gIHZhciB2YWxpZGF0b3JzID0gb3B0aW9ucy5tYXAoZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdi5lcXVhbCh2YWx1ZSk7XG4gIH0pO1xuXG4gIHJldHVybiB2Lm9uZU9mVHlwZS5hcHBseSh0aGlzLCB2YWxpZGF0b3JzKTtcbn07XG5cbnYucmFuZ2UgPSBmdW5jdGlvbiByYW5nZShjb21wYXJlV2l0aCkge1xuICB2YXIgbWluID0gY29tcGFyZVdpdGhbMF07XG4gIHZhciBtYXggPSBjb21wYXJlV2l0aFsxXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJhbmdlVmFsaWRhdG9yKHZhbHVlKSB7XG4gICAgdmFyIHZhbGlkYXRpb25SZXN1bHQgPSB2YWxpZGF0ZSh2Lm51bWJlciwgdmFsdWUpO1xuXG4gICAgaWYgKHZhbGlkYXRpb25SZXN1bHQgfHwgdmFsdWUgPCBtaW4gfHwgdmFsdWUgPiBtYXgpIHtcbiAgICAgIHJldHVybiAnbnVtYmVyIGJldHdlZW4gJyArIG1pbiArICcgJiAnICsgbWF4ICsgJyAoaW5jbHVzaXZlKSc7XG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBQcmltaXRpdmUgdmFsaWRhdG9yc1xuICpcbiAqIHNpbXBsZSB2YWxpZGF0b3JzIHdoaWNoIHJldHVybiBhIHN0cmluZyBvciB1bmRlZmluZWRcbiAqL1xudi5hbnkgPSBmdW5jdGlvbiBhbnkoKSB7XG4gIHJldHVybjtcbn07XG5cbnYuYm9vbGVhbiA9IGZ1bmN0aW9uIGJvb2xlYW4odmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuICdib29sZWFuJztcbiAgfVxufTtcblxudi5udW1iZXIgPSBmdW5jdGlvbiBudW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gJ251bWJlcic7XG4gIH1cbn07XG5cbnYucGxhaW5BcnJheSA9IGZ1bmN0aW9uIHBsYWluQXJyYXkodmFsdWUpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiAnYXJyYXknO1xuICB9XG59O1xuXG52LnBsYWluT2JqZWN0ID0gZnVuY3Rpb24gcGxhaW5PYmplY3QodmFsdWUpIHtcbiAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgIHJldHVybiAnb2JqZWN0JztcbiAgfVxufTtcblxudi5zdHJpbmcgPSBmdW5jdGlvbiBzdHJpbmcodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gJ3N0cmluZyc7XG4gIH1cbn07XG5cbnYuZnVuYyA9IGZ1bmN0aW9uIGZ1bmModmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiAnZnVuY3Rpb24nO1xuICB9XG59O1xuXG5mdW5jdGlvbiB2YWxpZGF0ZSh2YWxpZGF0b3IsIHZhbHVlKSB7XG4gIC8vIGFzc2VydGlvbnMgYXJlIG9wdGlvbmFsIGJ5IGRlZmF1bHQgdW5sZXNzIHdyYXBwZWQgaW4gdi5yZXF1aXJlXG4gIGlmICh2YWx1ZSA9PSBudWxsICYmICF2YWxpZGF0b3IuaGFzT3duUHJvcGVydHkoJ19fcmVxdWlyZWQnKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciByZXN1bHQgPSB2YWxpZGF0b3IodmFsdWUpO1xuXG4gIGlmIChyZXN1bHQpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShyZXN1bHQpID8gcmVzdWx0IDogW3Jlc3VsdF07XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc01lc3NhZ2UobWVzc2FnZSwgb3B0aW9ucykge1xuICAvLyBtZXNzYWdlIGFycmF5IGZvbGxvd3MgdGhlIGNvbnZlbnRpb25cbiAgLy8gWy4uLnBhdGgsIHJlc3VsdF1cbiAgLy8gcGF0aCBpcyBhbiBhcnJheSBvZiBvYmplY3Qga2V5cyAvIGFycmF5IGluZGljZXNcbiAgLy8gcmVzdWx0IGlzIG91dHB1dCBvZiB0aGUgdmFsaWRhdG9yXG4gIHZhciBsZW4gPSBtZXNzYWdlLmxlbmd0aDtcblxuICB2YXIgcmVzdWx0ID0gbWVzc2FnZVtsZW4gLSAxXTtcbiAgdmFyIHBhdGggPSBtZXNzYWdlLnNsaWNlKDAsIGxlbiAtIDEpO1xuXG4gIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgIHBhdGggPSBbREVGQVVMVF9FUlJPUl9QQVRIXTtcbiAgfVxuICBvcHRpb25zID0geHRlbmQob3B0aW9ucywgeyBwYXRoOiBwYXRoIH0pO1xuXG4gIHJldHVybiB0eXBlb2YgcmVzdWx0ID09PSAnZnVuY3Rpb24nXG4gICAgPyByZXN1bHQob3B0aW9ucykgLy8gYWxsb3dzIGN1c3RvbWl6YXRpb24gb2YgcmVzdWx0XG4gICAgOiBmb3JtYXRFcnJvck1lc3NhZ2Uob3B0aW9ucywgcHJldHRpZnlSZXN1bHQocmVzdWx0KSk7XG59XG5cbmZ1bmN0aW9uIG9yTGlzdChsaXN0KSB7XG4gIGlmIChsaXN0Lmxlbmd0aCA8IDIpIHtcbiAgICByZXR1cm4gbGlzdFswXTtcbiAgfVxuICBpZiAobGlzdC5sZW5ndGggPT09IDIpIHtcbiAgICByZXR1cm4gbGlzdC5qb2luKCcgb3IgJyk7XG4gIH1cbiAgcmV0dXJuIGxpc3Quc2xpY2UoMCwgLTEpLmpvaW4oJywgJykgKyAnLCBvciAnICsgbGlzdC5zbGljZSgtMSk7XG59XG5cbmZ1bmN0aW9uIHByZXR0aWZ5UmVzdWx0KHJlc3VsdCkge1xuICByZXR1cm4gJ211c3QgYmUgJyArIGFkZEFydGljbGUocmVzdWx0KSArICcuJztcbn1cblxuZnVuY3Rpb24gYWRkQXJ0aWNsZShub3VuUGhyYXNlKSB7XG4gIGlmICgvXmFuPyAvLnRlc3Qobm91blBocmFzZSkpIHtcbiAgICByZXR1cm4gbm91blBocmFzZTtcbiAgfVxuICBpZiAoL15bYWVpb3VdL2kudGVzdChub3VuUGhyYXNlKSkge1xuICAgIHJldHVybiAnYW4gJyArIG5vdW5QaHJhc2U7XG4gIH1cbiAgaWYgKC9eW2Etel0vaS50ZXN0KG5vdW5QaHJhc2UpKSB7XG4gICAgcmV0dXJuICdhICcgKyBub3VuUGhyYXNlO1xuICB9XG4gIHJldHVybiBub3VuUGhyYXNlO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRFcnJvck1lc3NhZ2Uob3B0aW9ucywgcHJldHR5UmVzdWx0KSB7XG4gIHZhciBhcnJheUN1bHByaXQgPSBpc0FycmF5Q3VscHJpdChvcHRpb25zLnBhdGgpO1xuICB2YXIgb3V0cHV0ID0gb3B0aW9ucy5wYXRoLmpvaW4oJy4nKSArICcgJyArIHByZXR0eVJlc3VsdDtcbiAgdmFyIHByZXBlbmQgPSBhcnJheUN1bHByaXQgPyAnSXRlbSBhdCBwb3NpdGlvbiAnIDogJyc7XG5cbiAgcmV0dXJuIHByZXBlbmQgKyBvdXRwdXQ7XG59XG5cbmZ1bmN0aW9uIGlzQXJyYXlDdWxwcml0KHBhdGgpIHtcbiAgcmV0dXJuIHR5cGVvZiBwYXRoW3BhdGgubGVuZ3RoIC0gMV0gPT0gJ251bWJlcicgfHwgdHlwZW9mIHBhdGhbMF0gPT0gJ251bWJlcic7XG59XG5cbmZ1bmN0aW9uIG9iamVjdEVudHJpZXMob2JqKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvYmogfHwge30pLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4geyBrZXk6IGtleSwgdmFsdWU6IG9ialtrZXldIH07XG4gIH0pO1xufVxuXG52LnZhbGlkYXRlID0gdmFsaWRhdGU7XG52LnByb2Nlc3NNZXNzYWdlID0gcHJvY2Vzc01lc3NhZ2U7XG5cbm1vZHVsZS5leHBvcnRzID0gdjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL0BtYXBib3gvZnVzc3BvdC9saWIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDQ1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHgpIHtcblx0dmFyIHByb3RvdHlwZTtcblx0cmV0dXJuIHRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IE9iamVjdF0nICYmIChwcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoeCksIHByb3RvdHlwZSA9PT0gbnVsbCB8fCBwcm90b3R5cGUgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih7fSkpO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2lzLXBsYWluLW9iai9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyohIGh0dHA6Ly9tdGhzLmJlL2Jhc2U2NCB2MC4xLjAgYnkgQG1hdGhpYXMgfCBNSVQgbGljZW5zZSAqL1xuOyhmdW5jdGlvbihyb290KSB7XG5cblx0Ly8gRGV0ZWN0IGZyZWUgdmFyaWFibGVzIGBleHBvcnRzYC5cblx0dmFyIGZyZWVFeHBvcnRzID0gdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgJiYgZXhwb3J0cztcblxuXHQvLyBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgbW9kdWxlYC5cblx0dmFyIGZyZWVNb2R1bGUgPSB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZSAmJlxuXHRcdG1vZHVsZS5leHBvcnRzID09IGZyZWVFeHBvcnRzICYmIG1vZHVsZTtcblxuXHQvLyBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCwgZnJvbSBOb2RlLmpzIG9yIEJyb3dzZXJpZmllZCBjb2RlLCBhbmQgdXNlXG5cdC8vIGl0IGFzIGByb290YC5cblx0dmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbDtcblx0aWYgKGZyZWVHbG9iYWwuZ2xvYmFsID09PSBmcmVlR2xvYmFsIHx8IGZyZWVHbG9iYWwud2luZG93ID09PSBmcmVlR2xvYmFsKSB7XG5cdFx0cm9vdCA9IGZyZWVHbG9iYWw7XG5cdH1cblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHR2YXIgSW52YWxpZENoYXJhY3RlckVycm9yID0gZnVuY3Rpb24obWVzc2FnZSkge1xuXHRcdHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdH07XG5cdEludmFsaWRDaGFyYWN0ZXJFcnJvci5wcm90b3R5cGUgPSBuZXcgRXJyb3I7XG5cdEludmFsaWRDaGFyYWN0ZXJFcnJvci5wcm90b3R5cGUubmFtZSA9ICdJbnZhbGlkQ2hhcmFjdGVyRXJyb3InO1xuXG5cdHZhciBlcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblx0XHQvLyBOb3RlOiB0aGUgZXJyb3IgbWVzc2FnZXMgdXNlZCB0aHJvdWdob3V0IHRoaXMgZmlsZSBtYXRjaCB0aG9zZSB1c2VkIGJ5XG5cdFx0Ly8gdGhlIG5hdGl2ZSBgYXRvYmAvYGJ0b2FgIGltcGxlbWVudGF0aW9uIGluIENocm9taXVtLlxuXHRcdHRocm93IG5ldyBJbnZhbGlkQ2hhcmFjdGVyRXJyb3IobWVzc2FnZSk7XG5cdH07XG5cblx0dmFyIFRBQkxFID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xuXHQvLyBodHRwOi8vd2hhdHdnLm9yZy9odG1sL2NvbW1vbi1taWNyb3N5bnRheGVzLmh0bWwjc3BhY2UtY2hhcmFjdGVyXG5cdHZhciBSRUdFWF9TUEFDRV9DSEFSQUNURVJTID0gL1tcXHRcXG5cXGZcXHIgXS9nO1xuXG5cdC8vIGBkZWNvZGVgIGlzIGRlc2lnbmVkIHRvIGJlIGZ1bGx5IGNvbXBhdGlibGUgd2l0aCBgYXRvYmAgYXMgZGVzY3JpYmVkIGluIHRoZVxuXHQvLyBIVE1MIFN0YW5kYXJkLiBodHRwOi8vd2hhdHdnLm9yZy9odG1sL3dlYmFwcGFwaXMuaHRtbCNkb20td2luZG93YmFzZTY0LWF0b2Jcblx0Ly8gVGhlIG9wdGltaXplZCBiYXNlNjQtZGVjb2RpbmcgYWxnb3JpdGhtIHVzZWQgaXMgYmFzZWQgb24gQGF0a+KAmXMgZXhjZWxsZW50XG5cdC8vIGltcGxlbWVudGF0aW9uLiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9hdGsvMTAyMDM5NlxuXHR2YXIgZGVjb2RlID0gZnVuY3Rpb24oaW5wdXQpIHtcblx0XHRpbnB1dCA9IFN0cmluZyhpbnB1dClcblx0XHRcdC5yZXBsYWNlKFJFR0VYX1NQQUNFX0NIQVJBQ1RFUlMsICcnKTtcblx0XHR2YXIgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuXHRcdGlmIChsZW5ndGggJSA0ID09IDApIHtcblx0XHRcdGlucHV0ID0gaW5wdXQucmVwbGFjZSgvPT0/JC8sICcnKTtcblx0XHRcdGxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcblx0XHR9XG5cdFx0aWYgKFxuXHRcdFx0bGVuZ3RoICUgNCA9PSAxIHx8XG5cdFx0XHQvLyBodHRwOi8vd2hhdHdnLm9yZy9DI2FscGhhbnVtZXJpYy1hc2NpaS1jaGFyYWN0ZXJzXG5cdFx0XHQvW14rYS16QS1aMC05L10vLnRlc3QoaW5wdXQpXG5cdFx0KSB7XG5cdFx0XHRlcnJvcihcblx0XHRcdFx0J0ludmFsaWQgY2hhcmFjdGVyOiB0aGUgc3RyaW5nIHRvIGJlIGRlY29kZWQgaXMgbm90IGNvcnJlY3RseSBlbmNvZGVkLidcblx0XHRcdCk7XG5cdFx0fVxuXHRcdHZhciBiaXRDb3VudGVyID0gMDtcblx0XHR2YXIgYml0U3RvcmFnZTtcblx0XHR2YXIgYnVmZmVyO1xuXHRcdHZhciBvdXRwdXQgPSAnJztcblx0XHR2YXIgcG9zaXRpb24gPSAtMTtcblx0XHR3aGlsZSAoKytwb3NpdGlvbiA8IGxlbmd0aCkge1xuXHRcdFx0YnVmZmVyID0gVEFCTEUuaW5kZXhPZihpbnB1dC5jaGFyQXQocG9zaXRpb24pKTtcblx0XHRcdGJpdFN0b3JhZ2UgPSBiaXRDb3VudGVyICUgNCA/IGJpdFN0b3JhZ2UgKiA2NCArIGJ1ZmZlciA6IGJ1ZmZlcjtcblx0XHRcdC8vIFVubGVzcyB0aGlzIGlzIHRoZSBmaXJzdCBvZiBhIGdyb3VwIG9mIDQgY2hhcmFjdGVyc+KAplxuXHRcdFx0aWYgKGJpdENvdW50ZXIrKyAlIDQpIHtcblx0XHRcdFx0Ly8g4oCmY29udmVydCB0aGUgZmlyc3QgOCBiaXRzIHRvIGEgc2luZ2xlIEFTQ0lJIGNoYXJhY3Rlci5cblx0XHRcdFx0b3V0cHV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoXG5cdFx0XHRcdFx0MHhGRiAmIGJpdFN0b3JhZ2UgPj4gKC0yICogYml0Q291bnRlciAmIDYpXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBvdXRwdXQ7XG5cdH07XG5cblx0Ly8gYGVuY29kZWAgaXMgZGVzaWduZWQgdG8gYmUgZnVsbHkgY29tcGF0aWJsZSB3aXRoIGBidG9hYCBhcyBkZXNjcmliZWQgaW4gdGhlXG5cdC8vIEhUTUwgU3RhbmRhcmQ6IGh0dHA6Ly93aGF0d2cub3JnL2h0bWwvd2ViYXBwYXBpcy5odG1sI2RvbS13aW5kb3diYXNlNjQtYnRvYVxuXHR2YXIgZW5jb2RlID0gZnVuY3Rpb24oaW5wdXQpIHtcblx0XHRpbnB1dCA9IFN0cmluZyhpbnB1dCk7XG5cdFx0aWYgKC9bXlxcMC1cXHhGRl0vLnRlc3QoaW5wdXQpKSB7XG5cdFx0XHQvLyBOb3RlOiBubyBuZWVkIHRvIHNwZWNpYWwtY2FzZSBhc3RyYWwgc3ltYm9scyBoZXJlLCBhcyBzdXJyb2dhdGVzIGFyZVxuXHRcdFx0Ly8gbWF0Y2hlZCwgYW5kIHRoZSBpbnB1dCBpcyBzdXBwb3NlZCB0byBvbmx5IGNvbnRhaW4gQVNDSUkgYW55d2F5LlxuXHRcdFx0ZXJyb3IoXG5cdFx0XHRcdCdUaGUgc3RyaW5nIHRvIGJlIGVuY29kZWQgY29udGFpbnMgY2hhcmFjdGVycyBvdXRzaWRlIG9mIHRoZSAnICtcblx0XHRcdFx0J0xhdGluMSByYW5nZS4nXG5cdFx0XHQpO1xuXHRcdH1cblx0XHR2YXIgcGFkZGluZyA9IGlucHV0Lmxlbmd0aCAlIDM7XG5cdFx0dmFyIG91dHB1dCA9ICcnO1xuXHRcdHZhciBwb3NpdGlvbiA9IC0xO1xuXHRcdHZhciBhO1xuXHRcdHZhciBiO1xuXHRcdHZhciBjO1xuXHRcdHZhciBkO1xuXHRcdHZhciBidWZmZXI7XG5cdFx0Ly8gTWFrZSBzdXJlIGFueSBwYWRkaW5nIGlzIGhhbmRsZWQgb3V0c2lkZSBvZiB0aGUgbG9vcC5cblx0XHR2YXIgbGVuZ3RoID0gaW5wdXQubGVuZ3RoIC0gcGFkZGluZztcblxuXHRcdHdoaWxlICgrK3Bvc2l0aW9uIDwgbGVuZ3RoKSB7XG5cdFx0XHQvLyBSZWFkIHRocmVlIGJ5dGVzLCBpLmUuIDI0IGJpdHMuXG5cdFx0XHRhID0gaW5wdXQuY2hhckNvZGVBdChwb3NpdGlvbikgPDwgMTY7XG5cdFx0XHRiID0gaW5wdXQuY2hhckNvZGVBdCgrK3Bvc2l0aW9uKSA8PCA4O1xuXHRcdFx0YyA9IGlucHV0LmNoYXJDb2RlQXQoKytwb3NpdGlvbik7XG5cdFx0XHRidWZmZXIgPSBhICsgYiArIGM7XG5cdFx0XHQvLyBUdXJuIHRoZSAyNCBiaXRzIGludG8gZm91ciBjaHVua3Mgb2YgNiBiaXRzIGVhY2gsIGFuZCBhcHBlbmQgdGhlXG5cdFx0XHQvLyBtYXRjaGluZyBjaGFyYWN0ZXIgZm9yIGVhY2ggb2YgdGhlbSB0byB0aGUgb3V0cHV0LlxuXHRcdFx0b3V0cHV0ICs9IChcblx0XHRcdFx0VEFCTEUuY2hhckF0KGJ1ZmZlciA+PiAxOCAmIDB4M0YpICtcblx0XHRcdFx0VEFCTEUuY2hhckF0KGJ1ZmZlciA+PiAxMiAmIDB4M0YpICtcblx0XHRcdFx0VEFCTEUuY2hhckF0KGJ1ZmZlciA+PiA2ICYgMHgzRikgK1xuXHRcdFx0XHRUQUJMRS5jaGFyQXQoYnVmZmVyICYgMHgzRilcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0aWYgKHBhZGRpbmcgPT0gMikge1xuXHRcdFx0YSA9IGlucHV0LmNoYXJDb2RlQXQocG9zaXRpb24pIDw8IDg7XG5cdFx0XHRiID0gaW5wdXQuY2hhckNvZGVBdCgrK3Bvc2l0aW9uKTtcblx0XHRcdGJ1ZmZlciA9IGEgKyBiO1xuXHRcdFx0b3V0cHV0ICs9IChcblx0XHRcdFx0VEFCTEUuY2hhckF0KGJ1ZmZlciA+PiAxMCkgK1xuXHRcdFx0XHRUQUJMRS5jaGFyQXQoKGJ1ZmZlciA+PiA0KSAmIDB4M0YpICtcblx0XHRcdFx0VEFCTEUuY2hhckF0KChidWZmZXIgPDwgMikgJiAweDNGKSArXG5cdFx0XHRcdCc9J1xuXHRcdFx0KTtcblx0XHR9IGVsc2UgaWYgKHBhZGRpbmcgPT0gMSkge1xuXHRcdFx0YnVmZmVyID0gaW5wdXQuY2hhckNvZGVBdChwb3NpdGlvbik7XG5cdFx0XHRvdXRwdXQgKz0gKFxuXHRcdFx0XHRUQUJMRS5jaGFyQXQoYnVmZmVyID4+IDIpICtcblx0XHRcdFx0VEFCTEUuY2hhckF0KChidWZmZXIgPDwgNCkgJiAweDNGKSArXG5cdFx0XHRcdCc9PSdcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG91dHB1dDtcblx0fTtcblxuXHR2YXIgYmFzZTY0ID0ge1xuXHRcdCdlbmNvZGUnOiBlbmNvZGUsXG5cdFx0J2RlY29kZSc6IGRlY29kZSxcblx0XHQndmVyc2lvbic6ICcwLjEuMCdcblx0fTtcblxuXHQvLyBTb21lIEFNRCBidWlsZCBvcHRpbWl6ZXJzLCBsaWtlIHIuanMsIGNoZWNrIGZvciBzcGVjaWZpYyBjb25kaXRpb24gcGF0dGVybnNcblx0Ly8gbGlrZSB0aGUgZm9sbG93aW5nOlxuXHRpZiAoXG5cdFx0dHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmXG5cdFx0dHlwZW9mIGRlZmluZS5hbWQgPT0gJ29iamVjdCcgJiZcblx0XHRkZWZpbmUuYW1kXG5cdCkge1xuXHRcdGRlZmluZShmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBiYXNlNjQ7XG5cdFx0fSk7XG5cdH1cdGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmICFmcmVlRXhwb3J0cy5ub2RlVHlwZSkge1xuXHRcdGlmIChmcmVlTW9kdWxlKSB7IC8vIGluIE5vZGUuanMgb3IgUmluZ29KUyB2MC44LjArXG5cdFx0XHRmcmVlTW9kdWxlLmV4cG9ydHMgPSBiYXNlNjQ7XG5cdFx0fSBlbHNlIHsgLy8gaW4gTmFyd2hhbCBvciBSaW5nb0pTIHYwLjcuMC1cblx0XHRcdGZvciAodmFyIGtleSBpbiBiYXNlNjQpIHtcblx0XHRcdFx0YmFzZTY0Lmhhc093blByb3BlcnR5KGtleSkgJiYgKGZyZWVFeHBvcnRzW2tleV0gPSBiYXNlNjRba2V5XSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2UgeyAvLyBpbiBSaGlubyBvciBhIHdlYiBicm93c2VyXG5cdFx0cm9vdC5iYXNlNjQgPSBiYXNlNjQ7XG5cdH1cblxufSh0aGlzKSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9iYXNlLTY0L2Jhc2U2NC5qc1xuLy8gbW9kdWxlIGlkID0gNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0aWYoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcblx0XHRtb2R1bGUucGF0aHMgPSBbXTtcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcblx0XHRpZighbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImxvYWRlZFwiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5sO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwiaWRcIiwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBtb2R1bGUuaTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0fVxuXHRyZXR1cm4gbW9kdWxlO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL21vZHVsZS5qc1xuLy8gbW9kdWxlIGlkID0gNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcGFyc2VUb2tlbiA9IHJlcXVpcmUoJ0BtYXBib3gvcGFyc2UtbWFwYm94LXRva2VuJyk7XG52YXIgeHRlbmQgPSByZXF1aXJlKCd4dGVuZCcpO1xudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50ZW1pdHRlcjMnKTtcbnZhciB1cmxVdGlscyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvdXJsLXV0aWxzJyk7XG52YXIgY29uc3RhbnRzID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzJyk7XG5cbnZhciByZXF1ZXN0SWQgPSAxO1xuXG4vKipcbiAqIEEgTWFwYm94IEFQSSByZXF1ZXN0LlxuICpcbiAqIE5vdGUgdGhhdCBjcmVhdGluZyBhIGBNYXBpUmVxdWVzdGAgZG9lcyAqbm90KiBzZW5kIHRoZSByZXF1ZXN0IGF1dG9tYXRpY2FsbHkuXG4gKiBVc2UgdGhlIHJlcXVlc3QncyBgc2VuZGAgbWV0aG9kIHRvIHNlbmQgaXQgb2ZmIGFuZCBnZXQgYSBgUHJvbWlzZWAuXG4gKlxuICogVGhlIGBlbWl0dGVyYCBwcm9wZXJ0eSBpcyBhbiBgRXZlbnRFbWl0dGVyYCB0aGF0IGVtaXRzIHRoZSBmb2xsb3dpbmcgZXZlbnRzOlxuICpcbiAqIC0gYCdyZXNwb25zZSdgIC0gTGlzdGVuZXJzIHdpbGwgYmUgY2FsbGVkIHdpdGggYSBgTWFwaVJlc3BvbnNlYC5cbiAqIC0gYCdlcnJvcidgIC0gTGlzdGVuZXJzIHdpbGwgYmUgY2FsbGVkIHdpdGggYSBgTWFwaUVycm9yYC5cbiAqIC0gYCdkb3dubG9hZFByb2dyZXNzJ2AgLSBMaXN0ZW5lcnMgd2lsbCBiZSBjYWxsZWQgd2l0aCBgUHJvZ3Jlc3NFdmVudHNgLlxuICogLSBgJ3VwbG9hZFByb2dyZXNzJ2AgLSBMaXN0ZW5lcnMgd2lsbCBiZSBjYWxsZWQgd2l0aCBgUHJvZ3Jlc3NFdmVudHNgLlxuICogICBVcGxvYWQgZXZlbnRzIGFyZSBvbmx5IGF2YWlsYWJsZSB3aGVuIHRoZSByZXF1ZXN0IGluY2x1ZGVzIGEgZmlsZS5cbiAqXG4gKiBAY2xhc3MgTWFwaVJlcXVlc3RcbiAqIEBwcm9wZXJ0eSB7RXZlbnRFbWl0dGVyfSBlbWl0dGVyIC0gQW4gZXZlbnQgZW1pdHRlci4gU2VlIGFib3ZlLlxuICogQHByb3BlcnR5IHtNYXBpQ2xpZW50fSBjbGllbnQgLSBUaGlzIHJlcXVlc3QncyBgTWFwaUNsaWVudGAuXG4gKiBAcHJvcGVydHkge01hcGlSZXNwb25zZXxudWxsfSByZXNwb25zZSAtIElmIHRoaXMgcmVxdWVzdCBoYXMgYmVlbiBzZW50IGFuZCByZWNlaXZlZFxuICogICBhIHJlc3BvbnNlLCB0aGUgcmVzcG9uc2UgaXMgYXZhaWxhYmxlIG9uIHRoaXMgcHJvcGVydHkuXG4gKiBAcHJvcGVydHkge01hcGlFcnJvcnxFcnJvcnxudWxsfSBlcnJvciAtIElmIHRoaXMgcmVxdWVzdCBoYXMgYmVlbiBzZW50IGFuZFxuICogICByZWNlaXZlZCBhbiBlcnJvciBpbiByZXNwb25zZSwgdGhlIGVycm9yIGlzIGF2YWlsYWJsZSBvbiB0aGlzIHByb3BlcnR5LlxuICogQHByb3BlcnR5IHtib29sZWFufSBhYm9ydGVkIC0gSWYgdGhlIHJlcXVlc3QgaGFzIGJlZW4gYWJvcnRlZFxuICogICAodmlhIFtgYWJvcnRgXSgjYWJvcnQpKSwgdGhpcyBwcm9wZXJ0eSB3aWxsIGJlIGB0cnVlYC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gc2VudCAtIElmIHRoZSByZXF1ZXN0IGhhcyBiZWVuIHNlbnQsIHRoaXMgcHJvcGVydHkgd2lsbFxuICogICBiZSBgdHJ1ZWAuIFlvdSBjYW5ub3Qgc2VuZCB0aGUgc2FtZSByZXF1ZXN0IHR3aWNlLCBzbyBpZiB5b3UgbmVlZCB0byBjcmVhdGVcbiAqICAgYSBuZXcgcmVxdWVzdCB0aGF0IGlzIHRoZSBlcXVpdmFsZW50IG9mIGFuIGV4aXN0aW5nIG9uZSwgdXNlXG4gKiAgIFtgY2xvbmVgXSgjY2xvbmUpLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHBhdGggLSBUaGUgcmVxdWVzdCdzIHBhdGgsIGluY2x1ZGluZyBjb2xvbi1wcmVmaXhlZCByb3V0ZVxuICogICBwYXJhbWV0ZXJzLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IG9yaWdpbiAtIFRoZSByZXF1ZXN0J3Mgb3JpZ2luLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IG1ldGhvZCAtIFRoZSByZXF1ZXN0J3MgSFRUUCBtZXRob2QuXG4gKiBAcHJvcGVydHkge09iamVjdH0gcXVlcnkgLSBBIHF1ZXJ5IG9iamVjdCwgd2hpY2ggd2lsbCBiZSB0cmFuc2Zvcm1lZCBpbnRvXG4gKiAgIGEgVVJMIHF1ZXJ5IHN0cmluZy5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBwYXJhbXMgLSBBIHJvdXRlIHBhcmFtZXRlcnMgb2JqZWN0LCB3aG9zZSB2YWx1ZXMgd2lsbFxuICogICBiZSBpbnRlcnBvbGF0ZWQgdGhlIHBhdGguXG4gKiBAcHJvcGVydHkge09iamVjdH0gaGVhZGVycyAtIFRoZSByZXF1ZXN0J3MgaGVhZGVycyxcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fHN0cmluZ3xudWxsfSBib2R5IC0gRGF0YSB0byBzZW5kIHdpdGggdGhlIHJlcXVlc3QuXG4gKiAgIElmIHRoZSByZXF1ZXN0IGhhcyBhIGJvZHksIGl0IHdpbGwgYWxzbyBiZSBzZW50IHdpdGggdGhlIGhlYWRlclxuICogICBgJ0NvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbidgLlxuICogQHByb3BlcnR5IHtCbG9ifEFycmF5QnVmZmVyfHN0cmluZ3xSZWFkU3RyZWFtfSBmaWxlIC0gQSBmaWxlIHRvXG4gKiAgIHNlbmQgd2l0aCB0aGUgcmVxdWVzdC4gVGhlIGJyb3dzZXIgY2xpZW50IGFjY2VwdHMgQmxvYnMgYW5kIEFycmF5QnVmZmVycztcbiAqICAgdGhlIE5vZGUgY2xpZW50IGFjY2VwdHMgc3RyaW5ncyAoZmlsZXBhdGhzKSBhbmQgUmVhZFN0cmVhbXMuXG4gKi9cblxuLyoqXG4gKiBAaWdub3JlXG4gKiBAcGFyYW0ge01hcGlDbGllbnR9IGNsaWVudFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm1ldGhvZFxuICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMucGF0aFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnF1ZXJ5PXt9XVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnBhcmFtcz17fV1cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5vcmlnaW5dXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuaGVhZGVyc11cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5ib2R5PW51bGxdXG4gKiBAcGFyYW0ge0Jsb2J8QXJyYXlCdWZmZXJ8c3RyaW5nfFJlYWRTdHJlYW19IFtvcHRpb25zLmZpbGU9bnVsbF1cbiAqL1xuZnVuY3Rpb24gTWFwaVJlcXVlc3QoY2xpZW50LCBvcHRpb25zKSB7XG4gIGlmICghY2xpZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNYXBpUmVxdWVzdCByZXF1aXJlcyBhIGNsaWVudCcpO1xuICB9XG4gIGlmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5wYXRoIHx8ICFvcHRpb25zLm1ldGhvZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdNYXBpUmVxdWVzdCByZXF1aXJlcyBhbiBvcHRpb25zIG9iamVjdCB3aXRoIHBhdGggYW5kIG1ldGhvZCBwcm9wZXJ0aWVzJ1xuICAgICk7XG4gIH1cblxuICB2YXIgZGVmYXVsdEhlYWRlcnMgPSB7fTtcbiAgaWYgKG9wdGlvbnMuYm9keSkge1xuICAgIGRlZmF1bHRIZWFkZXJzWydjb250ZW50LXR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgfVxuXG4gIHZhciBoZWFkZXJzV2l0aERlZmF1bHRzID0geHRlbmQoZGVmYXVsdEhlYWRlcnMsIG9wdGlvbnMuaGVhZGVycyk7XG5cbiAgLy8gRGlzYWxsb3dzIGR1cGxpY2F0ZSBoZWFkZXIgbmFtZXMgb2YgbWl4ZWQgY2FzZSxcbiAgLy8gZS5nLiBDb250ZW50LVR5cGUgYW5kIGNvbnRlbnQtdHlwZS5cbiAgdmFyIGhlYWRlcnMgPSBPYmplY3Qua2V5cyhoZWFkZXJzV2l0aERlZmF1bHRzKS5yZWR1Y2UoZnVuY3Rpb24obWVtbywgbmFtZSkge1xuICAgIG1lbW9bbmFtZS50b0xvd2VyQ2FzZSgpXSA9IGhlYWRlcnNXaXRoRGVmYXVsdHNbbmFtZV07XG4gICAgcmV0dXJuIG1lbW87XG4gIH0sIHt9KTtcblxuICB0aGlzLmlkID0gcmVxdWVzdElkKys7XG4gIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuXG4gIHRoaXMuZW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XG4gIHRoaXMucmVzcG9uc2UgPSBudWxsO1xuICB0aGlzLmVycm9yID0gbnVsbDtcbiAgdGhpcy5zZW50ID0gZmFsc2U7XG4gIHRoaXMuYWJvcnRlZCA9IGZhbHNlO1xuICB0aGlzLnBhdGggPSBvcHRpb25zLnBhdGg7XG4gIHRoaXMubWV0aG9kID0gb3B0aW9ucy5tZXRob2Q7XG4gIHRoaXMub3JpZ2luID0gb3B0aW9ucy5vcmlnaW4gfHwgY2xpZW50Lm9yaWdpbjtcbiAgdGhpcy5xdWVyeSA9IG9wdGlvbnMucXVlcnkgfHwge307XG4gIHRoaXMucGFyYW1zID0gb3B0aW9ucy5wYXJhbXMgfHwge307XG4gIHRoaXMuYm9keSA9IG9wdGlvbnMuYm9keSB8fCBudWxsO1xuICB0aGlzLmZpbGUgPSBvcHRpb25zLmZpbGUgfHwgbnVsbDtcbiAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbn1cblxuLyoqXG4gKiBHZXQgdGhlIFVSTCBvZiB0aGUgcmVxdWVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gW2FjY2Vzc1Rva2VuXSAtIEJ5IGRlZmF1bHQsIHRoZSBhY2Nlc3MgdG9rZW4gb2YgdGhlIHJlcXVlc3Qnc1xuICogICBjbGllbnQgaXMgdXNlZC5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuTWFwaVJlcXVlc3QucHJvdG90eXBlLnVybCA9IGZ1bmN0aW9uIHVybChhY2Nlc3NUb2tlbikge1xuICB2YXIgdXJsID0gdXJsVXRpbHMucHJlcGVuZE9yaWdpbih0aGlzLnBhdGgsIHRoaXMub3JpZ2luKTtcbiAgdXJsID0gdXJsVXRpbHMuYXBwZW5kUXVlcnlPYmplY3QodXJsLCB0aGlzLnF1ZXJ5KTtcbiAgdmFyIHJvdXRlUGFyYW1zID0gdGhpcy5wYXJhbXM7XG4gIGlmIChhY2Nlc3NUb2tlbikge1xuICAgIHVybCA9IHVybFV0aWxzLmFwcGVuZFF1ZXJ5UGFyYW0odXJsLCAnYWNjZXNzX3Rva2VuJywgYWNjZXNzVG9rZW4pO1xuICAgIHZhciBhY2Nlc3NUb2tlbk93bmVySWQgPSBwYXJzZVRva2VuKGFjY2Vzc1Rva2VuKS51c2VyO1xuICAgIHJvdXRlUGFyYW1zID0geHRlbmQoeyBvd25lcklkOiBhY2Nlc3NUb2tlbk93bmVySWQgfSwgcm91dGVQYXJhbXMpO1xuICB9XG4gIHVybCA9IHVybFV0aWxzLmludGVycG9sYXRlUm91dGVQYXJhbXModXJsLCByb3V0ZVBhcmFtcyk7XG4gIHJldHVybiB1cmw7XG59O1xuXG4vKipcbiAqIFNlbmQgdGhlIHJlcXVlc3QuIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhIGBNYXBpUmVzcG9uc2VgLlxuICogWW91IHByb2JhYmx5IHdhbnQgdG8gdXNlIGByZXNwb25zZS5ib2R5YC5cbiAqXG4gKiBgc2VuZGAgb25seSByZXRyaWV2ZXMgdGhlIGZpcnN0IHBhZ2Ugb2YgcGFnaW5hdGVkIHJlc3VsdHMuIFlvdSBjYW4gZ2V0XG4gKiB0aGUgbmV4dCBwYWdlIGJ5IHVzaW5nIHRoZSBgTWFwaVJlc3BvbnNlYCdzIFtgbmV4dFBhZ2VgXSgjbmV4dHBhZ2UpXG4gKiBmdW5jdGlvbiwgb3IgaXRlcmF0ZSB0aHJvdWdoIGFsbCBwYWdlcyB1c2luZyBbYGVhY2hQYWdlYF0oI2VhY2hwYWdlKVxuICogaW5zdGVhZCBvZiBgc2VuZGAuXG4gKlxuICogQHJldHVybnMge1Byb21pc2U8TWFwaVJlc3BvbnNlPn1cbiAqL1xuTWFwaVJlcXVlc3QucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiBzZW5kKCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgaWYgKHNlbGYuc2VudCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdUaGlzIHJlcXVlc3QgaGFzIGFscmVhZHkgYmVlbiBzZW50LiBDaGVjayB0aGUgcmVzcG9uc2UgYW5kIGVycm9yIHByb3BlcnRpZXMuIENyZWF0ZSBhIG5ldyByZXF1ZXN0IHdpdGggY2xvbmUoKS4nXG4gICAgKTtcbiAgfVxuICBzZWxmLnNlbnQgPSB0cnVlO1xuXG4gIHJldHVybiBzZWxmLmNsaWVudC5zZW5kUmVxdWVzdChzZWxmKS50aGVuKFxuICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICBzZWxmLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICBzZWxmLmVtaXR0ZXIuZW1pdChjb25zdGFudHMuRVZFTlRfUkVTUE9OU0UsIHJlc3BvbnNlKTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9LFxuICAgIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICBzZWxmLmVycm9yID0gZXJyb3I7XG4gICAgICBzZWxmLmVtaXR0ZXIuZW1pdChjb25zdGFudHMuRVZFTlRfRVJST1IsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgKTtcbn07XG5cbi8qKlxuICogQWJvcnQgdGhlIHJlcXVlc3QuXG4gKlxuICogQW55IHBlbmRpbmcgYFByb21pc2VgIHJldHVybmVkIGJ5IFtgc2VuZGBdKCNzZW5kKSB3aWxsIGJlIHJlamVjdGVkIHdpdGhcbiAqIGFuIGVycm9yIHdpdGggYHR5cGU6ICdSZXF1ZXN0QWJvcnRlZEVycm9yJ2AuIElmIHlvdSd2ZSBjcmVhdGVkIGEgcmVxdWVzdFxuICogdGhhdCBtaWdodCBiZSBhYm9ydGVkLCB5b3UgbmVlZCB0byBjYXRjaCBhbmQgaGFuZGxlIHN1Y2ggZXJyb3JzLlxuICpcbiAqIFRoaXMgbWV0aG9kIHdpbGwgYWxzbyBhYm9ydCBhbnkgcmVxdWVzdHMgY3JlYXRlZCB3aGlsZSBmZXRjaGluZyBzdWJzZXF1ZW50XG4gKiBwYWdlcyB2aWEgW2BlYWNoUGFnZWBdKCNlYWNocGFnZSkuXG4gKlxuICogSWYgdGhlIHJlcXVlc3QgaGFzIG5vdCBiZWVuIHNlbnQgb3IgaGFzIGFscmVhZHkgYmVlbiBhYm9ydGVkLCBub3RoaW5nXG4gKiB3aWxsIGhhcHBlbi5cbiAqL1xuTWFwaVJlcXVlc3QucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24gYWJvcnQoKSB7XG4gIGlmICh0aGlzLl9uZXh0UGFnZVJlcXVlc3QpIHtcbiAgICB0aGlzLl9uZXh0UGFnZVJlcXVlc3QuYWJvcnQoKTtcbiAgICBkZWxldGUgdGhpcy5fbmV4dFBhZ2VSZXF1ZXN0O1xuICB9XG5cbiAgaWYgKHRoaXMucmVzcG9uc2UgfHwgdGhpcy5lcnJvciB8fCB0aGlzLmFib3J0ZWQpIHJldHVybjtcblxuICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuICB0aGlzLmNsaWVudC5hYm9ydFJlcXVlc3QodGhpcyk7XG59O1xuXG4vKipcbiAqIEludm9rZSBhIGNhbGxiYWNrIGZvciBlYWNoIHBhZ2Ugb2YgYSBwYWdpbmF0ZWQgQVBJIHJlc3BvbnNlLlxuICpcbiAqIFRoZSBjYWxsYmFjayBzaG91bGQgaGF2ZSB0aGUgZm9sbG93aW5nIHNpZ25hdHVyZTpcbiAqXG4gKiBgYGBqc1xuICogKFxuICogICBlcnJvcjogTWFwaUVycm9yLFxuICogICByZXNwb25zZTogTWFwaVJlc3BvbnNlLFxuICogICBuZXh0OiAoKSA9PiB2b2lkXG4gKiApID0+IHZvaWRcbiAqIGBgYFxuICpcbiAqICoqVGhlIG5leHQgcGFnZSB3aWxsIG5vdCBiZSBmZXRjaGVkIHVudGlsIHlvdSd2ZSBpbnZva2VkIHRoZVxuICogYG5leHRgIGNhbGxiYWNrKiosIGluZGljYXRpbmcgdGhhdCB5b3UncmUgcmVhZHkgZm9yIGl0LlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKi9cbk1hcGlSZXF1ZXN0LnByb3RvdHlwZS5lYWNoUGFnZSA9IGZ1bmN0aW9uIGVhY2hQYWdlKGNhbGxiYWNrKSB7XG4gIHZhciBzZWxmID0gdGhpcztcblxuICBmdW5jdGlvbiBoYW5kbGVSZXNwb25zZShyZXNwb25zZSkge1xuICAgIGZ1bmN0aW9uIGdldE5leHRQYWdlKCkge1xuICAgICAgZGVsZXRlIHNlbGYuX25leHRQYWdlUmVxdWVzdDtcbiAgICAgIHZhciBuZXh0UGFnZVJlcXVlc3QgPSByZXNwb25zZS5uZXh0UGFnZSgpO1xuICAgICAgaWYgKG5leHRQYWdlUmVxdWVzdCkge1xuICAgICAgICBzZWxmLl9uZXh0UGFnZVJlcXVlc3QgPSBuZXh0UGFnZVJlcXVlc3Q7XG4gICAgICAgIGdldFBhZ2UobmV4dFBhZ2VSZXF1ZXN0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UsIGdldE5leHRQYWdlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycm9yKSB7XG4gICAgY2FsbGJhY2soZXJyb3IsIG51bGwsIGZ1bmN0aW9uKCkge30pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UGFnZShyZXF1ZXN0KSB7XG4gICAgcmVxdWVzdC5zZW5kKCkudGhlbihoYW5kbGVSZXNwb25zZSwgaGFuZGxlRXJyb3IpO1xuICB9XG4gIGdldFBhZ2UodGhpcyk7XG59O1xuXG4vKipcbiAqIENsb25lIHRoaXMgcmVxdWVzdC5cbiAqXG4gKiBFYWNoIHJlcXVlc3QgY2FuIG9ubHkgYmUgc2VudCAqb25jZSouIFNvIGlmIHlvdSdkIGxpa2UgdG8gc2VuZCB0aGVcbiAqIHNhbWUgcmVxdWVzdCBhZ2FpbiwgY2xvbmUgaXQgYW5kIHNlbmQgYXdheS5cbiAqXG4gKiBAcmV0dXJucyB7TWFwaVJlcXVlc3R9IC0gQSBuZXcgYE1hcGlSZXF1ZXN0YCBjb25maWd1cmVkIGp1c3QgbGlrZSB0aGlzIG9uZS5cbiAqL1xuTWFwaVJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gY2xvbmUoKSB7XG4gIHJldHVybiB0aGlzLl9leHRlbmQoKTtcbn07XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5NYXBpUmVxdWVzdC5wcm90b3R5cGUuX2V4dGVuZCA9IGZ1bmN0aW9uIF9leHRlbmQob3B0aW9ucykge1xuICB2YXIgZXh0ZW5kZWRPcHRpb25zID0geHRlbmQodGhpcy5fb3B0aW9ucywgb3B0aW9ucyk7XG4gIHJldHVybiBuZXcgTWFwaVJlcXVlc3QodGhpcy5jbGllbnQsIGV4dGVuZGVkT3B0aW9ucyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1hcGlSZXF1ZXN0O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvQG1hcGJveC9tYXBib3gtc2RrL2xpYi9jbGFzc2VzL21hcGktcmVxdWVzdC5qc1xuLy8gbW9kdWxlIGlkID0gNDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eVxuICAsIHByZWZpeCA9ICd+JztcblxuLyoqXG4gKiBDb25zdHJ1Y3RvciB0byBjcmVhdGUgYSBzdG9yYWdlIGZvciBvdXIgYEVFYCBvYmplY3RzLlxuICogQW4gYEV2ZW50c2AgaW5zdGFuY2UgaXMgYSBwbGFpbiBvYmplY3Qgd2hvc2UgcHJvcGVydGllcyBhcmUgZXZlbnQgbmFtZXMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBFdmVudHMoKSB7fVxuXG4vL1xuLy8gV2UgdHJ5IHRvIG5vdCBpbmhlcml0IGZyb20gYE9iamVjdC5wcm90b3R5cGVgLiBJbiBzb21lIGVuZ2luZXMgY3JlYXRpbmcgYW5cbi8vIGluc3RhbmNlIGluIHRoaXMgd2F5IGlzIGZhc3RlciB0aGFuIGNhbGxpbmcgYE9iamVjdC5jcmVhdGUobnVsbClgIGRpcmVjdGx5LlxuLy8gSWYgYE9iamVjdC5jcmVhdGUobnVsbClgIGlzIG5vdCBzdXBwb3J0ZWQgd2UgcHJlZml4IHRoZSBldmVudCBuYW1lcyB3aXRoIGFcbi8vIGNoYXJhY3RlciB0byBtYWtlIHN1cmUgdGhhdCB0aGUgYnVpbHQtaW4gb2JqZWN0IHByb3BlcnRpZXMgYXJlIG5vdFxuLy8gb3ZlcnJpZGRlbiBvciB1c2VkIGFzIGFuIGF0dGFjayB2ZWN0b3IuXG4vL1xuaWYgKE9iamVjdC5jcmVhdGUpIHtcbiAgRXZlbnRzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgLy9cbiAgLy8gVGhpcyBoYWNrIGlzIG5lZWRlZCBiZWNhdXNlIHRoZSBgX19wcm90b19fYCBwcm9wZXJ0eSBpcyBzdGlsbCBpbmhlcml0ZWQgaW5cbiAgLy8gc29tZSBvbGQgYnJvd3NlcnMgbGlrZSBBbmRyb2lkIDQsIGlQaG9uZSA1LjEsIE9wZXJhIDExIGFuZCBTYWZhcmkgNS5cbiAgLy9cbiAgaWYgKCFuZXcgRXZlbnRzKCkuX19wcm90b19fKSBwcmVmaXggPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRhdGlvbiBvZiBhIHNpbmdsZSBldmVudCBsaXN0ZW5lci5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IGNvbnRleHQgVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHBhcmFtIHtCb29sZWFufSBbb25jZT1mYWxzZV0gU3BlY2lmeSBpZiB0aGUgbGlzdGVuZXIgaXMgYSBvbmUtdGltZSBsaXN0ZW5lci5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gRUUoZm4sIGNvbnRleHQsIG9uY2UpIHtcbiAgdGhpcy5mbiA9IGZuO1xuICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICB0aGlzLm9uY2UgPSBvbmNlIHx8IGZhbHNlO1xufVxuXG4vKipcbiAqIEFkZCBhIGxpc3RlbmVyIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7RXZlbnRFbWl0dGVyfSBlbWl0dGVyIFJlZmVyZW5jZSB0byB0aGUgYEV2ZW50RW1pdHRlcmAgaW5zdGFuY2UuXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IGNvbnRleHQgVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHBhcmFtIHtCb29sZWFufSBvbmNlIFNwZWNpZnkgaWYgdGhlIGxpc3RlbmVyIGlzIGEgb25lLXRpbWUgbGlzdGVuZXIuXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWRkTGlzdGVuZXIoZW1pdHRlciwgZXZlbnQsIGZuLCBjb250ZXh0LCBvbmNlKSB7XG4gIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICB2YXIgbGlzdGVuZXIgPSBuZXcgRUUoZm4sIGNvbnRleHQgfHwgZW1pdHRlciwgb25jZSlcbiAgICAsIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG5cbiAgaWYgKCFlbWl0dGVyLl9ldmVudHNbZXZ0XSkgZW1pdHRlci5fZXZlbnRzW2V2dF0gPSBsaXN0ZW5lciwgZW1pdHRlci5fZXZlbnRzQ291bnQrKztcbiAgZWxzZSBpZiAoIWVtaXR0ZXIuX2V2ZW50c1tldnRdLmZuKSBlbWl0dGVyLl9ldmVudHNbZXZ0XS5wdXNoKGxpc3RlbmVyKTtcbiAgZWxzZSBlbWl0dGVyLl9ldmVudHNbZXZ0XSA9IFtlbWl0dGVyLl9ldmVudHNbZXZ0XSwgbGlzdGVuZXJdO1xuXG4gIHJldHVybiBlbWl0dGVyO1xufVxuXG4vKipcbiAqIENsZWFyIGV2ZW50IGJ5IG5hbWUuXG4gKlxuICogQHBhcmFtIHtFdmVudEVtaXR0ZXJ9IGVtaXR0ZXIgUmVmZXJlbmNlIHRvIHRoZSBgRXZlbnRFbWl0dGVyYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldnQgVGhlIEV2ZW50IG5hbWUuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjbGVhckV2ZW50KGVtaXR0ZXIsIGV2dCkge1xuICBpZiAoLS1lbWl0dGVyLl9ldmVudHNDb3VudCA9PT0gMCkgZW1pdHRlci5fZXZlbnRzID0gbmV3IEV2ZW50cygpO1xuICBlbHNlIGRlbGV0ZSBlbWl0dGVyLl9ldmVudHNbZXZ0XTtcbn1cblxuLyoqXG4gKiBNaW5pbWFsIGBFdmVudEVtaXR0ZXJgIGludGVyZmFjZSB0aGF0IGlzIG1vbGRlZCBhZ2FpbnN0IHRoZSBOb2RlLmpzXG4gKiBgRXZlbnRFbWl0dGVyYCBpbnRlcmZhY2UuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgdGhpcy5fZXZlbnRzID0gbmV3IEV2ZW50cygpO1xuICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG59XG5cbi8qKlxuICogUmV0dXJuIGFuIGFycmF5IGxpc3RpbmcgdGhlIGV2ZW50cyBmb3Igd2hpY2ggdGhlIGVtaXR0ZXIgaGFzIHJlZ2lzdGVyZWRcbiAqIGxpc3RlbmVycy5cbiAqXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZXZlbnROYW1lcyA9IGZ1bmN0aW9uIGV2ZW50TmFtZXMoKSB7XG4gIHZhciBuYW1lcyA9IFtdXG4gICAgLCBldmVudHNcbiAgICAsIG5hbWU7XG5cbiAgaWYgKHRoaXMuX2V2ZW50c0NvdW50ID09PSAwKSByZXR1cm4gbmFtZXM7XG5cbiAgZm9yIChuYW1lIGluIChldmVudHMgPSB0aGlzLl9ldmVudHMpKSB7XG4gICAgaWYgKGhhcy5jYWxsKGV2ZW50cywgbmFtZSkpIG5hbWVzLnB1c2gocHJlZml4ID8gbmFtZS5zbGljZSgxKSA6IG5hbWUpO1xuICB9XG5cbiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICByZXR1cm4gbmFtZXMuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZXZlbnRzKSk7XG4gIH1cblxuICByZXR1cm4gbmFtZXM7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge0FycmF5fSBUaGUgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKGV2ZW50KSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50XG4gICAgLCBoYW5kbGVycyA9IHRoaXMuX2V2ZW50c1tldnRdO1xuXG4gIGlmICghaGFuZGxlcnMpIHJldHVybiBbXTtcbiAgaWYgKGhhbmRsZXJzLmZuKSByZXR1cm4gW2hhbmRsZXJzLmZuXTtcblxuICBmb3IgKHZhciBpID0gMCwgbCA9IGhhbmRsZXJzLmxlbmd0aCwgZWUgPSBuZXcgQXJyYXkobCk7IGkgPCBsOyBpKyspIHtcbiAgICBlZVtpXSA9IGhhbmRsZXJzW2ldLmZuO1xuICB9XG5cbiAgcmV0dXJuIGVlO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIG51bWJlciBvZiBsaXN0ZW5lcnMgbGlzdGVuaW5nIHRvIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge051bWJlcn0gVGhlIG51bWJlciBvZiBsaXN0ZW5lcnMuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uIGxpc3RlbmVyQ291bnQoZXZlbnQpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnRcbiAgICAsIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldnRdO1xuXG4gIGlmICghbGlzdGVuZXJzKSByZXR1cm4gMDtcbiAgaWYgKGxpc3RlbmVycy5mbikgcmV0dXJuIDE7XG4gIHJldHVybiBsaXN0ZW5lcnMubGVuZ3RoO1xufTtcblxuLyoqXG4gKiBDYWxscyBlYWNoIG9mIHRoZSBsaXN0ZW5lcnMgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBldmVudCBoYWQgbGlzdGVuZXJzLCBlbHNlIGBmYWxzZWAuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQoZXZlbnQsIGExLCBhMiwgYTMsIGE0LCBhNSkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1tldnRdKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldnRdXG4gICAgLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoXG4gICAgLCBhcmdzXG4gICAgLCBpO1xuXG4gIGlmIChsaXN0ZW5lcnMuZm4pIHtcbiAgICBpZiAobGlzdGVuZXJzLm9uY2UpIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVycy5mbiwgdW5kZWZpbmVkLCB0cnVlKTtcblxuICAgIHN3aXRjaCAobGVuKSB7XG4gICAgICBjYXNlIDE6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCksIHRydWU7XG4gICAgICBjYXNlIDI6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEpLCB0cnVlO1xuICAgICAgY2FzZSAzOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiksIHRydWU7XG4gICAgICBjYXNlIDQ6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMyksIHRydWU7XG4gICAgICBjYXNlIDU6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMywgYTQpLCB0cnVlO1xuICAgICAgY2FzZSA2OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMsIGE0LCBhNSksIHRydWU7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMSwgYXJncyA9IG5ldyBBcnJheShsZW4gLTEpOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgIH1cblxuICAgIGxpc3RlbmVycy5mbi5hcHBseShsaXN0ZW5lcnMuY29udGV4dCwgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGhcbiAgICAgICwgajtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGxpc3RlbmVyc1tpXS5vbmNlKSB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcnNbaV0uZm4sIHVuZGVmaW5lZCwgdHJ1ZSk7XG5cbiAgICAgIHN3aXRjaCAobGVuKSB7XG4gICAgICAgIGNhc2UgMTogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQpOyBicmVhaztcbiAgICAgICAgY2FzZSAyOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEpOyBicmVhaztcbiAgICAgICAgY2FzZSAzOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEsIGEyKTsgYnJlYWs7XG4gICAgICAgIGNhc2UgNDogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExLCBhMiwgYTMpOyBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBpZiAoIWFyZ3MpIGZvciAoaiA9IDEsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0xKTsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICBhcmdzW2ogLSAxXSA9IGFyZ3VtZW50c1tqXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsaXN0ZW5lcnNbaV0uZm4uYXBwbHkobGlzdGVuZXJzW2ldLmNvbnRleHQsIGFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuLyoqXG4gKiBBZGQgYSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IFtjb250ZXh0PXRoaXNdIFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uKGV2ZW50LCBmbiwgY29udGV4dCkge1xuICByZXR1cm4gYWRkTGlzdGVuZXIodGhpcywgZXZlbnQsIGZuLCBjb250ZXh0LCBmYWxzZSk7XG59O1xuXG4vKipcbiAqIEFkZCBhIG9uZS10aW1lIGxpc3RlbmVyIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gW2NvbnRleHQ9dGhpc10gVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKGV2ZW50LCBmbiwgY29udGV4dCkge1xuICByZXR1cm4gYWRkTGlzdGVuZXIodGhpcywgZXZlbnQsIGZuLCBjb250ZXh0LCB0cnVlKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIHRoZSBsaXN0ZW5lcnMgb2YgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBPbmx5IHJlbW92ZSB0aGUgbGlzdGVuZXJzIHRoYXQgbWF0Y2ggdGhpcyBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBPbmx5IHJlbW92ZSB0aGUgbGlzdGVuZXJzIHRoYXQgaGF2ZSB0aGlzIGNvbnRleHQuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG9uY2UgT25seSByZW1vdmUgb25lLXRpbWUgbGlzdGVuZXJzLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGZuLCBjb250ZXh0LCBvbmNlKSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW2V2dF0pIHJldHVybiB0aGlzO1xuICBpZiAoIWZuKSB7XG4gICAgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1tldnRdO1xuXG4gIGlmIChsaXN0ZW5lcnMuZm4pIHtcbiAgICBpZiAoXG4gICAgICBsaXN0ZW5lcnMuZm4gPT09IGZuICYmXG4gICAgICAoIW9uY2UgfHwgbGlzdGVuZXJzLm9uY2UpICYmXG4gICAgICAoIWNvbnRleHQgfHwgbGlzdGVuZXJzLmNvbnRleHQgPT09IGNvbnRleHQpXG4gICAgKSB7XG4gICAgICBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgPSAwLCBldmVudHMgPSBbXSwgbGVuZ3RoID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGxpc3RlbmVyc1tpXS5mbiAhPT0gZm4gfHxcbiAgICAgICAgKG9uY2UgJiYgIWxpc3RlbmVyc1tpXS5vbmNlKSB8fFxuICAgICAgICAoY29udGV4dCAmJiBsaXN0ZW5lcnNbaV0uY29udGV4dCAhPT0gY29udGV4dClcbiAgICAgICkge1xuICAgICAgICBldmVudHMucHVzaChsaXN0ZW5lcnNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vXG4gICAgLy8gUmVzZXQgdGhlIGFycmF5LCBvciByZW1vdmUgaXQgY29tcGxldGVseSBpZiB3ZSBoYXZlIG5vIG1vcmUgbGlzdGVuZXJzLlxuICAgIC8vXG4gICAgaWYgKGV2ZW50cy5sZW5ndGgpIHRoaXMuX2V2ZW50c1tldnRdID0gZXZlbnRzLmxlbmd0aCA9PT0gMSA/IGV2ZW50c1swXSA6IGV2ZW50cztcbiAgICBlbHNlIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYWxsIGxpc3RlbmVycywgb3IgdGhvc2Ugb2YgdGhlIHNwZWNpZmllZCBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gW2V2ZW50XSBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpIHtcbiAgdmFyIGV2dDtcblxuICBpZiAoZXZlbnQpIHtcbiAgICBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuICAgIGlmICh0aGlzLl9ldmVudHNbZXZ0XSkgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vXG4vLyBBbGlhcyBtZXRob2RzIG5hbWVzIGJlY2F1c2UgcGVvcGxlIHJvbGwgbGlrZSB0aGF0LlxuLy9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uO1xuXG4vL1xuLy8gRXhwb3NlIHRoZSBwcmVmaXguXG4vL1xuRXZlbnRFbWl0dGVyLnByZWZpeGVkID0gcHJlZml4O1xuXG4vL1xuLy8gQWxsb3cgYEV2ZW50RW1pdHRlcmAgdG8gYmUgaW1wb3J0ZWQgYXMgbW9kdWxlIG5hbWVzcGFjZS5cbi8vXG5FdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXG4vL1xuLy8gRXhwb3NlIHRoZSBtb2R1bGUuXG4vL1xuaWYgKCd1bmRlZmluZWQnICE9PSB0eXBlb2YgbW9kdWxlKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZXZlbnRlbWl0dGVyMy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBFbmNvZGUgZWFjaCBpdGVtIG9mIGFuIGFycmF5IGluZGl2aWR1YWxseS4gVGhlIGNvbW1hXG4vLyBkZWxpbWl0ZXJzIHNob3VsZCBub3QgdGhlbXNlbHZlcyBiZSBlbmNvZGVkLlxuZnVuY3Rpb24gZW5jb2RlQXJyYXkoYXJyYXlWYWx1ZSkge1xuICByZXR1cm4gYXJyYXlWYWx1ZS5tYXAoZW5jb2RlVVJJQ29tcG9uZW50KS5qb2luKCcsJyk7XG59XG5cbmZ1bmN0aW9uIGVuY29kZVZhbHVlKHZhbHVlKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiBlbmNvZGVBcnJheSh2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcodmFsdWUpKTtcbn1cblxuLyoqXG4gKiBBcHBlbmQgYSBxdWVyeSBwYXJhbWV0ZXIgdG8gYSBVUkwuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfGJvb2xlYW58QXJyYXk8Kj4+fSBbdmFsdWVdIC0gUHJvdmlkZSBhbiBhcnJheVxuICogICBpZiB0aGUgdmFsdWUgaXMgYSBsaXN0IGFuZCBjb21tYXMgYmV0d2VlbiB2YWx1ZXMgbmVlZCB0byBiZVxuICogICBwcmVzZXJ2ZWQsIHVuZW5jb2RlZC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gTW9kaWZpZWQgVVJMLlxuICovXG5mdW5jdGlvbiBhcHBlbmRRdWVyeVBhcmFtKHVybCwga2V5LCB2YWx1ZSkge1xuICBpZiAodmFsdWUgPT09IGZhbHNlIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICB2YXIgcHVuY3R1YXRpb24gPSAvXFw/Ly50ZXN0KHVybCkgPyAnJicgOiAnPyc7XG4gIHZhciBxdWVyeSA9IGVuY29kZVVSSUNvbXBvbmVudChrZXkpO1xuICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gJycgJiYgdmFsdWUgIT09IHRydWUpIHtcbiAgICBxdWVyeSArPSAnPScgKyBlbmNvZGVWYWx1ZSh2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuICcnICsgdXJsICsgcHVuY3R1YXRpb24gKyBxdWVyeTtcbn1cblxuLyoqXG4gKiBEZXJpdmUgYSBxdWVyeSBzdHJpbmcgZnJvbSBhbiBvYmplY3QgYW5kIGFwcGVuZCBpdFxuICogdG8gYSBVUkwuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtPYmplY3R9IFtxdWVyeU9iamVjdF0gLSBWYWx1ZXMgc2hvdWxkIGJlIHByaW1pdGl2ZXMuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSAtIE1vZGlmaWVkIFVSTC5cbiAqL1xuZnVuY3Rpb24gYXBwZW5kUXVlcnlPYmplY3QodXJsLCBxdWVyeU9iamVjdCkge1xuICBpZiAoIXF1ZXJ5T2JqZWN0KSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIHZhciByZXN1bHQgPSB1cmw7XG4gIE9iamVjdC5rZXlzKHF1ZXJ5T2JqZWN0KS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIHZhciB2YWx1ZSA9IHF1ZXJ5T2JqZWN0W2tleV07XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24odikge1xuICAgICAgICAgIHJldHVybiAhIXY7XG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKCcsJyk7XG4gICAgfVxuICAgIHJlc3VsdCA9IGFwcGVuZFF1ZXJ5UGFyYW0ocmVzdWx0LCBrZXksIHZhbHVlKTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogUHJlcGVuZCBhbiBvcmlnaW4gdG8gYSBVUkwuIElmIHRoZSBVUkwgYWxyZWFkeSBoYXMgYW5cbiAqIG9yaWdpbiwgZG8gbm90aGluZy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge3N0cmluZ30gb3JpZ2luXG4gKiBAcmV0dXJucyB7c3RyaW5nfSAtIE1vZGlmaWVkIFVSTC5cbiAqL1xuZnVuY3Rpb24gcHJlcGVuZE9yaWdpbih1cmwsIG9yaWdpbikge1xuICBpZiAoIW9yaWdpbikge1xuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICBpZiAodXJsLnNsaWNlKDAsIDQpID09PSAnaHR0cCcpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgdmFyIGRlbGltaXRlciA9IHVybFswXSA9PT0gJy8nID8gJycgOiAnLyc7XG4gIHJldHVybiAnJyArIG9yaWdpbi5yZXBsYWNlKC9cXC8kLywgJycpICsgZGVsaW1pdGVyICsgdXJsO1xufVxuXG4vKipcbiAqIEludGVycG9sYXRlIHZhbHVlcyBpbnRvIGEgcm91dGUgd2l0aCBleHByZXNzLXN0eWxlLFxuICogY29sb24tcHJlZml4ZWQgcm91dGUgcGFyYW1ldGVycy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcm91dGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcGFyYW1zXSAtIFZhbHVlcyBzaG91bGQgYmUgcHJpbWl0aXZlc1xuICogICBvciBhcnJheXMgb2YgcHJpbWl0aXZlcy4gUHJvdmlkZSBhbiBhcnJheSBpZiB0aGUgdmFsdWVcbiAqICAgaXMgYSBsaXN0IGFuZCBjb21tYXMgYmV0d2VlbiB2YWx1ZXMgbmVlZCB0byBiZVxuICogICBwcmVzZXJ2ZWQsIHVuZW5jb2RlZC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gTW9kaWZpZWQgVVJMLlxuICovXG5mdW5jdGlvbiBpbnRlcnBvbGF0ZVJvdXRlUGFyYW1zKHJvdXRlLCBwYXJhbXMpIHtcbiAgaWYgKCFwYXJhbXMpIHtcbiAgICByZXR1cm4gcm91dGU7XG4gIH1cbiAgcmV0dXJuIHJvdXRlLnJlcGxhY2UoL1xcLzooW2EtekEtWjAtOV0rKS9nLCBmdW5jdGlvbihfLCBwYXJhbUlkKSB7XG4gICAgdmFyIHZhbHVlID0gcGFyYW1zW3BhcmFtSWRdO1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3BlY2lmaWVkIHJvdXRlIHBhcmFtZXRlciAnICsgcGFyYW1JZCk7XG4gICAgfVxuICAgIHZhciBwcmVwcGVkVmFsdWUgPSBlbmNvZGVWYWx1ZSh2YWx1ZSk7XG4gICAgcmV0dXJuICcvJyArIHByZXBwZWRWYWx1ZTtcbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhcHBlbmRRdWVyeU9iamVjdDogYXBwZW5kUXVlcnlPYmplY3QsXG4gIGFwcGVuZFF1ZXJ5UGFyYW06IGFwcGVuZFF1ZXJ5UGFyYW0sXG4gIHByZXBlbmRPcmlnaW46IHByZXBlbmRPcmlnaW4sXG4gIGludGVycG9sYXRlUm91dGVQYXJhbXM6IGludGVycG9sYXRlUm91dGVQYXJhbXNcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9AbWFwYm94L21hcGJveC1zZGsvbGliL2hlbHBlcnMvdXJsLXV0aWxzLmpzXG4vLyBtb2R1bGUgaWQgPSA1MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBicm93c2VyID0gcmVxdWlyZSgnLi9icm93c2VyLWxheWVyJyk7XG52YXIgTWFwaUNsaWVudCA9IHJlcXVpcmUoJy4uL2NsYXNzZXMvbWFwaS1jbGllbnQnKTtcblxuZnVuY3Rpb24gQnJvd3NlckNsaWVudChvcHRpb25zKSB7XG4gIE1hcGlDbGllbnQuY2FsbCh0aGlzLCBvcHRpb25zKTtcbn1cbkJyb3dzZXJDbGllbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNYXBpQ2xpZW50LnByb3RvdHlwZSk7XG5Ccm93c2VyQ2xpZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJyb3dzZXJDbGllbnQ7XG5cbkJyb3dzZXJDbGllbnQucHJvdG90eXBlLnNlbmRSZXF1ZXN0ID0gYnJvd3Nlci5icm93c2VyU2VuZDtcbkJyb3dzZXJDbGllbnQucHJvdG90eXBlLmFib3J0UmVxdWVzdCA9IGJyb3dzZXIuYnJvd3NlckFib3J0O1xuXG4vKipcbiAqIENyZWF0ZSBhIGNsaWVudCBmb3IgdGhlIGJyb3dzZXIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmFjY2Vzc1Rva2VuXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMub3JpZ2luXVxuICogQHJldHVybnMge01hcGlDbGllbnR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJyb3dzZXJDbGllbnQob3B0aW9ucykge1xuICByZXR1cm4gbmV3IEJyb3dzZXJDbGllbnQob3B0aW9ucyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlQnJvd3NlckNsaWVudDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL0BtYXBib3gvbWFwYm94LXNkay9saWIvYnJvd3Nlci9icm93c2VyLWNsaWVudC5qc1xuLy8gbW9kdWxlIGlkID0gNTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgTWFwaVJlc3BvbnNlID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9tYXBpLXJlc3BvbnNlJyk7XG52YXIgTWFwaUVycm9yID0gcmVxdWlyZSgnLi4vY2xhc3Nlcy9tYXBpLWVycm9yJyk7XG52YXIgY29uc3RhbnRzID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzJyk7XG52YXIgcGFyc2VIZWFkZXJzID0gcmVxdWlyZSgnLi4vaGVscGVycy9wYXJzZS1oZWFkZXJzJyk7XG5cbi8vIEtleXMgYXJlIHJlcXVlc3QgSURzLCB2YWx1ZXMgYXJlIFhIUnMuXG52YXIgcmVxdWVzdHNVbmRlcndheSA9IHt9O1xuXG5mdW5jdGlvbiBicm93c2VyQWJvcnQocmVxdWVzdCkge1xuICB2YXIgeGhyID0gcmVxdWVzdHNVbmRlcndheVtyZXF1ZXN0LmlkXTtcbiAgaWYgKCF4aHIpIHJldHVybjtcbiAgeGhyLmFib3J0KCk7XG4gIGRlbGV0ZSByZXF1ZXN0c1VuZGVyd2F5W3JlcXVlc3QuaWRdO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVSZXNwb25zZShyZXF1ZXN0LCB4aHIpIHtcbiAgcmV0dXJuIG5ldyBNYXBpUmVzcG9uc2UocmVxdWVzdCwge1xuICAgIGJvZHk6IHhoci5yZXNwb25zZSxcbiAgICBoZWFkZXJzOiBwYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSxcbiAgICBzdGF0dXNDb2RlOiB4aHIuc3RhdHVzXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVCcm93c2VyUHJvZ3Jlc3NFdmVudChldmVudCkge1xuICB2YXIgdG90YWwgPSBldmVudC50b3RhbDtcbiAgdmFyIHRyYW5zZmVycmVkID0gZXZlbnQubG9hZGVkO1xuICB2YXIgcGVyY2VudCA9ICgxMDAgKiB0cmFuc2ZlcnJlZCkgLyB0b3RhbDtcbiAgcmV0dXJuIHtcbiAgICB0b3RhbDogdG90YWwsXG4gICAgdHJhbnNmZXJyZWQ6IHRyYW5zZmVycmVkLFxuICAgIHBlcmNlbnQ6IHBlcmNlbnRcbiAgfTtcbn1cblxuZnVuY3Rpb24gc2VuZFJlcXVlc3RYaHIocmVxdWVzdCwgeGhyKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICB4aHIub25wcm9ncmVzcyA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICByZXF1ZXN0LmVtaXR0ZXIuZW1pdChcbiAgICAgICAgY29uc3RhbnRzLkVWRU5UX1BST0dSRVNTX0RPV05MT0FELFxuICAgICAgICBub3JtYWxpemVCcm93c2VyUHJvZ3Jlc3NFdmVudChldmVudClcbiAgICAgICk7XG4gICAgfTtcblxuICAgIHZhciBmaWxlID0gcmVxdWVzdC5maWxlO1xuICAgIGlmIChmaWxlKSB7XG4gICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICByZXF1ZXN0LmVtaXR0ZXIuZW1pdChcbiAgICAgICAgICBjb25zdGFudHMuRVZFTlRfUFJPR1JFU1NfVVBMT0FELFxuICAgICAgICAgIG5vcm1hbGl6ZUJyb3dzZXJQcm9ncmVzc0V2ZW50KGV2ZW50KVxuICAgICAgICApO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICByZWplY3QoZXJyb3IpO1xuICAgIH07XG5cbiAgICB4aHIub25hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1hcGlFcnJvciA9IG5ldyBNYXBpRXJyb3Ioe1xuICAgICAgICByZXF1ZXN0OiByZXF1ZXN0LFxuICAgICAgICB0eXBlOiBjb25zdGFudHMuRVJST1JfUkVRVUVTVF9BQk9SVEVEXG4gICAgICB9KTtcbiAgICAgIHJlamVjdChtYXBpRXJyb3IpO1xuICAgIH07XG5cbiAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICBkZWxldGUgcmVxdWVzdHNVbmRlcndheVtyZXF1ZXN0LmlkXTtcbiAgICAgIGlmICh4aHIuc3RhdHVzIDwgMjAwIHx8IHhoci5zdGF0dXMgPj0gNDAwKSB7XG4gICAgICAgIHZhciBtYXBpRXJyb3IgPSBuZXcgTWFwaUVycm9yKHtcbiAgICAgICAgICByZXF1ZXN0OiByZXF1ZXN0LFxuICAgICAgICAgIGJvZHk6IHhoci5yZXNwb25zZSxcbiAgICAgICAgICBzdGF0dXNDb2RlOiB4aHIuc3RhdHVzXG4gICAgICAgIH0pO1xuICAgICAgICByZWplY3QobWFwaUVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZSh4aHIpO1xuICAgIH07XG5cbiAgICB2YXIgYm9keSA9IHJlcXVlc3QuYm9keTtcblxuICAgIC8vIG1hdGNoaW5nIHNlcnZpY2UgbmVlZHMgdG8gc2VuZCBhIHd3dy1mb3JtLXVybGVuY29kZWQgcmVxdWVzdFxuICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHhoci5zZW5kKGJvZHkpO1xuICAgIH0gZWxzZSBpZiAoYm9keSkge1xuICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoYm9keSkpO1xuICAgIH0gZWxzZSBpZiAoZmlsZSkge1xuICAgICAgeGhyLnNlbmQoZmlsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHhoci5zZW5kKCk7XG4gICAgfVxuXG4gICAgcmVxdWVzdHNVbmRlcndheVtyZXF1ZXN0LmlkXSA9IHhocjtcbiAgfSkudGhlbihmdW5jdGlvbih4aHIpIHtcbiAgICByZXR1cm4gY3JlYXRlUmVzcG9uc2UocmVxdWVzdCwgeGhyKTtcbiAgfSk7XG59XG5cbi8vIFRoZSBhY2Nlc3NUb2tlbiBhcmd1bWVudCBnaXZlcyB0aGlzIGZ1bmN0aW9uIGZsZXhpYmlsaXR5XG4vLyBmb3IgTWFwYm94J3MgaW50ZXJuYWwgY2xpZW50LlxuZnVuY3Rpb24gY3JlYXRlUmVxdWVzdFhocihyZXF1ZXN0LCBhY2Nlc3NUb2tlbikge1xuICB2YXIgdXJsID0gcmVxdWVzdC51cmwoYWNjZXNzVG9rZW4pO1xuICB2YXIgeGhyID0gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO1xuICB4aHIub3BlbihyZXF1ZXN0Lm1ldGhvZCwgdXJsKTtcbiAgaWYgKHJlcXVlc3QuaGVhZGVycykge1xuICAgIE9iamVjdC5rZXlzKHJlcXVlc3QuaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgcmVxdWVzdC5oZWFkZXJzW2tleV0pO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB4aHI7XG59XG5cbmZ1bmN0aW9uIGJyb3dzZXJTZW5kKHJlcXVlc3QpIHtcbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgdmFyIHhociA9IGNyZWF0ZVJlcXVlc3RYaHIocmVxdWVzdCwgcmVxdWVzdC5jbGllbnQuYWNjZXNzVG9rZW4pO1xuICAgIHJldHVybiBzZW5kUmVxdWVzdFhocihyZXF1ZXN0LCB4aHIpO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGJyb3dzZXJBYm9ydDogYnJvd3NlckFib3J0LFxuICBzZW5kUmVxdWVzdFhocjogc2VuZFJlcXVlc3RYaHIsXG4gIGJyb3dzZXJTZW5kOiBicm93c2VyU2VuZCxcbiAgY3JlYXRlUmVxdWVzdFhocjogY3JlYXRlUmVxdWVzdFhoclxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL0BtYXBib3gvbWFwYm94LXNkay9saWIvYnJvd3Nlci9icm93c2VyLWxheWVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBwYXJzZUxpbmtIZWFkZXIgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3BhcnNlLWxpbmstaGVhZGVyJyk7XG5cbi8qKlxuICogQSBNYXBib3ggQVBJIHJlc3BvbnNlLlxuICpcbiAqIEBjbGFzcyBNYXBpUmVzcG9uc2VcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBib2R5IC0gVGhlIHJlc3BvbnNlIGJvZHksIHBhcnNlZCBhcyBKU09OLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHJhd0JvZHkgLSBUaGUgcmF3IHJlc3BvbnNlIGJvZHkuXG4gKiBAcHJvcGVydHkge251bWJlcn0gc3RhdHVzQ29kZSAtIFRoZSByZXNwb25zZSdzIHN0YXR1cyBjb2RlLlxuICogQHByb3BlcnR5IHtPYmplY3R9IGhlYWRlcnMgLSBUaGUgcGFyc2VkIHJlc3BvbnNlIGhlYWRlcnMuXG4gKiBAcHJvcGVydHkge09iamVjdH0gbGlua3MgLSBUaGUgcGFyc2VkIHJlc3BvbnNlIGxpbmtzLlxuICogQHByb3BlcnR5IHtNYXBpUmVxdWVzdH0gcmVxdWVzdCAtIFRoZSByZXNwb25zZSdzIG9yaWdpbmF0aW5nIGBNYXBpUmVxdWVzdGAuXG4gKi9cblxuLyoqXG4gKiBAaWdub3JlXG4gKiBAcGFyYW0ge01hcGlSZXF1ZXN0fSByZXF1ZXN0XG4gKiBAcGFyYW0ge09iamVjdH0gcmVzcG9uc2VEYXRhXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzcG9uc2VEYXRhLmhlYWRlcnNcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXNwb25zZURhdGEuYm9keVxuICogQHBhcmFtIHtudW1iZXJ9IHJlc3BvbnNlRGF0YS5zdGF0dXNDb2RlXG4gKi9cbmZ1bmN0aW9uIE1hcGlSZXNwb25zZShyZXF1ZXN0LCByZXNwb25zZURhdGEpIHtcbiAgdGhpcy5yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgdGhpcy5oZWFkZXJzID0gcmVzcG9uc2VEYXRhLmhlYWRlcnM7XG4gIHRoaXMucmF3Qm9keSA9IHJlc3BvbnNlRGF0YS5ib2R5O1xuICB0aGlzLnN0YXR1c0NvZGUgPSByZXNwb25zZURhdGEuc3RhdHVzQ29kZTtcbiAgdHJ5IHtcbiAgICB0aGlzLmJvZHkgPSBKU09OLnBhcnNlKHJlc3BvbnNlRGF0YS5ib2R5IHx8ICd7fScpO1xuICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgdGhpcy5ib2R5ID0gcmVzcG9uc2VEYXRhLmJvZHk7XG4gIH1cbiAgdGhpcy5saW5rcyA9IHBhcnNlTGlua0hlYWRlcih0aGlzLmhlYWRlcnMubGluayk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlcmUgaXMgYSBuZXh0IHBhZ2UgdGhhdCB5b3UgY2FuIGZldGNoLlxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5NYXBpUmVzcG9uc2UucHJvdG90eXBlLmhhc05leHRQYWdlID0gZnVuY3Rpb24gaGFzTmV4dFBhZ2UoKSB7XG4gIHJldHVybiAhIXRoaXMubGlua3MubmV4dDtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgcmVxdWVzdCBmb3IgdGhlIG5leHQgcGFnZSwgaWYgdGhlcmUgaXMgb25lLlxuICogSWYgdGhlcmUgaXMgbm8gbmV4dCBwYWdlLCByZXR1cm5zIGBudWxsYC5cbiAqXG4gKiBAcmV0dXJucyB7TWFwaVJlcXVlc3QgfCBudWxsfVxuICovXG5NYXBpUmVzcG9uc2UucHJvdG90eXBlLm5leHRQYWdlID0gZnVuY3Rpb24gbmV4dFBhZ2UoKSB7XG4gIGlmICghdGhpcy5oYXNOZXh0UGFnZSgpKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHRoaXMucmVxdWVzdC5fZXh0ZW5kKHtcbiAgICBwYXRoOiB0aGlzLmxpbmtzLm5leHQudXJsXG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBNYXBpUmVzcG9uc2U7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9AbWFwYm94L21hcGJveC1zZGsvbGliL2NsYXNzZXMvbWFwaS1yZXNwb25zZS5qc1xuLy8gbW9kdWxlIGlkID0gNTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBMaWtlIGh0dHBzOi8vZ2l0aHViLmNvbS90aGxvcmVuei9saWIvcGFyc2UtbGluay1oZWFkZXIgYnV0IHdpdGhvdXQgYW55XG4vLyBhZGRpdGlvbmFsIGRlcGVuZGVuY2llcy5cblxuZnVuY3Rpb24gcGFyc2VQYXJhbShwYXJhbSkge1xuICB2YXIgcGFydHMgPSBwYXJhbS5tYXRjaCgvXFxzKiguKylcXHMqPVxccypcIj8oW15cIl0rKVwiPy8pO1xuICBpZiAoIXBhcnRzKSByZXR1cm4gbnVsbDtcblxuICByZXR1cm4ge1xuICAgIGtleTogcGFydHNbMV0sXG4gICAgdmFsdWU6IHBhcnRzWzJdXG4gIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlTGluayhsaW5rKSB7XG4gIHZhciBwYXJ0cyA9IGxpbmsubWF0Y2goLzw/KFtePl0qKT4oLiopLyk7XG4gIGlmICghcGFydHMpIHJldHVybiBudWxsO1xuXG4gIHZhciBsaW5rVXJsID0gcGFydHNbMV07XG4gIHZhciBsaW5rUGFyYW1zID0gcGFydHNbMl0uc3BsaXQoJzsnKTtcbiAgdmFyIHJlbCA9IG51bGw7XG4gIHZhciBwYXJzZWRMaW5rUGFyYW1zID0gbGlua1BhcmFtcy5yZWR1Y2UoZnVuY3Rpb24ocmVzdWx0LCBwYXJhbSkge1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZVBhcmFtKHBhcmFtKTtcbiAgICBpZiAoIXBhcnNlZCkgcmV0dXJuIHJlc3VsdDtcbiAgICBpZiAocGFyc2VkLmtleSA9PT0gJ3JlbCcpIHtcbiAgICAgIGlmICghcmVsKSB7XG4gICAgICAgIHJlbCA9IHBhcnNlZC52YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHJlc3VsdFtwYXJzZWQua2V5XSA9IHBhcnNlZC52YWx1ZTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LCB7fSk7XG4gIGlmICghcmVsKSByZXR1cm4gbnVsbDtcblxuICByZXR1cm4ge1xuICAgIHVybDogbGlua1VybCxcbiAgICByZWw6IHJlbCxcbiAgICBwYXJhbXM6IHBhcnNlZExpbmtQYXJhbXNcbiAgfTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIExpbmsgaGVhZGVyLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBsaW5rSGVhZGVyXG4gKiBAcmV0dXJucyB7e1xuICogICBbc3RyaW5nXToge1xuICogICAgIHVybDogc3RyaW5nLFxuICogICAgIHBhcmFtczogeyBbc3RyaW5nXTogc3RyaW5nIH1cbiAqICAgfVxuICogfX1cbiAqL1xuZnVuY3Rpb24gcGFyc2VMaW5rSGVhZGVyKGxpbmtIZWFkZXIpIHtcbiAgaWYgKCFsaW5rSGVhZGVyKSByZXR1cm4ge307XG5cbiAgcmV0dXJuIGxpbmtIZWFkZXIuc3BsaXQoLyxcXHMqPC8pLnJlZHVjZShmdW5jdGlvbihyZXN1bHQsIGxpbmspIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VMaW5rKGxpbmspO1xuICAgIGlmICghcGFyc2VkKSByZXR1cm4gcmVzdWx0O1xuICAgIC8vIHJlbCB2YWx1ZSBjYW4gYmUgbXVsdGlwbGUgd2hpdGVzcGFjZS1zZXBhcmF0ZWQgcmVscy5cbiAgICB2YXIgc3BsaXRSZWwgPSBwYXJzZWQucmVsLnNwbGl0KC9cXHMrLyk7XG4gICAgc3BsaXRSZWwuZm9yRWFjaChmdW5jdGlvbihyZWwpIHtcbiAgICAgIGlmICghcmVzdWx0W3JlbF0pIHtcbiAgICAgICAgcmVzdWx0W3JlbF0gPSB7XG4gICAgICAgICAgdXJsOiBwYXJzZWQudXJsLFxuICAgICAgICAgIHBhcmFtczogcGFyc2VkLnBhcmFtc1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sIHt9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZUxpbmtIZWFkZXI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9AbWFwYm94L21hcGJveC1zZGsvbGliL2hlbHBlcnMvcGFyc2UtbGluay1oZWFkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDU1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGNvbnN0YW50cyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cycpO1xuXG4vKipcbiAqIEEgTWFwYm94IEFQSSBlcnJvci5cbiAqXG4gKiBJZiB0aGVyZSdzIGFuIGVycm9yIGR1cmluZyB0aGUgQVBJIHRyYW5zYWN0aW9uLFxuICogdGhlIFByb21pc2UgcmV0dXJuZWQgYnkgYE1hcGlSZXF1ZXN0YCdzIFtgc2VuZGBdKCNzZW5kKVxuICogbWV0aG9kIHNob3VsZCByZWplY3Qgd2l0aCBhIGBNYXBpRXJyb3JgLlxuICpcbiAqIEBjbGFzcyBNYXBpRXJyb3JcbiAqIEBoaWRlY29uc3RydWN0b3JcbiAqIEBwcm9wZXJ0eSB7TWFwaVJlcXVlc3R9IHJlcXVlc3QgLSBUaGUgZXJyb3JlZCByZXF1ZXN0LlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgLSBUaGUgdHlwZSBvZiBlcnJvci4gVXN1YWxseSB0aGlzIGlzIGAnSHR0cEVycm9yJ2AuXG4gKiAgIElmIHRoZSByZXF1ZXN0IHdhcyBhYm9ydGVkLCBzbyB0aGUgZXJyb3Igd2FzXG4gKiAgIG5vdCBzZW50IGZyb20gdGhlIHNlcnZlciwgdGhlIHR5cGUgd2lsbCBiZVxuICogICBgJ1JlcXVlc3RBYm9ydGVkRXJyb3InYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc3RhdHVzQ29kZV0gLSBUaGUgbnVtZXJpYyBzdGF0dXMgY29kZSBvZlxuICogICB0aGUgSFRUUCByZXNwb25zZS5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0IHwgc3RyaW5nfSBbYm9keV0gLSBJZiB0aGUgc2VydmVyIHNlbnQgYSByZXNwb25zZSBib2R5LFxuICogICB0aGlzIHByb3BlcnR5IGV4cG9zZXMgdGhhdCByZXNwb25zZSwgcGFyc2VkIGFzIEpTT04gaWYgcG9zc2libGUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW21lc3NhZ2VdIC0gV2hhdGV2ZXIgbWVzc2FnZSBjb3VsZCBiZSBkZXJpdmVkIGZyb20gdGhlXG4gKiAgIGNhbGwgc2l0ZSBhbmQgSFRUUCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge01hcGlSZXF1ZXN0fSBvcHRpb25zLnJlcXVlc3RcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5zdGF0dXNDb2RlXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmJvZHldXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubWVzc2FnZV1cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy50eXBlXVxuICovXG5mdW5jdGlvbiBNYXBpRXJyb3Iob3B0aW9ucykge1xuICB2YXIgZXJyb3JUeXBlID0gb3B0aW9ucy50eXBlIHx8IGNvbnN0YW50cy5FUlJPUl9IVFRQO1xuXG4gIHZhciBib2R5O1xuICBpZiAob3B0aW9ucy5ib2R5KSB7XG4gICAgdHJ5IHtcbiAgICAgIGJvZHkgPSBKU09OLnBhcnNlKG9wdGlvbnMuYm9keSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgYm9keSA9IG9wdGlvbnMuYm9keTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgYm9keSA9IG51bGw7XG4gIH1cblxuICB2YXIgbWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZSB8fCBudWxsO1xuICBpZiAoIW1lc3NhZ2UpIHtcbiAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBtZXNzYWdlID0gYm9keTtcbiAgICB9IGVsc2UgaWYgKGJvZHkgJiYgdHlwZW9mIGJvZHkubWVzc2FnZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG1lc3NhZ2UgPSBib2R5Lm1lc3NhZ2U7XG4gICAgfSBlbHNlIGlmIChlcnJvclR5cGUgPT09IGNvbnN0YW50cy5FUlJPUl9SRVFVRVNUX0FCT1JURUQpIHtcbiAgICAgIG1lc3NhZ2UgPSAnUmVxdWVzdCBhYm9ydGVkJztcbiAgICB9XG4gIH1cblxuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICB0aGlzLnR5cGUgPSBlcnJvclR5cGU7XG4gIHRoaXMuc3RhdHVzQ29kZSA9IG9wdGlvbnMuc3RhdHVzQ29kZSB8fCBudWxsO1xuICB0aGlzLnJlcXVlc3QgPSBvcHRpb25zLnJlcXVlc3Q7XG4gIHRoaXMuYm9keSA9IGJvZHk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTWFwaUVycm9yO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvQG1hcGJveC9tYXBib3gtc2RrL2xpYi9jbGFzc2VzL21hcGktZXJyb3IuanNcbi8vIG1vZHVsZSBpZCA9IDU2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gcGFyc2VTaW5nbGVIZWFkZXIocmF3KSB7XG4gIHZhciBib3VuZGFyeSA9IHJhdy5pbmRleE9mKCc6Jyk7XG4gIHZhciBuYW1lID0gcmF3XG4gICAgLnN1YnN0cmluZygwLCBib3VuZGFyeSlcbiAgICAudHJpbSgpXG4gICAgLnRvTG93ZXJDYXNlKCk7XG4gIHZhciB2YWx1ZSA9IHJhdy5zdWJzdHJpbmcoYm91bmRhcnkgKyAxKS50cmltKCk7XG4gIHJldHVybiB7XG4gICAgbmFtZTogbmFtZSxcbiAgICB2YWx1ZTogdmFsdWVcbiAgfTtcbn1cblxuLyoqXG4gKiBQYXJzZSByYXcgaGVhZGVycyBpbnRvIGFuIG9iamVjdCB3aXRoIGxvd2VyY2FzZSBwcm9wZXJ0aWVzLlxuICogRG9lcyBub3QgZnVsbHkgcGFyc2UgaGVhZGluZ3MgaW50byBtb3JlIGNvbXBsZXRlIGRhdGEgc3RydWN0dXJlLFxuICogYXMgbGFyZ2VyIGxpYnJhcmllcyBtaWdodCBkby4gQWxzbyBkb2VzIG5vdCBkZWFsIHdpdGggZHVwbGljYXRlXG4gKiBoZWFkZXJzIGJlY2F1c2UgTm9kZSBkb2Vzbid0IHNlZW0gdG8gZGVhbCB3aXRoIHRob3NlIHdlbGwsIHNvXG4gKiB3ZSBzaG91bGRuJ3QgbGV0IHRoZSBicm93c2VyIGVpdGhlciwgZm9yIGNvbnNpc3RlbmN5LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSByYXdcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIHBhcnNlSGVhZGVycyhyYXcpIHtcbiAgdmFyIGhlYWRlcnMgPSB7fTtcbiAgaWYgKCFyYXcpIHtcbiAgICByZXR1cm4gaGVhZGVycztcbiAgfVxuXG4gIHJhd1xuICAgIC50cmltKClcbiAgICAuc3BsaXQoL1tcXHJ8XFxuXSsvKVxuICAgIC5mb3JFYWNoKGZ1bmN0aW9uKHJhd0hlYWRlcikge1xuICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlU2luZ2xlSGVhZGVyKHJhd0hlYWRlcik7XG4gICAgICBoZWFkZXJzW3BhcnNlZC5uYW1lXSA9IHBhcnNlZC52YWx1ZTtcbiAgICB9KTtcblxuICByZXR1cm4gaGVhZGVycztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZUhlYWRlcnM7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9AbWFwYm94L21hcGJveC1zZGsvbGliL2hlbHBlcnMvcGFyc2UtaGVhZGVycy5qc1xuLy8gbW9kdWxlIGlkID0gNTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcGljayA9IHJlcXVpcmUoJy4vcGljaycpO1xuXG5mdW5jdGlvbiBvYmplY3RDbGVhbihvYmopIHtcbiAgcmV0dXJuIHBpY2sob2JqLCBmdW5jdGlvbihfLCB2YWwpIHtcbiAgICByZXR1cm4gdmFsICE9IG51bGw7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG9iamVjdENsZWFuO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvQG1hcGJveC9tYXBib3gtc2RrL3NlcnZpY2VzL3NlcnZpY2UtaGVscGVycy9vYmplY3QtY2xlYW4uanNcbi8vIG1vZHVsZSBpZCA9IDU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gb2JqZWN0TWFwKG9iaiwgY2IpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikucmVkdWNlKGZ1bmN0aW9uKHJlc3VsdCwga2V5KSB7XG4gICAgcmVzdWx0W2tleV0gPSBjYihrZXksIG9ialtrZXldKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LCB7fSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gb2JqZWN0TWFwO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvQG1hcGJveC9tYXBib3gtc2RrL3NlcnZpY2VzL3NlcnZpY2UtaGVscGVycy9vYmplY3QtbWFwLmpzXG4vLyBtb2R1bGUgaWQgPSA1OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQmFzZWQgb2ZmIG9mIFt0aGUgb2ZmaWNhbCBHb29nbGUgZG9jdW1lbnRdKGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL21hcHMvZG9jdW1lbnRhdGlvbi91dGlsaXRpZXMvcG9seWxpbmVhbGdvcml0aG0pXG4gKlxuICogU29tZSBwYXJ0cyBmcm9tIFt0aGlzIGltcGxlbWVudGF0aW9uXShodHRwOi8vZmFjc3RhZmYudW5jYS5lZHUvbWNtY2NsdXIvR29vZ2xlTWFwcy9FbmNvZGVQb2x5bGluZS9Qb2x5bGluZUVuY29kZXIuanMpXG4gKiBieSBbTWFyayBNY0NsdXJlXShodHRwOi8vZmFjc3RhZmYudW5jYS5lZHUvbWNtY2NsdXIvKVxuICpcbiAqIEBtb2R1bGUgcG9seWxpbmVcbiAqL1xuXG52YXIgcG9seWxpbmUgPSB7fTtcblxuZnVuY3Rpb24gcHkyX3JvdW5kKHZhbHVlKSB7XG4gICAgLy8gR29vZ2xlJ3MgcG9seWxpbmUgYWxnb3JpdGhtIHVzZXMgdGhlIHNhbWUgcm91bmRpbmcgc3RyYXRlZ3kgYXMgUHl0aG9uIDIsIHdoaWNoIGlzIGRpZmZlcmVudCBmcm9tIEpTIGZvciBuZWdhdGl2ZSB2YWx1ZXNcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLmFicyh2YWx1ZSkgKyAwLjUpICogKHZhbHVlID49IDAgPyAxIDogLTEpO1xufVxuXG5mdW5jdGlvbiBlbmNvZGUoY3VycmVudCwgcHJldmlvdXMsIGZhY3Rvcikge1xuICAgIGN1cnJlbnQgPSBweTJfcm91bmQoY3VycmVudCAqIGZhY3Rvcik7XG4gICAgcHJldmlvdXMgPSBweTJfcm91bmQocHJldmlvdXMgKiBmYWN0b3IpO1xuICAgIHZhciBjb29yZGluYXRlID0gY3VycmVudCAtIHByZXZpb3VzO1xuICAgIGNvb3JkaW5hdGUgPDw9IDE7XG4gICAgaWYgKGN1cnJlbnQgLSBwcmV2aW91cyA8IDApIHtcbiAgICAgICAgY29vcmRpbmF0ZSA9IH5jb29yZGluYXRlO1xuICAgIH1cbiAgICB2YXIgb3V0cHV0ID0gJyc7XG4gICAgd2hpbGUgKGNvb3JkaW5hdGUgPj0gMHgyMCkge1xuICAgICAgICBvdXRwdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoMHgyMCB8IChjb29yZGluYXRlICYgMHgxZikpICsgNjMpO1xuICAgICAgICBjb29yZGluYXRlID4+PSA1O1xuICAgIH1cbiAgICBvdXRwdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjb29yZGluYXRlICsgNjMpO1xuICAgIHJldHVybiBvdXRwdXQ7XG59XG5cbi8qKlxuICogRGVjb2RlcyB0byBhIFtsYXRpdHVkZSwgbG9uZ2l0dWRlXSBjb29yZGluYXRlcyBhcnJheS5cbiAqXG4gKiBUaGlzIGlzIGFkYXB0ZWQgZnJvbSB0aGUgaW1wbGVtZW50YXRpb24gaW4gUHJvamVjdC1PU1JNLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBwcmVjaXNpb25cbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Qcm9qZWN0LU9TUk0vb3NybS1mcm9udGVuZC9ibG9iL21hc3Rlci9XZWJDb250ZW50L3JvdXRpbmcvT1NSTS5Sb3V0aW5nR2VvbWV0cnkuanNcbiAqL1xucG9seWxpbmUuZGVjb2RlID0gZnVuY3Rpb24oc3RyLCBwcmVjaXNpb24pIHtcbiAgICB2YXIgaW5kZXggPSAwLFxuICAgICAgICBsYXQgPSAwLFxuICAgICAgICBsbmcgPSAwLFxuICAgICAgICBjb29yZGluYXRlcyA9IFtdLFxuICAgICAgICBzaGlmdCA9IDAsXG4gICAgICAgIHJlc3VsdCA9IDAsXG4gICAgICAgIGJ5dGUgPSBudWxsLFxuICAgICAgICBsYXRpdHVkZV9jaGFuZ2UsXG4gICAgICAgIGxvbmdpdHVkZV9jaGFuZ2UsXG4gICAgICAgIGZhY3RvciA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24gfHwgNSk7XG5cbiAgICAvLyBDb29yZGluYXRlcyBoYXZlIHZhcmlhYmxlIGxlbmd0aCB3aGVuIGVuY29kZWQsIHNvIGp1c3Qga2VlcFxuICAgIC8vIHRyYWNrIG9mIHdoZXRoZXIgd2UndmUgaGl0IHRoZSBlbmQgb2YgdGhlIHN0cmluZy4gSW4gZWFjaFxuICAgIC8vIGxvb3AgaXRlcmF0aW9uLCBhIHNpbmdsZSBjb29yZGluYXRlIGlzIGRlY29kZWQuXG4gICAgd2hpbGUgKGluZGV4IDwgc3RyLmxlbmd0aCkge1xuXG4gICAgICAgIC8vIFJlc2V0IHNoaWZ0LCByZXN1bHQsIGFuZCBieXRlXG4gICAgICAgIGJ5dGUgPSBudWxsO1xuICAgICAgICBzaGlmdCA9IDA7XG4gICAgICAgIHJlc3VsdCA9IDA7XG5cbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgYnl0ZSA9IHN0ci5jaGFyQ29kZUF0KGluZGV4KyspIC0gNjM7XG4gICAgICAgICAgICByZXN1bHQgfD0gKGJ5dGUgJiAweDFmKSA8PCBzaGlmdDtcbiAgICAgICAgICAgIHNoaWZ0ICs9IDU7XG4gICAgICAgIH0gd2hpbGUgKGJ5dGUgPj0gMHgyMCk7XG5cbiAgICAgICAgbGF0aXR1ZGVfY2hhbmdlID0gKChyZXN1bHQgJiAxKSA/IH4ocmVzdWx0ID4+IDEpIDogKHJlc3VsdCA+PiAxKSk7XG5cbiAgICAgICAgc2hpZnQgPSByZXN1bHQgPSAwO1xuXG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGJ5dGUgPSBzdHIuY2hhckNvZGVBdChpbmRleCsrKSAtIDYzO1xuICAgICAgICAgICAgcmVzdWx0IHw9IChieXRlICYgMHgxZikgPDwgc2hpZnQ7XG4gICAgICAgICAgICBzaGlmdCArPSA1O1xuICAgICAgICB9IHdoaWxlIChieXRlID49IDB4MjApO1xuXG4gICAgICAgIGxvbmdpdHVkZV9jaGFuZ2UgPSAoKHJlc3VsdCAmIDEpID8gfihyZXN1bHQgPj4gMSkgOiAocmVzdWx0ID4+IDEpKTtcblxuICAgICAgICBsYXQgKz0gbGF0aXR1ZGVfY2hhbmdlO1xuICAgICAgICBsbmcgKz0gbG9uZ2l0dWRlX2NoYW5nZTtcblxuICAgICAgICBjb29yZGluYXRlcy5wdXNoKFtsYXQgLyBmYWN0b3IsIGxuZyAvIGZhY3Rvcl0pO1xuICAgIH1cblxuICAgIHJldHVybiBjb29yZGluYXRlcztcbn07XG5cbi8qKlxuICogRW5jb2RlcyB0aGUgZ2l2ZW4gW2xhdGl0dWRlLCBsb25naXR1ZGVdIGNvb3JkaW5hdGVzIGFycmF5LlxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPEFycmF5LjxOdW1iZXI+Pn0gY29vcmRpbmF0ZXNcbiAqIEBwYXJhbSB7TnVtYmVyfSBwcmVjaXNpb25cbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKi9cbnBvbHlsaW5lLmVuY29kZSA9IGZ1bmN0aW9uKGNvb3JkaW5hdGVzLCBwcmVjaXNpb24pIHtcbiAgICBpZiAoIWNvb3JkaW5hdGVzLmxlbmd0aCkgeyByZXR1cm4gJyc7IH1cblxuICAgIHZhciBmYWN0b3IgPSBNYXRoLnBvdygxMCwgcHJlY2lzaW9uIHx8IDUpLFxuICAgICAgICBvdXRwdXQgPSBlbmNvZGUoY29vcmRpbmF0ZXNbMF1bMF0sIDAsIGZhY3RvcikgKyBlbmNvZGUoY29vcmRpbmF0ZXNbMF1bMV0sIDAsIGZhY3Rvcik7XG5cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBhID0gY29vcmRpbmF0ZXNbaV0sIGIgPSBjb29yZGluYXRlc1tpIC0gMV07XG4gICAgICAgIG91dHB1dCArPSBlbmNvZGUoYVswXSwgYlswXSwgZmFjdG9yKTtcbiAgICAgICAgb3V0cHV0ICs9IGVuY29kZShhWzFdLCBiWzFdLCBmYWN0b3IpO1xuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXQ7XG59O1xuXG5mdW5jdGlvbiBmbGlwcGVkKGNvb3Jkcykge1xuICAgIHZhciBmbGlwcGVkID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmxpcHBlZC5wdXNoKGNvb3Jkc1tpXS5zbGljZSgpLnJldmVyc2UoKSk7XG4gICAgfVxuICAgIHJldHVybiBmbGlwcGVkO1xufVxuXG4vKipcbiAqIEVuY29kZXMgYSBHZW9KU09OIExpbmVTdHJpbmcgZmVhdHVyZS9nZW9tZXRyeS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZ2VvanNvblxuICogQHBhcmFtIHtOdW1iZXJ9IHByZWNpc2lvblxuICogQHJldHVybnMge1N0cmluZ31cbiAqL1xucG9seWxpbmUuZnJvbUdlb0pTT04gPSBmdW5jdGlvbihnZW9qc29uLCBwcmVjaXNpb24pIHtcbiAgICBpZiAoZ2VvanNvbiAmJiBnZW9qc29uLnR5cGUgPT09ICdGZWF0dXJlJykge1xuICAgICAgICBnZW9qc29uID0gZ2VvanNvbi5nZW9tZXRyeTtcbiAgICB9XG4gICAgaWYgKCFnZW9qc29uIHx8IGdlb2pzb24udHlwZSAhPT0gJ0xpbmVTdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgbXVzdCBiZSBhIEdlb0pTT04gTGluZVN0cmluZycpO1xuICAgIH1cbiAgICByZXR1cm4gcG9seWxpbmUuZW5jb2RlKGZsaXBwZWQoZ2VvanNvbi5jb29yZGluYXRlcyksIHByZWNpc2lvbik7XG59O1xuXG4vKipcbiAqIERlY29kZXMgdG8gYSBHZW9KU09OIExpbmVTdHJpbmcgZ2VvbWV0cnkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtOdW1iZXJ9IHByZWNpc2lvblxuICogQHJldHVybnMge09iamVjdH1cbiAqL1xucG9seWxpbmUudG9HZW9KU09OID0gZnVuY3Rpb24oc3RyLCBwcmVjaXNpb24pIHtcbiAgICB2YXIgY29vcmRzID0gcG9seWxpbmUuZGVjb2RlKHN0ciwgcHJlY2lzaW9uKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnTGluZVN0cmluZycsXG4gICAgICAgIGNvb3JkaW5hdGVzOiBmbGlwcGVkKGNvb3JkcylcbiAgICB9O1xufTtcblxuaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBwb2x5bGluZTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL0BtYXBib3gvcG9seWxpbmUvc3JjL3BvbHlsaW5lLmpzXG4vLyBtb2R1bGUgaWQgPSA2MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbmltcG9ydCBzdGF0ZSBmcm9tICcuL3N0YXRlJztcbmltcG9ydCB7IG1hcFVwZGF0ZURpcmVjdGlvbnNFbmRwb2ludCB9IGZyb20gJy4vbWFwJztcblxuaW1wb3J0IHVzZXJSZXZlcnNlR2VvY29kZSBmcm9tICcuL3VzZXJSZXZlcnNlR2VvY29kZSc7XG5cbi8qKlxuICogVGhlIG9yaWdpbiBsb2NhdG9yIGJ1dHRvbiB1cGRhdGVzIHRoZSBvcmlnaW4gaW5wdXQgYmFzZWRcbiAqIG9uIHRoZSB1c2VyJ3MgbG9jYXRpb24uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluaXRPcmlnaW5Mb2NhdG9yQnRuKCkge1xuICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdkaXJlY3Rpb25zLS1sb2NhdGUtb3JpZ2luJylbMF07XG4gIC8vIGNvbnNvbGUubG9nKCdpbiBidG4gaW5pdCcpO1xuICBidG4ub25jbGljayA9IGZ1bmN0aW9uIG9uT3JpZ2luTG9jYXRvckJ0bkhhbmRsZXIoKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ2luIGJ0biBjbGljayBoYW5kbGVyJyk7XG4gICAgY29uc3Qgb3JpZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcmlnaW5JbnB1dCcpO1xuICAgIG9yaWcudmFsdWUgPSAnU2VhcmNoaW5nLi4uJztcbiAgICBpZiAoc3RhdGUudXNlci5hZGRyZXNzKSB7XG4gICAgICBvcmlnLnZhbHVlID0gc3RhdGUudXNlci5hZGRyZXNzO1xuICAgICAgc3RhdGUub3JpZ2luID0geyAuLi5zdGF0ZS51c2VyIH07XG4gICAgICBtYXBVcGRhdGVEaXJlY3Rpb25zRW5kcG9pbnQoJ29yaWdpbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnZmV0Y2hpbmcgeW91ciBhZGRyZXNzLi4uJyk7XG4gICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKChwb3NpdGlvbikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhwb3NpdGlvbik7XG4gICAgICAgIGNvbnN0IHsgbGF0aXR1ZGUsIGxvbmdpdHVkZSB9ID0gcG9zaXRpb24uY29vcmRzO1xuICAgICAgICBzdGF0ZS51c2VyLmxhdGl0dWRlID0gbGF0aXR1ZGU7XG4gICAgICAgIHN0YXRlLnVzZXIubG9uZ2l0dWRlID0gbG9uZ2l0dWRlO1xuICAgICAgICBzdGF0ZS5vcmlnaW4gPSB7IC4uLnN0YXRlLnVzZXIgfTtcbiAgICAgICAgbWFwVXBkYXRlRGlyZWN0aW9uc0VuZHBvaW50KCdvcmlnaW4nKTtcbiAgICAgICAgdXNlclJldmVyc2VHZW9jb2RlKChlcnIsIGRhdGEsIGFkZHJlc3MpID0+IHtcbiAgICAgICAgICBvcmlnLnZhbHVlID0gYWRkcmVzcztcbiAgICAgICAgICBzdGF0ZS51c2VyLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICAgIHN0YXRlLm9yaWdpbi5hZGRyZXNzID0gYWRkcmVzcztcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvb3JpZ2luTG9jYXRvckJ1dHRvbi5qcyIsIlxuaW1wb3J0IHN0YXRlIGZyb20gJy4vc3RhdGUnO1xuaW1wb3J0IHsgcmV2ZXJzZUdlb2NvZGUgfSBmcm9tICcuL2dlb2NvZGVyJztcblxuLyoqXG4gKiBGZXRjaCB0aGUgdXNlcidzIGFkZHJlc3MgYmFzZWQgb24gdGhlIGxhdC9sbmdcbiAqIEBwYXJhbSBjYWxsYmFjazogKGVyciwgZ2VvRGF0YSwgYWRkclN0cmluZylcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlclJldmVyc2VHZW9jb2RlKGNhbGxiYWNrID0gKCkgPT4ge30pIHtcbiAgaWYgKCFzdGF0ZS51c2VyLmxhdGl0dWRlIHx8ICFzdGF0ZS51c2VyLmxvbmdpdHVkZSkgcmV0dXJuOyAvLyBub3RoaW5nIHRvIGRvXG5cbiAgcmV2ZXJzZUdlb2NvZGUoc3RhdGUudXNlci5sYXRpdHVkZSwgc3RhdGUudXNlci5sb25naXR1ZGUsIChlcnIsIGdlb0RhdGEpID0+IHtcbiAgICBjb25zdCBkID0gZ2VvRGF0YTtcbiAgICBpZiAoXG4gICAgICBkLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicgJiZcbiAgICAgIGQuZmVhdHVyZXMgJiYgZC5mZWF0dXJlcy5sZW5ndGggPiAwICYmXG4gICAgICBkLmZlYXR1cmVzWzBdLnBsYWNlX25hbWVcbiAgICApIHtcbiAgICAgIHN0YXRlLnVzZXIuYWRkcmVzcyA9IGQuZmVhdHVyZXNbMF0ucGxhY2VfbmFtZTtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coJ2ZldGNoZWQgcmV2ZXJzZSBnZW9jb2RlciByZXNwb25zZSBmb3IgY29vcmRzOicsIGdlb0RhdGEpO1xuICAgIGNhbGxiYWNrKGVyciwgZ2VvRGF0YSwgc3RhdGUudXNlci5hZGRyZXNzKTtcbiAgfSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXNlclJldmVyc2VHZW9jb2RlLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgeHRlbmQgPSByZXF1aXJlKCd4dGVuZCcpO1xudmFyIHYgPSByZXF1aXJlKCcuL3NlcnZpY2UtaGVscGVycy92YWxpZGF0b3InKTtcbnZhciBwaWNrID0gcmVxdWlyZSgnLi9zZXJ2aWNlLWhlbHBlcnMvcGljaycpO1xudmFyIHN0cmluZ2lmeUJvb2xlYW5zID0gcmVxdWlyZSgnLi9zZXJ2aWNlLWhlbHBlcnMvc3RyaW5naWZ5LWJvb2xlYW5zJyk7XG52YXIgY3JlYXRlU2VydmljZUZhY3RvcnkgPSByZXF1aXJlKCcuL3NlcnZpY2UtaGVscGVycy9jcmVhdGUtc2VydmljZS1mYWN0b3J5Jyk7XG5cbi8qKlxuICogR2VvY29kaW5nIEFQSSBzZXJ2aWNlLlxuICpcbiAqIExlYXJuIG1vcmUgYWJvdXQgdGhpcyBzZXJ2aWNlIGFuZCBpdHMgcmVzcG9uc2VzIGluXG4gKiBbdGhlIEhUVFAgc2VydmljZSBkb2N1bWVudGF0aW9uXShodHRwczovL3d3dy5tYXBib3guY29tL2FwaS1kb2N1bWVudGF0aW9uLyNnZW9jb2RpbmcpLlxuICovXG52YXIgR2VvY29kaW5nID0ge307XG5cbnZhciBmZWF0dXJlVHlwZXMgPSBbXG4gICdjb3VudHJ5JyxcbiAgJ3JlZ2lvbicsXG4gICdwb3N0Y29kZScsXG4gICdkaXN0cmljdCcsXG4gICdwbGFjZScsXG4gICdsb2NhbGl0eScsXG4gICduZWlnaGJvcmhvb2QnLFxuICAnYWRkcmVzcycsXG4gICdwb2knLFxuICAncG9pLmxhbmRtYXJrJ1xuXTtcblxuLyoqXG4gKiBTZWFyY2ggZm9yIGEgcGxhY2UuXG4gKlxuICogU2VlIHRoZSBbcHVibGljIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vYXBpLWRvY3VtZW50YXRpb24vI3NlYXJjaC1mb3ItcGxhY2VzKS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gKiBAcGFyYW0ge3N0cmluZ30gY29uZmlnLnF1ZXJ5IC0gQSBwbGFjZSBuYW1lLlxuICogQHBhcmFtIHsnbWFwYm94LnBsYWNlcyd8J21hcGJveC5wbGFjZXMtcGVybWFuZW50J30gW2NvbmZpZy5tb2RlPVwibWFwYm94LnBsYWNlc1wiXSAtIEVpdGhlciBgbWFwYm94LnBsYWNlc2AgZm9yIGVwaGVtZXJhbCBnZW9jb2RpbmcsIG9yIGBtYXBib3gucGxhY2VzLXBlcm1hbmVudGAgZm9yIHN0b3JpbmcgcmVzdWx0cyBhbmQgYmF0Y2ggZ2VvY29kaW5nLlxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBbY29uZmlnLmNvdW50cmllc10gLSBMaW1pdHMgcmVzdWx0cyB0byB0aGUgc3BlY2lmaWVkIGNvdW50cmllcy5cbiAqICAgRWFjaCBpdGVtIGluIHRoZSBhcnJheSBzaG91bGQgYmUgYW4gW0lTTyAzMTY2IGFscGhhIDIgY291bnRyeSBjb2RlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fMzE2Ni0xX2FscGhhLTIpLlxuICogQHBhcmFtIHtDb29yZGluYXRlc30gW2NvbmZpZy5wcm94aW1pdHldIC0gQmlhcyBsb2NhbCByZXN1bHRzIGJhc2VkIG9uIGEgcHJvdmlkZWQgbG9jYXRpb24uXG4gKiBAcGFyYW0ge0FycmF5PCdjb3VudHJ5J3wncmVnaW9uJ3wncG9zdGNvZGUnfCdkaXN0cmljdCd8J3BsYWNlJ3wnbG9jYWxpdHknfCduZWlnaGJvcmhvb2QnfCdhZGRyZXNzJ3wncG9pJ3wncG9pLmxhbmRtYXJrJz59IFtjb25maWcudHlwZXNdIC0gRmlsdGVyIHJlc3VsdHMgYnkgZmVhdHVyZSB0eXBlcy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NvbmZpZy5hdXRvY29tcGxldGU9dHJ1ZV0gLSBSZXR1cm4gYXV0b2NvbXBsZXRlIHJlc3VsdHMgb3Igbm90LlxuICogQHBhcmFtIHtCb3VuZGluZ0JveH0gW2NvbmZpZy5iYm94XSAtIExpbWl0IHJlc3VsdHMgdG8gYSBib3VuZGluZyBib3guXG4gKiBAcGFyYW0ge251bWJlcn0gW2NvbmZpZy5saW1pdD01XSAtIExpbWl0IHRoZSBudW1iZXIgb2YgcmVzdWx0cyByZXR1cm5lZC5cbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gW2NvbmZpZy5sYW5ndWFnZV0gLSBTcGVjaWZ5IHRoZSBsYW5ndWFnZSB0byB1c2UgZm9yIHJlc3BvbnNlIHRleHQgYW5kLCBmb3IgZm9yd2FyZCBnZW9jb2RpbmcsIHF1ZXJ5IHJlc3VsdCB3ZWlnaHRpbmcuXG4gKiAgT3B0aW9ucyBhcmUgW0lFVEYgbGFuZ3VhZ2UgdGFnc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSUVURl9sYW5ndWFnZV90YWcpIGNvbXByaXNlZCBvZiBhIG1hbmRhdG9yeVxuICogIFtJU08gNjM5LTEgbGFuZ3VhZ2UgY29kZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9JU09fNjM5LTFfY29kZXMpIGFuZCBvcHRpb25hbGx5IG9uZSBvciBtb3JlIElFVEYgc3VidGFncyBmb3IgY291bnRyeSBvciBzY3JpcHQuXG4gKiBAcmV0dXJuIHtNYXBpUmVxdWVzdH1cbiAqL1xuR2VvY29kaW5nLmZvcndhcmRHZW9jb2RlID0gZnVuY3Rpb24oY29uZmlnKSB7XG4gIHYuYXNzZXJ0U2hhcGUoe1xuICAgIHF1ZXJ5OiB2LnJlcXVpcmVkKHYuc3RyaW5nKSxcbiAgICBtb2RlOiB2Lm9uZU9mKCdtYXBib3gucGxhY2VzJywgJ21hcGJveC5wbGFjZXMtcGVybWFuZW50JyksXG4gICAgY291bnRyaWVzOiB2LmFycmF5T2Yodi5zdHJpbmcpLFxuICAgIHByb3hpbWl0eTogdi5jb29yZGluYXRlcyxcbiAgICB0eXBlczogdi5hcnJheU9mKHYub25lT2YoZmVhdHVyZVR5cGVzKSksXG4gICAgYXV0b2NvbXBsZXRlOiB2LmJvb2xlYW4sXG4gICAgYmJveDogdi5hcnJheU9mKHYubnVtYmVyKSxcbiAgICBsaW1pdDogdi5udW1iZXIsXG4gICAgbGFuZ3VhZ2U6IHYuYXJyYXlPZih2LnN0cmluZylcbiAgfSkoY29uZmlnKTtcblxuICBjb25maWcubW9kZSA9IGNvbmZpZy5tb2RlIHx8ICdtYXBib3gucGxhY2VzJztcblxuICB2YXIgcXVlcnkgPSBzdHJpbmdpZnlCb29sZWFucyhcbiAgICB4dGVuZChcbiAgICAgIHsgY291bnRyeTogY29uZmlnLmNvdW50cmllcyB9LFxuICAgICAgcGljayhjb25maWcsIFtcbiAgICAgICAgJ3Byb3hpbWl0eScsXG4gICAgICAgICd0eXBlcycsXG4gICAgICAgICdhdXRvY29tcGxldGUnLFxuICAgICAgICAnYmJveCcsXG4gICAgICAgICdsaW1pdCcsXG4gICAgICAgICdsYW5ndWFnZSdcbiAgICAgIF0pXG4gICAgKVxuICApO1xuXG4gIHJldHVybiB0aGlzLmNsaWVudC5jcmVhdGVSZXF1ZXN0KHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHBhdGg6ICcvZ2VvY29kaW5nL3Y1Lzptb2RlLzpxdWVyeS5qc29uJyxcbiAgICBwYXJhbXM6IHBpY2soY29uZmlnLCBbJ21vZGUnLCAncXVlcnknXSksXG4gICAgcXVlcnk6IHF1ZXJ5XG4gIH0pO1xufTtcblxuLyoqXG4gKiBTZWFyY2ggZm9yIHBsYWNlcyBuZWFyIGNvb3JkaW5hdGVzLlxuICpcbiAqIFNlZSB0aGUgW3B1YmxpYyBkb2N1bWVudGF0aW9uXShodHRwczovL3d3dy5tYXBib3guY29tL2FwaS1kb2N1bWVudGF0aW9uLyNyZXRyaWV2ZS1wbGFjZXMtbmVhci1hLWxvY2F0aW9uKS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGVzfSBjb25maWcucXVlcnkgLSBDb29yZGluYXRlcyBhdCB3aGljaCBmZWF0dXJlcyB3aWxsIGJlIHNlYXJjaGVkLlxuICogQHBhcmFtIHsnbWFwYm94LnBsYWNlcyd8J21hcGJveC5wbGFjZXMtcGVybWFuZW50J30gW2NvbmZpZy5tb2RlPVwibWFwYm94LnBsYWNlc1wiXSAtIEVpdGhlciBgbWFwYm94LnBsYWNlc2AgZm9yIGVwaGVtZXJhbCBnZW9jb2RpbmcsIG9yIGBtYXBib3gucGxhY2VzLXBlcm1hbmVudGAgZm9yIHN0b3JpbmcgcmVzdWx0cyBhbmQgYmF0Y2ggZ2VvY29kaW5nLlxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBbY29uZmlnLmNvdW50cmllc10gLSBMaW1pdHMgcmVzdWx0cyB0byB0aGUgc3BlY2lmaWVkIGNvdW50cmllcy5cbiAqICAgRWFjaCBpdGVtIGluIHRoZSBhcnJheSBzaG91bGQgYmUgYW4gW0lTTyAzMTY2IGFscGhhIDIgY291bnRyeSBjb2RlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fMzE2Ni0xX2FscGhhLTIpLlxuICogQHBhcmFtIHtBcnJheTwnY291bnRyeSd8J3JlZ2lvbid8J3Bvc3Rjb2RlJ3wnZGlzdHJpY3QnfCdwbGFjZSd8J2xvY2FsaXR5J3wnbmVpZ2hib3Job29kJ3wnYWRkcmVzcyd8J3BvaSd8J3BvaS5sYW5kbWFyayc+fSBbY29uZmlnLnR5cGVzXSAtIEZpbHRlciByZXN1bHRzIGJ5IGZlYXR1cmUgdHlwZXMuXG4gKiBAcGFyYW0ge0JvdW5kaW5nQm94fSBbY29uZmlnLmJib3hdIC0gTGltaXQgcmVzdWx0cyB0byBhIGJvdW5kaW5nIGJveC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbY29uZmlnLmxpbWl0PTFdIC0gTGltaXQgdGhlIG51bWJlciBvZiByZXN1bHRzIHJldHVybmVkLiBJZiB1c2luZyB0aGlzIG9wdGlvbiwgeW91IG11c3QgcHJvdmlkZSBhIHNpbmdsZSBpdGVtIGZvciBgdHlwZXNgLlxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBbY29uZmlnLmxhbmd1YWdlXSAtIFNwZWNpZnkgdGhlIGxhbmd1YWdlIHRvIHVzZSBmb3IgcmVzcG9uc2UgdGV4dCBhbmQsIGZvciBmb3J3YXJkIGdlb2NvZGluZywgcXVlcnkgcmVzdWx0IHdlaWdodGluZy5cbiAqICBPcHRpb25zIGFyZSBbSUVURiBsYW5ndWFnZSB0YWdzXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JRVRGX2xhbmd1YWdlX3RhZykgY29tcHJpc2VkIG9mIGEgbWFuZGF0b3J5XG4gKiAgW0lTTyA2MzktMSBsYW5ndWFnZSBjb2RlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX0lTT182MzktMV9jb2RlcykgYW5kIG9wdGlvbmFsbHkgb25lIG9yIG1vcmUgSUVURiBzdWJ0YWdzIGZvciBjb3VudHJ5IG9yIHNjcmlwdC5cbiAqIEBwYXJhbSB7J2Rpc3RhbmNlJ3wnc2NvcmUnfSBbY29uZmlnLnJldmVyc2VNb2RlPSdkaXN0YW5jZSddIC0gU2V0IHRoZSBmYWN0b3JzIHRoYXQgYXJlIHVzZWQgdG8gc29ydCBuZWFyYnkgcmVzdWx0cy5cbiAqIEByZXR1cm4ge01hcGlSZXF1ZXN0fVxuICovXG5HZW9jb2RpbmcucmV2ZXJzZUdlb2NvZGUgPSBmdW5jdGlvbihjb25maWcpIHtcbiAgdi5hc3NlcnRTaGFwZSh7XG4gICAgcXVlcnk6IHYucmVxdWlyZWQodi5jb29yZGluYXRlcyksXG4gICAgbW9kZTogdi5vbmVPZignbWFwYm94LnBsYWNlcycsICdtYXBib3gucGxhY2VzLXBlcm1hbmVudCcpLFxuICAgIGNvdW50cmllczogdi5hcnJheU9mKHYuc3RyaW5nKSxcbiAgICB0eXBlczogdi5hcnJheU9mKHYub25lT2YoZmVhdHVyZVR5cGVzKSksXG4gICAgYmJveDogdi5hcnJheU9mKHYubnVtYmVyKSxcbiAgICBsaW1pdDogdi5udW1iZXIsXG4gICAgbGFuZ3VhZ2U6IHYuYXJyYXlPZih2LnN0cmluZyksXG4gICAgcmV2ZXJzZU1vZGU6IHYub25lT2YoJ2Rpc3RhbmNlJywgJ3Njb3JlJylcbiAgfSkoY29uZmlnKTtcblxuICBjb25maWcubW9kZSA9IGNvbmZpZy5tb2RlIHx8ICdtYXBib3gucGxhY2VzJztcblxuICB2YXIgcXVlcnkgPSBzdHJpbmdpZnlCb29sZWFucyhcbiAgICB4dGVuZChcbiAgICAgIHsgY291bnRyeTogY29uZmlnLmNvdW50cmllcyB9LFxuICAgICAgcGljayhjb25maWcsIFtcbiAgICAgICAgJ2NvdW50cnknLFxuICAgICAgICAndHlwZXMnLFxuICAgICAgICAnYmJveCcsXG4gICAgICAgICdsaW1pdCcsXG4gICAgICAgICdsYW5ndWFnZScsXG4gICAgICAgICdyZXZlcnNlTW9kZSdcbiAgICAgIF0pXG4gICAgKVxuICApO1xuXG4gIHJldHVybiB0aGlzLmNsaWVudC5jcmVhdGVSZXF1ZXN0KHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHBhdGg6ICcvZ2VvY29kaW5nL3Y1Lzptb2RlLzpxdWVyeS5qc29uJyxcbiAgICBwYXJhbXM6IHBpY2soY29uZmlnLCBbJ21vZGUnLCAncXVlcnknXSksXG4gICAgcXVlcnk6IHF1ZXJ5XG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVTZXJ2aWNlRmFjdG9yeShHZW9jb2RpbmcpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvQG1hcGJveC9tYXBib3gtc2RrL3NlcnZpY2VzL2dlb2NvZGluZy5qc1xuLy8gbW9kdWxlIGlkID0gNjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IGF1dG9jb21wbGV0ZSBmcm9tICdhdXRvY29tcGxldGVyJztcblxuaW1wb3J0IHsgZ2VvY29kZSB9IGZyb20gJy4vZ2VvY29kZXInO1xuaW1wb3J0IHsgbWFwVXBkYXRlRGlyZWN0aW9uc0VuZHBvaW50IH0gZnJvbSAnLi9tYXAnO1xuXG5pbXBvcnQgc3RhdGUgZnJvbSAnLi9zdGF0ZSc7XG5cbmxldCBsYXN0QXV0b2NvbXBsZXRlU2VsZWN0aW9uID0gbnVsbDtcblxuLyoqXG4gKiBIb29rcyBhbiBpbnB1dCB1cCB0byBhbiBhdXRvY29tcGxldGUgc2VydmljZVxuICogQHBhcmFtIHtTdHJpbmd9IGVsSWQgZWxlbWVudCBpZCBvZiB0aGUgaW5wdXQgd2hpY2ggc2hvdWxkIGJlIGF1dG9jb21wbGV0ZWRcbiAqL1xuZnVuY3Rpb24gaW5pdEF1dG9jb21wbGV0ZShlbElkLCBsb2NhdGlvbikge1xuICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsSWQpO1xuXG4gIGF1dG9jb21wbGV0ZSh7XG4gICAgaW5wdXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsSWQpLFxuICAgIGZldGNoOiAodGV4dCwgdXBkYXRlKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnb24gZmV0Y2ggZm9yIGlucHV0Jyk7XG4gICAgICBnZW9jb2RlKHRleHQsIChlcnIsIGdlb0RhdGEpID0+IHtcbiAgICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgICBjb25zdCBkID0gZ2VvRGF0YTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgcmVzdWx0IGZyb20gZ2VvY29kaW5nICR7dGV4dH06IGAsIGQpO1xuICAgICAgICAgIC8vIGVuc3VyZSByZXN1bHQgbG9va3MgYXMgd2UgZXhwZWN0IGZyb20gdGhlIEFQSVxuICAgICAgICAgIGlmIChkLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicgJiYgZC5mZWF0dXJlcyAmJiBkLmZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIG1hcCBkLmZlYXR1cmVzIGludG8gdXNlZnVsIGZvcm1hdC5cbiAgICAgICAgICAgIC8vIHJldHVybiB7bGFiZWw6Li4uLCBpdGVtOi4ufSBvYmogLSB0aGUgZm9ybWF0XG4gICAgICAgICAgICAvLyBzcGVjaWZpZWQgaGVyZTogaHR0cHM6Ly9naXRodWIuY29tL2tyYWFkZW4vYXV0b2NvbXBsZXRlXG4gICAgICAgICAgICBjb25zdCBmZWF0dXJlVG9TdWdnZXN0aW9uID0gZmVhdHVyZSA9PlxuICAgICAgICAgICAgICAoe1xuICAgICAgICAgICAgICAgIGxhYmVsOiBmZWF0dXJlLnBsYWNlX25hbWUsXG4gICAgICAgICAgICAgICAgaXRlbToge1xuICAgICAgICAgICAgICAgICAgZmVhdHVyZSxcbiAgICAgICAgICAgICAgICAgIC8vIG1ha2UgdGV4dCBhbmQgbGFiZWwgYXZhaWxhYmxlIHRvIG9uU2VsZWN0KCk6XG4gICAgICAgICAgICAgICAgICBsYWJlbDogZmVhdHVyZS5wbGFjZV9uYW1lLFxuICAgICAgICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gZC5mZWF0dXJlcy5tYXAoZmVhdHVyZVRvU3VnZ2VzdGlvbik7XG4gICAgICAgICAgICB1cGRhdGUoc3VnZ2VzdGlvbnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgZXJyb3IgZ2VvY29kaW5nICR7dGV4dH06ICR7ZXJyfWApOyAvL2VzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBvblNlbGVjdDogKGl0ZW0pID0+IHtcbiAgICAgIGxhc3RBdXRvY29tcGxldGVTZWxlY3Rpb24gPSBpdGVtO1xuICAgICAgY29uc29sZS5sb2coJ1NFTEVDVEVEIGl0ZW06JywgaXRlbSk7XG4gICAgICBpbnB1dC52YWx1ZSA9IGl0ZW0uZmVhdHVyZS5wbGFjZV9uYW1lO1xuICAgICAgc3RhdGVbbG9jYXRpb25dLmFkZHJlc3MgPSBpdGVtLmZlYXR1cmUucHJvcGVydGllcy5hZGRyZXNzIHx8IGl0ZW0uZmVhdHVyZS5wbGFjZV9uYW1lO1xuICAgIH0sXG4gIH0pO1xufVxuXG4vKipcbiAqIFVwZGF0ZSBzdGF0ZSBmcm9tIGZlYXR1cmUgcmV0dXJuZWQgYnkgZ2VvY29kZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9jYXRpb24gb3JpZ2luIG9yIGRlc3RpbmF0aW9uLlxuICogQHBhcmFtIHtHZW9KU09OIEZlYXR1cmV9IGZlYXR1cmUgQSB2YWxpZCBnZW9qc29uIGZlYXR1cmUuXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZUxvY2F0aW9uRnJvbUZlYXR1cmUobG9jYXRpb24sIGZlYXR1cmUpIHtcbiAgaWYgKGZlYXR1cmUucGxhY2VfbmFtZSkge1xuICAgIHN0YXRlW2xvY2F0aW9uXS5hZGRyZXNzID0gZmVhdHVyZS5wbGFjZV9uYW1lO1xuICB9XG4gIGlmIChmZWF0dXJlLmNlbnRlcikge1xuICAgIFtzdGF0ZVtsb2NhdGlvbl0ubG9uZ2l0dWRlLCBzdGF0ZVtsb2NhdGlvbl0ubGF0aXR1ZGVdID0gZmVhdHVyZS5jZW50ZXI7XG4gIH1cbn1cblxuLyoqXG4gKiByZXR1cm5zIGEgY2hhbmdlIGhhbmRsZXIgd2hpY2ggdXBkYXRlcyBnbG9iYWwgc3RhdGUgbG9jYXRpb25cbiAqIEBwYXJhbSB7U3RyaW5nfSBsb2NhdGlvbiAtICdvcmlnaW4nIG9yICdkZXN0aW5hdGlvbic7IHJlcXVpcmVzIHN0YXRlW2Rlc3RpbmF0aW9uXSB0byBleGlzdC5cbiAqL1xuZnVuY3Rpb24gZ2VvY29kaW5nQ2hhbmdlSGFuZGxlcihsb2NhdGlvbikge1xuICByZXR1cm4gZnVuY3Rpb24gY2hhbmdlRXZlbnRIYW5kbGVyKGV2ZW50KSB7XG4gICAgY29uc3QgYWRkciA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICBpZiAoYWRkciA9PT0gJycpIHtcbiAgICAgIC8vIHVzZXIgY2xlYXJlZCBpbnB1dCAtIGVyYXNlIGtub3duIHBvaW50IGZvciBsb2NhdGlvblxuICAgICAgc3RhdGVbbG9jYXRpb25dLmxvbmdpdHVkZSA9IG51bGw7XG4gICAgICBzdGF0ZVtsb2NhdGlvbl0ubGF0aXR1ZGUgPSBudWxsO1xuICAgICAgc3RhdGVbbG9jYXRpb25dLmFkZHJlc3MgPSBudWxsO1xuICAgICAgbWFwVXBkYXRlRGlyZWN0aW9uc0VuZHBvaW50KGxvY2F0aW9uKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coJ2dlb2NvZGluZyBhZGRyZXNzOiAnLCBhZGRyKTtcbiAgICBnZW9jb2RlKGFkZHIsIChlcnIsIGdlb0RhdGEpID0+IHtcbiAgICAgIGlmICghZXJyKSB7XG4gICAgICAgIGlmIChsYXN0QXV0b2NvbXBsZXRlU2VsZWN0aW9uKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ3dlIHNob3VsZCBub3QgaGF2ZSBydW4gZ2VvY29kZXInKTtcbiAgICAgICAgICAvLyBob2xkIG9uIC0gdXNlciBzZWxlY3RlZCBhbiBhdXRvY29tcGxldGUgc3VnZ2VzdGlvbixcbiAgICAgICAgICAvLyB3ZSBzaG91bGQgdXNlIHRoYXQgaW5zdGVhZCBvZiB0aGlzIHJlc3VsdCBiYXNlZCBvbiBhIHBhcnRpYWwgdGV4dC5cbiAgICAgICAgICB1cGRhdGVMb2NhdGlvbkZyb21GZWF0dXJlKGxvY2F0aW9uLCBsYXN0QXV0b2NvbXBsZXRlU2VsZWN0aW9uLmZlYXR1cmUpO1xuICAgICAgICAgIC8vIGhhbmRsZWQsIGNhbiByZXNldDpcbiAgICAgICAgICBsYXN0QXV0b2NvbXBsZXRlU2VsZWN0aW9uID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBkID0gZ2VvRGF0YTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgcmVzdWx0IGZyb20gZ2VvY29kaW5nICR7YWRkcn06IGAsIGQpO1xuICAgICAgICAgIC8vIGVuc3VyZSByZXN1bHQgbG9va3MgYXMgd2UgZXhwZWN0IGZyb20gdGhlIEFQSVxuICAgICAgICAgIGlmIChkLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicgJiYgZC5mZWF0dXJlcyAmJiBkLmZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHVwZGF0ZUxvY2F0aW9uRnJvbUZlYXR1cmUobG9jYXRpb24sIGQuZmVhdHVyZXNbMF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBjb25zb2xlLmxvZygnYXBwIHN0YXRlOicsIHN0YXRlKTtcbiAgICAgICAgbWFwVXBkYXRlRGlyZWN0aW9uc0VuZHBvaW50KGxvY2F0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBlcnJvciBnZW9jb2RpbmcgJHthZGRyfTogJHtlcnJ9YCk7IC8vZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufVxuXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIGlucHV0IGhhbmRsZXIgZm9yIG9uZSBvZiB0aGUgZGlyZWN0aW9uIGlucHV0c1xuICogQHBhcmFtIHtTdHJpbmd9IGVsSWQgLSBJRCBvZiB0aGUgaW5wdXQgZWxlbWVudCB0byBpbml0aWFsaXplXG4gKiBAcGFyYW0ge1N0cmluZ30gbG9jYXRpb24gLSAnb3JpZ2luJyBvciAnZGVzdGluYXRpb24nXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluaXREaXJlY3Rpb25JbnB1dChlbElkLCBsb2NhdGlvbikge1xuICAvLyBydW4gZ2VvY29kZSBvbiBhZGRyZXNzIHdoZW4gaW5wdXQgY2hhbmdlc1xuICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsSWQpO1xuICBpbnB1dC5vbmNoYW5nZSA9IGdlb2NvZGluZ0NoYW5nZUhhbmRsZXIobG9jYXRpb24pO1xuXG4gIC8vIGVuYWJsZSBhdXRvY29tcGxldGVcbiAgaW5pdEF1dG9jb21wbGV0ZShlbElkLCBsb2NhdGlvbik7XG59XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9kaXJlY3Rpb25JbnB1dC5qcyIsIiFmdW5jdGlvbihlKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKGUpO2Vsc2UgaWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSYmdm9pZCAwIT09bW9kdWxlLmV4cG9ydHMpe3ZhciB0PWUoKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmF1dG9jb21wbGV0ZT10LGV4cG9ydHMuZGVmYXVsdD10fWVsc2Ugd2luZG93LmF1dG9jb21wbGV0ZT1lKCl9KGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlKXtmdW5jdGlvbiB0KCl7cmV0dXJuXCJub25lXCIhPT1oLmRpc3BsYXl9ZnVuY3Rpb24gbigpe3krKyxtPVtdLHA9dm9pZCAwLGguZGlzcGxheT1cIm5vbmVcIn1mdW5jdGlvbiBvKCl7Zm9yKDt2LmZpcnN0Q2hpbGQ7KXYucmVtb3ZlQ2hpbGQodi5maXJzdENoaWxkKTt2YXIgdD0hMSxvPVwiIzk/JFwiO20uZm9yRWFjaChmdW5jdGlvbihlKXtlLmdyb3VwJiYodD0hMCl9KTt2YXIgaT1mdW5jdGlvbihlKXt2YXIgdD1jLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIHQudGV4dENvbnRlbnQ9ZS5sYWJlbCx0fTtlLnJlbmRlciYmKGk9ZS5yZW5kZXIpO3ZhciBsPWZ1bmN0aW9uKGUpe3ZhciB0PWMuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gdC50ZXh0Q29udGVudD1lLHR9O2lmKGUucmVuZGVyR3JvdXAmJihsPWUucmVuZGVyR3JvdXApLG0uZm9yRWFjaChmdW5jdGlvbih0KXtpZih0Lmdyb3VwJiZ0Lmdyb3VwIT09byl7bz10Lmdyb3VwO3ZhciByPWwodC5ncm91cCk7ciYmKHIuY2xhc3NOYW1lKz1cIiBncm91cFwiLHYuYXBwZW5kQ2hpbGQocikpfXZhciBhPWkodCk7YSYmKGEuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24obyl7ZS5vblNlbGVjdCh0Lml0ZW0sdSksbigpLG8ucHJldmVudERlZmF1bHQoKSxvLnN0b3BQcm9wYWdhdGlvbigpfSksdD09PXAmJihhLmNsYXNzTmFtZSs9XCIgc2VsZWN0ZWRcIiksdi5hcHBlbmRDaGlsZChhKSl9KSxtLmxlbmd0aDwxKXtpZighZS5lbXB0eU1zZylyZXR1cm4gdm9pZCBuKCk7dmFyIGE9Yy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2EuY2xhc3NOYW1lPVwiZW1wdHlcIixhLnRleHRDb250ZW50PWUuZW1wdHlNc2csdi5hcHBlbmRDaGlsZChhKX12YXIgZj11LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGQ9Zi50b3ArdS5vZmZzZXRIZWlnaHQrYy5ib2R5LnNjcm9sbFRvcDtoLnRvcD1kK1wicHhcIixoLmxlZnQ9Zi5sZWZ0K1wicHhcIixoLndpZHRoPXUub2Zmc2V0V2lkdGgrXCJweFwiLGgubWF4SGVpZ2h0PXdpbmRvdy5pbm5lckhlaWdodC0oZi50b3ArdS5vZmZzZXRIZWlnaHQpK1wicHhcIixoLmhlaWdodD1cImF1dG9cIixoLmRpc3BsYXk9XCJibG9ja1wiLHIoKX1mdW5jdGlvbiBpKGkpe3ZhciByPWkud2hpY2h8fGkua2V5Q29kZXx8MCxsPSsreTszOCE9PXImJjEzIT09ciYmMjchPT1yJiYzOSE9PXImJjM3IT09ciYmKDQwPT09ciYmdCgpfHwodS52YWx1ZS5sZW5ndGg+PWc/ZS5mZXRjaCh1LnZhbHVlLGZ1bmN0aW9uKGUpe3k9PT1sJiZlJiYobT1lLHA9bS5sZW5ndGg+MD9tWzBdOnZvaWQgMCxvKCkpfSk6bigpKSl9ZnVuY3Rpb24gcigpe3ZhciBlPXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNlbGVjdGVkXCIpO2lmKGUubGVuZ3RoPjApe3ZhciB0PWVbMF0sbj10LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7aWYobiYmLTEhPT1uLmNsYXNzTmFtZS5pbmRleE9mKFwiZ3JvdXBcIikmJiFuLnByZXZpb3VzRWxlbWVudFNpYmxpbmcmJih0PW4pLHQub2Zmc2V0VG9wPHYuc2Nyb2xsVG9wKXYuc2Nyb2xsVG9wPXQub2Zmc2V0VG9wO2Vsc2V7dmFyIG89dC5vZmZzZXRUb3ArdC5vZmZzZXRIZWlnaHQsaT12LnNjcm9sbFRvcCt2Lm9mZnNldEhlaWdodDtvPmkmJih2LnNjcm9sbFRvcCs9by1pKX19fWZ1bmN0aW9uIGwoKXtpZihtLmxlbmd0aDwxKXA9dm9pZCAwO2Vsc2UgaWYocD09PW1bMF0pcD1tW20ubGVuZ3RoLTFdO2Vsc2UgZm9yKHZhciBlPW0ubGVuZ3RoLTE7ZT4wO2UtLSlpZihwPT09bVtlXXx8MT09PWUpe3A9bVtlLTFdO2JyZWFrfX1mdW5jdGlvbiBhKCl7aWYobS5sZW5ndGg8MSYmKHA9dm9pZCAwKSwhcHx8cD09PW1bbS5sZW5ndGgtMV0pcmV0dXJuIHZvaWQocD1tWzBdKTtmb3IodmFyIGU9MDtlPG0ubGVuZ3RoLTE7ZSsrKWlmKHA9PT1tW2VdKXtwPW1bZSsxXTticmVha319ZnVuY3Rpb24gZihpKXt2YXIgcj1pLndoaWNofHxpLmtleUNvZGV8fDA7aWYoMzg9PT1yfHw0MD09PXJ8fDI3PT09cil7dmFyIGY9dCgpO2lmKDI3PT09ciluKCk7ZWxzZXtpZighdHx8bS5sZW5ndGg8MSlyZXR1cm47Mzg9PT1yP2woKTphKCksbygpfXJldHVybiBpLnByZXZlbnREZWZhdWx0KCksdm9pZChmJiZpLnN0b3BQcm9wYWdhdGlvbigpKX0xMz09PXImJnAmJihlLm9uU2VsZWN0KHAuaXRlbSx1KSxuKCkpfWZ1bmN0aW9uIGQoKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5hY3RpdmVFbGVtZW50IT09dSYmbigpfSwyMDApfWZ1bmN0aW9uIHMoKXt1LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsZiksdS5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIixpKSx1LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsZCksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIixvKSxuKCk7dmFyIGU9di5wYXJlbnROb2RlO2UmJmUucmVtb3ZlQ2hpbGQodil9dmFyIHUscCxjPWRvY3VtZW50LHY9Yy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGg9di5zdHlsZSxtPVtdLGc9ZS5taW5MZW5ndGh8fDIseT0wO2lmKCFlLmlucHV0KXRocm93IG5ldyBFcnJvcihcImlucHV0IHVuZGVmaW5lZFwiKTtyZXR1cm4gdT1lLmlucHV0LGMuYm9keS5hcHBlbmRDaGlsZCh2KSx2LmNsYXNzTmFtZT1cImF1dG9jb21wbGV0ZSBcIisoZS5jbGFzc05hbWV8fFwiXCIpLGgucG9zaXRpb249XCJhYnNvbHV0ZVwiLGguZGlzcGxheT1cIm5vbmVcIix1LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsZiksdS5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIixpKSx1LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsZCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIixvKSx7ZGVzdHJveTpzfX1yZXR1cm4gZX0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2F1dG9jb21wbGV0ZXIvYXV0b2NvbXBsZXRlLmpzXG4vLyBtb2R1bGUgaWQgPSA2NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9